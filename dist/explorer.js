var us=Object.defineProperty;var fs=(s,e,t)=>e in s?us(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var u=(s,e,t)=>(fs(s,typeof e!="symbol"?e+"":e,t),t);function L(){}function Gt(s){return s()}function Ct(){return Object.create(null)}function ie(s){s.forEach(Gt)}function Wt(s){return typeof s=="function"}function ge(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let De;function Vt(s,e){return s===e?!0:(De||(De=document.createElement("a")),De.href=e,s===De.href)}function ps(s){return Object.keys(s).length===0}function h(s,e){s.appendChild(e)}function be(s,e,t){const n=hs(s);if(!n.getElementById(e)){const i=m("style");i.id=e,i.textContent=t,gs(n,i)}}function hs(s){if(!s)return document;const e=s.getRootNode?s.getRootNode():s.ownerDocument;return e&&e.host?e:s.ownerDocument}function gs(s,e){return h(s.head||s,e),e.sheet}function q(s,e,t){s.insertBefore(e,t||null)}function $(s){s.parentNode&&s.parentNode.removeChild(s)}function bs(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function m(s){return document.createElement(s)}function P(s){return document.createTextNode(s)}function R(){return P(" ")}function vs(){return P("")}function V(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function v(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function ms(s){return Array.from(s.childNodes)}function Z(s,e){e=""+e,s.data!==e&&(s.data=e)}function ne(s,e,t,n){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,n?"important":"")}function C(s,e,t){s.classList.toggle(e,!!t)}function ys(s){const e={};return s.childNodes.forEach(t=>{e[t.slot||"default"]=!0}),e}let ct;function Ee(s){ct=s}const xe=[],D=[];let Me=[];const Ye=[],ws=Promise.resolve();let Je=!1;function _s(){Je||(Je=!0,ws.then(N))}function Ke(s){Me.push(s)}function Y(s){Ye.push(s)}const Ve=new Set;let we=0;function N(){if(we!==0)return;const s=ct;do{try{for(;we<xe.length;){const e=xe[we];we++,Ee(e),ks(e.$$)}}catch(e){throw xe.length=0,we=0,e}for(Ee(null),xe.length=0,we=0;D.length;)D.pop()();for(let e=0;e<Me.length;e+=1){const t=Me[e];Ve.has(t)||(Ve.add(t),t())}Me.length=0}while(xe.length);for(;Ye.length;)Ye.pop()();Je=!1,Ve.clear(),Ee(s)}function ks(s){if(s.fragment!==null){s.update(),ie(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(Ke)}}function xs(s){const e=[],t=[];Me.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Me=e}const Be=new Set;let fe;function dt(){fe={r:0,c:[],p:fe}}function ut(){fe.r||ie(fe.c),fe=fe.p}function K(s,e){s&&s.i&&(Be.delete(s),s.i(e))}function ee(s,e,t,n){if(s&&s.o){if(Be.has(s))return;Be.add(s),fe.c.push(()=>{Be.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}function $t(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function J(s,e,t){const n=s.$$.props[e];n!==void 0&&(s.$$.bound[n]=t,t(s.$$.ctx[n]))}function Se(s){s&&s.c()}function pe(s,e,t){const{fragment:n,after_update:i}=s.$$;n&&n.m(e,t),Ke(()=>{const r=s.$$.on_mount.map(Gt).filter(Wt);s.$$.on_destroy?s.$$.on_destroy.push(...r):ie(r),s.$$.on_mount=[]}),i.forEach(Ke)}function he(s,e){const t=s.$$;t.fragment!==null&&(xs(t.after_update),ie(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Ms(s,e){s.$$.dirty[0]===-1&&(xe.push(s),_s(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function ve(s,e,t,n,i,r,o=null,l=[-1]){const c=ct;Ee(s);const a=s.$$={fragment:null,ctx:[],props:r,update:L,not_equal:i,bound:Ct(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Ct(),dirty:l,skip_bound:!1,root:e.target||c.$$.root};o&&o(a.root);let d=!1;if(a.ctx=t?t(s,e.props||{},(f,p,...w)=>{const g=w.length?w[0]:p;return a.ctx&&i(a.ctx[f],a.ctx[f]=g)&&(!a.skip_bound&&a.bound[f]&&a.bound[f](g),d&&Ms(s,f)),p}):[],a.update(),d=!0,ie(a.before_update),a.fragment=n?n(a.ctx):!1,e.target){if(e.hydrate){const f=ms(e.target);a.fragment&&a.fragment.l(f),f.forEach($)}else a.fragment&&a.fragment.c();e.intro&&K(s.$$.fragment),pe(s,e.target,e.anchor),N()}Ee(c)}let Zt;typeof HTMLElement=="function"&&(Zt=class extends HTMLElement{constructor(e,t,n){super();u(this,"$$ctor");u(this,"$$s");u(this,"$$c");u(this,"$$cn",!1);u(this,"$$d",{});u(this,"$$r",!1);u(this,"$$p_d",{});u(this,"$$l",{});u(this,"$$l_u",new Map);this.$$ctor=e,this.$$s=t,n&&this.attachShadow({mode:"open"})}addEventListener(e,t,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){const i=this.$$c.$on(e,t);this.$$l_u.set(t,i)}super.addEventListener(e,t,n)}removeEventListener(e,t,n){if(super.removeEventListener(e,t,n),this.$$c){const i=this.$$l_u.get(t);i&&(i(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(o){return()=>{let l;return{c:function(){l=m("slot"),o!=="default"&&v(l,"name",o)},m:function(d,f){q(d,l,f)},d:function(d){d&&$(l)}}}};var e=t;if(await Promise.resolve(),!this.$$cn)return;const n={},i=ys(this);for(const o of this.$$s)o in i&&(n[o]=[t(o)]);for(const o of this.attributes){const l=this.$$g_p(o.name);l in this.$$d||(this.$$d[l]=ze(l,o.value,this.$$p_d,"toProp"))}for(const o in this.$$p_d)!(o in this.$$d)&&this[o]!==void 0&&(this.$$d[o]=this[o],delete this[o]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:n,$$scope:{ctx:[]}}});const r=()=>{this.$$r=!0;for(const o in this.$$p_d)if(this.$$d[o]=this.$$c.$$.ctx[this.$$c.$$.props[o]],this.$$p_d[o].reflect){const l=ze(o,this.$$d[o],this.$$p_d,"toAttribute");l==null?this.removeAttribute(this.$$p_d[o].attribute||o):this.setAttribute(this.$$p_d[o].attribute||o,l)}this.$$r=!1};this.$$c.$$.after_update.push(r),r();for(const o in this.$$l)for(const l of this.$$l[o]){const c=this.$$c.$on(o,l);this.$$l_u.set(l,c)}this.$$l={}}}attributeChangedCallback(e,t,n){var i;this.$$r||(e=this.$$g_p(e),this.$$d[e]=ze(e,n,this.$$p_d,"toProp"),(i=this.$$c)==null||i.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e)||e}});function ze(s,e,t,n){var r;const i=(r=t[s])==null?void 0:r.type;if(e=i==="Boolean"&&typeof e!="boolean"?e!=null:e,!n||!t[s])return e;if(n==="toAttribute")switch(i){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(i){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function me(s,e,t,n,i,r){let o=class extends Zt{constructor(){super(s,t,i),this.$$p_d=e}static get observedAttributes(){return Object.keys(e).map(l=>(e[l].attribute||l).toLowerCase())}};return Object.keys(e).forEach(l=>{Object.defineProperty(o.prototype,l,{get(){return this.$$c&&l in this.$$c?this.$$c[l]:this.$$d[l]},set(c){var a;c=ze(l,c,e),this.$$d[l]=c,(a=this.$$c)==null||a.$set({[l]:c})}})}),n.forEach(l=>{Object.defineProperty(o.prototype,l,{get(){var c;return(c=this.$$c)==null?void 0:c[l]}})}),r&&(o=r(o)),s.element=o,o}class ye{constructor(){u(this,"$$");u(this,"$$set")}$destroy(){he(this,1),this.$destroy=L}$on(e,t){if(!Wt(t))return L;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!ps(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ss="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ss);const Xe=new WeakMap;function Cs(s,e,t,n){return s.reverse().forEach(i=>{n=i(e,t,n)||n}),n}function $s(s,e){return s.reverse().forEach(t=>{const n=t(e);n&&(e=n)}),e}function As(s,e,t,n){if(!Array.isArray(s)||s.length===0)throw new TypeError;if(t!==void 0)return Cs(s,e,t,n);if(typeof e=="function")return $s(s,e)}function Yt(s,e){return Xe.get(s)&&Xe.get(s).get(e)}function Ue(s,e,t){if(e===void 0)throw new TypeError;const n=Yt(e,t);return n&&n.get(s)}function qs(s,e){const t=Xe.get(s)||new Map;Xe.set(s,t);const n=t.get(e)||new Map;return t.set(e,n),n}function Jt(s,e,t,n){if(n&&!["string","symbol"].includes(typeof n))throw new TypeError;(Yt(t,n)||qs(t,n)).set(s,e)}function ft(s,e,t){return Ue(s,e,t)?Ue(s,e,t):Object.getPrototypeOf(e)?ft(s,Object.getPrototypeOf(e),t):void 0}function Rs(s,e){return function(n,i){Jt(s,e,n,i)}}function Es(s,e,t){return ft(s,e,t)}function Ps(s,e,t){return Ue(s,e,t)}function Os(s,e,t){return!!Ue(s,e,t)}function Is(s,e,t){return!!ft(s,e,t)}function Ds(s,e,t,n){Jt(s,e,t,n)}const Ts={decorate:As,defineMetadata:Ds,getMetadata:Es,getOwnMetadata:Ps,hasMetadata:Is,hasOwnMetadata:Os,metadata:Rs};Object.assign(Reflect,Ts);var Qe;(function(s){s[s.Transient=0]="Transient",s[s.Singleton=1]="Singleton",s[s.ResolutionScoped=2]="ResolutionScoped",s[s.ContainerScoped=3]="ContainerScoped"})(Qe||(Qe={}));const W=Qe;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var et=function(s,e){return et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},et(s,e)};function pt(s,e){et(s,e);function t(){this.constructor=s}s.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function js(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(t[n[i]]=s[n[i]]);return t}function Ls(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function l(d){try{a(n.next(d))}catch(f){o(f)}}function c(d){try{a(n.throw(d))}catch(f){o(f)}}function a(d){d.done?r(d.value):i(d.value).then(l,c)}a((n=n.apply(s,e||[])).next())})}function Bs(s,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,i,r,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(a){return function(d){return c([a,d])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(r=a[0]&2?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,i=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){t.label=a[1];break}if(a[0]===6&&t.label<r[1]){t.label=r[1],r=a;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(a);break}r[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(s,t)}catch(d){a=[6,d],i=0}finally{n=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function Te(s){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&s[e],n=0;if(t)return t.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&n>=s.length&&(s=void 0),{value:s&&s[n++],done:!s}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ge(s,e){var t=typeof Symbol=="function"&&s[Symbol.iterator];if(!t)return s;var n=t.call(s),i,r=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)r.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return r}function ue(){for(var s=[],e=0;e<arguments.length;e++)s=s.concat(Ge(arguments[e]));return s}var tt="injectionTokens";function zs(s){var e=Reflect.getMetadata("design:paramtypes",s)||[],t=Reflect.getOwnMetadata(tt,s)||{};return Object.keys(t).forEach(function(n){e[+n]=t[n]}),e}function Ns(s,e){return function(t,n,i){var r=Reflect.getOwnMetadata(tt,t)||{};r[i]=e?{token:s,transform:e.transformToken,transformArgs:e.args||[]}:s,Reflect.defineMetadata(tt,r,t)}}function Kt(s){return!!s.useClass}function st(s){return!!s.useFactory}var Qt=function(){function s(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return s.prototype.createProxy=function(e){var t=this,n={},i=!1,r,o=function(){return i||(r=e(t.wrap()),i=!0),r};return new Proxy(n,this.createHandler(o))},s.prototype.createHandler=function(e){var t={},n=function(i){t[i]=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];r[0]=e();var l=Reflect[i];return l.apply(void 0,ue(r))}};return this.reflectMethods.forEach(n),t},s}();function _e(s){return typeof s=="string"||typeof s=="symbol"}function Fs(s){return typeof s=="object"&&"token"in s&&"multiple"in s}function At(s){return typeof s=="object"&&"token"in s&&"transform"in s}function Hs(s){return typeof s=="function"||s instanceof Qt}function Ne(s){return!!s.useToken}function Fe(s){return s.useValue!=null}function Xs(s){return Kt(s)||Fe(s)||Ne(s)||st(s)}var ht=function(){function s(){this._registryMap=new Map}return s.prototype.entries=function(){return this._registryMap.entries()},s.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},s.prototype.get=function(e){this.ensure(e);var t=this._registryMap.get(e);return t[t.length-1]||null},s.prototype.set=function(e,t){this.ensure(e),this._registryMap.get(e).push(t)},s.prototype.setAll=function(e,t){this._registryMap.set(e,t)},s.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},s.prototype.clear=function(){this._registryMap.clear()},s.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},s}(),Us=function(s){pt(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e}(ht),qt=function(){function s(){this.scopedResolutions=new Map}return s}();function Gs(s,e){if(s===null)return"at position #"+e;var t=s.split(",")[e].trim();return'"'+t+'" at position #'+e}function Ws(s,e,t){return t===void 0&&(t="    "),ue([s],e.message.split(`
`).map(function(n){return t+n})).join(`
`)}function Vs(s,e,t){var n=Ge(s.toString().match(/constructor\(([\w, ]+)\)/)||[],2),i=n[1],r=i===void 0?null:i,o=Gs(r,e);return Ws("Cannot inject the dependency "+o+' of "'+s.name+'" constructor. Reason:',t)}function Zs(s){if(typeof s.dispose!="function")return!1;var e=s.dispose;return!(e.length>0)}var Ys=function(s){pt(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e}(ht),Js=function(s){pt(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e}(ht),Ks=function(){function s(){this.preResolution=new Ys,this.postResolution=new Js}return s}(),es=new Map,Qs=function(){function s(e){this.parent=e,this._registry=new Us,this.interceptors=new Ks,this.disposed=!1,this.disposables=new Set}return s.prototype.register=function(e,t,n){n===void 0&&(n={lifecycle:W.Transient}),this.ensureNotDisposed();var i;if(Xs(t)?i=t:i={useClass:t},Ne(i))for(var r=[e],o=i;o!=null;){var l=o.useToken;if(r.includes(l))throw new Error("Token registration cycle detected! "+ue(r,[l]).join(" -> "));r.push(l);var c=this._registry.get(l);c&&Ne(c.provider)?o=c.provider:o=null}if((n.lifecycle===W.Singleton||n.lifecycle==W.ContainerScoped||n.lifecycle==W.ResolutionScoped)&&(Fe(i)||st(i)))throw new Error('Cannot use lifecycle "'+W[n.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:i,options:n}),this},s.prototype.registerType=function(e,t){return this.ensureNotDisposed(),_e(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})},s.prototype.registerInstance=function(e,t){return this.ensureNotDisposed(),this.register(e,{useValue:t})},s.prototype.registerSingleton=function(e,t){if(this.ensureNotDisposed(),_e(e)){if(_e(t))return this.register(e,{useToken:t},{lifecycle:W.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:W.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var n=e;return t&&!_e(t)&&(n=t),this.register(e,{useClass:n},{lifecycle:W.Singleton})},s.prototype.resolve=function(e,t){t===void 0&&(t=new qt),this.ensureNotDisposed();var n=this.getRegistration(e);if(!n&&_e(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"Single"),n){var i=this.resolveRegistration(n,t);return this.executePostResolutionInterceptor(e,i,"Single"),i}if(Hs(e)){var i=this.construct(e,t);return this.executePostResolutionInterceptor(e,i,"Single"),i}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},s.prototype.executePreResolutionInterceptor=function(e,t){var n,i;if(this.interceptors.preResolution.has(e)){var r=[];try{for(var o=Te(this.interceptors.preResolution.getAll(e)),l=o.next();!l.done;l=o.next()){var c=l.value;c.options.frequency!="Once"&&r.push(c),c.callback(e,t)}}catch(a){n={error:a}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}this.interceptors.preResolution.setAll(e,r)}},s.prototype.executePostResolutionInterceptor=function(e,t,n){var i,r;if(this.interceptors.postResolution.has(e)){var o=[];try{for(var l=Te(this.interceptors.postResolution.getAll(e)),c=l.next();!c.done;c=l.next()){var a=c.value;a.options.frequency!="Once"&&o.push(a),a.callback(e,t,n)}}catch(d){i={error:d}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}this.interceptors.postResolution.setAll(e,o)}},s.prototype.resolveRegistration=function(e,t){if(this.ensureNotDisposed(),e.options.lifecycle===W.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);var n=e.options.lifecycle===W.Singleton,i=e.options.lifecycle===W.ContainerScoped,r=n||i,o;return Fe(e.provider)?o=e.provider.useValue:Ne(e.provider)?o=r?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t):Kt(e.provider)?o=r?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t):st(e.provider)?o=e.provider.useFactory(this):o=this.construct(e.provider,t),e.options.lifecycle===W.ResolutionScoped&&t.scopedResolutions.set(e,o),o},s.prototype.resolveAll=function(e,t){var n=this;t===void 0&&(t=new qt),this.ensureNotDisposed();var i=this.getAllRegistrations(e);if(!i&&_e(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"All"),i){var r=i.map(function(l){return n.resolveRegistration(l,t)});return this.executePostResolutionInterceptor(e,r,"All"),r}var o=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,o,"All"),o},s.prototype.isRegistered=function(e,t){return t===void 0&&(t=!1),this.ensureNotDisposed(),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},s.prototype.reset=function(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},s.prototype.clearInstances=function(){var e,t;this.ensureNotDisposed();try{for(var n=Te(this._registry.entries()),i=n.next();!i.done;i=n.next()){var r=Ge(i.value,2),o=r[0],l=r[1];this._registry.setAll(o,l.filter(function(c){return!Fe(c.provider)}).map(function(c){return c.instance=void 0,c}))}}catch(c){e={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},s.prototype.createChildContainer=function(){var e,t;this.ensureNotDisposed();var n=new s(this);try{for(var i=Te(this._registry.entries()),r=i.next();!r.done;r=i.next()){var o=Ge(r.value,2),l=o[0],c=o[1];c.some(function(a){var d=a.options;return d.lifecycle===W.ContainerScoped})&&n._registry.setAll(l,c.map(function(a){return a.options.lifecycle===W.ContainerScoped?{provider:a.provider,options:a.options}:a}))}}catch(a){e={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},s.prototype.beforeResolution=function(e,t,n){n===void 0&&(n={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:t,options:n})},s.prototype.afterResolution=function(e,t,n){n===void 0&&(n={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:t,options:n})},s.prototype.dispose=function(){return Ls(this,void 0,void 0,function(){var e;return Bs(this,function(t){switch(t.label){case 0:return this.disposed=!0,e=[],this.disposables.forEach(function(n){var i=n.dispose();i&&e.push(i)}),[4,Promise.all(e)];case 1:return t.sent(),[2]}})})},s.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},s.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},s.prototype.construct=function(e,t){var n=this;if(e instanceof Qt)return e.createProxy(function(r){return n.resolve(r,t)});var i=function(){var r=es.get(e);if(!r||r.length===0){if(e.length===0)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var o=r.map(n.resolveParams(t,e));return new(e.bind.apply(e,ue([void 0],o)))}();return Zs(i)&&this.disposables.add(i),i},s.prototype.resolveParams=function(e,t){var n=this;return function(i,r){var o,l,c;try{return Fs(i)?At(i)?i.multiple?(o=n.resolve(i.transform)).transform.apply(o,ue([n.resolveAll(i.token)],i.transformArgs)):(l=n.resolve(i.transform)).transform.apply(l,ue([n.resolve(i.token,e)],i.transformArgs)):i.multiple?n.resolveAll(i.token):n.resolve(i.token,e):At(i)?(c=n.resolve(i.transform,e)).transform.apply(c,ue([n.resolve(i.token,e)],i.transformArgs)):n.resolve(i,e)}catch(a){throw new Error(Vs(t,r,a))}}},s.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},s}(),Ce=new Qs;function Oe(){return function(s){es.set(s,zs(s))}}function en(s){return s===void 0&&(s=[]),function(e){return s.forEach(function(t){var n=t.token,i=t.options,r=js(t,["token","options"]);return Ce.register(n,r,i)}),e}}function gt(){return function(s){Oe()(s),Ce.registerSingleton(s)}}function tn(s){var e={token:s,multiple:!0};return Ns(e)}if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);var sn=Object.defineProperty,nn=Object.getOwnPropertyDescriptor,bt=(s,e,t,n)=>{for(var i=n>1?void 0:n?nn(e,t):e,r=s.length-1,o;r>=0;r--)(o=s[r])&&(i=(n?o(e,t,i):o(i))||i);return n&&i&&sn(e,t,i),i};class X{constructor(e=0,t=0){u(this,"x");u(this,"y");this.x=e,this.y=t}}let nt=class{constructor(){u(this,"currentImage");u(this,"frameElapsed",0);u(this,"dimensions",{width:80,height:80});u(this,"spriteScale",4);u(this,"animateFrames",0);u(this,"goingDown",!0);u(this,"yOffset",0)}draw(s,e,t,n=!0,i=0,r=0,o=0){var l;if(e.sprites){this.updateScale(s.canvas.width,s.canvas.height);let c=e.gender!=="unknown"?e.sprites[e.gender][t]:e.sprites.male[t],a="frame";e.isShiny&&(a="shiny"),this.frameElapsed+i<100?a+="1":a+="2",this.frameElapsed+i>=200&&(this.frameElapsed=0);let d=c[a];if(!d)return;if(!this.currentImage||this.currentImage.src!==d){let f=new Image;f.src=d,f.onload=()=>{this.currentImage=f}}if(this.goingDown=this.animateFrames<=10,this.yOffset=this.goingDown?this.yOffset+1:this.yOffset-1,this.animateFrames++,this.animateFrames>=20&&(this.animateFrames=0),(l=this.currentImage)!=null&&l.complete){let f=this.getPosition(s,t,r,o);s.drawImage(this.currentImage,0,0,this.dimensions.width,this.dimensions.height,f.x,f.y+(n?this.yOffset:0),this.dimensions.width*this.spriteScale,this.dimensions.height*this.spriteScale),this.frameElapsed++}}}getPosition(s,e,t=0,n=0){let i=new X;return e==="front"?i=new X(s.canvas.width/4*3-this.dimensions.width*(this==null?void 0:this.spriteScale)/2+t,s.canvas.height/2-this.dimensions.height*(this==null?void 0:this.spriteScale)*1.2+n):i=new X(s.canvas.width/4-this.dimensions.width*this.spriteScale/2+t,s.canvas.height/4*3-this.dimensions.height*this.spriteScale*.75+n),i}updateScale(s,e){s<1100?this.spriteScale=2:this.spriteScale=4}};nt=bt([Oe()],nt);let it=class{constructor(){u(this,"images",{});u(this,"battlefields",{default:"src/assets/battle/battle-default.png",grass:"src/assets/battle/battle-grass.png",water:"src/assets/battle/battle-water.png",rock:"src/assets/battle/battle-rock.png",rainy:"src/assets/battle/battle-rainy.png"});u(this,"dimensions",{width:240,height:112})}draw(s,e="default"){let t=this.images[e];t&&t.complete?this.drawImage(s,t):(t=new Image,t.src=this.battlefields[e],t.onload=()=>{this.images[e]=t,s.drawImage(t,0,0,s.canvas.width,s.canvas.height)})}drawImage(s,e){s.drawImage(e,0,0,this.dimensions.width,this.dimensions.height,0,0,s.canvas.width,s.canvas.height*.75)}};it=bt([gt()],it);let rt=class{constructor(){u(this,"frames",{max:3,val:0,elapsed:0});u(this,"images",{})}draw(s,e,t,n,i,r,o,l){let c=this.images[o];c&&c.complete?this.drawImage(s,c,e,t,n,i,r,o,l):(c=new Image,c.src=o,c.onload=()=>{this.images[o]=c,this.drawImage(s,c,e,t,n,i,r,o,l)})}drawImage(s,e,t,n,i,r,o,l,c){let a=r*i,d=o*i,f=s.canvas.width/2-a/2,p=s.canvas.height/2-d/2;c?(this.frames.max>1&&(this.frames.elapsed+=1),this.frames.elapsed%2===0&&(this.frames.val+=1,this.frames.val>this.frames.max-1&&(this.frames.val=0))):this.frames.val=1,s.drawImage(e,this.frames.val*(e.width/this.frames.max),0,e.width/this.frames.max,e.height,f+t.x,p+t.y-10,e.width/this.frames.max*i,e.height*i)}};rt=bt([gt()],rt);class ts{constructor(e,t,n,i=[]){u(this,"name");u(this,"gender");u(this,"sprites");u(this,"monsters");u(this,"bag",[]);u(this,"lvl",1);u(this,"moving",!1);u(this,"direction","down");u(this,"positionOnScreen");u(this,"positionOnMap");u(this,"drawer");this.name=e,this.gender=t,this.sprites=n,this.monsters=i,this.positionOnMap=new X(0,0),this.positionOnScreen=new X(0,0),this.drawer=Ce.resolve(rt)}get sprite(){return this.sprites[this.direction]}draw(e,t,n,i,r){this.drawer.draw(e,this.positionOnScreen,t,n,i,r,this.sprite,this.moving)}updatePosition(e,t){this.positionOnMap.x=e.x+t.x,this.positionOnMap.y=e.y+t.y}}class rn{constructor(e,t,n,i,r){u(this,"down");u(this,"up");u(this,"left");u(this,"right");u(this,"battle");u(this,"width",80);u(this,"height",80);this.down=e,this.up=t,this.left=n,this.right=i,this.battle=r}}class on{constructor(){u(this,"ready",!1);u(this,"chartById",new Map);fetch("/src/assets/data/final/xp-chart.json").then(e=>e.json()).then(e=>{e.forEach(t=>{this.chartById.has(t.growth_rate_id)||this.chartById.set(t.growth_rate_id,[]),this.chartById.get(t.growth_rate_id).push(new ln(t.level,t.experience))}),this.ready=!0})}howMuchINeed(e,t){if(!this.ready||e<1||e>100||!this.chartById.has(t))return console.error("ERROR",e,t),0;let n=this.chartById.get(t),i=n==null?void 0:n.find(r=>r.level===e);return(i==null?void 0:i.experience)||0}howMuchIGet(e,t,n,i=!1,r=!1){let o=t.baseXp,l=t.level,c=i?1.5:1,a=r?2*n:n;return Math.floor(o*l/7*c*(1/a)*1*1*1*1*1)}}class ln{constructor(e,t){u(this,"level");u(this,"experience");this.level=e,this.experience=t}}const Rt=new on;class an{constructor(e,t,n,i,r,o,l,c,a,d,f){u(this,"name");u(this,"type");u(this,"category");u(this,"power");u(this,"accuracy");u(this,"pp");u(this,"priority");u(this,"effect");u(this,"effectChance");u(this,"description");u(this,"level");this.name=e,this.type=t,this.category=n,this.power=i,this.accuracy=r,this.pp=o,this.priority=l,this.effect=c,this.effectChance=a,this.description=d,this.level=f}}class cn extends an{constructor(t,n,i,r,o,l,c,a,d,f,p){super(t,n,i,r,o,l,c,a,d,f,p);u(this,"currentPp");this.currentPp=l}}class We extends vt{constructor(t,n,i){super(t.id,t.name,t.types,t.abilities,t.moves,t.stats,t.height,t.weight,t.description,t.isLegendary,t.captureRate,t.experienceGrowth,t.baseXp,t.percentageMale,t.evolution,t.sprites);u(this,"currentStats",new de);u(this,"currentHp",1);u(this,"currentXp",0);u(this,"xpToNextLevel",0);u(this,"currentAbility","");u(this,"level",1);u(this,"evsToDistribute",0);u(this,"fainted",!1);u(this,"moves",[]);u(this,"ivs",new de);u(this,"evs",new de);u(this,"nature","");u(this,"gender");u(this,"heldItem",{});u(this,"isShiny",!1);u(this,"spriteDrawer");i?(this.currentAbility=t.abilities.includes(i.currentAbility)?i.currentAbility:t.abilities[Math.floor(Math.random()*t.abilities.length)],this.evs=i.evs,this.ivs=i.ivs,this.level=i.level,this.currentXp=i.currentXp,this.currentHp=i.currentHp,this.moves=i.moves,this.isShiny=i.isShiny,this.gender=i.gender,this.evsToDistribute=i.evsToDistribute,this.heldItem=i.heldItem,this.updateCurrentStats()):(this.currentAbility=this.abilities[Math.floor(Math.random()*this.abilities.length)],this.evs=new de,this.ivs=new de(Math.floor(Math.random()*32),Math.floor(Math.random()*32),Math.floor(Math.random()*32),Math.floor(Math.random()*32),Math.floor(Math.random()*32),Math.floor(Math.random()*32)),this.level=n||5,this.currentXp=0,this.updateCurrentStats(),this.currentHp=this.currentStats.hp,this.moves=this.selectLatestMoves(t),this.isShiny=Math.floor(Math.random()*2048)===0,this.gender=this.percentageMale?Math.random()*this.percentageMale<=this.percentageMale?"male":"female":"unknown"),this.spriteDrawer=Ce.resolve(nt)}get spriteScale(){return 1}get totalEvs(){return this.evs.attack+this.evs.defense+this.evs.specialAttack+this.evs.specialDefense+this.evs.speed+this.evs.hp}draw(t,n,i=0,r=0,o=0){this.spriteDrawer.draw(t,this,n,!0,i,r,o)}selectMove(t,n){let i=Math.floor(Math.random()*this.moves.length),r=this.moves[i];return t==="Easy"&&n&&((n==null?void 0:n.types.length)===2?this.moves.find(l=>l.type===n.types[0]&&l.power>0):this.moves.find(l=>(l.type===n.types[0]||l.type===n.types[1])&&l.power>0)),r}fromBaseStats(){return new de(Math.floor((this.ivs.hp+this.stats.hp*2+this.evs.hp/4)*this.level/100+10+this.level),Math.floor((this.ivs.attack+this.stats.attack*2+this.evs.attack/4)*this.level/100+5),Math.floor((this.ivs.defense+this.stats.defense*2+this.evs.defense/4)*this.level/100+5),Math.floor((this.ivs.specialAttack+this.stats.specialAttack*2+this.evs.specialAttack/4)*this.level/100+5),Math.floor((this.ivs.specialDefense+this.stats.specialDefense*2+this.evs.specialDefense/4)*this.level/100+5),Math.floor((this.ivs.speed+this.stats.speed*2+this.evs.speed/4)*this.level/100+5))}howMuchXpWon(t,n=1,i=!1){return Rt.howMuchIGet(this,t,n,i,!1)}addXp(t,n){if(this.evsToDistribute+=this.totalEvs+n<=255?n:this.totalEvs+n-255,this.level>=100)return;let i=0;if(this.xpToNextLevel<t){i=t-this.xpToNextLevel;const r=t-i;this.currentXp+=r}else this.currentXp+=t;this.currentXp>=this.xpToNextLevel&&this.levelUp(),i>0&&this.addXp(i,0)}addEvs(t){let n=this.totalEvs;this.evs.hp+=this.evs.hp+t.hp<=255&&n+t.hp<512?t.hp:0,this.evs.attack+=this.evs.attack+t.attack<=255&&n+t.attack<512?t.attack:0,this.evs.defense+=this.evs.defense+t.defense<=255&&n+t.defense<512?t.defense:0,this.evs.specialAttack+=this.evs.specialAttack+t.specialAttack<=255&&n+t.specialAttack<512?t.specialAttack:0,this.evs.specialDefense+=this.evs.specialDefense+t.specialDefense<=255&&n+t.specialDefense<512?t.specialDefense:0,this.evs.speed+=this.evs.speed+t.speed<=255&&n+t.speed<512?t.speed:0}levelUp(){if(this.level>=100)return;let t=this.currentStats.hp;this.level+=1,this.updateCurrentStats(),t=this.currentStats.hp-t,this.currentHp+=t,this.currentXp=0,this.xpToNextLevel=Rt.howMuchINeed(this.level,this.experienceGrowth)}checkForNewMoves(){this.moves.filter(t=>t.level===this.level)}evolve(t,n){n.found&&n.result&&(Object.assign(this,new We(n.result,this.level,this)),this.checkForNewMoves())}updateCurrentStats(){this.currentStats=this.fromBaseStats()}selectLatestMoves(t){return t.moves.filter(n=>n.level<=this.level).slice(-4).map(n=>new cn(n.name,n.type,n.category,n.power,n.accuracy,n.pp,n.priority,n.effect,n.effectChance,n.description,n.level))}}class dn{constructor(){u(this,"entries",[]);u(this,"ready",!1);u(this,"size",251)}importFromJson(e){var t;((t=this.entries)==null?void 0:t.length)===0&&(e.forEach(n=>{this.entries.push(new vt(n.id,n.name,n.types,n.abilities,n.moves,n.stats,n.height,n.weight,n.description,n.isLegendary,n.captureRate,n.baseXp,n.experienceGrowth,n.percentageMale,n.evolution,n.sprites))}),this.entries.length===this.size&&(this.ready=!0))}findById(e){if(!this.ready||e===void 0||e===null||e<1||e>this.size)return new ke(new je);let t=this.entries.find(n=>n.id===e);return t!=null&&t.id?new ke(t):new ke(new je)}findByName(e){if(!this.ready||e===void 0||e===null||e==="")return new ke(new je);let t=this.entries.find(n=>n.name.toLowerCase()===e.toLowerCase());return t!=null&&t.id?new ke(t):new ke(new je)}}class ke{constructor(e){u(this,"result");u(this,"found",!1);this.result=e,this.found=e!==void 0}}class vt{constructor(e,t,n,i,r,o,l,c,a,d,f,p,w,g,y,_){u(this,"id");u(this,"name");u(this,"types");u(this,"abilities");u(this,"moves");u(this,"stats");u(this,"height");u(this,"weight");u(this,"description");u(this,"isLegendary");u(this,"captureRate");u(this,"growthRateId");u(this,"baseXp");u(this,"experienceGrowth");u(this,"percentageMale");u(this,"evolution");u(this,"sprites");switch(this.id=e,this.name=t,this.types=n,this.abilities=i,this.moves=r,this.stats=o,this.height=l,this.weight=c,this.description=a,this.isLegendary=d,this.captureRate=f,this.experienceGrowth=p,this.baseXp=w,this.percentageMale=g,this.evolution=y,this.sprites=_,p){case 6e5:this.growthRateId=5;break;case 8e5:this.growthRateId=3;break;case 1e6:this.growthRateId=2;break;case 1059860:this.growthRateId=4;break;case 125e4:this.growthRateId=1;break;case 164e4:this.growthRateId=6;break;default:this.growthRateId=1;break}}instanciate(e){return new We(this,e)}}class je extends vt{constructor(){super(0,"Unknown",[],[],[],new de,0,0,"Unknown",!1,0,0,0,0,[])}}class de{constructor(e=0,t=0,n=0,i=0,r=0,o=0,l){u(this,"hp");u(this,"attack");u(this,"defense");u(this,"specialAttack");u(this,"specialDefense");u(this,"speed");u(this,"total");this.hp=e,this.attack=t,this.defense=n,this.specialAttack=i,this.specialDefense=r,this.speed=o,l?this.total=l:this.total=this.hp+this.attack+this.defense+this.specialAttack+this.specialDefense+this.speed}}function un(s){be(s,"svelte-1cbbcxy",'.menu.svelte-1cbbcxy.svelte-1cbbcxy{position:absolute;top:0;right:-20dvw;width:20dvw;font-size:36px;background-color:#FFFFFF;z-index:3;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:right 0.3s ease-in-out;border:3px solid #1e1e1e;border-radius:16px}.menu.svelte-1cbbcxy ul.svelte-1cbbcxy{box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;border-radius:12px;list-style:none;padding:12px 32px;margin:0;display:flex;flex-direction:column;height:100%;width:100%;align-items:center}.menu.svelte-1cbbcxy ul li.svelte-1cbbcxy{font-size:4rem;margin:1rem 0;text-align:center;cursor:pointer;flex-grow:1;width:100%;height:100%;min-height:60px;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li:hover .svelte-1cbbcxy:before{content:"";width:0;height:0;border-top:20px solid transparent;border-bottom:20px solid transparent;border-left:20px solid #262626;position:absolute;left:40px}.menu.svelte-1cbbcxy ul li button.svelte-1cbbcxy{background:none;border:none;font-size:inherit;font-family:inherit;cursor:inherit;outline:none;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li button .svelte-1cbbcxy:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%}.menu.open.svelte-1cbbcxy.svelte-1cbbcxy{opacity:1;pointer-events:all;right:0}')}function fn(s){let e;return{c(){e=m("div"),e.innerHTML='<ul class="svelte-1cbbcxy"><li class="svelte-1cbbcxy"><button tabindex="0" class="svelte-1cbbcxy">Pokedex</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Pokemon</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Bag</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Trainer</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Save</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Options</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Credits</button></li></ul>',v(e,"class","menu svelte-1cbbcxy"),C(e,"open",s[0])},m(t,n){q(t,e,n)},p(t,[n]){n&1&&C(e,"open",t[0])},i:L,o:L,d(t){t&&$(e)}}}function pn(s,e,t){let{menuOpened:n}=e,{player:i}=e;return s.$$set=r=>{"menuOpened"in r&&t(0,n=r.menuOpened),"player"in r&&t(1,i=r.player)},[n,i]}class ss extends ye{constructor(e){super(),ve(this,e,pn,fn,ge,{menuOpened:0,player:1},un)}get menuOpened(){return this.$$.ctx[0]}set menuOpened(e){this.$$set({menuOpened:e}),N()}get player(){return this.$$.ctx[1]}set player(e){this.$$set({player:e}),N()}}me(ss,{menuOpened:{},player:{}},[],[],!0);var ns=Object.defineProperty,hn=Object.getOwnPropertyDescriptor,gn=(s,e,t)=>e in s?ns(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Ie=(s,e,t,n)=>{for(var i=n>1?void 0:n?hn(e,t):e,r=s.length-1,o;r>=0;r--)(o=s[r])&&(i=(n?o(e,t,i):o(i))||i);return n&&i&&ns(e,t,i),i},bn=(s,e)=>(t,n)=>e(t,n,s),vn=(s,e,t)=>(gn(s,typeof e!="symbol"?e+"":e,t),t);let ot=class{constructor(){u(this,"move_effect_id",1)}apply(s){console.log("RegularDamageEffect")}};ot=Ie([Oe()],ot);let Et=class{constructor(){u(this,"move_effect_id",2)}apply(s){console.log("Sleep")}};Et=Ie([Oe()],Et);let Pt=class{constructor(){u(this,"move_effect_id",3)}apply(s){console.log("Poison")}};Pt=Ie([Oe()],Pt);let Pe=class{};vn(Pe,"token",Symbol("Effects"));Pe=Ie([en([{token:Pe.token,useToken:ot}])],Pe);let lt=class{constructor(s){this.moveEffects=s}apply(s,e,t){var n;(n=this.moveEffects.find(i=>i.move_effect_id===s.move_effect_id))!=null&&n.apply(e)||console.log("No effect found")}};lt=Ie([gt(),bn(0,tn(Pe.token))],lt);const mn=Ce.resolve(lt);class yn{constructor(e,t,n){u(this,"player");u(this,"playerCurrentMonster");u(this,"opponent");u(this,"opponentCurrentMonster");u(this,"isPlayerTurn");u(this,"turnStack");u(this,"escapeAttempts",0);u(this,"onClose",()=>{});u(this,"currentMessage","What will you do ?");u(this,"sleep",e=>new Promise(t=>setTimeout(t,e)));this.player=e,this.opponent=t,this.playerCurrentMonster=e.monsters[0],this.opponentCurrentMonster=this.wild?t:t.monsters[0],this.turnStack=[],this.isPlayerTurn=!0}get wild(){return this.opponent instanceof We}selectAction(e){var t;for(this.isPlayerTurn=!1,e instanceof He&&this.playerCurrentMonster.currentStats.speed>this.opponentCurrentMonster.currentStats.speed||e instanceof at||e instanceof Dt||e instanceof Tt?(this.turnStack.push(e),this.selectOpponentAction()):(this.selectOpponentAction(),this.turnStack.push(e));this.turnStack.length>0;)this.executeAction((t=this.turnStack)==null?void 0:t.shift());this.endTurn()}executeAction(e){console.log(this.turnStack),console.log("executing action",{action:e}),e?e instanceof He&&!e.initiator.fainted?this.attack(e):e instanceof at?this.runAway():e instanceof Dt||e instanceof Tt||(e instanceof Q?this.currentMessage=e.description:e instanceof Ot?this.removeHP(e):e instanceof It?mn.apply(e.move.effect,e.target==="opponent"?[this.opponentCurrentMonster]:[e.initiator],e.initiator):e instanceof Ze&&this.onClose()):this.endTurn()}runAway(){if(this.wild){this.escapeAttempts++;const e=Math.random()*255;Math.floor(this.opponentCurrentMonster.currentStats.speed*128/this.playerCurrentMonster.currentStats.speed)+30*this.escapeAttempts*e>255?(this.turnStack=[],this.turnStack.push(new Ze(this.playerCurrentMonster)),this.turnStack.unshift(new Q("You ran away safely!",this.playerCurrentMonster))):this.turnStack.unshift(new Q("Failed to run away!",this.playerCurrentMonster))}else this.turnStack.unshift(new Q("You can't run away from a trainer battle!",this.playerCurrentMonster))}attack(e){const t=e.initiator,n=e.target==="opponent"?this.opponentCurrentMonster:this.playerCurrentMonster,i=[],r=this.accuracyApplies(e.move);if(console.log("attack",{attacker:t},{target:n},{success:r}),r){const o=this.calculateDamage(t,n,e.move);console.log({result:o}),i.push(new Q(t.name+" used "+e.move.name+"!",e.initiator)),o.immune?i.push(new Q("It doesn't affect "+n.name+"...",e.initiator)):o.notVeryEffective?i.push(new Q("It's not very effective...",e.initiator)):o.superEffective&&i.push(new Q("It's super effective!",e.initiator)),o.critical&&i.push(new Q("A critical hit!",e.initiator)),i.push(new Ot(o.damages,e.target,e.initiator)),!o.immune&&this.effectApplies(e.move)&&i.push(new It(e.move,e.target,e.initiator))}else i.push(new Q("But it failed!",e.initiator));i&&i.reverse().forEach(o=>this.turnStack.unshift(o))}removeHP(e){const t=e.target==="opponent"?this.opponentCurrentMonster:this.playerCurrentMonster;t.currentHp-=e.damages,t.currentHp<=0&&(t.currentHp=0,t.fainted=!0,this.turnStack=[],this.turnStack.push(new Q(t.name+" fainted!",e.initiator)),(this.wild||this.opponent instanceof ts&&this.opponent.monsters.every(n=>n.fainted))&&(this.turnStack.unshift(new Ze(e.initiator)),this.turnStack.unshift(new Q("You won the battle!",e.initiator))))}calculateDamage(e,t,n){let i=new wn;if(n.category!=="status"){const r=n.category==="physical"?e.currentStats.attack:e.currentStats.specialAttack,o=n.category==="physical"?t.currentStats.defense:t.currentStats.specialDefense,l=this.calculateTypeEffectiveness(n.type,t.types);i.superEffective=l>1,i.notVeryEffective=l<1,i.immune=l===0;const c=i.immune?0:this.calculateCritical();i.critical=c>1;const a=Math.random()*(1-.85)+.85,d=this.calculateStab(e,n),p=l*c*a*d*1;i.damages=Math.floor(((2*e.level/5+2)*n.power*r/o/50+2)*p)}else i.damages=0;return i}calculateTypeEffectiveness(e,t){return t.reduce((n,i)=>{const r=_n(e,i);return n*r},1)}calculateCritical(){return Math.random()<.0625?1.5:1}calculateStab(e,t){return e.types.includes(t.type)?1.5:1}selectOpponentAction(){const e=this.opponentCurrentMonster.selectMove("Easy");this.turnStack.push(new He(e,"ally",this.opponentCurrentMonster))}accuracyApplies(e){return e.accuracy===100||e.accuracy===0||!Number.isInteger(e.effectChance)||Math.random()*100<e.accuracy}effectApplies(e){return e.effect&&Number.isInteger(e.effectChance)&&Math.random()*100<e.effectChance}endTurn(){this.isPlayerTurn=!0,this.currentMessage=`What should ${this.playerCurrentMonster.name} do ?`}}class wn{constructor(){u(this,"superEffective",!1);u(this,"notVeryEffective",!1);u(this,"immune",!1);u(this,"critical",!1);u(this,"effectSuccess",!1);u(this,"effectApplied","");u(this,"damages",0)}}class Ze{constructor(e){u(this,"name");u(this,"description");u(this,"initiator");this.name="End Battle",this.description="End Battle",this.initiator=e}}class Ot{constructor(e,t,n){u(this,"name");u(this,"description");u(this,"damages");u(this,"target");u(this,"initiator");this.name="Remove HP",this.description="Remove HP",this.damages=e,this.target=t,this.initiator=n}}class It{constructor(e,t,n){u(this,"name");u(this,"description");u(this,"move");u(this,"target");u(this,"initiator");this.name="Apply Effect",this.description="Apply Effect",this.move=e,this.target=t,this.initiator=n}}class Q{constructor(e,t){u(this,"name");u(this,"description");u(this,"initiator");this.name="Message",this.description=e,this.initiator=t}}class at{constructor(e){u(this,"description");u(this,"name");u(this,"initiator");this.name="Run Away",this.description="Run away from the battle",this.initiator=e}}class Dt{constructor(e,t){u(this,"description");u(this,"name");u(this,"targetIdx");u(this,"initiator");this.name="Change Pokemon",this.description="Change the current pokemon",this.targetIdx=e,this.initiator=t}}class He{constructor(e,t,n){u(this,"name");u(this,"description");u(this,"move");u(this,"target");u(this,"initiator");this.name=e.name,this.description=e.description,this.move=e,this.target=t,this.initiator=n}}class Tt{constructor(e,t,n,i,r,o=0){u(this,"description");u(this,"name");u(this,"itemId");u(this,"targetType");u(this,"targetIdx");u(this,"initiator");this.name=e,this.description=t,this.itemId=n,this.targetType=i,this.targetIdx=o,this.initiator=r}}function _n(s,e){return kn[s.toLowerCase()][e.toLowerCase()]}const kn={normal:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:.5,ghost:0,dragon:1,dark:1,steel:.5},fire:{normal:1,fire:.5,water:.5,electric:1,grass:2,ice:2,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:2,rock:.5,ghost:1,dragon:.5,dark:1,steel:2},water:{normal:1,fire:2,water:.5,electric:1,grass:.5,ice:1,fighting:1,poison:1,ground:2,flying:1,psychic:1,bug:1,rock:2,ghost:1,dragon:.5,dark:1,steel:1},electric:{normal:1,fire:1,water:2,electric:.5,grass:.5,ice:1,fighting:1,poison:1,ground:0,flying:2,psychic:1,bug:1,rock:1,ghost:1,dragon:.5,dark:1,steel:1},grass:{normal:1,fire:.5,water:2,electric:1,grass:.5,ice:1,fighting:1,poison:.5,ground:2,flying:.5,psychic:1,bug:.5,rock:2,ghost:1,dragon:.5,dark:1,steel:.5},ice:{normal:1,fire:.5,water:.5,electric:1,grass:2,ice:.5,fighting:1,poison:1,ground:2,flying:2,psychic:1,bug:1,rock:1,ghost:1,dragon:2,dark:1,steel:.5},fighting:{normal:2,fire:1,water:1,electric:1,grass:1,ice:2,fighting:1,poison:.5,ground:1,flying:.5,psychic:.5,bug:.5,rock:2,ghost:0,dragon:1,dark:2,steel:2},poison:{normal:1,fire:1,water:1,electric:1,grass:2,ice:1,fighting:1,poison:.5,ground:.5,flying:1,psychic:1,bug:1,rock:.5,ghost:.5,dragon:1,dark:1,steel:0},ground:{normal:1,fire:2,water:1,electric:2,grass:.5,ice:1,fighting:1,poison:2,ground:1,flying:0,psychic:1,bug:.5,rock:2,ghost:1,dragon:1,dark:1,steel:2},flying:{normal:1,fire:1,water:1,electric:.5,grass:2,ice:1,fighting:2,poison:1,ground:1,flying:1,psychic:1,bug:2,rock:.5,ghost:1,dragon:1,dark:1,steel:.5},psychic:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:2,poison:2,ground:1,flying:1,psychic:.5,bug:1,rock:1,ghost:1,dragon:1,dark:0,steel:.5},bug:{normal:1,fire:.5,water:1,electric:1,grass:2,ice:1,fighting:.5,poison:.5,ground:1,flying:.5,psychic:2,bug:1,rock:1,ghost:.5,dragon:1,dark:2,steel:.5},rock:{normal:1,fire:2,water:1,electric:1,grass:1,ice:2,fighting:.5,poison:1,ground:.5,flying:2,psychic:1,bug:2,rock:1,ghost:1,dragon:1,dark:1,steel:.5},ghost:{normal:0,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:2,bug:1,rock:1,ghost:2,dragon:1,dark:.5,steel:.5},dragon:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:1,ghost:1,dragon:2,dark:1,steel:.5},dark:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:.5,poison:1,ground:1,flying:1,psychic:2,bug:1,rock:1,ghost:2,dragon:1,dark:.5,steel:.5},steel:{normal:1,fire:.5,water:.5,electric:.5,grass:1,ice:2,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:2,ghost:1,dragon:1,dark:1,steel:.5}};function xn(s){be(s,"svelte-148x6yt",".ally-info.svelte-148x6yt.svelte-148x6yt{opacity:0;visibility:hidden;z-index:9;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;bottom:26dvh;right:-30dvw;transition:right 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly;font-size:46px}.ally-info.opened.svelte-148x6yt.svelte-148x6yt{opacity:1;visibility:visible;right:1dvw}.ally-info.svelte-148x6yt .name-lvl.svelte-148x6yt{display:flex;justify-content:space-between;align-items:center}.ally-info.svelte-148x6yt .status.svelte-148x6yt{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.ally-info.svelte-148x6yt .hp.svelte-148x6yt{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.ally-info.svelte-148x6yt .hp span.svelte-148x6yt{padding:0 0 0 12px;font-weight:bold}.ally-info.svelte-148x6yt .hp .progressbar-wrapper.svelte-148x6yt{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.ally-info.svelte-148x6yt .hp .progressbar-wrapper .progressbar.svelte-148x6yt{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px;transition:width 1s ease-in-out}.ally-info.svelte-148x6yt .hp .progressbar-wrapper .progressbar.warning.svelte-148x6yt{background:rgb(255, 241, 164);background:linear-gradient(0deg, rgb(255, 241, 164) 0%, rgb(255, 194, 16) 30%, rgb(255, 194, 16) 50%, rgb(255, 194, 16) 70%, rgb(255, 241, 164) 100%)}.ally-info.svelte-148x6yt .hp .progressbar-wrapper .progressbar.danger.svelte-148x6yt{background:rgb(244, 177, 159);background:linear-gradient(0deg, rgb(244, 177, 159) 0%, rgb(223, 85, 48) 30%, rgb(223, 85, 48) 50%, rgb(223, 85, 48) 70%, rgb(244, 177, 159) 100%)}@media screen and (max-width: 1100px){.ally-info.svelte-148x6yt.svelte-148x6yt{font-size:36px;border:8px solid #595b59;height:16dvh}.ally-info.svelte-148x6yt .hp.svelte-148x6yt{width:80%;height:18px}.ally-info.svelte-148x6yt .hp .progressbar-wrapper.svelte-148x6yt{height:14px}}")}function Mn(s){var T,j,B,te,re,oe,le,ae;let e,t,n,i=((j=(T=s[1])==null?void 0:T.playerCurrentMonster)==null?void 0:j.name)+"",r,o,l,c,a=((te=(B=s[1])==null?void 0:B.playerCurrentMonster)==null?void 0:te.level)+"",d,f,p,w,g,y,_,k,O,I=((oe=(re=s[1])==null?void 0:re.playerCurrentMonster)==null?void 0:oe.currentHp)+"",F,M,b=((ae=(le=s[1])==null?void 0:le.playerCurrentMonster)==null?void 0:ae.currentStats.hp)+"",S;return{c(){e=m("div"),t=m("div"),n=m("span"),r=P(i),o=R(),l=m("span"),c=P("Lv "),d=P(a),f=R(),p=m("div"),w=m("div"),g=m("span"),g.textContent="HP",y=R(),_=m("div"),k=m("div"),O=R(),F=P(I),M=P(" / "),S=P(b),v(n,"class","svelte-148x6yt"),v(l,"class","svelte-148x6yt"),v(t,"class","name-lvl svelte-148x6yt"),v(g,"class","svelte-148x6yt"),v(k,"class","progressbar svelte-148x6yt"),ne(k,"--width",s[2]+"%"),C(k,"warning",s[2]<=50),C(k,"danger",s[2]<15),v(_,"class","progressbar-wrapper svelte-148x6yt"),v(w,"class","hp svelte-148x6yt"),v(p,"class","status svelte-148x6yt"),v(e,"class","ally-info svelte-148x6yt"),C(e,"opened",s[0])},m(z,U){q(z,e,U),h(e,t),h(t,n),h(n,r),h(t,o),h(t,l),h(l,c),h(l,d),h(e,f),h(e,p),h(p,w),h(w,g),h(w,y),h(w,_),h(_,k),h(p,O),h(p,F),h(p,M),h(p,S)},p(z,[U]){var x,G,A,H,$e,Ae,qe,Re;U&2&&i!==(i=((G=(x=z[1])==null?void 0:x.playerCurrentMonster)==null?void 0:G.name)+"")&&Z(r,i),U&2&&a!==(a=((H=(A=z[1])==null?void 0:A.playerCurrentMonster)==null?void 0:H.level)+"")&&Z(d,a),U&4&&ne(k,"--width",z[2]+"%"),U&4&&C(k,"warning",z[2]<=50),U&4&&C(k,"danger",z[2]<15),U&2&&I!==(I=((Ae=($e=z[1])==null?void 0:$e.playerCurrentMonster)==null?void 0:Ae.currentHp)+"")&&Z(F,I),U&2&&b!==(b=((Re=(qe=z[1])==null?void 0:qe.playerCurrentMonster)==null?void 0:Re.currentStats.hp)+"")&&Z(S,b),U&1&&C(e,"opened",z[0])},i:L,o:L,d(z){z&&$(e)}}}function Sn(s,e,t){let n,{opened:i}=e,{battleState:r}=e;return s.$$set=o=>{"opened"in o&&t(0,i=o.opened),"battleState"in o&&t(1,r=o.battleState)},s.$$.update=()=>{var o,l;s.$$.dirty&2&&t(2,n=Math.floor(((o=r==null?void 0:r.playerCurrentMonster)==null?void 0:o.currentHp)*100/((l=r==null?void 0:r.playerCurrentMonster)==null?void 0:l.currentStats.hp)))},[i,r,n]}class is extends ye{constructor(e){super(),ve(this,e,Sn,Mn,ge,{opened:0,battleState:1},xn)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),N()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),N()}}me(is,{opened:{},battleState:{}},[],[],!0);function Cn(s){be(s,"svelte-b0lsc5",".action-bar.svelte-b0lsc5.svelte-b0lsc5{opacity:0;visibility:hidden;z-index:9;background-color:white;height:25dvh;width:100dvw;position:absolute;bottom:-25dvh;left:0;transition:bottom 0.5s ease-in-out;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;display:flex;font-size:64px}.action-bar.opened.svelte-b0lsc5.svelte-b0lsc5{opacity:1;visibility:visible;bottom:0}.action-bar.svelte-b0lsc5 .info.svelte-b0lsc5{width:50%;height:100%;display:flex;align-items:center;align-content:center;justify-content:space-around;position:relative}.action-bar.svelte-b0lsc5 .info ._inner.svelte-b0lsc5{position:absolute;left:17px;z-index:1;height:calc(100% - 55px);border:10px solid black;border-radius:10px;display:flex;align-items:center;justify-content:center;width:100%;text-transform:capitalize}.action-bar.svelte-b0lsc5 .info ._inner .move-desc.svelte-b0lsc5{text-transform:initial;font-size:46px;display:flex;flex-wrap:wrap;gap:16px;word-break:break-word;box-sizing:border-box;padding:0 20px}.action-bar.svelte-b0lsc5 .info ._inner .move-desc p.svelte-b0lsc5{flex:45%;margin:0}.action-bar.svelte-b0lsc5 .actions.svelte-b0lsc5,.action-bar.svelte-b0lsc5 .moves.svelte-b0lsc5{width:50%;height:100%;display:flex;background:#FFFFFF;border:14px solid #595b59;border-radius:8px;box-sizing:border-box;padding:12px;z-index:2;flex-wrap:wrap;gap:12px}.action-btn.svelte-b0lsc5.svelte-b0lsc5{background-color:var(--color);font-size:64px;color:white;border-radius:24px;border:6px solid #595b59;font-family:pokemon, serif;transition:color 0.3s ease-in-out, opacity 0.3s ease-in-out;flex:48%}.action-btn.svelte-b0lsc5.svelte-b0lsc5:hover,.action-btn.selected.svelte-b0lsc5.svelte-b0lsc5{cursor:pointer;opacity:0.96;color:#262626}.action-btn[disabled].svelte-b0lsc5.svelte-b0lsc5{opacity:0.5;cursor:not-allowed;pointer-events:none}@media screen and (max-width: 1100px){.action-bar.svelte-b0lsc5.svelte-b0lsc5{font-size:32px}.action-bar.svelte-b0lsc5 .actions.svelte-b0lsc5,.action-bar.svelte-b0lsc5 .moves.svelte-b0lsc5{padding:2px;gap:4px;border:8px solid #595b59}.action-bar.svelte-b0lsc5 .actions .action-btn.svelte-b0lsc5,.action-bar.svelte-b0lsc5 .moves .action-btn.svelte-b0lsc5{font-size:32px}.action-bar.svelte-b0lsc5 .info ._inner.svelte-b0lsc5{left:10px;height:calc(100% - 37px);border:8px solid black}.action-bar.svelte-b0lsc5 .info ._inner .move-desc.svelte-b0lsc5{font-size:32px}}")}function jt(s,e,t){const n=s.slice();return n[11]=e[t],n[13]=t,n}function $n(s){var T,j,B,te,re,oe,le,ae,z,U,x,G;let e,t,n=((j=(T=s[1])==null?void 0:T.playerCurrentMonster)==null?void 0:j.moves[s[3]].description)+"",i,r,o,l=((te=(B=s[1])==null?void 0:B.playerCurrentMonster)==null?void 0:te.moves[s[3]].currentPp)+"",c,a,d=((oe=(re=s[1])==null?void 0:re.playerCurrentMonster)==null?void 0:oe.moves[s[3]].pp)+"",f,p,w,g=((ae=(le=s[1])==null?void 0:le.playerCurrentMonster)==null?void 0:ae.moves[s[3]].category)+"",y,_,k,O=((U=(z=s[1])==null?void 0:z.playerCurrentMonster)==null?void 0:U.moves[s[3]].power)+"",I,F,M=((G=(x=s[1])==null?void 0:x.playerCurrentMonster)==null?void 0:G.moves[s[3]].accuracy)+"",b,S;return{c(){e=m("div"),t=m("p"),i=P(n),r=R(),o=m("p"),c=P(l),a=P(`
                        / `),f=P(d),p=R(),w=m("p"),y=P(g),_=R(),k=m("p"),I=P(O),F=P(`
                        | `),b=P(M),S=P(" %"),v(t,"class","svelte-b0lsc5"),v(o,"class","svelte-b0lsc5"),v(w,"class","svelte-b0lsc5"),v(k,"class","svelte-b0lsc5"),v(e,"class","move-desc svelte-b0lsc5")},m(A,H){q(A,e,H),h(e,t),h(t,i),h(e,r),h(e,o),h(o,c),h(o,a),h(o,f),h(e,p),h(e,w),h(w,y),h(e,_),h(e,k),h(k,I),h(k,F),h(k,b),h(k,S)},p(A,H){var $e,Ae,qe,Re,mt,yt,wt,_t,kt,xt,Mt,St;H&10&&n!==(n=((Ae=($e=A[1])==null?void 0:$e.playerCurrentMonster)==null?void 0:Ae.moves[A[3]].description)+"")&&Z(i,n),H&10&&l!==(l=((Re=(qe=A[1])==null?void 0:qe.playerCurrentMonster)==null?void 0:Re.moves[A[3]].currentPp)+"")&&Z(c,l),H&10&&d!==(d=((yt=(mt=A[1])==null?void 0:mt.playerCurrentMonster)==null?void 0:yt.moves[A[3]].pp)+"")&&Z(f,d),H&10&&g!==(g=((_t=(wt=A[1])==null?void 0:wt.playerCurrentMonster)==null?void 0:_t.moves[A[3]].category)+"")&&Z(y,g),H&10&&O!==(O=((xt=(kt=A[1])==null?void 0:kt.playerCurrentMonster)==null?void 0:xt.moves[A[3]].power)+"")&&Z(I,O),H&10&&M!==(M=((St=(Mt=A[1])==null?void 0:Mt.playerCurrentMonster)==null?void 0:St.moves[A[3]].accuracy)+"")&&Z(b,M)},d(A){A&&$(e)}}}function An(s){var n,i;let e=((i=(n=s[1])==null?void 0:n.currentMessage)==null?void 0:i.toUpperCase())+"",t;return{c(){t=P(e)},m(r,o){q(r,t,o)},p(r,o){var l,c;o&2&&e!==(e=((c=(l=r[1])==null?void 0:l.currentMessage)==null?void 0:c.toUpperCase())+"")&&Z(t,e)},d(r){r&&$(t)}}}function qn(s){let e,t,n,i,r,o,l,c,a,d,f,p,w,g;return{c(){e=m("div"),t=m("button"),n=P("FIGHT"),i=R(),r=m("button"),o=P("BAG"),l=R(),c=m("button"),a=P("POKEMONS"),d=R(),f=m("button"),p=P("RUN"),v(t,"class","action-btn svelte-b0lsc5"),ne(t,"--color","#dc5959"),t.disabled=s[5],C(t,"selected",s[4]===0),v(r,"class","action-btn svelte-b0lsc5"),ne(r,"--color","#eca859"),r.disabled=s[5],C(r,"selected",s[4]===1),v(c,"class","action-btn svelte-b0lsc5"),ne(c,"--color","#7EAF53"),c.disabled=s[5],C(c,"selected",s[4]===2),v(f,"class","action-btn svelte-b0lsc5"),ne(f,"--color","#599bdc"),f.disabled=s[5],C(f,"selected",s[4]===2),v(e,"class","actions svelte-b0lsc5")},m(y,_){q(y,e,_),h(e,t),h(t,n),h(e,i),h(e,r),h(r,o),h(e,l),h(e,c),h(c,a),h(e,d),h(e,f),h(f,p),w||(g=[V(t,"click",s[6]),V(f,"click",s[7])],w=!0)},p(y,_){_&32&&(t.disabled=y[5]),_&16&&C(t,"selected",y[4]===0),_&32&&(r.disabled=y[5]),_&16&&C(r,"selected",y[4]===1),_&32&&(c.disabled=y[5]),_&16&&C(c,"selected",y[4]===2),_&32&&(f.disabled=y[5]),_&16&&C(f,"selected",y[4]===2)},d(y){y&&$(e),w=!1,ie(g)}}}function Rn(s){var i,r;let e,t=$t((r=(i=s[1])==null?void 0:i.playerCurrentMonster)==null?void 0:r.moves),n=[];for(let o=0;o<t.length;o+=1)n[o]=Lt(jt(s,t,o));return{c(){e=m("div");for(let o=0;o<n.length;o+=1)n[o].c();v(e,"class","moves svelte-b0lsc5")},m(o,l){q(o,e,l);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null)},p(o,l){var c,a;if(l&298){t=$t((a=(c=o[1])==null?void 0:c.playerCurrentMonster)==null?void 0:a.moves);let d;for(d=0;d<t.length;d+=1){const f=jt(o,t,d);n[d]?n[d].p(f,l):(n[d]=Lt(f),n[d].c(),n[d].m(e,null))}for(;d<n.length;d+=1)n[d].d(1);n.length=t.length}},d(o){o&&$(e),bs(n,o)}}}function Lt(s){let e,t=s[11].name.toUpperCase()+"",n,i,r,o;function l(){return s[9](s[13])}function c(){return s[10](s[11])}return{c(){e=m("button"),n=P(t),i=R(),v(e,"class","action-btn svelte-b0lsc5"),ne(e,"--color","#dc5959"),e.disabled=s[5],C(e,"selected",s[3]===s[13])},m(a,d){q(a,e,d),h(e,n),h(e,i),r||(o=[V(e,"mouseover",l),V(e,"click",c)],r=!0)},p(a,d){s=a,d&2&&t!==(t=s[11].name.toUpperCase()+"")&&Z(n,t),d&32&&(e.disabled=s[5]),d&8&&C(e,"selected",s[3]===s[13])},d(a){a&&$(e),r=!1,ie(o)}}}function En(s){let e,t,n,i;function r(f,p){return f[2]?$n:An}let o=r(s),l=o(s);function c(f,p){return f[2]?Rn:qn}let a=c(s),d=a(s);return{c(){e=m("div"),t=m("div"),n=m("div"),l.c(),i=R(),d.c(),v(n,"class","_inner svelte-b0lsc5"),v(t,"class","info svelte-b0lsc5"),v(e,"class","action-bar svelte-b0lsc5"),C(e,"opened",s[0])},m(f,p){q(f,e,p),h(e,t),h(t,n),l.m(n,null),h(e,i),d.m(e,null)},p(f,[p]){o===(o=r(f))&&l?l.p(f,p):(l.d(1),l=o(f),l&&(l.c(),l.m(n,null))),a===(a=c(f))&&d?d.p(f,p):(d.d(1),d=a(f),d&&(d.c(),d.m(e,null))),p&1&&C(e,"opened",f[0])},i:L,o:L,d(f){f&&$(e),l.d(),d.d()}}}function Pn(s,e,t){let n,{opened:i}=e,{battleState:r}=e,o=!1,l=0,c=0;function a(){t(2,o=!o)}function d(){r.selectAction(new at(r.playerCurrentMonster))}function f(g){r.selectAction(new He(g,"opponent",r.playerCurrentMonster)),t(2,o=!1)}window.addEventListener("keydown",g=>{g.key==="ArrowUp"?o?t(3,l=l===0?r.playerCurrentMonster.moves.length-1:l-1):t(4,c=c===0?3:c-1):g.key==="ArrowDown"?o?t(3,l=l===r.playerCurrentMonster.moves.length-1?0:l+1):t(4,c=c===3?0:c+1):g.key==="Enter"&&(o?f(r.playerCurrentMonster.moves[l]):c===0?a():c===3&&d())});const p=g=>t(3,l=g),w=g=>f(g);return s.$$set=g=>{"opened"in g&&t(0,i=g.opened),"battleState"in g&&t(1,r=g.battleState)},s.$$.update=()=>{s.$$.dirty&2&&t(5,n=r&&!r.isPlayerTurn||!1)},[i,r,o,l,c,n,a,d,f,p,w]}class rs extends ye{constructor(e){super(),ve(this,e,Pn,En,ge,{opened:0,battleState:1},Cn)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),N()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),N()}}me(rs,{opened:{},battleState:{}},[],[],!0);function On(s){be(s,"svelte-16bpp8u",".enemy-info.svelte-16bpp8u.svelte-16bpp8u{opacity:0;visibility:hidden;z-index:9;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;top:2dvh;left:-30dvw;transition:left 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly;font-size:46px}.enemy-info.opened.svelte-16bpp8u.svelte-16bpp8u{opacity:1;visibility:visible;left:1dvw}.enemy-info.svelte-16bpp8u .name-lvl.svelte-16bpp8u{display:flex;justify-content:space-between;align-items:center}.enemy-info.svelte-16bpp8u .status.svelte-16bpp8u{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.enemy-info.svelte-16bpp8u .hp.svelte-16bpp8u{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.enemy-info.svelte-16bpp8u .hp span.svelte-16bpp8u{padding:0 0 0 12px;font-weight:bold}.enemy-info.svelte-16bpp8u .hp .progressbar-wrapper.svelte-16bpp8u{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.enemy-info.svelte-16bpp8u .hp .progressbar-wrapper .progressbar.svelte-16bpp8u{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px;transition:width 1s ease-in-out, background 1s ease-in-out 1s}.enemy-info.svelte-16bpp8u .hp .progressbar-wrapper .progressbar.warning.svelte-16bpp8u{background:rgb(255, 241, 164);background:linear-gradient(0deg, rgb(255, 241, 164) 0%, rgb(255, 194, 16) 30%, rgb(255, 194, 16) 50%, rgb(255, 194, 16) 70%, rgb(255, 241, 164) 100%)}.enemy-info.svelte-16bpp8u .hp .progressbar-wrapper .progressbar.danger.svelte-16bpp8u{background:rgb(244, 177, 159);background:linear-gradient(0deg, rgb(244, 177, 159) 0%, rgb(223, 85, 48) 30%, rgb(223, 85, 48) 50%, rgb(223, 85, 48) 70%, rgb(244, 177, 159) 100%)}@media screen and (max-width: 1100px){.enemy-info.svelte-16bpp8u.svelte-16bpp8u{font-size:36px;border:8px solid #595b59}.enemy-info.svelte-16bpp8u .hp.svelte-16bpp8u{width:80%;height:18px}.enemy-info.svelte-16bpp8u .hp .progressbar-wrapper.svelte-16bpp8u{height:14px}}")}function In(s){var O,I,F,M;let e,t,n,i=((I=(O=s[1])==null?void 0:O.playerCurrentMonster)==null?void 0:I.name)+"",r,o,l,c,a=((M=(F=s[1])==null?void 0:F.playerCurrentMonster)==null?void 0:M.level)+"",d,f,p,w,g,y,_,k;return{c(){e=m("div"),t=m("div"),n=m("span"),r=P(i),o=R(),l=m("span"),c=P("Lv "),d=P(a),f=R(),p=m("div"),w=m("div"),g=m("span"),g.textContent="HP",y=R(),_=m("div"),k=m("div"),v(n,"class","svelte-16bpp8u"),v(l,"class","svelte-16bpp8u"),v(t,"class","name-lvl svelte-16bpp8u"),v(g,"class","svelte-16bpp8u"),v(k,"class","progressbar svelte-16bpp8u"),ne(k,"--width",s[2]+"%"),C(k,"warning",s[2]<=50),C(k,"danger",s[2]<15),v(_,"class","progressbar-wrapper svelte-16bpp8u"),v(w,"class","hp svelte-16bpp8u"),v(p,"class","status svelte-16bpp8u"),v(e,"class","enemy-info svelte-16bpp8u"),C(e,"opened",s[0])},m(b,S){q(b,e,S),h(e,t),h(t,n),h(n,r),h(t,o),h(t,l),h(l,c),h(l,d),h(e,f),h(e,p),h(p,w),h(w,g),h(w,y),h(w,_),h(_,k)},p(b,[S]){var T,j,B,te;S&2&&i!==(i=((j=(T=b[1])==null?void 0:T.playerCurrentMonster)==null?void 0:j.name)+"")&&Z(r,i),S&2&&a!==(a=((te=(B=b[1])==null?void 0:B.playerCurrentMonster)==null?void 0:te.level)+"")&&Z(d,a),S&4&&ne(k,"--width",b[2]+"%"),S&4&&C(k,"warning",b[2]<=50),S&4&&C(k,"danger",b[2]<15),S&1&&C(e,"opened",b[0])},i:L,o:L,d(b){b&&$(e)}}}function Dn(s,e,t){let n,{opened:i}=e,{battleState:r}=e;return s.$$set=o=>{"opened"in o&&t(0,i=o.opened),"battleState"in o&&t(1,r=o.battleState)},s.$$.update=()=>{var o,l,c;s.$$.dirty&2&&t(2,n=Math.floor(((o=r==null?void 0:r.playerCurrentMonster)==null?void 0:o.currentHp)*100/((c=(l=r==null?void 0:r.playerCurrentMonster)==null?void 0:l.currentStats)==null?void 0:c.hp)))},[i,r,n]}class os extends ye{constructor(e){super(),ve(this,e,Dn,In,ge,{opened:0,battleState:1},On)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),N()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),N()}}me(os,{opened:{},battleState:{}},[],[],!0);function Tn(s){be(s,"svelte-hx8zpy",".battleStart.svelte-hx8zpy{opacity:0;visibility:hidden;background:#000000;height:100dvh;width:100dvw;position:absolute;top:0;left:0;transition:opacity 0.5s ease-in-out;z-index:2}.battleStart.animate.svelte-hx8zpy{visibility:visible;animation:svelte-hx8zpy-animate 2s ease-in-out}.battleStart.hide.svelte-hx8zpy{visibility:hidden;opacity:0}@keyframes svelte-hx8zpy-animate{0%{opacity:1}20%{opacity:0}40%{opacity:1}60%{opacity:0}80%{opacity:1}100%{opacity:0}}")}function Bt(s){let e,t,n,i,r,o,l,c,a,d,f,p;function w(b){s[3](b)}function g(b){s[4](b)}let y={};s[0]!==void 0&&(y.opened=s[0]),s[1]!==void 0&&(y.battleState=s[1]),e=new rs({props:y}),D.push(()=>J(e,"opened",w)),D.push(()=>J(e,"battleState",g));function _(b){s[5](b)}function k(b){s[6](b)}let O={};s[0]!==void 0&&(O.opened=s[0]),s[1]!==void 0&&(O.monster=s[1]),r=new is({props:O}),D.push(()=>J(r,"opened",_)),D.push(()=>J(r,"monster",k));function I(b){s[7](b)}function F(b){s[8](b)}let M={};return s[0]!==void 0&&(M.opened=s[0]),s[1]!==void 0&&(M.monster=s[1]),a=new os({props:M}),D.push(()=>J(a,"opened",I)),D.push(()=>J(a,"monster",F)),{c(){Se(e.$$.fragment),i=R(),Se(r.$$.fragment),c=R(),Se(a.$$.fragment)},m(b,S){pe(e,b,S),q(b,i,S),pe(r,b,S),q(b,c,S),pe(a,b,S),p=!0},p(b,S){const T={};!t&&S&1&&(t=!0,T.opened=b[0],Y(()=>t=!1)),!n&&S&2&&(n=!0,T.battleState=b[1],Y(()=>n=!1)),e.$set(T);const j={};!o&&S&1&&(o=!0,j.opened=b[0],Y(()=>o=!1)),!l&&S&2&&(l=!0,j.monster=b[1],Y(()=>l=!1)),r.$set(j);const B={};!d&&S&1&&(d=!0,B.opened=b[0],Y(()=>d=!1)),!f&&S&2&&(f=!0,B.monster=b[1],Y(()=>f=!1)),a.$set(B)},i(b){p||(K(e.$$.fragment,b),K(r.$$.fragment,b),K(a.$$.fragment,b),p=!0)},o(b){ee(e.$$.fragment,b),ee(r.$$.fragment,b),ee(a.$$.fragment,b),p=!1},d(b){b&&($(i),$(c)),he(e,b),he(r,b),he(a,b)}}}function jn(s){var r,o;let e,t,n,i=((r=s[1])==null?void 0:r.playerCurrentMonster)&&((o=s[1])==null?void 0:o.enemyCurrentMonster)&&Bt(s);return{c(){i&&i.c(),e=R(),t=m("div"),t.innerHTML="",v(t,"class","battleStart svelte-hx8zpy"),C(t,"hide",s[0]),C(t,"animate",s[2])},m(l,c){i&&i.m(l,c),q(l,e,c),q(l,t,c),n=!0},p(l,[c]){var a,d;(a=l[1])!=null&&a.playerCurrentMonster&&((d=l[1])!=null&&d.enemyCurrentMonster)?i?(i.p(l,c),c&2&&K(i,1)):(i=Bt(l),i.c(),K(i,1),i.m(e.parentNode,e)):i&&(dt(),ee(i,1,1,()=>{i=null}),ut()),(!n||c&1)&&C(t,"hide",l[0]),(!n||c&4)&&C(t,"animate",l[2])},i(l){n||(K(i),n=!0)},o(l){ee(i),n=!1},d(l){l&&($(e),$(t)),i&&i.d(l)}}}function Ln(s,e,t){let{opened:n}=e,{battleStart:i}=e,{battleState:r}=e;function o(p){n=p,t(0,n)}function l(p){r=p,t(1,r)}function c(p){n=p,t(0,n)}function a(p){r=p,t(1,r)}function d(p){n=p,t(0,n)}function f(p){r=p,t(1,r)}return s.$$set=p=>{"opened"in p&&t(0,n=p.opened),"battleStart"in p&&t(2,i=p.battleStart),"battleState"in p&&t(1,r=p.battleState)},[n,r,i,o,l,c,a,d,f]}class ls extends ye{constructor(e){super(),ve(this,e,Ln,jn,ge,{opened:0,battleStart:2,battleState:1},Tn)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),N()}get battleStart(){return this.$$.ctx[2]}set battleStart(e){this.$$set({battleStart:e}),N()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),N()}}me(ls,{opened:{},battleStart:{},battleState:{}},[],[],!0);class zt{constructor(e,t=16,n=16){u(this,"position");u(this,"width");u(this,"height");this.position=e,this.width=t,this.height=n}debug(e,t,n,i,r,o="red"){e.fillStyle=o,e.fillRect(i+this.position.x*16*n,r+this.position.y*16*n,this.width*n,this.height*n)}}const Bn=8,zn=806;class Nn{constructor(e,t,n,i,r,o,l,c=[1,100]){u(this,"background");u(this,"foreground");u(this,"width");u(this,"height");u(this,"collisions");u(this,"battleZones");u(this,"monsters");u(this,"levelRange",[1,100]);u(this,"playerInitialPosition",new X(11,11));u(this,"startingX",0);u(this,"startingY",0);this.background=e,this.foreground=t,this.width=n,this.height=i,this.collisions=this.initBoundaries(r),this.battleZones=this.initBattlesZones(o),this.monsters=l,this.levelRange=c}randomMonster(e){const t=this.monsters[Math.floor(Math.random()*this.monsters.length)],n=Math.floor(Math.random()*(this.levelRange[1]-this.levelRange[0]+1))+this.levelRange[0];return e.findById(t).result.instanciate(n)}initBattlesZones(e){const t=[];for(let i=0;i<e.length;i+=this.width)t.push(e.slice(i,this.width+i));const n=[];return t.forEach((i,r)=>{i.forEach((o,l)=>{if(o===Bn){const c=new zt(new X(l,r));n.push(c)}})}),n}initBoundaries(e){const t=[];for(let i=0;i<e.length;i+=this.width)t.push(e.slice(i,this.width+i));const n=[];return t.forEach((i,r)=>{i.forEach((o,l)=>{if(o===zn){const c=new zt(new X(l,r));n.push(c)}})}),n}drawBackground(e,t,n){let i=this.background.width*n,r=this.background.height*n,o=e.canvas.width/2-i/2,l=e.canvas.height/2-r/2;this.startingX=o+(0-t.x)*(16*n),this.startingY=l+(0-t.y)*(16*n),e.drawImage(this.background,0,0,this.background.width,this.background.height,this.startingX,this.startingY,this.background.width*n,this.background.height*n)}drawForeground(e,t){this.foreground!==null&&e.drawImage(this.foreground,t.x*16,t.y*16,this.foreground.width,this.foreground.height,0,0,this.foreground.width*3,this.foreground.height*3)}drawBoundaries(e,t,n){this.collisions.forEach(i=>{i.debug(e,t,n,this.startingX,this.startingY,"rgba(255, 0, 0, 0.5)")})}drawBattleZones(e,t,n){this.battleZones.forEach(i=>{i.debug(e,t,n,this.startingX,this.startingY,"rgba(0, 0, 255, 0.5)")})}hasBattleZoneAt(e){return this.battleZones.some(t=>t.position.x===e.x&&t.position.y===e.y)}hasBoundaryAt(e){return this.collisions.some(t=>t.position.x===e.x&&t.position.y===e.y)||e.x<0||e.y<0||e.x>this.width-1||e.y>this.height-1}}const as=new Image;as.src="src/assets/maps/test-map.png";const cs=new Image;cs.src="src/assets/maps/test-map-foreground.png";const Fn=[95],Hn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,0,806,806,0,0,806,806,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,806,806,806,806,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,806,806,806,806,834,0,0,0,0,0,0,0,0,0],Xn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ce=new Nn(as,cs,20,20,Hn,Xn,Fn,[3,6]),E={up:{pressed:!1},down:{pressed:!1},left:{pressed:!1},right:{pressed:!1}};let se={key:""};function Nt(s){return e=>{switch(e.key){case"ArrowDown":E.down.pressed=!1;break;case"ArrowUp":E.up.pressed=!1;break;case"ArrowRight":E.right.pressed=!1;break;case"ArrowLeft":E.left.pressed=!1;break}s.moving=!1}}function Ft(){return s=>{switch(s.key){case"ArrowDown":se.key="ArrowDown",E.down.pressed=!0;break;case"ArrowUp":se.key="ArrowUp",E.up.pressed=!0;break;case"ArrowRight":se.key="ArrowRight",E.right.pressed=!0;break;case"ArrowLeft":se.key="ArrowLeft",E.left.pressed=!0;break}}}function Un(s){be(s,"svelte-1i2dl8q",'@media(max-width: 1100px){.set.svelte-1i2dl8q .d-pad.svelte-1i2dl8q{width:20dvw;height:20dvw}}.set.svelte-1i2dl8q.svelte-1i2dl8q{overflow:hidden;text-align:center;position:absolute;bottom:8dvh;left:8dvh;z-index:10}.set.svelte-1i2dl8q .d-pad.svelte-1i2dl8q{display:inline-block}.d-pad.svelte-1i2dl8q.svelte-1i2dl8q{position:relative;width:12dvw;height:12dvw;border-radius:48%;overflow:hidden;z-index:9}.d-pad.svelte-1i2dl8q.svelte-1i2dl8q:before{content:"";position:absolute;top:50%;left:50%;border-radius:5%;transform:translate(-50%, -50%);width:66.6%;height:66.6%}.d-pad.svelte-1i2dl8q.svelte-1i2dl8q:after{content:"";position:absolute;display:none;z-index:2;width:20%;height:20%;top:50%;left:50%;background:rgba(221, 221, 221, 0.5);border-radius:50%;transform:translate(-50%, -50%);transition:all 0.25s;cursor:pointer}.d-pad.svelte-1i2dl8q.svelte-1i2dl8q:hover:after{width:30%;height:30%}.d-pad.svelte-1i2dl8q span.svelte-1i2dl8q{display:block;position:absolute;-webkit-tap-highlight-color:rgba(255, 255, 255, 0);width:33.3%;height:43%;line-height:40%;color:#fff;background:rgba(221, 221, 221, 0.5);text-align:center}.d-pad.svelte-1i2dl8q span.svelte-1i2dl8q:hover{background:#eee}.d-pad.svelte-1i2dl8q span.svelte-1i2dl8q:before{content:"";position:absolute;width:0;height:0;border-radius:5px;border-style:solid;transition:all 0.25s}.d-pad.svelte-1i2dl8q span.svelte-1i2dl8q:after{content:"";position:absolute;width:102%;height:78%;background:#fff;border-radius:20%}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q,.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q{width:43%;height:33%}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:after,.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:after{width:78%;height:102%}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q{top:0;left:50%;transform:translate(-50%, 0);border-radius:17% 17% 50% 50%}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:hover{background:linear-gradient(0deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:after{left:0;top:0;transform:translate(-100%, 0);border-top-left-radius:50%;pointer-events:none}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:before{top:40%;left:50%;transform:translate(-50%, -50%);border-width:0 13px 19px 13px;border-color:transparent transparent #aaa transparent}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:active:before{border-bottom-color:#333}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:hover:before{top:35%}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q{bottom:0;left:50%;transform:translate(-50%, 0);border-radius:50% 50% 17% 17%}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:hover{background:linear-gradient(180deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:after{right:0;bottom:0;transform:translate(100%, 0);border-bottom-right-radius:50%;pointer-events:none}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:before{bottom:40%;left:50%;transform:translate(-50%, 50%);border-width:19px 13px 0px 13px;border-color:#aaa transparent transparent transparent}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:active:before{border-top-color:#333}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:hover:before{bottom:35%}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q{top:50%;left:0;transform:translate(0, -50%);border-radius:17% 50% 50% 17%}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:hover{background:linear-gradient(-90deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:after{left:0;bottom:0;transform:translate(0, 100%);border-bottom-left-radius:50%;pointer-events:none}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:before{left:40%;top:50%;transform:translate(-50%, -50%);border-width:13px 19px 13px 0;border-color:transparent #aaa transparent transparent}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:active:before{border-right-color:#333}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:hover:before{left:35%}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q{top:50%;right:0;transform:translate(0, -50%);border-radius:50% 17% 17% 50%}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:hover{background:linear-gradient(90deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:after{right:0;top:0;transform:translate(0, -100%);border-top-right-radius:50%;pointer-events:none}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:before{right:40%;top:50%;transform:translate(50%, -50%);border-width:13px 0 13px 19px;border-color:transparent transparent transparent #aaa}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:active:before{border-left-color:#333}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:hover:before{right:35%}.outline.svelte-1i2dl8q .d-pad.svelte-1i2dl8q{border-radius:0}.outline.svelte-1i2dl8q .d-pad span.svelte-1i2dl8q{border:1px solid rgba(0, 0, 0, 0.1)}.outline.svelte-1i2dl8q .d-pad span.svelte-1i2dl8q:after{display:none}.outline.svelte-1i2dl8q .d-pad span.up.svelte-1i2dl8q:hover{background:linear-gradient(0deg, #fff 0%, #efefef 50%)}.outline.svelte-1i2dl8q .d-pad span.right.svelte-1i2dl8q:hover{background:linear-gradient(90deg, #fff 0%, #efefef 50%)}.outline.svelte-1i2dl8q .d-pad span.down.svelte-1i2dl8q:hover{background:linear-gradient(180deg, #fff 0%, #efefef 50%)}.outline.svelte-1i2dl8q .d-pad span.left.svelte-1i2dl8q:hover{background:linear-gradient(-90deg, #fff 0%, #efefef 50%)}.outline.svelte-1i2dl8q .d-pad span.up.svelte-1i2dl8q:before{border-bottom-color:rgba(0, 0, 0, 0.1)}.outline.svelte-1i2dl8q .d-pad span.right.svelte-1i2dl8q:before{border-left-color:rgba(0, 0, 0, 0.1)}.outline.svelte-1i2dl8q .d-pad span.down.svelte-1i2dl8q:before{border-top-color:rgba(0, 0, 0, 0.1)}.outline.svelte-1i2dl8q .d-pad span.left.svelte-1i2dl8q:before{border-right-color:rgba(0, 0, 0, 0.1)}.buttons-a-b.svelte-1i2dl8q.svelte-1i2dl8q{position:absolute;bottom:8dvh;right:8dvh;z-index:10;display:flex;flex-direction:column;align-content:space-between;align-items:center}.buttons-a-b.svelte-1i2dl8q button.svelte-1i2dl8q{width:7dvw;height:7dvw;border-radius:50%;border:1px solid #fff;background:rgba(221, 221, 221, 0.5);color:#aaa;font-size:3.5rem;font-weight:bold;text-align:center;line-height:10dvw;cursor:pointer;transition:all 0.25s;display:flex;align-content:center;justify-content:center;align-items:center}.buttons-a-b.svelte-1i2dl8q button.svelte-1i2dl8q:hover{background:#eee}.buttons-a-b.svelte-1i2dl8q .button-a.svelte-1i2dl8q{position:relative;right:6dvw}')}function Gn(s){let e,t,n,i,r,o,l,c,a,d,f,p,w,g,y;return{c(){e=m("div"),t=m("nav"),n=m("span"),i=R(),r=m("span"),o=R(),l=m("span"),c=R(),a=m("span"),d=R(),f=m("div"),f.innerHTML='<button class="button-b svelte-1i2dl8q">B</button> <button class="button-a svelte-1i2dl8q">A</button>',p=R(),w=m("div"),w.innerHTML='<button class="button-start">start</button> <button class="button-select">select</button>',v(n,"class","up svelte-1i2dl8q"),v(r,"class","right svelte-1i2dl8q"),v(l,"class","down svelte-1i2dl8q"),v(a,"class","left svelte-1i2dl8q"),v(t,"class","d-pad svelte-1i2dl8q"),v(e,"class","set outline svelte-1i2dl8q"),v(f,"class","buttons-a-b svelte-1i2dl8q"),v(w,"class","buttons-start-select")},m(_,k){q(_,e,k),h(e,t),h(t,n),h(t,i),h(t,r),h(t,o),h(t,l),h(t,c),h(t,a),q(_,d,k),q(_,f,k),q(_,p,k),q(_,w,k),g||(y=[V(n,"pointerdown",s[6]("ArrowUp")),V(n,"pointerup",s[7]("ArrowUp")),V(r,"pointerdown",s[6]("ArrowRight")),V(r,"pointerup",s[7]("ArrowRight")),V(l,"pointerdown",s[6]("ArrowDown")),V(l,"pointerup",s[7]("ArrowDown")),V(a,"pointerdown",s[6]("ArrowLeft")),V(a,"pointerup",s[7]("ArrowLeft"))],g=!0)},p:L,i:L,o:L,d(_){_&&($(e),$(d),$(f),$(p),$(w)),g=!1,ie(y)}}}function Wn(s){let e,t,n,i,r;function o(d){s[10](d)}function l(d){s[11](d)}function c(d){s[12](d)}let a={};return s[1]!==void 0&&(a.opened=s[1]),s[4]!==void 0&&(a.battleState=s[4]),s[3]!==void 0&&(a.battleStart=s[3]),e=new ls({props:a}),D.push(()=>J(e,"opened",o)),D.push(()=>J(e,"battleState",l)),D.push(()=>J(e,"battleStart",c)),{c(){Se(e.$$.fragment)},m(d,f){pe(e,d,f),r=!0},p(d,f){const p={};!t&&f[0]&2&&(t=!0,p.opened=d[1],Y(()=>t=!1)),!n&&f[0]&16&&(n=!0,p.battleState=d[4],Y(()=>n=!1)),!i&&f[0]&8&&(i=!0,p.battleStart=d[3],Y(()=>i=!1)),e.$set(p)},i(d){r||(K(e.$$.fragment,d),r=!0)},o(d){ee(e.$$.fragment,d),r=!1},d(d){he(e,d)}}}function Vn(s){let e,t,n,i,r,o,l;const c=[Wn,Gn],a=[];function d(g,y){return g[5].initiated&&g[4]?0:1}e=d(s),t=a[e]=c[e](s);function f(g){s[13](g)}function p(g){s[14](g)}let w={};return s[2]!==void 0&&(w.menuOpened=s[2]),s[0]!==void 0&&(w.player=s[0]),i=new ss({props:w}),D.push(()=>J(i,"menuOpened",f)),D.push(()=>J(i,"player",p)),{c(){t.c(),n=R(),Se(i.$$.fragment)},m(g,y){a[e].m(g,y),q(g,n,y),pe(i,g,y),l=!0},p(g,y){let _=e;e=d(g),e===_?a[e].p(g,y):(dt(),ee(a[_],1,1,()=>{a[_]=null}),ut(),t=a[e],t?t.p(g,y):(t=a[e]=c[e](g),t.c()),K(t,1),t.m(n.parentNode,n));const k={};!r&&y[0]&4&&(r=!0,k.menuOpened=g[2],Y(()=>r=!1)),!o&&y[0]&1&&(o=!0,k.player=g[0],Y(()=>o=!1)),i.$set(k)},i(g){l||(K(t),K(i.$$.fragment,g),l=!0)},o(g){ee(t),ee(i.$$.fragment,g),l=!1},d(g){g&&$(n),a[e].d(g),he(i,g)}}}let Le=3,Ht=0;function Zn(s,e,t){let{canvas:n}=e,{pokedex:i}=e,{character:r}=e,o=!1,l=!1,c=!1,a,d=ce,f=Ce.resolve(it);const p=n.getContext("2d");window.innerHeight>window.innerWidth?(n.width=window.innerWidth,n.height=window.innerWidth):(n.width=window.innerWidth,n.height=window.innerHeight);let w=16*Le;r.positionOnMap=new X(ce.playerInitialPosition.x,ce.playerInitialPosition.y),r.positionOnScreen=new X(ce.playerInitialPosition.x*w,ce.playerInitialPosition.y*w);function g(){window.innerHeight>window.innerWidth?(t(8,n.width=window.innerWidth,n),t(8,n.height=window.innerWidth,n)):(t(8,n.width=window.innerWidth,n),t(8,n.height=window.innerHeight,n)),w=16*Le,t(0,r.positionOnScreen=new X(ce.playerInitialPosition.x*w,ce.playerInitialPosition.y*w),r)}window.addEventListener("resize",()=>{g()}),window.addEventListener("orientationchange",()=>{g()});let y={initiated:!1},_={fps:12,then:Date.now(),fpsInterval:1e3/12,id:0},k={fps:12,then:Date.now(),fpsInterval:1e3/12,goDown:!0,id:0};const O=new X(0,0);function I(){_.id=window.requestAnimationFrame(I);let x=Date.now(),G=x-_.then;if(G>_.fpsInterval){_.then=x-G%_.fpsInterval,p.fillStyle="black",p.fillRect(0,0,n.width,n.height),d.drawBackground(p,O,Le),r.draw(p,O,Le,d.background.width,d.background.height);let A=!0;if(t(0,r.moving=!1,r),y.initiated)return;if(!l){if((E.down.pressed||E.up.pressed||E.left.pressed||E.right.pressed)&&d.hasBattleZoneAt(r.positionOnMap)&&Math.random()<.1){let H=d.randomMonster(i);window.cancelAnimationFrame(_.id),M(H)}E.down.pressed&&se.key==="ArrowDown"&&(d.hasBoundaryAt(new X(r.positionOnMap.x,r.positionOnMap.y+1))&&(A=!1),t(0,r.moving=!0,r),t(0,r.direction="down",r),A&&O.y++),E.up.pressed&&se.key==="ArrowUp"&&(d.hasBoundaryAt(new X(r.positionOnMap.x,r.positionOnMap.y-1))&&(A=!1),t(0,r.moving=!0,r),t(0,r.direction="up",r),A&&O.y--),E.left.pressed&&se.key==="ArrowLeft"&&(d.hasBoundaryAt(new X(r.positionOnMap.x-1,r.positionOnMap.y))&&(A=!1),t(0,r.moving=!0,r),t(0,r.direction="left",r),A&&O.x--),E.right.pressed&&se.key==="ArrowRight"&&(d.hasBoundaryAt(new X(r.positionOnMap.x+1,r.positionOnMap.y))&&(A=!1),t(0,r.moving=!0,r),t(0,r.direction="right",r),A&&O.x++),r.updatePosition(d.playerInitialPosition,O)}}}function F(){var A,H;k.id=window.requestAnimationFrame(F);let x=Date.now(),G=x-k.then;if(G>k.fpsInterval){if(!y.initiated)return;k.then=x-G%k.fpsInterval,p.fillStyle="black",p.fillRect(0,0,n.width,n.height),f.draw(p,"default"),(A=a==null?void 0:a.opponentCurrentMonster)==null||A.draw(p,"front",50,0,Ht),(H=a==null?void 0:a.playerCurrentMonster)==null||H.draw(p,"back",0,0,Ht)}}function M(x){re(),t(5,y.initiated=!0,y),t(5,y.startDate=new Date,y),t(4,a=new yn(r,x,n)),T(),t(4,a.onClose=()=>{b(k.id)},a),t(3,c=!0),setTimeout(()=>{t(3,c=!1),t(1,o=!0),F()},2e3)}function b(x){window.cancelAnimationFrame(x),t(4,a=void 0),t(5,y.initiated=!1,y),t(5,y.startDate=void 0,y),t(3,c=!1),t(1,o=!1),t(2,l=!1),I(),S()}function S(){window.addEventListener("keydown",Ft()),window.addEventListener("keyup",Nt(r)),window.addEventListener("keydown",j)}function T(){window.removeEventListener("keydown",Ft()),window.removeEventListener("keyup",Nt(r)),window.removeEventListener("keydown",j)}function j(x){x.key==="Escape"&&t(2,l=!l)}function B(x){return G=>{switch(G.preventDefault(),x){case"ArrowUp":E.up.pressed=!0;break;case"ArrowDown":E.down.pressed=!0;break;case"ArrowLeft":E.left.pressed=!0;break;case"ArrowRight":E.right.pressed=!0;break}se.key=x}}function te(x){return G=>{switch(x){case"ArrowDown":E.down.pressed=!1;break;case"ArrowUp":E.up.pressed=!1;break;case"ArrowRight":E.right.pressed=!1;break;case"ArrowLeft":E.left.pressed=!1;break}}}function re(){E.down.pressed=!1,E.up.pressed=!1,E.right.pressed=!1,E.left.pressed=!1,t(0,r.moving=!1,r)}S(),I();function oe(x){o=x,t(1,o)}function le(x){a=x,t(4,a)}function ae(x){c=x,t(3,c)}function z(x){l=x,t(2,l)}function U(x){r=x,t(0,r)}return s.$$set=x=>{"canvas"in x&&t(8,n=x.canvas),"pokedex"in x&&t(9,i=x.pokedex),"character"in x&&t(0,r=x.character)},[r,o,l,c,a,y,B,te,n,i,oe,le,ae,z,U]}class ds extends ye{constructor(e){super(),ve(this,e,Zn,Vn,ge,{canvas:8,pokedex:9,character:0},Un,[-1,-1])}get canvas(){return this.$$.ctx[8]}set canvas(e){this.$$set({canvas:e}),N()}get pokedex(){return this.$$.ctx[9]}set pokedex(e){this.$$set({pokedex:e}),N()}get character(){return this.$$.ctx[0]}set character(e){this.$$set({character:e}),N()}}me(ds,{canvas:{},pokedex:{},character:{}},[],[],!0);function Yn(s){be(s,"svelte-1bs37g6",'#canvas-wrapper.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{width:100dvw;height:100dvh;overflow:hidden;position:absolute;top:0;left:0;-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0)}#canvas-wrapper.svelte-1bs37g6 canvas.svelte-1bs37g6.svelte-1bs37g6{position:absolute;top:0;left:0;width:100dvw;height:100dvh}.loading.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100vh}.loading.ready.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{opacity:0.2}.u-swing.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{animation:svelte-1bs37g6-swing 3000ms infinite}@keyframes svelte-1bs37g6-swing{20%{-webkit-transform:rotate(15deg);transform:rotate(15deg)}40%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg)}60%{-webkit-transform:rotate(5deg);transform:rotate(5deg)}80%{-webkit-transform:rotate(-5deg);transform:rotate(-5deg)}to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{width:120px;height:120px;border-radius:120px;border:solid 4.8px black;position:relative;background:linear-gradient(to bottom, #EEEEEE 0%, #FFFFFF 100%);margin:10px auto}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:before,.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:after{content:"";display:block}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6,.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:before,.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:after{transition:all 600ms cubic-bezier(0.67, 0.4, 0.36, 0.75)}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:before{width:120px;height:57.6px;border-bottom:solid 4.8px black;border-radius:60px 60px 0 0;background:linear-gradient(to bottom, #d10000 0%, #ff0000 50%)}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:after{content:"";width:24px;height:24px;background:linear-gradient(to bottom, #fff 0%, #ccc 100%);position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);border-radius:50%;box-shadow:0 0 0 2.4px black, 0 0 0 4.8px #ddd, 0 0 0 8.5714285714px black, 0 0 12px 7.0588235294px rgba(0, 0, 0, 0.4)}.buttons.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{display:flex;justify-content:center;align-items:center;flex-direction:column;gap:120px;position:absolute;left:calc(50dvw - 100px);top:calc(50dvh - 40px)}.buttons.svelte-1bs37g6 .letsgo.svelte-1bs37g6.svelte-1bs37g6{position:relative}.buttons.svelte-1bs37g6 .letsgo .pika.svelte-1bs37g6.svelte-1bs37g6{width:200px;height:200px;position:absolute;bottom:0;left:0;z-index:1}.buttons.svelte-1bs37g6 .letsgo .start-btn.svelte-1bs37g6.svelte-1bs37g6{width:200px;height:80px;border-radius:16px;position:relative;z-index:2;font-family:pokemon, serif;font-size:36px;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;cursor:pointer}.buttons.svelte-1bs37g6 .letsgo .start-btn.svelte-1bs37g6.svelte-1bs37g6:hover{color:#fff;box-shadow:inset #009688 0 0 0 5px;text-shadow:none;font-weight:bold;background:#009688}.buttons.svelte-1bs37g6 .letsgo .start-btn.svelte-1bs37g6:hover+.pika.svelte-1bs37g6{animation:svelte-1bs37g6-bounce 1s infinite}@keyframes svelte-1bs37g6-bounce{0%,20%,53%,80%,to{-webkit-animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-transform:translate3d(0, -30px, 0);transform:translate3d(0, -30px, 0)}40%,43%,70%{-webkit-animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06);animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06)}70%{-webkit-transform:translate3d(0, -15px, 0);transform:translate3d(0, -15px, 0)}90%{-webkit-transform:translate3d(0, -4px, 0);transform:translate3d(0, -4px, 0)}}#preview.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{display:flex;flex-wrap:wrap;justify-content:center}')}function Jn(s){let e,t,n,i=!s[3]&&Xt(s),r=s[3]&&Ut(s);return{c(){e=m("div"),i&&i.c(),t=R(),r&&r.c(),n=vs(),v(e,"class","loading svelte-1bs37g6"),C(e,"ready",s[3])},m(o,l){q(o,e,l),i&&i.m(e,null),q(o,t,l),r&&r.m(o,l),q(o,n,l)},p(o,l){o[3]?i&&(i.d(1),i=null):i?i.p(o,l):(i=Xt(o),i.c(),i.m(e,null)),l&8&&C(e,"ready",o[3]),o[3]?r?r.p(o,l):(r=Ut(o),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:L,o:L,d(o){o&&($(e),$(t),$(n)),i&&i.d(),r&&r.d(o)}}}function Kn(s){let e,t,n,i,r;function o(d){s[10](d)}function l(d){s[11](d)}function c(d){s[12](d)}let a={};return s[6]!==void 0&&(a.pokedex=s[6]),s[0]!==void 0&&(a.canvas=s[0]),s[2]!==void 0&&(a.character=s[2]),e=new ds({props:a}),D.push(()=>J(e,"pokedex",o)),D.push(()=>J(e,"canvas",l)),D.push(()=>J(e,"character",c)),{c(){Se(e.$$.fragment)},m(d,f){pe(e,d,f),r=!0},p(d,f){const p={};!t&&f&64&&(t=!0,p.pokedex=d[6],Y(()=>t=!1)),!n&&f&1&&(n=!0,p.canvas=d[0],Y(()=>n=!1)),!i&&f&4&&(i=!0,p.character=d[2],Y(()=>i=!1)),e.$set(p)},i(d){r||(K(e.$$.fragment,d),r=!0)},o(d){ee(e.$$.fragment,d),r=!1},d(d){he(e,d)}}}function Xt(s){let e,t,n,i,r;return{c(){e=m("div"),t=R(),n=m("span"),n.textContent=`Gotta catch em all... ${s[8]}`,i=R(),r=m("div"),r.innerHTML="",v(e,"class","o-pokeball c-loader u-swing svelte-1bs37g6"),v(r,"id","preview"),v(r,"class","svelte-1bs37g6")},m(o,l){q(o,e,l),q(o,t,l),q(o,n,l),q(o,i,l),q(o,r,l),s[13](r)},p:L,d(o){o&&($(e),$(t),$(n),$(i),$(r)),s[13](null)}}}function Ut(s){let e,t,n,i,r,o,l,c,a,d=s[7]&&Qn(s);return{c(){e=m("div"),d&&d.c(),t=R(),n=m("div"),i=m("button"),i.textContent="New game!",r=R(),o=m("img"),v(i,"class","start-btn svelte-1bs37g6"),v(o,"class","pika svelte-1bs37g6"),v(o,"alt","pikachu"),Vt(o.src,l="src/assets/monsters/heartgold-soulsilver/25.png")||v(o,"src",l),v(n,"class","letsgo svelte-1bs37g6"),v(e,"class","buttons svelte-1bs37g6")},m(f,p){q(f,e,p),d&&d.m(e,null),h(e,t),h(e,n),h(n,i),h(n,r),h(n,o),c||(a=V(i,"click",s[15]),c=!0)},p(f,p){f[7]&&d.p(f,p)},d(f){f&&$(e),d&&d.d(),c=!1,a()}}}function Qn(s){let e,t,n,i,r,o,l;return{c(){e=m("div"),t=m("button"),t.textContent="Continue!",n=R(),i=m("img"),v(t,"class","start-btn svelte-1bs37g6"),v(i,"class","pika svelte-1bs37g6"),v(i,"alt","Evoli"),Vt(i.src,r="src/assets/monsters/heartgold-soulsilver/133.png")||v(i,"src",r),v(e,"class","letsgo svelte-1bs37g6")},m(c,a){q(c,e,a),h(e,t),h(e,n),h(e,i),o||(l=V(t,"click",s[14]),o=!0)},p:L,d(c){c&&$(e),o=!1,l()}}}function ei(s){let e,t,n,i,r,o;const l=[Kn,Jn],c=[];function a(d,f){return d[3]&&d[4]?0:1}return t=a(s),n=c[t]=l[t](s),{c(){e=m("div"),n.c(),i=R(),r=m("canvas"),v(r,"class","svelte-1bs37g6"),v(e,"id","canvas-wrapper"),v(e,"class","svelte-1bs37g6")},m(d,f){q(d,e,f),c[t].m(e,null),h(e,i),h(e,r),s[16](r),s[17](e),o=!0},p(d,[f]){let p=t;t=a(d),t===p?c[t].p(d,f):(dt(),ee(c[p],1,1,()=>{c[p]=null}),ut(),n=c[t],n?n.p(d,f):(n=c[t]=l[t](d),n.c()),K(n,1),n.m(e,i))},i(d){o||(K(n),o=!0)},o(d){ee(n),o=!1},d(d){d&&$(e),c[t].d(),s[16](null),s[17](null)}}}function ti(s,e,t){let{canvas:n}=e,i,r,o=!1,l=!1,c,a,d;window.scrollTo(0,1);let f=new dn;fetch("src/assets/data/final/pokedex.json").then(M=>M.json()).then(M=>{var j,B;f.importFromJson(M);let b=5,S=Date.now();for(;!f.ready&&Date.now()-S<b*1e3;)console.log("loading dex...");f.ready||(console.error("Pokedex not ready after "+b+" seconds"),window.location.reload());let T=(B=(j=f.findById(1))==null?void 0:j.result)==null?void 0:B.instanciate(5);if(!T)throw new Error("Could not find pokemon with id 251");T.isShiny=!0,t(2,r=new ts("Kaiser","MALE",new rn("src/assets/characters/hero_male_front.png","src/assets/characters/hero_male_back.png","src/assets/characters/hero_male_left.png","src/assets/characters/hero_male_right.png","src/assets/characters/hero_male_back.png"),[T])),t(3,o=!0)});function p(){t(4,l=!0)}function w(M){f=M,t(6,f)}function g(M){n=M,t(0,n)}function y(M){r=M,t(2,r)}function _(M){D[M?"unshift":"push"](()=>{d=M,t(5,d)})}const k=()=>p(),O=()=>p();function I(M){D[M?"unshift":"push"](()=>{n=M,t(0,n)})}function F(M){D[M?"unshift":"push"](()=>{i=M,t(1,i)})}return s.$$set=M=>{"canvas"in M&&t(0,n=M.canvas)},[n,i,r,o,l,d,f,c,a,p,w,g,y,_,k,O,I,F]}class si extends ye{constructor(e){super(),ve(this,e,ti,ei,ge,{canvas:0},Yn)}get canvas(){return this.$$.ctx[0]}set canvas(e){this.$$set({canvas:e}),N()}}customElements.define("open-mon",me(si,{canvas:{}},[],[],!0));
