var gt=Object.defineProperty;var mt=(s,e,t)=>e in s?gt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var l=(s,e,t)=>(mt(s,typeof e!="symbol"?e+"":e,t),t);function N(){}function st(s){return s()}function qe(){return Object.create(null)}function ne(s){s.forEach(st)}function nt(s){return typeof s=="function"}function le(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let $e;function it(s,e){return s===e?!0:($e||($e=document.createElement("a")),$e.href=e,s===$e.href)}function vt(s){return Object.keys(s).length===0}function u(s,e){s.appendChild(e)}function ce(s,e,t){const n=wt(s);if(!n.getElementById(e)){const i=w("style");i.id=e,i.textContent=t,yt(n,i)}}function wt(s){if(!s)return document;const e=s.getRootNode?s.getRootNode():s.ownerDocument;return e&&e.host?e:s.ownerDocument}function yt(s,e){return u(s.head||s,e),e.sheet}function H(s,e,t){s.insertBefore(e,t||null)}function O(s){s.parentNode&&s.parentNode.removeChild(s)}function kt(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function w(s){return document.createElement(s)}function z(s){return document.createTextNode(s)}function A(){return z(" ")}function _t(){return z("")}function W(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function v(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function xt(s){return Array.from(s.childNodes)}function R(s,e){e=""+e,s.data!==e&&(s.data=e)}function se(s,e,t,n){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,n?"important":"")}function $(s,e,t){s.classList.toggle(e,!!t)}function St(s){const e={};return s.childNodes.forEach(t=>{e[t.slot||"default"]=!0}),e}let Be;function we(s){Be=s}const he=[],j=[];let be=[];const Oe=[],Mt=Promise.resolve();let Ie=!1;function $t(){Ie||(Ie=!0,Mt.then(D))}function He(s){be.push(s)}function Z(s){Oe.push(s)}const Ee=new Set;let ue=0;function D(){if(ue!==0)return;const s=Be;do{try{for(;ue<he.length;){const e=he[ue];ue++,we(e),Ct(e.$$)}}catch(e){throw he.length=0,ue=0,e}for(we(null),he.length=0,ue=0;j.length;)j.pop()();for(let e=0;e<be.length;e+=1){const t=be[e];Ee.has(t)||(Ee.add(t),t())}be.length=0}while(he.length);for(;Oe.length;)Oe.pop()();Ie=!1,Ee.clear(),we(s)}function Ct(s){if(s.fragment!==null){s.update(),ne(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(He)}}function At(s){const e=[],t=[];be.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),be=e}const Ce=new Set;let re;function De(){re={r:0,c:[],p:re}}function Te(){re.r||ne(re.c),re=re.p}function X(s,e){s&&s.i&&(Ce.delete(s),s.i(e))}function V(s,e,t,n){if(s&&s.o){if(Ce.has(s))return;Ce.add(s),re.c.push(()=>{Ce.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}function Ue(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Y(s,e,t){const n=s.$$.props[e];n!==void 0&&(s.$$.bound[n]=t,t(s.$$.ctx[n]))}function ge(s){s&&s.c()}function ae(s,e,t){const{fragment:n,after_update:i}=s.$$;n&&n.m(e,t),He(()=>{const a=s.$$.on_mount.map(st).filter(nt);s.$$.on_destroy?s.$$.on_destroy.push(...a):ne(a),s.$$.on_mount=[]}),i.forEach(He)}function oe(s,e){const t=s.$$;t.fragment!==null&&(At(t.after_update),ne(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Pt(s,e){s.$$.dirty[0]===-1&&(he.push(s),$t(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function de(s,e,t,n,i,a,r=null,o=[-1]){const c=Be;we(s);const f=s.$$={fragment:null,ctx:[],props:a,update:N,not_equal:i,bound:qe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:qe(),dirty:o,skip_bound:!1,root:e.target||c.$$.root};r&&r(f.root);let p=!1;if(f.ctx=t?t(s,e.props||{},(d,h,...b)=>{const m=b.length?b[0]:h;return f.ctx&&i(f.ctx[d],f.ctx[d]=m)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](m),p&&Pt(s,d)),h}):[],f.update(),p=!0,ne(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const d=xt(e.target);f.fragment&&f.fragment.l(d),d.forEach(O)}else f.fragment&&f.fragment.c();e.intro&&X(s.$$.fragment),ae(s,e.target,e.anchor),D()}we(c)}let rt;typeof HTMLElement=="function"&&(rt=class extends HTMLElement{constructor(e,t,n){super();l(this,"$$ctor");l(this,"$$s");l(this,"$$c");l(this,"$$cn",!1);l(this,"$$d",{});l(this,"$$r",!1);l(this,"$$p_d",{});l(this,"$$l",{});l(this,"$$l_u",new Map);this.$$ctor=e,this.$$s=t,n&&this.attachShadow({mode:"open"})}addEventListener(e,t,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){const i=this.$$c.$on(e,t);this.$$l_u.set(t,i)}super.addEventListener(e,t,n)}removeEventListener(e,t,n){if(super.removeEventListener(e,t,n),this.$$c){const i=this.$$l_u.get(t);i&&(i(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(r){return()=>{let o;return{c:function(){o=w("slot"),r!=="default"&&v(o,"name",r)},m:function(p,d){H(p,o,d)},d:function(p){p&&O(o)}}}};var e=t;if(await Promise.resolve(),!this.$$cn)return;const n={},i=St(this);for(const r of this.$$s)r in i&&(n[r]=[t(r)]);for(const r of this.attributes){const o=this.$$g_p(r.name);o in this.$$d||(this.$$d[o]=Ae(o,r.value,this.$$p_d,"toProp"))}for(const r in this.$$p_d)!(r in this.$$d)&&this[r]!==void 0&&(this.$$d[r]=this[r],delete this[r]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:n,$$scope:{ctx:[]}}});const a=()=>{this.$$r=!0;for(const r in this.$$p_d)if(this.$$d[r]=this.$$c.$$.ctx[this.$$c.$$.props[r]],this.$$p_d[r].reflect){const o=Ae(r,this.$$d[r],this.$$p_d,"toAttribute");o==null?this.removeAttribute(this.$$p_d[r].attribute||r):this.setAttribute(this.$$p_d[r].attribute||r,o)}this.$$r=!1};this.$$c.$$.after_update.push(a),a();for(const r in this.$$l)for(const o of this.$$l[r]){const c=this.$$c.$on(r,o);this.$$l_u.set(o,c)}this.$$l={}}}attributeChangedCallback(e,t,n){var i;this.$$r||(e=this.$$g_p(e),this.$$d[e]=Ae(e,n,this.$$p_d,"toProp"),(i=this.$$c)==null||i.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e)||e}});function Ae(s,e,t,n){var a;const i=(a=t[s])==null?void 0:a.type;if(e=i==="Boolean"&&typeof e!="boolean"?e!=null:e,!n||!t[s])return e;if(n==="toAttribute")switch(i){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(i){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function fe(s,e,t,n,i,a){let r=class extends rt{constructor(){super(s,t,i),this.$$p_d=e}static get observedAttributes(){return Object.keys(e).map(o=>(e[o].attribute||o).toLowerCase())}};return Object.keys(e).forEach(o=>{Object.defineProperty(r.prototype,o,{get(){return this.$$c&&o in this.$$c?this.$$c[o]:this.$$d[o]},set(c){var f;c=Ae(o,c,e),this.$$d[o]=c,(f=this.$$c)==null||f.$set({[o]:c})}})}),n.forEach(o=>{Object.defineProperty(r.prototype,o,{get(){var c;return(c=this.$$c)==null?void 0:c[o]}})}),a&&(r=a(r)),s.element=r,r}class pe{constructor(){l(this,"$$");l(this,"$$set")}$destroy(){oe(this,1),this.$destroy=N}$on(e,t){if(!nt(t))return N;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!vt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Et="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Et);class T{constructor(e,t){l(this,"x");l(this,"y");this.x=e,this.y=t}}class at{constructor(e,t,n,i=[]){l(this,"name");l(this,"gender");l(this,"sprites");l(this,"monsters");l(this,"bag",[]);l(this,"lvl",1);l(this,"moving",!1);l(this,"direction","down");l(this,"positionOnScreen");l(this,"positionOnMap");l(this,"frames");l(this,"spriteScale",1);this.name=e,this.gender=t,this.sprites=n,this.monsters=i,this.frames={max:3,val:0,elapsed:0},this.positionOnMap=new T(0,0),this.positionOnScreen=new T(0,0)}get sprite(){return this.sprites[this.direction]}draw(e,t,n,i,a){let r=this.sprite||this.sprites.down,o=i*n,c=a*n,f=e.canvas.width/2-o/2,p=e.canvas.height/2-c/2;this.moving?(this.frames.max>1&&(this.frames.elapsed+=1),this.frames.elapsed%2===0&&(this.frames.val+=1,this.frames.val>this.frames.max-1&&(this.frames.val=0))):this.frames.val=1,e.drawImage(r,this.frames.val*(r.width/this.frames.max),0,r.width/this.frames.max,r.height,f+this.positionOnScreen.x,p+this.positionOnScreen.y,r.width/this.frames.max*n,r.height*n)}updatePosition(e,t){this.positionOnMap.x=e.x+t.x,this.positionOnMap.y=e.y+t.y}}class zt{constructor(e,t,n,i,a){l(this,"down");l(this,"up");l(this,"left");l(this,"right");l(this,"battle");l(this,"width",80);l(this,"height",80);this.down=e,this.up=t,this.left=n,this.right=i,this.battle=a}}const E={up:{pressed:!1},down:{pressed:!1},left:{pressed:!1},right:{pressed:!1}};let ee={key:""};function We(s){return e=>{switch(e.key){case"ArrowDown":E.down.pressed=!1;break;case"ArrowUp":E.up.pressed=!1;break;case"ArrowRight":E.right.pressed=!1;break;case"ArrowLeft":E.left.pressed=!1;break}s.moving=!1}}function Xe(){return s=>{switch(s.key){case"ArrowDown":ee.key="ArrowDown",E.down.pressed=!0;break;case"ArrowUp":ee.key="ArrowUp",E.up.pressed=!0;break;case"ArrowRight":ee.key="ArrowRight",E.right.pressed=!0;break;case"ArrowLeft":ee.key="ArrowLeft",E.left.pressed=!0;break}}}class me{constructor(e,t,n,i,a,r,o,c,f,p=new te(1,1,1,1,1,1),d=new te(0,0,0,0,0,0)){l(this,"id");l(this,"name");l(this,"types");l(this,"abilities");l(this,"baseStats");l(this,"ivs");l(this,"evs");l(this,"evolution");l(this,"currentStats",new te);l(this,"currentHp",1);l(this,"currentXp",0);l(this,"xpToNextLevel",0);l(this,"currentAbility");l(this,"level",5);l(this,"evsToDistribute",0);l(this,"fainted");l(this,"moves");l(this,"isShiny",!1);l(this,"sprites");l(this,"position");l(this,"currentImage");l(this,"currentImage2");l(this,"height",0);l(this,"spriteScale",1);l(this,"frames",{max:2,val:0,elapsed:0});this.id=e,this.name=t,this.types=n,this.abilities=i,this.baseStats=a,this.evolution=r,this.fainted=!1,this.ivs=p,this.evs=d,this.updateCurrentStats(),this.currentHp=this.currentStats.HP,this.currentAbility=c||this.abilities[0],this.moves=f||[],this.sprites=o,this.position=new T(0,0)}get totalEvs(){return this.evs.attack+this.evs.defense+this.evs.specialAttack+this.evs.specialDefense+this.evs.speed+this.evs.HP}selectMove(e,t){let n=Math.floor(Math.random()*this.moves.length),i=this.moves[n];return e==="Easy"&&t&&((t==null?void 0:t.types.length)===2?this.moves.find(r=>r.type===t.types[0]&&r.power>0):this.moves.find(r=>(r.type===t.types[0]||r.type===t.types[1])&&r.power>0)),i}levelUp(){let e=this.currentStats.HP;this.level+=1,console.log("from:",this.currentStats),this.updateCurrentStats(),console.log("to:",this.currentStats),e=this.currentStats.HP-e,this.currentHp+=e,this.currentXp=0,this.checkForNewMoves(),this.checkForEvolutions()}addXp(e,t){if(this.evsToDistribute+=this.totalEvs+t<=255?t:this.totalEvs+t-255,!(this.level>=100)){if(this.xpToNextLevel<e){const n=e-this.xpToNextLevel,i=e-n;this.currentXp+=i}else this.currentXp+=e;this.currentXp>=this.xpToNextLevel&&this.levelUp()}}draw(e,t="front"){var a;this.isShiny&&(t="shiny"),this.currentImage||(this.currentImage=new Image,this.currentImage.src=this.sprites[t]),this.currentImage2||(this.currentImage2=new Image,this.currentImage2.src=this.sprites.front2),this.frames.elapsed>=100&&(this.frames.elapsed=0);let n=t==="front"&&this.currentImage.complete&&((a=this.currentImage2)==null?void 0:a.complete)||t!=="front"&&this.currentImage.complete,i=t!=="front"?this.currentImage:this.frames.elapsed<100?this.currentImage:this.currentImage2;n&&(this.frames.elapsed++,e.drawImage(i,0,0,this.sprites.width,this.sprites.height,this.position.x,this.position.y,this.sprites.width*this.spriteScale*2.5,this.sprites.height*this.spriteScale*2.5))}checkForNewMoves(){}checkForEvolutions(){this.evolution&&this.level>=this.evolution.level&&this.evolve()}evolve(){this.id++;const t=(localStorage.getItem("pokedex")&&JSON.parse(localStorage.getItem("pokedex")||"[]")||[]).find(n=>n.id===this.id);t&&(Object.setPrototypeOf(t,me.prototype),this.baseStats=t.baseStats,this.updateCurrentStats(),this.sprites=t.sprites,this.currentImage=void 0,this.currentImage2=void 0,this.spriteScale=t.spriteScale,this.height=t.height)}updateCurrentStats(){this.currentStats=this.fromBaseStats()}addEvs(e){if(e){let t=this.totalEvs;this.evs.HP+=this.evs.HP+e.HP<=255&&t+e.HP<512?e.HP:0,this.evs.attack+=this.evs.attack+e.attack<=255&&t+e.attack<512?e.attack:0,this.evs.defense+=this.evs.defense+e.defense<=255&&t+e.defense<512?e.defense:0,this.evs.specialAttack+=this.evs.specialAttack+e.specialAttack<=255&&t+e.specialAttack<512?e.specialAttack:0,this.evs.specialDefense+=this.evs.specialDefense+e.specialDefense<=255&&t+e.specialDefense<512?e.specialDefense:0,this.evs.speed+=this.evs.speed+e.speed<=255&&t+e.speed<512?e.speed:0}}fromBaseStats(){return new te(Math.floor((this.ivs.HP+this.baseStats.HP*2+this.evs.HP/4)*this.level/100+10+this.level),Math.floor((this.ivs.attack+this.baseStats.attack*2+this.evs.attack/4)*this.level/100+5),Math.floor((this.ivs.defense+this.baseStats.defense*2+this.evs.defense/4)*this.level/100+5),Math.floor((this.ivs.specialAttack+this.baseStats.specialAttack*2+this.evs.specialAttack/4)*this.level/100+5),Math.floor((this.ivs.specialDefense+this.baseStats.specialDefense*2+this.evs.specialDefense/4)*this.level/100+5),Math.floor((this.ivs.speed+this.baseStats.speed*2+this.evs.speed/4)*this.level/100+5))}}class te{constructor(e=0,t=0,n=0,i=0,a=0,r=0){l(this,"HP");l(this,"attack");l(this,"defense");l(this,"specialAttack");l(this,"specialDefense");l(this,"speed");this.HP=e,this.attack=t,this.defense=n,this.specialAttack=i,this.specialDefense=a,this.speed=r}}class Ot{constructor(e,t,n,i){l(this,"front");l(this,"front2");l(this,"back");l(this,"shiny");l(this,"width",80);l(this,"height",80);this.front=e,this.front2=t,this.back=n,this.shiny=i}}class ve{constructor(e,t,n,i,a,r,o,c,f,p){l(this,"name");l(this,"type");l(this,"category");l(this,"power");l(this,"accuracy");l(this,"pp");l(this,"currentPp");l(this,"priority");l(this,"effect");l(this,"effectChance");l(this,"description");this.name=e,this.type=t,this.category=n,this.power=i,this.accuracy=a,this.pp=r,this.currentPp=r,this.priority=o,this.effect=c,this.effectChance=f,this.description=p}}class It{constructor(e,t,n){l(this,"player");l(this,"playerCurrentMonster");l(this,"opponent");l(this,"opponentCurrentMonster");l(this,"isPlayerTurn");l(this,"turnStack");l(this,"initialOpponentPosition");l(this,"initialAllyPosition");l(this,"escapeAttempts",0);l(this,"onClose",()=>{});l(this,"currentMessage","What will you do ?");l(this,"sleep",e=>new Promise(t=>setTimeout(t,e)));var i,a;this.player=e,this.opponent=t,this.playerCurrentMonster=e.monsters[0],this.opponentCurrentMonster=this.wild?t:t.monsters[0],this.turnStack=[],this.initialOpponentPosition=new T(n.width/4*3-(t==null?void 0:t.sprites.width)*2.5*(t==null?void 0:t.spriteScale)/2,n.height/2-(t==null?void 0:t.sprites.height)*2.5*(t==null?void 0:t.spriteScale)-12*2.5),this.initialAllyPosition=new T(n.width/4-((i=this.playerCurrentMonster)==null?void 0:i.sprites.width)*2.5*this.playerCurrentMonster.spriteScale/2,n.height*.75-((a=this.playerCurrentMonster)==null?void 0:a.sprites.height)*2.5*this.playerCurrentMonster.spriteScale+15*2.5),this.playerCurrentMonster.position=this.initialAllyPosition,this.opponentCurrentMonster.position=this.initialOpponentPosition,this.isPlayerTurn=!0}get wild(){return this.opponent instanceof me}selectAction(e){this.isPlayerTurn=!1,e instanceof Pe&&this.playerCurrentMonster.currentStats.speed>this.opponentCurrentMonster.currentStats.speed||e instanceof Le||e instanceof Ye||e instanceof Ve?(this.turnStack.push(e),this.selectOpponentAction()):(this.selectOpponentAction(),this.turnStack.push(e)),this.executeAction(this.turnStack.shift())}runAway(){if(this.wild){this.escapeAttempts++;const e=Math.random()*255;Math.floor(this.opponentCurrentMonster.currentStats.speed*128/this.playerCurrentMonster.currentStats.speed)+30*this.escapeAttempts*e>255?(this.turnStack=[],this.turnStack.push(new ze(this.playerCurrentMonster)),this.turnStack.unshift(new K("You ran away safely!",this.playerCurrentMonster))):this.turnStack.unshift(new K("Failed to run away!",this.playerCurrentMonster))}else this.turnStack.unshift(new K("You can't run away from a trainer battle!",this.playerCurrentMonster))}attack(e){const t=e.initiator,n=e.target==="opponent"?this.opponentCurrentMonster:this.playerCurrentMonster,i=this.calculateDamage(t,n,e.move),a=[];a.push(new K(t.name+" used "+e.move.name+"!",e.initiator)),i.immune?a.push(new K("It doesn't affect "+n.name+"...",e.initiator)):i.notVeryEffective?a.push(new K("It's not very effective...",e.initiator)):i.superEffective&&a.push(new K("It's super effective!",e.initiator)),i.critical&&a.push(new K("A critical hit!",e.initiator)),a.push(new Ze(i.damages,e.target,e.initiator)),a.reverse().forEach(r=>this.turnStack.unshift(r))}calculateDamage(e,t,n){let i=new Ht;if(n.category!=="Status"){const a=n.category==="Physical"?e.currentStats.attack:e.currentStats.specialAttack,r=n.category==="Physical"?t.currentStats.defense:t.currentStats.specialDefense,o=this.calculateTypeEffectiveness(n.type,t.types);i.superEffective=o>1,i.notVeryEffective=o<1,i.immune=o===0;const c=i.immune?0:this.calculateCritical();i.critical=c>1;const f=Math.random()*(1-.85)+.85,p=this.calculateStab(e,n),h=o*c*f*p*1;i.damages=Math.floor(((2*e.level/5+2)*n.power*a/r/50+2)*h)}else i.damages=0;return i}calculateTypeEffectiveness(e,t){return t.reduce((n,i)=>{const a=Dt(e,i);return n*a},1)}calculateCritical(){return Math.random()<.0625?1.5:1}calculateStab(e,t){return e.types.includes(t.type)?1.5:1}selectOpponentAction(){const e=this.opponentCurrentMonster.selectMove("Easy");this.turnStack.push(new Pe(e,"ally",this.opponentCurrentMonster))}executeAction(e){var t;e&&(e instanceof Pe&&!e.initiator.fainted?this.attack(e):e instanceof Le?this.runAway():e instanceof Ye||e instanceof Ve||(e instanceof K?this.currentMessage=e.description:e instanceof Ze?this.removeHP(e):e instanceof ze&&this.onClose())),(t=this.turnStack)!=null&&t.length||0>0?this.sleep(1e3).then(()=>{var n;return this.executeAction((n=this.turnStack)==null?void 0:n.shift())}):this.isPlayerTurn=!0}removeHP(e){const t=e.target==="opponent"?this.opponentCurrentMonster:this.playerCurrentMonster;t.currentHp-=e.damages,t.currentHp<=0&&(t.currentHp=0,t.fainted=!0,this.turnStack=[],this.turnStack.push(new K(t.name+" fainted!",e.initiator)),(this.wild||this.opponent instanceof at&&this.opponent.monsters.every(n=>n.fainted))&&(this.turnStack.unshift(new ze(e.initiator)),this.turnStack.unshift(new K("You won the battle!",e.initiator)),setTimeout(()=>{this.onClose()},1e3)))}}class Ht{constructor(){l(this,"superEffective",!1);l(this,"notVeryEffective",!1);l(this,"immune",!1);l(this,"critical",!1);l(this,"effectSuccess",!1);l(this,"effectApplied","");l(this,"damages",0)}}class ze{constructor(e){l(this,"name");l(this,"description");l(this,"initiator");this.name="End Battle",this.description="End Battle",this.initiator=e}}class Ze{constructor(e,t,n){l(this,"name");l(this,"description");l(this,"damages");l(this,"target");l(this,"initiator");this.name="Remove HP",this.description="Remove HP",this.damages=e,this.target=t,this.initiator=n}}class K{constructor(e,t){l(this,"name");l(this,"description");l(this,"initiator");this.name="Message",this.description=e,this.initiator=t}}class Le{constructor(e){l(this,"description");l(this,"name");l(this,"initiator");this.name="Run Away",this.description="Run away from the battle",this.initiator=e}}class Ye{constructor(e,t){l(this,"description");l(this,"name");l(this,"targetIdx");l(this,"initiator");this.name="Change Pokemon",this.description="Change the current pokemon",this.targetIdx=e,this.initiator=t}}class Pe{constructor(e,t,n){l(this,"name");l(this,"description");l(this,"move");l(this,"target");l(this,"initiator");this.name=e.name,this.description=e.description,this.move=e,this.target=t,this.initiator=n}}class Ve{constructor(e,t,n,i,a,r=0){l(this,"description");l(this,"name");l(this,"itemId");l(this,"targetType");l(this,"targetIdx");l(this,"initiator");this.name=e,this.description=t,this.itemId=n,this.targetType=i,this.targetIdx=r,this.initiator=a}}class Lt{constructor(e,t){l(this,"position");l(this,"image");l(this,"width",0);l(this,"height",0);this.position=e,this.image=t,this.image.onload=()=>{this.width=this.image.width,this.height=this.image.height}}draw(e,t){e.drawImage(this.image,0,0,this.image.width,this.image.height,0,0,t.width,t.height*.75)}}const ot=new Image;ot.src="src/assets/battle/battle-grass.png";const Bt=new Lt(new T(0,0),ot);function Dt(s,e){return Tt[s.toLowerCase()][e.toLowerCase()]}const Tt={normal:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:.5,ghost:0,dragon:1,dark:1,steel:.5},fire:{normal:1,fire:.5,water:.5,electric:1,grass:2,ice:2,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:2,rock:.5,ghost:1,dragon:.5,dark:1,steel:2},water:{normal:1,fire:2,water:.5,electric:1,grass:.5,ice:1,fighting:1,poison:1,ground:2,flying:1,psychic:1,bug:1,rock:2,ghost:1,dragon:.5,dark:1,steel:1},electric:{normal:1,fire:1,water:2,electric:.5,grass:.5,ice:1,fighting:1,poison:1,ground:0,flying:2,psychic:1,bug:1,rock:1,ghost:1,dragon:.5,dark:1,steel:1},grass:{normal:1,fire:.5,water:2,electric:1,grass:.5,ice:1,fighting:1,poison:.5,ground:2,flying:.5,psychic:1,bug:.5,rock:2,ghost:1,dragon:.5,dark:1,steel:.5},ice:{normal:1,fire:.5,water:.5,electric:1,grass:2,ice:.5,fighting:1,poison:1,ground:2,flying:2,psychic:1,bug:1,rock:1,ghost:1,dragon:2,dark:1,steel:.5},fighting:{normal:2,fire:1,water:1,electric:1,grass:1,ice:2,fighting:1,poison:.5,ground:1,flying:.5,psychic:.5,bug:.5,rock:2,ghost:0,dragon:1,dark:2,steel:2},poison:{normal:1,fire:1,water:1,electric:1,grass:2,ice:1,fighting:1,poison:.5,ground:.5,flying:1,psychic:1,bug:1,rock:.5,ghost:.5,dragon:1,dark:1,steel:0},ground:{normal:1,fire:2,water:1,electric:2,grass:.5,ice:1,fighting:1,poison:2,ground:1,flying:0,psychic:1,bug:.5,rock:2,ghost:1,dragon:1,dark:1,steel:2},flying:{normal:1,fire:1,water:1,electric:.5,grass:2,ice:1,fighting:2,poison:1,ground:1,flying:1,psychic:1,bug:2,rock:.5,ghost:1,dragon:1,dark:1,steel:.5},psychic:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:2,poison:2,ground:1,flying:1,psychic:.5,bug:1,rock:1,ghost:1,dragon:1,dark:0,steel:.5},bug:{normal:1,fire:.5,water:1,electric:1,grass:2,ice:1,fighting:.5,poison:.5,ground:1,flying:.5,psychic:2,bug:1,rock:1,ghost:.5,dragon:1,dark:2,steel:.5},rock:{normal:1,fire:2,water:1,electric:1,grass:1,ice:2,fighting:.5,poison:1,ground:.5,flying:2,psychic:1,bug:2,rock:1,ghost:1,dragon:1,dark:1,steel:.5},ghost:{normal:0,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:2,bug:1,rock:1,ghost:2,dragon:1,dark:.5,steel:.5},dragon:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:1,ghost:1,dragon:2,dark:1,steel:.5},dark:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:.5,poison:1,ground:1,flying:1,psychic:2,bug:1,rock:1,ghost:2,dragon:1,dark:.5,steel:.5},steel:{normal:1,fire:.5,water:.5,electric:.5,grass:1,ice:2,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:2,ghost:1,dragon:1,dark:1,steel:.5}};function Ft(s){ce(s,"svelte-ibel69",".ally-info.svelte-ibel69.svelte-ibel69{opacity:0;visibility:hidden;z-index:9;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;bottom:26dvh;right:-30dvw;transition:right 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly;font-size:46px}.ally-info.opened.svelte-ibel69.svelte-ibel69{opacity:1;visibility:visible;right:1dvw}.ally-info.svelte-ibel69 .name-lvl.svelte-ibel69{display:flex;justify-content:space-between;align-items:center}.ally-info.svelte-ibel69 .status.svelte-ibel69{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.ally-info.svelte-ibel69 .hp.svelte-ibel69{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.ally-info.svelte-ibel69 .hp span.svelte-ibel69{padding:0 0 0 12px;font-weight:bold}.ally-info.svelte-ibel69 .hp .progressbar-wrapper.svelte-ibel69{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.ally-info.svelte-ibel69 .hp .progressbar-wrapper .progressbar.svelte-ibel69{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px;transition:width 1s ease-in-out}.ally-info.svelte-ibel69 .hp .progressbar-wrapper .progressbar.warning.svelte-ibel69{background:rgb(255, 241, 164);background:linear-gradient(0deg, rgb(255, 241, 164) 0%, rgb(255, 194, 16) 30%, rgb(255, 194, 16) 50%, rgb(255, 194, 16) 70%, rgb(255, 241, 164) 100%)}.ally-info.svelte-ibel69 .hp .progressbar-wrapper .progressbar.danger.svelte-ibel69{background:rgb(244, 177, 159);background:linear-gradient(0deg, rgb(244, 177, 159) 0%, rgb(223, 85, 48) 30%, rgb(223, 85, 48) 50%, rgb(223, 85, 48) 70%, rgb(244, 177, 159) 100%)}@media screen and (max-width: 1100px) and (orientation: portrait){.ally-info.svelte-ibel69.svelte-ibel69{bottom:16dvh;height:18dvw;width:30dvh}.ally-info.svelte-ibel69 .hp.svelte-ibel69{width:80%}}")}function jt(s){let e,t,n,i=s[1].name+"",a,r,o,c,f=s[1].level+"",p,d,h,b,m,x,S,_,M,C=s[1].currentHp+"",q,k,g=s[1].currentStats.HP+"",I;return{c(){e=w("div"),t=w("div"),n=w("span"),a=z(i),r=A(),o=w("span"),c=z("Lv "),p=z(f),d=A(),h=w("div"),b=w("div"),m=w("span"),m.textContent="HP",x=A(),S=w("div"),_=w("div"),M=A(),q=z(C),k=z(" / "),I=z(g),v(n,"class","svelte-ibel69"),v(o,"class","svelte-ibel69"),v(t,"class","name-lvl svelte-ibel69"),v(m,"class","svelte-ibel69"),v(_,"class","progressbar svelte-ibel69"),se(_,"--width",s[2]+"%"),$(_,"warning",s[2]<=50),$(_,"danger",s[2]<15),v(S,"class","progressbar-wrapper svelte-ibel69"),v(b,"class","hp svelte-ibel69"),v(h,"class","status svelte-ibel69"),v(e,"class","ally-info svelte-ibel69"),$(e,"opened",s[0])},m(P,L){H(P,e,L),u(e,t),u(t,n),u(n,a),u(t,r),u(t,o),u(o,c),u(o,p),u(e,d),u(e,h),u(h,b),u(b,m),u(b,x),u(b,S),u(S,_),u(h,M),u(h,q),u(h,k),u(h,I)},p(P,[L]){L&2&&i!==(i=P[1].name+"")&&R(a,i),L&2&&f!==(f=P[1].level+"")&&R(p,f),L&4&&se(_,"--width",P[2]+"%"),L&4&&$(_,"warning",P[2]<=50),L&4&&$(_,"danger",P[2]<15),L&2&&C!==(C=P[1].currentHp+"")&&R(q,C),L&2&&g!==(g=P[1].currentStats.HP+"")&&R(I,g),L&1&&$(e,"opened",P[0])},i:N,o:N,d(P){P&&O(e)}}}function Nt(s,e,t){let n,{opened:i}=e,{monster:a}=e;return s.$$set=r=>{"opened"in r&&t(0,i=r.opened),"monster"in r&&t(1,a=r.monster)},s.$$.update=()=>{s.$$.dirty&2&&t(2,n=Math.floor(a.currentHp*100/a.currentStats.HP))},[i,a,n]}class lt extends pe{constructor(e){super(),de(this,e,Nt,jt,le,{opened:0,monster:1},Ft)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),D()}get monster(){return this.$$.ctx[1]}set monster(e){this.$$set({monster:e}),D()}}fe(lt,{opened:{},monster:{}},[],[],!0);function Rt(s){ce(s,"svelte-b2mamz",".action-bar.svelte-b2mamz.svelte-b2mamz{opacity:0;visibility:hidden;z-index:9;background-color:white;height:25dvh;width:100dvw;position:absolute;bottom:-25dvh;left:0;transition:bottom 0.5s ease-in-out;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;display:flex;font-size:64px}.action-bar.opened.svelte-b2mamz.svelte-b2mamz{opacity:1;visibility:visible;bottom:0}.action-bar.svelte-b2mamz .info.svelte-b2mamz{width:50%;height:100%;display:flex;align-items:center;align-content:center;justify-content:space-around;position:relative}.action-bar.svelte-b2mamz .info ._inner.svelte-b2mamz{position:absolute;left:17px;z-index:1;height:calc(100% - 55px);border:10px solid black;border-radius:10px;display:flex;align-items:center;justify-content:center;width:100%;text-transform:capitalize}.action-bar.svelte-b2mamz .info ._inner .move-desc.svelte-b2mamz{text-transform:initial;font-size:46px;display:flex;flex-wrap:wrap;gap:16px;word-break:break-word;box-sizing:border-box;padding:0 20px}.action-bar.svelte-b2mamz .info ._inner .move-desc p.svelte-b2mamz{flex:45%;margin:0}.action-bar.svelte-b2mamz .actions.svelte-b2mamz,.action-bar.svelte-b2mamz .moves.svelte-b2mamz{width:50%;height:100%;display:flex;background:#FFFFFF;border:14px solid #595b59;border-radius:8px;box-sizing:border-box;padding:12px;z-index:2;flex-wrap:wrap;gap:12px}@media screen and (max-width: 1100px) and (orientation: portrait){.action-bar.svelte-b2mamz.svelte-b2mamz{bottom:0;right:0;width:100dvh;height:33dvw}}.action-btn.svelte-b2mamz.svelte-b2mamz{background-color:var(--color);font-size:64px;color:white;border-radius:24px;border:6px solid #595b59;font-family:pokemon, serif;transition:color 0.3s ease-in-out, opacity 0.3s ease-in-out;flex:49%}.action-btn.svelte-b2mamz.svelte-b2mamz:hover,.action-btn.selected.svelte-b2mamz.svelte-b2mamz{cursor:pointer;opacity:0.96;color:#262626}.action-btn[disabled].svelte-b2mamz.svelte-b2mamz{opacity:0.5;cursor:not-allowed;pointer-events:none}@media(max-width: 1280px){.action-btn.svelte-b2mamz.svelte-b2mamz{font-size:48px;flex:30%}}")}function Ge(s,e,t){const n=s.slice();return n[11]=e[t],n[13]=t,n}function qt(s){var P,L,B,G,ye,ke;let e,t,n=((P=s[1])==null?void 0:P.playerCurrentMonster.moves[s[3]].description)+"",i,a,r,o=((L=s[1])==null?void 0:L.playerCurrentMonster.moves[s[3]].currentPp)+"",c,f,p=((B=s[1])==null?void 0:B.playerCurrentMonster.moves[s[3]].pp)+"",d,h,b,m=((G=s[1])==null?void 0:G.playerCurrentMonster.moves[s[3]].category)+"",x,S,_,M=((ye=s[1])==null?void 0:ye.playerCurrentMonster.moves[s[3]].power)+"",C,q,k=((ke=s[1])==null?void 0:ke.playerCurrentMonster.moves[s[3]].accuracy)+"",g,I;return{c(){e=w("div"),t=w("p"),i=z(n),a=A(),r=w("p"),c=z(o),f=z(`
                        / `),d=z(p),h=A(),b=w("p"),x=z(m),S=A(),_=w("p"),C=z(M),q=z(`
                        | `),g=z(k),I=z(" %"),v(t,"class","svelte-b2mamz"),v(r,"class","svelte-b2mamz"),v(b,"class","svelte-b2mamz"),v(_,"class","svelte-b2mamz"),v(e,"class","move-desc svelte-b2mamz")},m(F,Q){H(F,e,Q),u(e,t),u(t,i),u(e,a),u(e,r),u(r,c),u(r,f),u(r,d),u(e,h),u(e,b),u(b,x),u(e,S),u(e,_),u(_,C),u(_,q),u(_,g),u(_,I)},p(F,Q){var _e,xe,Se,y,J,U;Q&10&&n!==(n=((_e=F[1])==null?void 0:_e.playerCurrentMonster.moves[F[3]].description)+"")&&R(i,n),Q&10&&o!==(o=((xe=F[1])==null?void 0:xe.playerCurrentMonster.moves[F[3]].currentPp)+"")&&R(c,o),Q&10&&p!==(p=((Se=F[1])==null?void 0:Se.playerCurrentMonster.moves[F[3]].pp)+"")&&R(d,p),Q&10&&m!==(m=((y=F[1])==null?void 0:y.playerCurrentMonster.moves[F[3]].category)+"")&&R(x,m),Q&10&&M!==(M=((J=F[1])==null?void 0:J.playerCurrentMonster.moves[F[3]].power)+"")&&R(C,M),Q&10&&k!==(k=((U=F[1])==null?void 0:U.playerCurrentMonster.moves[F[3]].accuracy)+"")&&R(g,k)},d(F){F&&O(e)}}}function Ut(s){var n;let e=((n=s[1])==null?void 0:n.currentMessage.toUpperCase())+"",t;return{c(){t=z(e)},m(i,a){H(i,t,a)},p(i,a){var r;a&2&&e!==(e=((r=i[1])==null?void 0:r.currentMessage.toUpperCase())+"")&&R(t,e)},d(i){i&&O(t)}}}function Wt(s){let e,t,n,i,a,r,o,c,f,p,d,h,b,m;return{c(){e=w("div"),t=w("button"),n=z("FIGHT"),i=A(),a=w("button"),r=z("BAG"),o=A(),c=w("button"),f=z("POKEMONS"),p=A(),d=w("button"),h=z("RUN"),v(t,"class","action-btn svelte-b2mamz"),se(t,"--color","#dc5959"),t.disabled=s[5],$(t,"selected",s[4]===0),v(a,"class","action-btn svelte-b2mamz"),se(a,"--color","#eca859"),a.disabled=s[5],$(a,"selected",s[4]===1),v(c,"class","action-btn svelte-b2mamz"),se(c,"--color","#7EAF53"),c.disabled=s[5],$(c,"selected",s[4]===2),v(d,"class","action-btn svelte-b2mamz"),se(d,"--color","#599bdc"),d.disabled=s[5],$(d,"selected",s[4]===2),v(e,"class","actions svelte-b2mamz")},m(x,S){H(x,e,S),u(e,t),u(t,n),u(e,i),u(e,a),u(a,r),u(e,o),u(e,c),u(c,f),u(e,p),u(e,d),u(d,h),b||(m=[W(t,"click",s[6]),W(d,"click",s[7])],b=!0)},p(x,S){S&32&&(t.disabled=x[5]),S&16&&$(t,"selected",x[4]===0),S&32&&(a.disabled=x[5]),S&16&&$(a,"selected",x[4]===1),S&32&&(c.disabled=x[5]),S&16&&$(c,"selected",x[4]===2),S&32&&(d.disabled=x[5]),S&16&&$(d,"selected",x[4]===2)},d(x){x&&O(e),b=!1,ne(m)}}}function Xt(s){let e,t=Ue(s[1].playerCurrentMonster.moves),n=[];for(let i=0;i<t.length;i+=1)n[i]=Je(Ge(s,t,i));return{c(){e=w("div");for(let i=0;i<n.length;i+=1)n[i].c();v(e,"class","moves svelte-b2mamz")},m(i,a){H(i,e,a);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(i,a){if(a&298){t=Ue(i[1].playerCurrentMonster.moves);let r;for(r=0;r<t.length;r+=1){const o=Ge(i,t,r);n[r]?n[r].p(o,a):(n[r]=Je(o),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(i){i&&O(e),kt(n,i)}}}function Je(s){let e,t=s[11].name.toUpperCase()+"",n,i,a,r;function o(){return s[9](s[13])}function c(){return s[10](s[11])}return{c(){e=w("button"),n=z(t),i=A(),v(e,"class","action-btn svelte-b2mamz"),se(e,"--color","#dc5959"),e.disabled=s[5],$(e,"selected",s[3]===s[13])},m(f,p){H(f,e,p),u(e,n),u(e,i),a||(r=[W(e,"mouseover",o),W(e,"click",c)],a=!0)},p(f,p){s=f,p&2&&t!==(t=s[11].name.toUpperCase()+"")&&R(n,t),p&32&&(e.disabled=s[5]),p&8&&$(e,"selected",s[3]===s[13])},d(f){f&&O(e),a=!1,ne(r)}}}function Zt(s){let e,t,n,i;function a(d,h){return d[2]?qt:Ut}let r=a(s),o=r(s);function c(d,h){return d[2]?Xt:Wt}let f=c(s),p=f(s);return{c(){e=w("div"),t=w("div"),n=w("div"),o.c(),i=A(),p.c(),v(n,"class","_inner svelte-b2mamz"),v(t,"class","info svelte-b2mamz"),v(e,"class","action-bar svelte-b2mamz"),$(e,"opened",s[0])},m(d,h){H(d,e,h),u(e,t),u(t,n),o.m(n,null),u(e,i),p.m(e,null)},p(d,[h]){r===(r=a(d))&&o?o.p(d,h):(o.d(1),o=r(d),o&&(o.c(),o.m(n,null))),f===(f=c(d))&&p?p.p(d,h):(p.d(1),p=f(d),p&&(p.c(),p.m(e,null))),h&1&&$(e,"opened",d[0])},i:N,o:N,d(d){d&&O(e),o.d(),p.d()}}}function Yt(s,e,t){let n,{opened:i}=e,{battleState:a}=e,r=!1,o=0,c=0;function f(){t(2,r=!r)}function p(){console.log(a),a.selectAction(new Le(a.playerCurrentMonster))}function d(m){a.selectAction(new Pe(m,"opponent",a.playerCurrentMonster)),t(2,r=!1)}window.addEventListener("keydown",m=>{m.key==="ArrowUp"?r?t(3,o=o===0?a.playerCurrentMonster.moves.length-1:o-1):t(4,c=c===0?3:c-1):m.key==="ArrowDown"?r?t(3,o=o===a.playerCurrentMonster.moves.length-1?0:o+1):t(4,c=c===3?0:c+1):m.key==="Enter"&&(r?d(a.playerCurrentMonster.moves[o]):c===0?f():c===3&&p()),console.log(c,o)});const h=m=>t(3,o=m),b=m=>d(m);return s.$$set=m=>{"opened"in m&&t(0,i=m.opened),"battleState"in m&&t(1,a=m.battleState)},s.$$.update=()=>{s.$$.dirty&2&&t(5,n=a&&!a.isPlayerTurn||!1)},[i,a,r,o,c,n,f,p,d,h,b]}class ct extends pe{constructor(e){super(),de(this,e,Yt,Zt,le,{opened:0,battleState:1},Rt)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),D()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),D()}}fe(ct,{opened:{},battleState:{}},[],[],!0);function Vt(s){ce(s,"svelte-10lmmhk",".enemy-info.svelte-10lmmhk.svelte-10lmmhk{opacity:0;visibility:hidden;z-index:9;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;top:2dvh;left:-30dvw;transition:left 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly;font-size:46px}.enemy-info.opened.svelte-10lmmhk.svelte-10lmmhk{opacity:1;visibility:visible;left:1dvw}.enemy-info.svelte-10lmmhk .name-lvl.svelte-10lmmhk{display:flex;justify-content:space-between;align-items:center}.enemy-info.svelte-10lmmhk .status.svelte-10lmmhk{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.enemy-info.svelte-10lmmhk .hp.svelte-10lmmhk{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.enemy-info.svelte-10lmmhk .hp span.svelte-10lmmhk{padding:0 0 0 12px;font-weight:bold}.enemy-info.svelte-10lmmhk .hp .progressbar-wrapper.svelte-10lmmhk{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.enemy-info.svelte-10lmmhk .hp .progressbar-wrapper .progressbar.svelte-10lmmhk{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px;transition:width 1s ease-in-out, background 1s ease-in-out 1s}.enemy-info.svelte-10lmmhk .hp .progressbar-wrapper .progressbar.warning.svelte-10lmmhk{background:rgb(255, 241, 164);background:linear-gradient(0deg, rgb(255, 241, 164) 0%, rgb(255, 194, 16) 30%, rgb(255, 194, 16) 50%, rgb(255, 194, 16) 70%, rgb(255, 241, 164) 100%)}.enemy-info.svelte-10lmmhk .hp .progressbar-wrapper .progressbar.danger.svelte-10lmmhk{background:rgb(244, 177, 159);background:linear-gradient(0deg, rgb(244, 177, 159) 0%, rgb(223, 85, 48) 30%, rgb(223, 85, 48) 50%, rgb(223, 85, 48) 70%, rgb(244, 177, 159) 100%)}@media screen and (max-width: 1100px) and (orientation: portrait){.enemy-info.svelte-10lmmhk.svelte-10lmmhk{bottom:30dvh;height:15dvw;width:30dvh}.enemy-info.svelte-10lmmhk .hp.svelte-10lmmhk{width:80%}}")}function Gt(s){let e,t,n,i=s[1].name+"",a,r,o,c,f=s[1].level+"",p,d,h,b,m,x,S,_;return{c(){e=w("div"),t=w("div"),n=w("span"),a=z(i),r=A(),o=w("span"),c=z("Lv "),p=z(f),d=A(),h=w("div"),b=w("div"),m=w("span"),m.textContent="HP",x=A(),S=w("div"),_=w("div"),v(n,"class","svelte-10lmmhk"),v(o,"class","svelte-10lmmhk"),v(t,"class","name-lvl svelte-10lmmhk"),v(m,"class","svelte-10lmmhk"),v(_,"class","progressbar svelte-10lmmhk"),se(_,"--width",s[2]+"%"),$(_,"warning",s[2]<=50),$(_,"danger",s[2]<15),v(S,"class","progressbar-wrapper svelte-10lmmhk"),v(b,"class","hp svelte-10lmmhk"),v(h,"class","status svelte-10lmmhk"),v(e,"class","enemy-info svelte-10lmmhk"),$(e,"opened",s[0])},m(M,C){H(M,e,C),u(e,t),u(t,n),u(n,a),u(t,r),u(t,o),u(o,c),u(o,p),u(e,d),u(e,h),u(h,b),u(b,m),u(b,x),u(b,S),u(S,_)},p(M,[C]){C&2&&i!==(i=M[1].name+"")&&R(a,i),C&2&&f!==(f=M[1].level+"")&&R(p,f),C&4&&se(_,"--width",M[2]+"%"),C&4&&$(_,"warning",M[2]<=50),C&4&&$(_,"danger",M[2]<15),C&1&&$(e,"opened",M[0])},i:N,o:N,d(M){M&&O(e)}}}function Jt(s,e,t){let n,{opened:i}=e,{monster:a}=e;return s.$$set=r=>{"opened"in r&&t(0,i=r.opened),"monster"in r&&t(1,a=r.monster)},s.$$.update=()=>{s.$$.dirty&2&&t(2,n=Math.floor(a.currentHp*100/a.currentStats.HP))},[i,a,n]}class dt extends pe{constructor(e){super(),de(this,e,Jt,Gt,le,{opened:0,monster:1},Vt)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),D()}get monster(){return this.$$.ctx[1]}set monster(e){this.$$set({monster:e}),D()}}fe(dt,{opened:{},monster:{}},[],[],!0);function Kt(s){ce(s,"svelte-1cpai4q",".battleStart.svelte-1cpai4q{opacity:0;visibility:hidden;background:#000000;height:100dvh;width:100dvw;position:absolute;top:0;left:0;transition:opacity 0.5s ease-in-out;z-index:2}.battleStart.animate.svelte-1cpai4q{visibility:visible;animation:svelte-1cpai4q-animate 2s ease-in-out}.battleStart.hide.svelte-1cpai4q{visibility:hidden;opacity:0}@media screen and (max-width: 1100px) and (orientation: portrait){.battleStart.svelte-1cpai4q{height:100dvw;width:100dvh}}@keyframes svelte-1cpai4q-animate{0%{opacity:1}20%{opacity:0}40%{opacity:1}60%{opacity:0}80%{opacity:1}100%{opacity:0}}")}function Ke(s){let e,t,n,i,a,r,o,c,f,p,d,h;function b(g){s[3](g)}function m(g){s[4](g)}let x={};s[0]!==void 0&&(x.opened=s[0]),s[1]!==void 0&&(x.battleState=s[1]),e=new ct({props:x}),j.push(()=>Y(e,"opened",b)),j.push(()=>Y(e,"battleState",m));function S(g){s[5](g)}function _(g){s[6](g)}let M={};s[0]!==void 0&&(M.opened=s[0]),s[1].playerCurrentMonster!==void 0&&(M.monster=s[1].playerCurrentMonster),a=new lt({props:M}),j.push(()=>Y(a,"opened",S)),j.push(()=>Y(a,"monster",_));function C(g){s[7](g)}function q(g){s[8](g)}let k={};return s[0]!==void 0&&(k.opened=s[0]),s[1].opponentCurrentMonster!==void 0&&(k.monster=s[1].opponentCurrentMonster),f=new dt({props:k}),j.push(()=>Y(f,"opened",C)),j.push(()=>Y(f,"monster",q)),{c(){ge(e.$$.fragment),i=A(),ge(a.$$.fragment),c=A(),ge(f.$$.fragment)},m(g,I){ae(e,g,I),H(g,i,I),ae(a,g,I),H(g,c,I),ae(f,g,I),h=!0},p(g,I){const P={};!t&&I&1&&(t=!0,P.opened=g[0],Z(()=>t=!1)),!n&&I&2&&(n=!0,P.battleState=g[1],Z(()=>n=!1)),e.$set(P);const L={};!r&&I&1&&(r=!0,L.opened=g[0],Z(()=>r=!1)),!o&&I&2&&(o=!0,L.monster=g[1].playerCurrentMonster,Z(()=>o=!1)),a.$set(L);const B={};!p&&I&1&&(p=!0,B.opened=g[0],Z(()=>p=!1)),!d&&I&2&&(d=!0,B.monster=g[1].opponentCurrentMonster,Z(()=>d=!1)),f.$set(B)},i(g){h||(X(e.$$.fragment,g),X(a.$$.fragment,g),X(f.$$.fragment,g),h=!0)},o(g){V(e.$$.fragment,g),V(a.$$.fragment,g),V(f.$$.fragment,g),h=!1},d(g){g&&(O(i),O(c)),oe(e,g),oe(a,g),oe(f,g)}}}function Qt(s){let e,t,n,i=s[1]&&Ke(s);return{c(){i&&i.c(),e=A(),t=w("div"),t.innerHTML="",v(t,"class","battleStart svelte-1cpai4q"),$(t,"hide",s[0]),$(t,"animate",s[2])},m(a,r){i&&i.m(a,r),H(a,e,r),H(a,t,r),n=!0},p(a,[r]){a[1]?i?(i.p(a,r),r&2&&X(i,1)):(i=Ke(a),i.c(),X(i,1),i.m(e.parentNode,e)):i&&(De(),V(i,1,1,()=>{i=null}),Te()),(!n||r&1)&&$(t,"hide",a[0]),(!n||r&4)&&$(t,"animate",a[2])},i(a){n||(X(i),n=!0)},o(a){V(i),n=!1},d(a){a&&(O(e),O(t)),i&&i.d(a)}}}function es(s,e,t){let{opened:n}=e,{battleStart:i}=e,{battleState:a}=e;function r(h){n=h,t(0,n)}function o(h){a=h,t(1,a)}function c(h){n=h,t(0,n)}function f(h){s.$$.not_equal(a.playerCurrentMonster,h)&&(a.playerCurrentMonster=h,t(1,a))}function p(h){n=h,t(0,n)}function d(h){s.$$.not_equal(a.opponentCurrentMonster,h)&&(a.opponentCurrentMonster=h,t(1,a))}return s.$$set=h=>{"opened"in h&&t(0,n=h.opened),"battleStart"in h&&t(2,i=h.battleStart),"battleState"in h&&t(1,a=h.battleState)},[n,a,i,r,o,c,f,p,d]}class ft extends pe{constructor(e){super(),de(this,e,es,Qt,le,{opened:0,battleStart:2,battleState:1},Kt)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),D()}get battleStart(){return this.$$.ctx[2]}set battleStart(e){this.$$set({battleStart:e}),D()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),D()}}fe(ft,{opened:{},battleStart:{},battleState:{}},[],[],!0);function ts(s){ce(s,"svelte-1cbbcxy",'.menu.svelte-1cbbcxy.svelte-1cbbcxy{position:absolute;top:0;right:-20dvw;width:20dvw;font-size:36px;background-color:#FFFFFF;z-index:3;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:right 0.3s ease-in-out;border:3px solid #1e1e1e;border-radius:16px}.menu.svelte-1cbbcxy ul.svelte-1cbbcxy{box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;border-radius:12px;list-style:none;padding:12px 32px;margin:0;display:flex;flex-direction:column;height:100%;width:100%;align-items:center}.menu.svelte-1cbbcxy ul li.svelte-1cbbcxy{font-size:4rem;margin:1rem 0;text-align:center;cursor:pointer;flex-grow:1;width:100%;height:100%;min-height:60px;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li:hover .svelte-1cbbcxy:before{content:"";width:0;height:0;border-top:20px solid transparent;border-bottom:20px solid transparent;border-left:20px solid #262626;position:absolute;left:40px}.menu.svelte-1cbbcxy ul li button.svelte-1cbbcxy{background:none;border:none;font-size:inherit;font-family:inherit;cursor:inherit;outline:none;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li button .svelte-1cbbcxy:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%}.menu.open.svelte-1cbbcxy.svelte-1cbbcxy{opacity:1;pointer-events:all;right:0}')}function ss(s){let e;return{c(){e=w("div"),e.innerHTML='<ul class="svelte-1cbbcxy"><li class="svelte-1cbbcxy"><button tabindex="0" class="svelte-1cbbcxy">Pokedex</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Pokemon</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Bag</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Trainer</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Save</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Options</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Credits</button></li></ul>',v(e,"class","menu svelte-1cbbcxy"),$(e,"open",s[0])},m(t,n){H(t,e,n)},p(t,[n]){n&1&&$(e,"open",t[0])},i:N,o:N,d(t){t&&O(e)}}}function ns(s,e,t){let{menuOpened:n}=e,{player:i}=e;return s.$$set=a=>{"menuOpened"in a&&t(0,n=a.menuOpened),"player"in a&&t(1,i=a.player)},[n,i]}class pt extends pe{constructor(e){super(),de(this,e,ns,ss,le,{menuOpened:0,player:1},ts)}get menuOpened(){return this.$$.ctx[0]}set menuOpened(e){this.$$set({menuOpened:e}),D()}get player(){return this.$$.ctx[1]}set player(e){this.$$set({player:e}),D()}}fe(pt,{menuOpened:{},player:{}},[],[],!0);class Qe{constructor(e,t=16,n=16){l(this,"position");l(this,"width");l(this,"height");this.position=e,this.width=t,this.height=n}debug(e,t,n,i,a,r="red"){e.fillStyle=r,e.fillRect(i+this.position.x*16*n,a+this.position.y*16*n,this.width*n,this.height*n)}}const is=8,rs=806;class as{constructor(e,t,n,i,a,r,o){l(this,"background");l(this,"foreground");l(this,"width");l(this,"height");l(this,"collisions");l(this,"battleZones");l(this,"monsters");l(this,"playerInitialPosition",new T(11,11));l(this,"startingX",0);l(this,"startingY",0);this.background=e,this.foreground=t,this.width=n,this.height=i,this.collisions=this.initBoundaries(a),this.battleZones=this.initBattlesZones(r),this.monsters=o}randomMonster(){const e=this.monsters[Math.floor(Math.random()*this.monsters.length)],n=(localStorage.getItem("pokedex")&&JSON.parse(localStorage.getItem("pokedex")||"[]")||[]).find(i=>i.id===e);return Object.setPrototypeOf(n,me.prototype),n}initBattlesZones(e){const t=[];for(let i=0;i<e.length;i+=this.width)t.push(e.slice(i,this.width+i));const n=[];return t.forEach((i,a)=>{i.forEach((r,o)=>{if(r===is){const c=new Qe(new T(o,a));n.push(c)}})}),n}initBoundaries(e){const t=[];for(let i=0;i<e.length;i+=this.width)t.push(e.slice(i,this.width+i));const n=[];return t.forEach((i,a)=>{i.forEach((r,o)=>{if(r===rs){const c=new Qe(new T(o,a));n.push(c)}})}),n}drawBackground(e,t,n){let i=this.background.width*n,a=this.background.height*n,r=e.canvas.width/2-i/2,o=e.canvas.height/2-a/2;this.startingX=r+(0-t.x)*(16*n),this.startingY=o+(0-t.y)*(16*n),e.drawImage(this.background,0,0,this.background.width,this.background.height,this.startingX,this.startingY,this.background.width*n,this.background.height*n)}drawForeground(e,t){this.foreground!==null&&e.drawImage(this.foreground,t.x*16,t.y*16,this.foreground.width,this.foreground.height,0,0,this.foreground.width*3,this.foreground.height*3)}drawBoundaries(e,t,n){this.collisions.forEach(i=>{i.debug(e,t,n,this.startingX,this.startingY,"rgba(255, 0, 0, 0.5)")})}drawBattleZones(e,t,n){this.battleZones.forEach(i=>{i.debug(e,t,n,this.startingX,this.startingY,"rgba(0, 0, 255, 0.5)")})}hasBattleZoneAt(e){return this.battleZones.some(t=>t.position.x===e.x&&t.position.y===e.y)}hasBoundaryAt(e){return this.collisions.some(t=>t.position.x===e.x&&t.position.y===e.y)||e.x<0||e.y<0||e.x>this.width-1||e.y>this.height-1}}const ut=new Image;ut.src="src/assets/maps/test-map.png";const ht=new Image;ht.src="src/assets/maps/test-map-foreground.png";const os=[95],ls=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,0,806,806,0,0,806,806,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,806,806,806,806,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,806,806,806,806,834,0,0,0,0,0,0,0,0,0],cs=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ie=new as(ut,ht,20,20,ls,cs,os);function ds(s){ce(s,"svelte-5fat11",'.set.svelte-5fat11.svelte-5fat11{overflow:hidden;text-align:center;position:absolute;bottom:5dvh;left:5dvw;z-index:10}.set.svelte-5fat11 .d-pad.svelte-5fat11{display:inline-block}.d-pad.svelte-5fat11.svelte-5fat11{position:relative;width:15dvw;height:15dvw;border-radius:48%;overflow:hidden}.d-pad.svelte-5fat11.svelte-5fat11:before{content:"";position:absolute;top:50%;left:50%;border-radius:5%;transform:translate(-50%, -50%);width:66.6%;height:66.6%}.d-pad.svelte-5fat11.svelte-5fat11:after{content:"";position:absolute;display:none;z-index:2;width:20%;height:20%;top:50%;left:50%;background:rgba(221, 221, 221, 0.5);border-radius:50%;transform:translate(-50%, -50%);transition:all 0.25s;cursor:pointer}.d-pad.svelte-5fat11.svelte-5fat11:hover:after{width:30%;height:30%}.d-pad.svelte-5fat11 span.svelte-5fat11{display:block;position:absolute;-webkit-tap-highlight-color:rgba(255, 255, 255, 0);width:33.3%;height:43%;line-height:40%;color:#fff;background:rgba(221, 221, 221, 0.5);text-align:center}.d-pad.svelte-5fat11 span.svelte-5fat11:hover{background:#eee}.d-pad.svelte-5fat11 span.svelte-5fat11:before{content:"";position:absolute;width:0;height:0;border-radius:5px;border-style:solid;transition:all 0.25s}.d-pad.svelte-5fat11 span.svelte-5fat11:after{content:"";position:absolute;width:102%;height:78%;background:#fff;border-radius:20%}.d-pad.svelte-5fat11 span.left.svelte-5fat11,.d-pad.svelte-5fat11 span.right.svelte-5fat11{width:43%;height:33%}.d-pad.svelte-5fat11 span.left.svelte-5fat11:after,.d-pad.svelte-5fat11 span.right.svelte-5fat11:after{width:78%;height:102%}.d-pad.svelte-5fat11 span.up.svelte-5fat11{top:0;left:50%;transform:translate(-50%, 0);border-radius:17% 17% 50% 50%}.d-pad.svelte-5fat11 span.up.svelte-5fat11:hover{background:linear-gradient(0deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-5fat11 span.up.svelte-5fat11:after{left:0;top:0;transform:translate(-100%, 0);border-top-left-radius:50%;pointer-events:none}.d-pad.svelte-5fat11 span.up.svelte-5fat11:before{top:40%;left:50%;transform:translate(-50%, -50%);border-width:0 13px 19px 13px;border-color:transparent transparent #aaa transparent}.d-pad.svelte-5fat11 span.up.svelte-5fat11:active:before{border-bottom-color:#333}.d-pad.svelte-5fat11 span.up.svelte-5fat11:hover:before{top:35%}.d-pad.svelte-5fat11 span.down.svelte-5fat11{bottom:0;left:50%;transform:translate(-50%, 0);border-radius:50% 50% 17% 17%}.d-pad.svelte-5fat11 span.down.svelte-5fat11:hover{background:linear-gradient(180deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-5fat11 span.down.svelte-5fat11:after{right:0;bottom:0;transform:translate(100%, 0);border-bottom-right-radius:50%;pointer-events:none}.d-pad.svelte-5fat11 span.down.svelte-5fat11:before{bottom:40%;left:50%;transform:translate(-50%, 50%);border-width:19px 13px 0px 13px;border-color:#aaa transparent transparent transparent}.d-pad.svelte-5fat11 span.down.svelte-5fat11:active:before{border-top-color:#333}.d-pad.svelte-5fat11 span.down.svelte-5fat11:hover:before{bottom:35%}.d-pad.svelte-5fat11 span.left.svelte-5fat11{top:50%;left:0;transform:translate(0, -50%);border-radius:17% 50% 50% 17%}.d-pad.svelte-5fat11 span.left.svelte-5fat11:hover{background:linear-gradient(-90deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-5fat11 span.left.svelte-5fat11:after{left:0;bottom:0;transform:translate(0, 100%);border-bottom-left-radius:50%;pointer-events:none}.d-pad.svelte-5fat11 span.left.svelte-5fat11:before{left:40%;top:50%;transform:translate(-50%, -50%);border-width:13px 19px 13px 0;border-color:transparent #aaa transparent transparent}.d-pad.svelte-5fat11 span.left.svelte-5fat11:active:before{border-right-color:#333}.d-pad.svelte-5fat11 span.left.svelte-5fat11:hover:before{left:35%}.d-pad.svelte-5fat11 span.right.svelte-5fat11{top:50%;right:0;transform:translate(0, -50%);border-radius:50% 17% 17% 50%}.d-pad.svelte-5fat11 span.right.svelte-5fat11:hover{background:linear-gradient(90deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-5fat11 span.right.svelte-5fat11:after{right:0;top:0;transform:translate(0, -100%);border-top-right-radius:50%;pointer-events:none}.d-pad.svelte-5fat11 span.right.svelte-5fat11:before{right:40%;top:50%;transform:translate(50%, -50%);border-width:13px 0 13px 19px;border-color:transparent transparent transparent #aaa}.d-pad.svelte-5fat11 span.right.svelte-5fat11:active:before{border-left-color:#333}.d-pad.svelte-5fat11 span.right.svelte-5fat11:hover:before{right:35%}.clear .d-pad.svelte-5fat11 span.svelte-5fat11{border:1px solid #fff}.clear .d-pad.svelte-5fat11 span.svelte-5fat11{background:none}.clear .d-pad.svelte-5fat11 span.svelte-5fat11:after{display:none}.clear .d-pad.svelte-5fat11 span.up.svelte-5fat11:hover{background:linear-gradient(0deg, #5f9837 0%, #6ea248 50%)}.clear .d-pad.svelte-5fat11 span.right.svelte-5fat11:hover{background:linear-gradient(90deg, #5f9837 0%, #6ea248 50%)}.clear .d-pad.svelte-5fat11 span.down.svelte-5fat11:hover{background:linear-gradient(180deg, #5f9837 0%, #6ea248 50%)}.clear .d-pad.svelte-5fat11 span.left.svelte-5fat11:hover{background:linear-gradient(-90deg, #5f9837 0%, #6ea248 50%)}.clear .d-pad.svelte-5fat11 span.up.svelte-5fat11:before{border-bottom-color:#fff}.clear .d-pad.svelte-5fat11 span.right.svelte-5fat11:before{border-left-color:#fff}.clear .d-pad.svelte-5fat11 span.down.svelte-5fat11:before{border-top-color:#fff}.clear .d-pad.svelte-5fat11 span.left.svelte-5fat11:before{border-right-color:#fff}.clear .d-pad.svelte-5fat11 span.up.svelte-5fat11:active:before{border-bottom-color:rgba(0, 0, 0, 0.6)}.clear .d-pad.svelte-5fat11 span.right.svelte-5fat11:active:before{border-left-color:rgba(0, 0, 0, 0.6)}.clear .d-pad.svelte-5fat11 span.down.svelte-5fat11:active:before{border-top-color:rgba(0, 0, 0, 0.6)}.clear .d-pad.svelte-5fat11 span.left.svelte-5fat11:active:before{border-right-color:rgba(0, 0, 0, 0.6)}.outline.svelte-5fat11 .d-pad.svelte-5fat11{border-radius:0}.outline.svelte-5fat11 .d-pad span.svelte-5fat11{border:1px solid rgba(0, 0, 0, 0.1)}.outline.svelte-5fat11 .d-pad span.svelte-5fat11:after{display:none}.outline.svelte-5fat11 .d-pad span.up.svelte-5fat11:hover{background:linear-gradient(0deg, #fff 0%, #efefef 50%)}.outline.svelte-5fat11 .d-pad span.right.svelte-5fat11:hover{background:linear-gradient(90deg, #fff 0%, #efefef 50%)}.outline.svelte-5fat11 .d-pad span.down.svelte-5fat11:hover{background:linear-gradient(180deg, #fff 0%, #efefef 50%)}.outline.svelte-5fat11 .d-pad span.left.svelte-5fat11:hover{background:linear-gradient(-90deg, #fff 0%, #efefef 50%)}.outline.svelte-5fat11 .d-pad span.up.svelte-5fat11:before{border-bottom-color:rgba(0, 0, 0, 0.1)}.outline.svelte-5fat11 .d-pad span.right.svelte-5fat11:before{border-left-color:rgba(0, 0, 0, 0.1)}.outline.svelte-5fat11 .d-pad span.down.svelte-5fat11:before{border-top-color:rgba(0, 0, 0, 0.1)}.outline.svelte-5fat11 .d-pad span.left.svelte-5fat11:before{border-right-color:rgba(0, 0, 0, 0.1)}.setbg.white .d-pad.svelte-5fat11 span.svelte-5fat11{background:#fff}.setbg.white .d-pad.svelte-5fat11 span.svelte-5fat11:after{border-radius:40%;background:#222}.setbg.white .d-pad.svelte-5fat11 span.up.svelte-5fat11:hover{background:#fff}.setbg.white .d-pad.svelte-5fat11 span.right.svelte-5fat11:hover{background:#fff}.setbg.white .d-pad.svelte-5fat11 span.down.svelte-5fat11:hover{background:#fff}.setbg.white .d-pad.svelte-5fat11 span.left.svelte-5fat11:hover{background:#fff}.setbg.white .d-pad.svelte-5fat11 span.up.svelte-5fat11:before{border-bottom-color:#0074D9}.setbg.white .d-pad.svelte-5fat11 span.right.svelte-5fat11:before{border-left-color:#FF851B}.setbg.white .d-pad.svelte-5fat11 span.down.svelte-5fat11:before{border-top-color:#3D9970}.setbg.white .d-pad.svelte-5fat11 span.left.svelte-5fat11:before{border-right-color:#FFDC00}.setbg.white .d-pad.svelte-5fat11 span.up.svelte-5fat11:active:before{border-bottom-color:rgba(0, 0, 0, 0.6)}.setbg.white .d-pad.svelte-5fat11 span.right.svelte-5fat11:active:before{border-left-color:rgba(0, 0, 0, 0.6)}.setbg.white .d-pad.svelte-5fat11 span.down.svelte-5fat11:active:before{border-top-color:rgba(0, 0, 0, 0.6)}.setbg.white .d-pad.svelte-5fat11 span.left.svelte-5fat11:active:before{border-right-color:rgba(0, 0, 0, 0.6)}')}function fs(s){let e,t,n,i,a,r,o,c,f,p,d;return{c(){e=w("div"),t=w("nav"),n=w("span"),i=A(),a=w("span"),r=A(),o=w("span"),c=A(),f=w("span"),v(n,"class","up svelte-5fat11"),v(a,"class","right svelte-5fat11"),v(o,"class","down svelte-5fat11"),v(f,"class","left svelte-5fat11"),v(t,"class","d-pad svelte-5fat11"),v(e,"class","set outline svelte-5fat11")},m(h,b){H(h,e,b),u(e,t),u(t,n),u(t,i),u(t,a),u(t,r),u(t,o),u(t,c),u(t,f),p||(d=[W(n,"pointerdown",s[5]("ArrowUp")),W(n,"pointerup",s[6]("ArrowUp")),W(a,"pointerdown",s[5]("ArrowRight")),W(a,"pointerup",s[6]("ArrowRight")),W(o,"pointerdown",s[5]("ArrowDown")),W(o,"pointerup",s[6]("ArrowDown")),W(f,"pointerdown",s[5]("ArrowLeft")),W(f,"pointerup",s[6]("ArrowLeft"))],p=!0)},p:N,i:N,o:N,d(h){h&&O(e),p=!1,ne(d)}}}function ps(s){let e,t,n,i,a;function r(p){s[9](p)}function o(p){s[10](p)}function c(p){s[11](p)}let f={};return s[0]!==void 0&&(f.opened=s[0]),s[4].battleState!==void 0&&(f.battleState=s[4].battleState),s[2]!==void 0&&(f.battleStart=s[2]),e=new ft({props:f}),j.push(()=>Y(e,"opened",r)),j.push(()=>Y(e,"battleState",o)),j.push(()=>Y(e,"battleStart",c)),{c(){ge(e.$$.fragment)},m(p,d){ae(e,p,d),a=!0},p(p,d){const h={};!t&&d[0]&1&&(t=!0,h.opened=p[0],Z(()=>t=!1)),!n&&d[0]&16&&(n=!0,h.battleState=p[4].battleState,Z(()=>n=!1)),!i&&d[0]&4&&(i=!0,h.battleStart=p[2],Z(()=>i=!1)),e.$set(h)},i(p){a||(X(e.$$.fragment,p),a=!0)},o(p){V(e.$$.fragment,p),a=!1},d(p){oe(e,p)}}}function us(s){let e,t,n,i,a,r,o;const c=[ps,fs],f=[];function p(m,x){return m[4].initiated?0:1}e=p(s),t=f[e]=c[e](s);function d(m){s[12](m)}function h(m){s[13](m)}let b={};return s[1]!==void 0&&(b.menuOpened=s[1]),s[3]!==void 0&&(b.player=s[3]),i=new pt({props:b}),j.push(()=>Y(i,"menuOpened",d)),j.push(()=>Y(i,"player",h)),{c(){t.c(),n=A(),ge(i.$$.fragment)},m(m,x){f[e].m(m,x),H(m,n,x),ae(i,m,x),o=!0},p(m,x){let S=e;e=p(m),e===S?f[e].p(m,x):(De(),V(f[S],1,1,()=>{f[S]=null}),Te(),t=f[e],t?t.p(m,x):(t=f[e]=c[e](m),t.c()),X(t,1),t.m(n.parentNode,n));const _={};!a&&x[0]&2&&(a=!0,_.menuOpened=m[1],Z(()=>a=!1)),!r&&x[0]&8&&(r=!0,_.player=m[3],Z(()=>r=!1)),i.$set(_)},i(m){o||(X(t),X(i.$$.fragment,m),o=!0)},o(m){V(t),V(i.$$.fragment,m),o=!1},d(m){m&&O(n),f[e].d(m),oe(i,m)}}}function hs(s,e,t){let{opened:n=!1}=e,{menuOpened:i=!1}=e,{battleStart:a=!1}=e,{currentMap:r=ie}=e,{canvas:o}=e;const c=o.getContext("2d");window.innerWidth>1100?(o.width=window.innerWidth,o.height=window.innerHeight):(o.height=window.innerWidth,o.width=window.innerHeight);let f=Math.min(4,Math.max(2,window.innerWidth/r.background.width)),p=16*f,{character:d}=e;d.positionOnMap=new T(ie.playerInitialPosition.x,ie.playerInitialPosition.y),d.positionOnScreen=new T(ie.playerInitialPosition.x*p,ie.playerInitialPosition.y*p);function h(){window.innerWidth>1100?(t(7,o.width=window.innerWidth,o),t(7,o.height=window.innerHeight,o)):(t(7,o.height=window.innerWidth,o),t(7,o.width=window.innerHeight,o)),f=Math.min(4,Math.max(2,window.innerWidth/r.background.width)),console.log(f),p=16*f,t(3,d.positionOnScreen=new T(ie.playerInitialPosition.x*p,ie.playerInitialPosition.y*p),d)}window.addEventListener("resize",()=>{h()}),window.addEventListener("orientationchange",()=>{h()});let{battle:b={initiated:!1,frameElapsed:0}}=e,m=0,x=new T(0,0),S=new T(0,0),_={fps:12,then:Date.now(),fpsInterval:1e3/12,id:0},M={fps:12,then:Date.now(),fpsInterval:1e3/12,goDown:!0,id:0};const C=new T(0,0);function q(){_.id=window.requestAnimationFrame(q);let y=Date.now(),J=y-_.then;if(J>_.fpsInterval){_.then=y-J%_.fpsInterval,c.fillStyle="black",c.fillRect(0,0,o.width,o.height),r.drawBackground(c,C,f),d.draw(c,C,f,r.background.width,r.background.height);let U=!0;if(t(3,d.moving=!1,d),b.initiated)return;if(!i){if((E.down.pressed||E.up.pressed||E.left.pressed||E.right.pressed)&&r.hasBattleZoneAt(d.positionOnMap)&&Math.random()<.1){t(3,d.frames.val=0,d);let Me=r.randomMonster();window.cancelAnimationFrame(_.id),g(Me)}E.down.pressed&&ee.key==="ArrowDown"&&(r.hasBoundaryAt(new T(d.positionOnMap.x,d.positionOnMap.y+1))&&(U=!1),t(3,d.moving=!0,d),t(3,d.direction="down",d),U&&C.y++),E.up.pressed&&ee.key==="ArrowUp"&&(r.hasBoundaryAt(new T(d.positionOnMap.x,d.positionOnMap.y-1))&&(U=!1),t(3,d.moving=!0,d),t(3,d.direction="up",d),U&&C.y--),E.left.pressed&&ee.key==="ArrowLeft"&&(r.hasBoundaryAt(new T(d.positionOnMap.x-1,d.positionOnMap.y))&&(U=!1),t(3,d.moving=!0,d),t(3,d.direction="left",d),U&&C.x--),E.right.pressed&&ee.key==="ArrowRight"&&(r.hasBoundaryAt(new T(d.positionOnMap.x+1,d.positionOnMap.y))&&(U=!1),t(3,d.moving=!0,d),t(3,d.direction="right",d),U&&C.x++),d.updatePosition(r.playerInitialPosition,C)}}}function k(){var U,Me,Fe,je,Ne,Re;M.id=window.requestAnimationFrame(k);let y=Date.now(),J=y-M.then;if(J>M.fpsInterval){if(!b.initiated)return;M.then=y-J%M.fpsInterval,t(4,b.frameElapsed++,b),c.fillStyle="black",c.fillRect(0,0,o.width,o.height),Bt.draw(c,o),(Me=(U=b.battleState)==null?void 0:U.opponentCurrentMonster)==null||Me.draw(c,"front"),(je=(Fe=b.battleState)==null?void 0:Fe.playerCurrentMonster)==null||je.draw(c,"back"),(Re=(Ne=b.battleState)==null?void 0:Ne.opponentCurrentMonster)!=null&&Re.position&&(M.goDown=b.frameElapsed<=10,M.goDown?m++:m--,t(4,b.battleState.opponentCurrentMonster.position.y=x.y-m,b),t(4,b.battleState.playerCurrentMonster.position.y=S.y+m,b),b.frameElapsed>20&&t(4,b.frameElapsed=0,b))}}function g(y){ke(),t(4,b.frameElapsed=0,b),t(4,b.initiated=!0,b),t(4,b.startDate=new Date,b),t(4,b.battleState=new It(d,y,o),b),x={...b.battleState.opponentCurrentMonster.position},S={...b.battleState.playerCurrentMonster.position},L(),t(4,b.battleState.onClose=()=>{I()},b),t(2,a=!0),setTimeout(()=>{t(2,a=!1),t(0,n=!0),k()},2e3)}function I(y){window.cancelAnimationFrame(M.id),t(4,b.battleState=void 0,b),t(4,b.initiated=!1,b),t(4,b.startDate=void 0,b),t(2,a=!1),t(0,n=!1),t(1,i=!1),q(),P()}function P(){window.addEventListener("keydown",Xe()),window.addEventListener("keyup",We()),window.addEventListener("keydown",B)}function L(){window.removeEventListener("keydown",Xe()),window.removeEventListener("keyup",We()),window.removeEventListener("keydown",B)}function B(y){y.key==="Escape"&&t(1,i=!i)}function G(y){return J=>{switch(J.preventDefault(),y){case"ArrowUp":E.up.pressed=!0;break;case"ArrowDown":E.down.pressed=!0;break;case"ArrowLeft":E.left.pressed=!0;break;case"ArrowRight":E.right.pressed=!0;break}ee.key=y}}function ye(y){return J=>{switch(y){case"ArrowDown":E.down.pressed=!1;break;case"ArrowUp":E.up.pressed=!1;break;case"ArrowRight":E.right.pressed=!1;break;case"ArrowLeft":E.left.pressed=!1;break}}}function ke(){E.down.pressed=!1,E.up.pressed=!1,E.right.pressed=!1,E.left.pressed=!1,t(3,d.moving=!1,d)}P(),q();function F(y){n=y,t(0,n)}function Q(y){s.$$.not_equal(b.battleState,y)&&(b.battleState=y,t(4,b))}function _e(y){a=y,t(2,a)}function xe(y){i=y,t(1,i)}function Se(y){d=y,t(3,d)}return s.$$set=y=>{"opened"in y&&t(0,n=y.opened),"menuOpened"in y&&t(1,i=y.menuOpened),"battleStart"in y&&t(2,a=y.battleStart),"currentMap"in y&&t(8,r=y.currentMap),"canvas"in y&&t(7,o=y.canvas),"character"in y&&t(3,d=y.character),"battle"in y&&t(4,b=y.battle)},[n,i,a,d,b,G,ye,o,r,F,Q,_e,xe,Se]}class bt extends pe{constructor(e){super(),de(this,e,hs,us,le,{opened:0,menuOpened:1,battleStart:2,currentMap:8,canvas:7,character:3,battle:4},ds,[-1,-1])}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),D()}get menuOpened(){return this.$$.ctx[1]}set menuOpened(e){this.$$set({menuOpened:e}),D()}get battleStart(){return this.$$.ctx[2]}set battleStart(e){this.$$set({battleStart:e}),D()}get currentMap(){return this.$$.ctx[8]}set currentMap(e){this.$$set({currentMap:e}),D()}get canvas(){return this.$$.ctx[7]}set canvas(e){this.$$set({canvas:e}),D()}get character(){return this.$$.ctx[3]}set character(e){this.$$set({character:e}),D()}get battle(){return this.$$.ctx[4]}set battle(e){this.$$set({battle:e}),D()}}fe(bt,{opened:{type:"Boolean"},menuOpened:{type:"Boolean"},battleStart:{type:"Boolean"},currentMap:{},canvas:{},character:{},battle:{}},[],[],!0);function bs(s){ce(s,"svelte-11m83cu",'#canvas-wrapper.svelte-11m83cu.svelte-11m83cu.svelte-11m83cu{width:100dvw;height:100dvh;overflow:hidden;position:absolute;top:0;left:0;-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0)}#canvas-wrapper.svelte-11m83cu canvas.svelte-11m83cu.svelte-11m83cu{position:absolute;top:0;left:0;width:100dvw;height:100dvh}@media(max-width: 1100px) and (orientation: portrait){#canvas-wrapper.svelte-11m83cu.svelte-11m83cu.svelte-11m83cu{-webkit-transform:rotate(-89.99deg);-moz-transform:rotate(-89.99deg);-o-transform:rotate(-89.99deg);-ms-transform:rotate(-89.99deg);transform:rotate(-89.99deg);transform-origin:left top;width:100dvh;height:100dvw;overflow:hidden;position:absolute;top:100%;right:0}#canvas-wrapper.svelte-11m83cu canvas.svelte-11m83cu.svelte-11m83cu{position:absolute;top:0;right:0;width:100dvh;height:100dvw}#canvas-wrapper.svelte-11m83cu .buttons.svelte-11m83cu.svelte-11m83cu{position:absolute;left:calc(50dvh - 100px);top:calc(50dvw - 40px)}#canvas-wrapper.svelte-11m83cu .loading.svelte-11m83cu.svelte-11m83cu{height:100vw}}.loading.svelte-11m83cu.svelte-11m83cu.svelte-11m83cu{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100vh}.loading.ready.svelte-11m83cu.svelte-11m83cu.svelte-11m83cu{opacity:0.2}.u-swing.svelte-11m83cu.svelte-11m83cu.svelte-11m83cu{animation:svelte-11m83cu-swing 3000ms infinite}@keyframes svelte-11m83cu-swing{20%{-webkit-transform:rotate(15deg);transform:rotate(15deg)}40%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg)}60%{-webkit-transform:rotate(5deg);transform:rotate(5deg)}80%{-webkit-transform:rotate(-5deg);transform:rotate(-5deg)}to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}.o-pokeball.svelte-11m83cu.svelte-11m83cu.svelte-11m83cu{width:120px;height:120px;border-radius:120px;border:solid 4.8px black;position:relative;background:linear-gradient(to bottom, #EEEEEE 0%, #FFFFFF 100%);margin:10px auto}.o-pokeball.svelte-11m83cu.svelte-11m83cu.svelte-11m83cu:before,.o-pokeball.svelte-11m83cu.svelte-11m83cu.svelte-11m83cu:after{content:"";display:block}.o-pokeball.svelte-11m83cu.svelte-11m83cu.svelte-11m83cu,.o-pokeball.svelte-11m83cu.svelte-11m83cu.svelte-11m83cu:before,.o-pokeball.svelte-11m83cu.svelte-11m83cu.svelte-11m83cu:after{transition:all 600ms cubic-bezier(0.67, 0.4, 0.36, 0.75)}.o-pokeball.svelte-11m83cu.svelte-11m83cu.svelte-11m83cu:before{width:120px;height:57.6px;border-bottom:solid 4.8px black;border-radius:60px 60px 0 0;background:linear-gradient(to bottom, #d10000 0%, #ff0000 50%)}.o-pokeball.svelte-11m83cu.svelte-11m83cu.svelte-11m83cu:after{content:"";width:24px;height:24px;background:linear-gradient(to bottom, #fff 0%, #ccc 100%);position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);border-radius:50%;box-shadow:0 0 0 2.4px black, 0 0 0 4.8px #ddd, 0 0 0 8.5714285714px black, 0 0 12px 7.0588235294px rgba(0, 0, 0, 0.4)}.buttons.svelte-11m83cu.svelte-11m83cu.svelte-11m83cu{display:flex;justify-content:center;align-items:center;flex-direction:column;gap:120px;position:absolute;left:calc(50dvw - 100px);top:calc(50dvh - 40px)}.buttons.svelte-11m83cu .letsgo.svelte-11m83cu.svelte-11m83cu{position:relative}.buttons.svelte-11m83cu .letsgo .pika.svelte-11m83cu.svelte-11m83cu{width:200px;height:200px;position:absolute;bottom:0;left:0;z-index:1}.buttons.svelte-11m83cu .letsgo .start-btn.svelte-11m83cu.svelte-11m83cu{width:200px;height:80px;border-radius:16px;position:relative;z-index:2;font-family:pokemon, serif;font-size:36px;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;cursor:pointer}.buttons.svelte-11m83cu .letsgo .start-btn.svelte-11m83cu.svelte-11m83cu:hover{color:#fff;box-shadow:inset #009688 0 0 0 5px;text-shadow:none;font-weight:bold;background:#009688}.buttons.svelte-11m83cu .letsgo .start-btn.svelte-11m83cu:hover+.pika.svelte-11m83cu{animation:svelte-11m83cu-bounce 1s infinite}@keyframes svelte-11m83cu-bounce{0%,20%,53%,80%,to{-webkit-animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-transform:translate3d(0, -30px, 0);transform:translate3d(0, -30px, 0)}40%,43%,70%{-webkit-animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06);animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06)}70%{-webkit-transform:translate3d(0, -15px, 0);transform:translate3d(0, -15px, 0)}90%{-webkit-transform:translate3d(0, -4px, 0);transform:translate3d(0, -4px, 0)}}#preview.svelte-11m83cu.svelte-11m83cu.svelte-11m83cu{display:flex;flex-wrap:wrap;justify-content:center}')}function gs(s){let e,t,n,i=!s[1]&&et(s),a=s[1]&&tt(s);return{c(){e=w("div"),i&&i.c(),t=A(),a&&a.c(),n=_t(),v(e,"class","loading svelte-11m83cu"),$(e,"ready",s[1])},m(r,o){H(r,e,o),i&&i.m(e,null),H(r,t,o),a&&a.m(r,o),H(r,n,o)},p(r,o){r[1]?i&&(i.d(1),i=null):i?i.p(r,o):(i=et(r),i.c(),i.m(e,null)),o&2&&$(e,"ready",r[1]),r[1]?a?a.p(r,o):(a=tt(r),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i:N,o:N,d(r){r&&(O(e),O(t),O(n)),i&&i.d(),a&&a.d(r)}}}function ms(s){let e,t,n,i;function a(c){s[9](c)}function r(c){s[10](c)}let o={};return s[0]!==void 0&&(o.canvas=s[0]),s[3]!==void 0&&(o.character=s[3]),e=new bt({props:o}),j.push(()=>Y(e,"canvas",a)),j.push(()=>Y(e,"character",r)),{c(){ge(e.$$.fragment)},m(c,f){ae(e,c,f),i=!0},p(c,f){const p={};!t&&f&1&&(t=!0,p.canvas=c[0],Z(()=>t=!1)),!n&&f&8&&(n=!0,p.character=c[3],Z(()=>n=!1)),e.$set(p)},i(c){i||(X(e.$$.fragment,c),i=!0)},o(c){V(e.$$.fragment,c),i=!1},d(c){oe(e,c)}}}function et(s){let e,t,n,i,a,r,o;return{c(){e=w("div"),t=A(),n=w("span"),i=z("Gotta catch em all... "),a=z(s[5]),r=A(),o=w("div"),o.innerHTML="",v(e,"class","o-pokeball c-loader u-swing svelte-11m83cu"),v(o,"id","preview"),v(o,"class","svelte-11m83cu")},m(c,f){H(c,e,f),H(c,t,f),H(c,n,f),u(n,i),u(n,a),H(c,r,f),H(c,o,f),s[11](o)},p(c,f){f&32&&R(a,c[5])},d(c){c&&(O(e),O(t),O(n),O(r),O(o)),s[11](null)}}}function tt(s){let e,t,n,i,a,r,o,c,f,p=s[7]&&vs(s);return{c(){e=w("div"),p&&p.c(),t=A(),n=w("div"),i=w("button"),i.textContent="New game!",a=A(),r=w("img"),v(i,"class","start-btn svelte-11m83cu"),v(r,"class","pika svelte-11m83cu"),v(r,"alt","pikachu"),it(r.src,o="src/assets/monsters/heartgold-soulsilver/25.png")||v(r,"src",o),v(n,"class","letsgo svelte-11m83cu"),v(e,"class","buttons svelte-11m83cu")},m(d,h){H(d,e,h),p&&p.m(e,null),u(e,t),u(e,n),u(n,i),u(n,a),u(n,r),c||(f=W(i,"click",s[13]),c=!0)},p(d,h){d[7]&&p.p(d,h)},d(d){d&&O(e),p&&p.d(),c=!1,f()}}}function vs(s){let e,t,n,i,a,r,o;return{c(){e=w("div"),t=w("button"),t.textContent="Continue!",n=A(),i=w("img"),v(t,"class","start-btn svelte-11m83cu"),v(i,"class","pika svelte-11m83cu"),v(i,"alt","Evoli"),it(i.src,a="src/assets/monsters/heartgold-soulsilver/133.png")||v(i,"src",a),v(e,"class","letsgo svelte-11m83cu")},m(c,f){H(c,e,f),u(e,t),u(e,n),u(e,i),r||(o=W(t,"click",s[12]),r=!0)},p:N,d(c){c&&O(e),r=!1,o()}}}function ws(s){let e,t,n,i,a,r;const o=[ms,gs],c=[];function f(p,d){return p[1]&&p[4]?0:1}return t=f(s),n=c[t]=o[t](s),{c(){e=w("div"),n.c(),i=A(),a=w("canvas"),v(a,"class","svelte-11m83cu"),v(e,"id","canvas-wrapper"),v(e,"class","svelte-11m83cu")},m(p,d){H(p,e,d),c[t].m(e,null),u(e,i),u(e,a),s[14](a),s[15](e),r=!0},p(p,[d]){let h=t;t=f(p),t===h?c[t].p(p,d):(De(),V(c[h],1,1,()=>{c[h]=null}),Te(),n=c[t],n?n.p(p,d):(n=c[t]=o[t](p),n.c()),X(n,1),n.m(e,i))},i(p){r||(X(n),r=!0)},o(p){V(n),r=!1},d(p){p&&O(e),c[t].d(),s[14](null),s[15](null)}}}function ys(s,e,t){let{canvas:n}=e,i,a,{ready:r=!1}=e,o=[],c=!1,f,p,d;o.length>0&&a?(o.forEach(k=>{setTimeout(()=>{const g=new Image;g.src=`src/assets/monsters/heartgold-soulsilver/${k.id}.png`,d.appendChild(g)},100)}),r=!0):fetch("src/assets/data/pokedex-gen1.json").then(k=>k.json()).then(k=>{k.forEach(g=>{t(5,p=g.name.english);let I=`src/assets/monsters/heartgold-soulsilver/${g.id}.png`,P=`src/assets/monsters/heartgold-soulsilver/frame2/${g.id}.png`,L=`src/assets/monsters/heartgold-soulsilver/back/${g.id}.png`,B=`src/assets/monsters/heartgold-soulsilver/shiny/${g.id}.png`;setTimeout(()=>{const G=new me(g.id,g.name.english,g.type,g.profile.ability,new te(g.base.HP,g.base.Attack,g.base.Defense,g.base["Sp. Attack"],g.base["Sp. Defense"],g.base.Speed),g.evolution,new Ot(I,P,L,B),void 0,[new ve("Tackle","Normal","Physical",40,100,35,0,"",0,"Basic hit")],new te(10,10,10,10,10,10),new te(0,0,0,10,0,0));G.height=Number.parseFloat(g.profile.height.replace(" m",""))*100,G.spriteScale=Math.max(1.2,Math.min(G.height/100,2)),o.push(G),o.length===k.length&&(t(5,p="Ready!"),localStorage.setItem("pokedex",JSON.stringify(o)),h())},100)})});function h(){let k=new Image;k.src="src/assets/sprites/hero_male_front.png";let g=new Image;g.src="src/assets/sprites/hero_male_back.png";let I=new Image;I.src="src/assets/sprites/hero_male_left.png";let P=new Image;P.src="src/assets/sprites/hero_male_right.png";let L=new Image;L.src="src/assets/sprites/hero_male_back.png",Promise.all(Array.from([k,g,I,P,L].filter(B=>!B.complete)).map(B=>new Promise(G=>{B.onload=B.onerror=G}))).then(()=>{let B={...o.at(70),ivs:new te(31,31,31,31,31,31),evs:new te(120,0,0,255,0,135),moves:[new ve("Tackle","Normal","Physical",40,100,35,0,"",0,"Basic hit"),new ve("Growl","Normal","Status",0,100,40,0,"",0,"Lowers the target's Attack by one stage."),new ve("Tail Whip","Normal","Status",0,100,30,0,"",0,"Lowers the target's Defense by one stage."),new ve("Vine whip","Grass","Physical",40,100,30,0,"",0,"Strong hit with vines.")]};Object.setPrototypeOf(B,me.prototype),B.updateCurrentStats(),B.currentHp=B.currentStats.HP,t(3,a=new at("Kaiser","MALE",new zt(k,g,I,P,L),[B])),t(1,r=!0)})}function b(){t(4,c=!0)}function m(k){n=k,t(0,n)}function x(k){a=k,t(3,a)}function S(k){j[k?"unshift":"push"](()=>{d=k,t(6,d)})}const _=()=>b(),M=()=>b();function C(k){j[k?"unshift":"push"](()=>{n=k,t(0,n)})}function q(k){j[k?"unshift":"push"](()=>{i=k,t(2,i)})}return s.$$set=k=>{"canvas"in k&&t(0,n=k.canvas),"ready"in k&&t(1,r=k.ready)},[n,r,i,a,c,p,d,f,b,m,x,S,_,M,C,q]}class ks extends pe{constructor(e){super(),de(this,e,ys,ws,le,{canvas:0,ready:1},bs)}get canvas(){return this.$$.ctx[0]}set canvas(e){this.$$set({canvas:e}),D()}get ready(){return this.$$.ctx[1]}set ready(e){this.$$set({ready:e}),D()}}customElements.define("open-mon",fe(ks,{canvas:{},ready:{type:"Boolean"}},[],[],!0));
