var Kt=Object.defineProperty;var Qt=(s,e,t)=>e in s?Kt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var c=(s,e,t)=>(Qt(s,typeof e!="symbol"?e+"":e,t),t);function L(){}function Pt(s){return s()}function ht(){return Object.create(null)}function ie(s){s.forEach(Pt)}function Et(s){return typeof s=="function"}function he(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let Re;function It(s,e){return s===e?!0:(Re||(Re=document.createElement("a")),Re.href=e,s===Re.href)}function es(s){return Object.keys(s).length===0}function g(s,e){s.appendChild(e)}function pe(s,e,t){const n=ts(s);if(!n.getElementById(e)){const i=m("style");i.id=e,i.textContent=t,ss(n,i)}}function ts(s){if(!s)return document;const e=s.getRootNode?s.getRootNode():s.ownerDocument;return e&&e.host?e:s.ownerDocument}function ss(s,e){return g(s.head||s,e),e.sheet}function A(s,e,t){s.insertBefore(e,t||null)}function S(s){s.parentNode&&s.parentNode.removeChild(s)}function ns(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function m(s){return document.createElement(s)}function P(s){return document.createTextNode(s)}function q(){return P(" ")}function is(){return P("")}function H(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function v(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function rs(s){return Array.from(s.childNodes)}function X(s,e){e=""+e,s.data!==e&&(s.data=e)}function ne(s,e,t,n){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,n?"important":"")}function M(s,e,t){s.classList.toggle(e,!!t)}function os(s){const e={};return s.childNodes.forEach(t=>{e[t.slot||"default"]=!0}),e}let it;function Se(s){it=s}const _e=[],T=[];let ke=[];const Ge=[],ls=Promise.resolve();let We=!1;function as(){We||(We=!0,ls.then(I))}function Ve(s){ke.push(s)}function U(s){Ge.push(s)}const Xe=new Set;let me=0;function I(){if(me!==0)return;const s=it;do{try{for(;me<_e.length;){const e=_e[me];me++,Se(e),cs(e.$$)}}catch(e){throw _e.length=0,me=0,e}for(Se(null),_e.length=0,me=0;T.length;)T.pop()();for(let e=0;e<ke.length;e+=1){const t=ke[e];Xe.has(t)||(Xe.add(t),t())}ke.length=0}while(_e.length);for(;Ge.length;)Ge.pop()();We=!1,Xe.clear(),Se(s)}function cs(s){if(s.fragment!==null){s.update(),ie(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(Ve)}}function ds(s){const e=[],t=[];ke.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),ke=e}const Ie=new Set;let de;function rt(){de={r:0,c:[],p:de}}function ot(){de.r||ie(de.c),de=de.p}function W(s,e){s&&s.i&&(Ie.delete(s),s.i(e))}function J(s,e,t,n){if(s&&s.o){if(Ie.has(s))return;Ie.add(s),de.c.push(()=>{Ie.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}function pt(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function G(s,e,t){const n=s.$$.props[e];n!==void 0&&(s.$$.bound[n]=t,t(s.$$.ctx[n]))}function xe(s){s&&s.c()}function ue(s,e,t){const{fragment:n,after_update:i}=s.$$;n&&n.m(e,t),Ve(()=>{const r=s.$$.on_mount.map(Pt).filter(Et);s.$$.on_destroy?s.$$.on_destroy.push(...r):ie(r),s.$$.on_mount=[]}),i.forEach(Ve)}function fe(s,e){const t=s.$$;t.fragment!==null&&(ds(t.after_update),ie(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function us(s,e){s.$$.dirty[0]===-1&&(_e.push(s),as(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function ge(s,e,t,n,i,r,o=null,l=[-1]){const d=it;Se(s);const a=s.$$={fragment:null,ctx:[],props:r,update:L,not_equal:i,bound:ht(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:ht(),dirty:l,skip_bound:!1,root:e.target||d.$$.root};o&&o(a.root);let u=!1;if(a.ctx=t?t(s,e.props||{},(h,f,...y)=>{const p=y.length?y[0]:f;return a.ctx&&i(a.ctx[h],a.ctx[h]=p)&&(!a.skip_bound&&a.bound[h]&&a.bound[h](p),u&&us(s,h)),f}):[],a.update(),u=!0,ie(a.before_update),a.fragment=n?n(a.ctx):!1,e.target){if(e.hydrate){const h=rs(e.target);a.fragment&&a.fragment.l(h),h.forEach(S)}else a.fragment&&a.fragment.c();e.intro&&W(s.$$.fragment),ue(s,e.target,e.anchor),I()}Se(d)}let Dt;typeof HTMLElement=="function"&&(Dt=class extends HTMLElement{constructor(e,t,n){super();c(this,"$$ctor");c(this,"$$s");c(this,"$$c");c(this,"$$cn",!1);c(this,"$$d",{});c(this,"$$r",!1);c(this,"$$p_d",{});c(this,"$$l",{});c(this,"$$l_u",new Map);this.$$ctor=e,this.$$s=t,n&&this.attachShadow({mode:"open"})}addEventListener(e,t,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){const i=this.$$c.$on(e,t);this.$$l_u.set(t,i)}super.addEventListener(e,t,n)}removeEventListener(e,t,n){if(super.removeEventListener(e,t,n),this.$$c){const i=this.$$l_u.get(t);i&&(i(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(o){return()=>{let l;return{c:function(){l=m("slot"),o!=="default"&&v(l,"name",o)},m:function(u,h){A(u,l,h)},d:function(u){u&&S(l)}}}};var e=t;if(await Promise.resolve(),!this.$$cn)return;const n={},i=os(this);for(const o of this.$$s)o in i&&(n[o]=[t(o)]);for(const o of this.attributes){const l=this.$$g_p(o.name);l in this.$$d||(this.$$d[l]=De(l,o.value,this.$$p_d,"toProp"))}for(const o in this.$$p_d)!(o in this.$$d)&&this[o]!==void 0&&(this.$$d[o]=this[o],delete this[o]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:n,$$scope:{ctx:[]}}});const r=()=>{this.$$r=!0;for(const o in this.$$p_d)if(this.$$d[o]=this.$$c.$$.ctx[this.$$c.$$.props[o]],this.$$p_d[o].reflect){const l=De(o,this.$$d[o],this.$$p_d,"toAttribute");l==null?this.removeAttribute(this.$$p_d[o].attribute||o):this.setAttribute(this.$$p_d[o].attribute||o,l)}this.$$r=!1};this.$$c.$$.after_update.push(r),r();for(const o in this.$$l)for(const l of this.$$l[o]){const d=this.$$c.$on(o,l);this.$$l_u.set(l,d)}this.$$l={}}}attributeChangedCallback(e,t,n){var i;this.$$r||(e=this.$$g_p(e),this.$$d[e]=De(e,n,this.$$p_d,"toProp"),(i=this.$$c)==null||i.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e)||e}});function De(s,e,t,n){var r;const i=(r=t[s])==null?void 0:r.type;if(e=i==="Boolean"&&typeof e!="boolean"?e!=null:e,!n||!t[s])return e;if(n==="toAttribute")switch(i){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(i){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function be(s,e,t,n,i,r){let o=class extends Dt{constructor(){super(s,t,i),this.$$p_d=e}static get observedAttributes(){return Object.keys(e).map(l=>(e[l].attribute||l).toLowerCase())}};return Object.keys(e).forEach(l=>{Object.defineProperty(o.prototype,l,{get(){return this.$$c&&l in this.$$c?this.$$c[l]:this.$$d[l]},set(d){var a;d=De(l,d,e),this.$$d[l]=d,(a=this.$$c)==null||a.$set({[l]:d})}})}),n.forEach(l=>{Object.defineProperty(o.prototype,l,{get(){var d;return(d=this.$$c)==null?void 0:d[l]}})}),r&&(o=r(o)),s.element=o,o}class ve{constructor(){c(this,"$$");c(this,"$$set")}$destroy(){fe(this,1),this.$destroy=L}$on(e,t){if(!Et(t))return L;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!es(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const fs="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(fs);const Be=new WeakMap;function hs(s,e,t,n){return s.reverse().forEach(i=>{n=i(e,t,n)||n}),n}function ps(s,e){return s.reverse().forEach(t=>{const n=t(e);n&&(e=n)}),e}function gs(s,e,t,n){if(!Array.isArray(s)||s.length===0)throw new TypeError;if(t!==void 0)return hs(s,e,t,n);if(typeof e=="function")return ps(s,e)}function Tt(s,e){return Be.get(s)&&Be.get(s).get(e)}function Ne(s,e,t){if(e===void 0)throw new TypeError;const n=Tt(e,t);return n&&n.get(s)}function bs(s,e){const t=Be.get(s)||new Map;Be.set(s,t);const n=t.get(e)||new Map;return t.set(e,n),n}function jt(s,e,t,n){if(n&&!["string","symbol"].includes(typeof n))throw new TypeError;(Tt(t,n)||bs(t,n)).set(s,e)}function lt(s,e,t){return Ne(s,e,t)?Ne(s,e,t):Object.getPrototypeOf(e)?lt(s,Object.getPrototypeOf(e),t):void 0}function vs(s,e){return function(n,i){jt(s,e,n,i)}}function ms(s,e,t){return lt(s,e,t)}function ws(s,e,t){return Ne(s,e,t)}function ys(s,e,t){return!!Ne(s,e,t)}function _s(s,e,t){return!!lt(s,e,t)}function ks(s,e,t,n){jt(s,e,t,n)}const xs={decorate:gs,defineMetadata:ks,getMetadata:ms,getOwnMetadata:ws,hasMetadata:_s,hasOwnMetadata:ys,metadata:vs};Object.assign(Reflect,xs);var Ze;(function(s){s[s.Transient=0]="Transient",s[s.Singleton=1]="Singleton",s[s.ResolutionScoped=2]="ResolutionScoped",s[s.ContainerScoped=3]="ContainerScoped"})(Ze||(Ze={}));const F=Ze;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ye=function(s,e){return Ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},Ye(s,e)};function at(s,e){Ye(s,e);function t(){this.constructor=s}s.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Ms(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(t[n[i]]=s[n[i]]);return t}function Ss(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function l(u){try{a(n.next(u))}catch(h){o(h)}}function d(u){try{a(n.throw(u))}catch(h){o(h)}}function a(u){u.done?r(u.value):i(u.value).then(l,d)}a((n=n.apply(s,e||[])).next())})}function As(s,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,i,r,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(a){return function(u){return d([a,u])}}function d(a){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(r=a[0]&2?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,i=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){t.label=a[1];break}if(a[0]===6&&t.label<r[1]){t.label=r[1],r=a;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(a);break}r[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(s,t)}catch(u){a=[6,u],i=0}finally{n=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function Oe(s){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&s[e],n=0;if(t)return t.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&n>=s.length&&(s=void 0),{value:s&&s[n++],done:!s}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ze(s,e){var t=typeof Symbol=="function"&&s[Symbol.iterator];if(!t)return s;var n=t.call(s),i,r=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)r.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return r}function ce(){for(var s=[],e=0;e<arguments.length;e++)s=s.concat(ze(arguments[e]));return s}var Je="injectionTokens";function qs(s){var e=Reflect.getMetadata("design:paramtypes",s)||[],t=Reflect.getOwnMetadata(Je,s)||{};return Object.keys(t).forEach(function(n){e[+n]=t[n]}),e}function Cs(s,e){return function(t,n,i){var r=Reflect.getOwnMetadata(Je,t)||{};r[i]=e?{token:s,transform:e.transformToken,transformArgs:e.args||[]}:s,Reflect.defineMetadata(Je,r,t)}}function Lt(s){return!!s.useClass}function Ke(s){return!!s.useFactory}var Bt=function(){function s(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return s.prototype.createProxy=function(e){var t=this,n={},i=!1,r,o=function(){return i||(r=e(t.wrap()),i=!0),r};return new Proxy(n,this.createHandler(o))},s.prototype.createHandler=function(e){var t={},n=function(i){t[i]=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];r[0]=e();var l=Reflect[i];return l.apply(void 0,ce(r))}};return this.reflectMethods.forEach(n),t},s}();function we(s){return typeof s=="string"||typeof s=="symbol"}function $s(s){return typeof s=="object"&&"token"in s&&"multiple"in s}function gt(s){return typeof s=="object"&&"token"in s&&"transform"in s}function Rs(s){return typeof s=="function"||s instanceof Bt}function Te(s){return!!s.useToken}function je(s){return s.useValue!=null}function Os(s){return Lt(s)||je(s)||Te(s)||Ke(s)}var ct=function(){function s(){this._registryMap=new Map}return s.prototype.entries=function(){return this._registryMap.entries()},s.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},s.prototype.get=function(e){this.ensure(e);var t=this._registryMap.get(e);return t[t.length-1]||null},s.prototype.set=function(e,t){this.ensure(e),this._registryMap.get(e).push(t)},s.prototype.setAll=function(e,t){this._registryMap.set(e,t)},s.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},s.prototype.clear=function(){this._registryMap.clear()},s.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},s}(),Ps=function(s){at(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e}(ct),bt=function(){function s(){this.scopedResolutions=new Map}return s}();function Es(s,e){if(s===null)return"at position #"+e;var t=s.split(",")[e].trim();return'"'+t+'" at position #'+e}function Is(s,e,t){return t===void 0&&(t="    "),ce([s],e.message.split(`
`).map(function(n){return t+n})).join(`
`)}function Ds(s,e,t){var n=ze(s.toString().match(/constructor\(([\w, ]+)\)/)||[],2),i=n[1],r=i===void 0?null:i,o=Es(r,e);return Is("Cannot inject the dependency "+o+' of "'+s.name+'" constructor. Reason:',t)}function Ts(s){if(typeof s.dispose!="function")return!1;var e=s.dispose;return!(e.length>0)}var js=function(s){at(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e}(ct),Ls=function(s){at(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e}(ct),Bs=function(){function s(){this.preResolution=new js,this.postResolution=new Ls}return s}(),Nt=new Map,Ns=function(){function s(e){this.parent=e,this._registry=new Ps,this.interceptors=new Bs,this.disposed=!1,this.disposables=new Set}return s.prototype.register=function(e,t,n){n===void 0&&(n={lifecycle:F.Transient}),this.ensureNotDisposed();var i;if(Os(t)?i=t:i={useClass:t},Te(i))for(var r=[e],o=i;o!=null;){var l=o.useToken;if(r.includes(l))throw new Error("Token registration cycle detected! "+ce(r,[l]).join(" -> "));r.push(l);var d=this._registry.get(l);d&&Te(d.provider)?o=d.provider:o=null}if((n.lifecycle===F.Singleton||n.lifecycle==F.ContainerScoped||n.lifecycle==F.ResolutionScoped)&&(je(i)||Ke(i)))throw new Error('Cannot use lifecycle "'+F[n.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:i,options:n}),this},s.prototype.registerType=function(e,t){return this.ensureNotDisposed(),we(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})},s.prototype.registerInstance=function(e,t){return this.ensureNotDisposed(),this.register(e,{useValue:t})},s.prototype.registerSingleton=function(e,t){if(this.ensureNotDisposed(),we(e)){if(we(t))return this.register(e,{useToken:t},{lifecycle:F.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:F.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var n=e;return t&&!we(t)&&(n=t),this.register(e,{useClass:n},{lifecycle:F.Singleton})},s.prototype.resolve=function(e,t){t===void 0&&(t=new bt),this.ensureNotDisposed();var n=this.getRegistration(e);if(!n&&we(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"Single"),n){var i=this.resolveRegistration(n,t);return this.executePostResolutionInterceptor(e,i,"Single"),i}if(Rs(e)){var i=this.construct(e,t);return this.executePostResolutionInterceptor(e,i,"Single"),i}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},s.prototype.executePreResolutionInterceptor=function(e,t){var n,i;if(this.interceptors.preResolution.has(e)){var r=[];try{for(var o=Oe(this.interceptors.preResolution.getAll(e)),l=o.next();!l.done;l=o.next()){var d=l.value;d.options.frequency!="Once"&&r.push(d),d.callback(e,t)}}catch(a){n={error:a}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}this.interceptors.preResolution.setAll(e,r)}},s.prototype.executePostResolutionInterceptor=function(e,t,n){var i,r;if(this.interceptors.postResolution.has(e)){var o=[];try{for(var l=Oe(this.interceptors.postResolution.getAll(e)),d=l.next();!d.done;d=l.next()){var a=d.value;a.options.frequency!="Once"&&o.push(a),a.callback(e,t,n)}}catch(u){i={error:u}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}this.interceptors.postResolution.setAll(e,o)}},s.prototype.resolveRegistration=function(e,t){if(this.ensureNotDisposed(),e.options.lifecycle===F.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);var n=e.options.lifecycle===F.Singleton,i=e.options.lifecycle===F.ContainerScoped,r=n||i,o;return je(e.provider)?o=e.provider.useValue:Te(e.provider)?o=r?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t):Lt(e.provider)?o=r?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t):Ke(e.provider)?o=e.provider.useFactory(this):o=this.construct(e.provider,t),e.options.lifecycle===F.ResolutionScoped&&t.scopedResolutions.set(e,o),o},s.prototype.resolveAll=function(e,t){var n=this;t===void 0&&(t=new bt),this.ensureNotDisposed();var i=this.getAllRegistrations(e);if(!i&&we(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"All"),i){var r=i.map(function(l){return n.resolveRegistration(l,t)});return this.executePostResolutionInterceptor(e,r,"All"),r}var o=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,o,"All"),o},s.prototype.isRegistered=function(e,t){return t===void 0&&(t=!1),this.ensureNotDisposed(),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},s.prototype.reset=function(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},s.prototype.clearInstances=function(){var e,t;this.ensureNotDisposed();try{for(var n=Oe(this._registry.entries()),i=n.next();!i.done;i=n.next()){var r=ze(i.value,2),o=r[0],l=r[1];this._registry.setAll(o,l.filter(function(d){return!je(d.provider)}).map(function(d){return d.instance=void 0,d}))}}catch(d){e={error:d}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},s.prototype.createChildContainer=function(){var e,t;this.ensureNotDisposed();var n=new s(this);try{for(var i=Oe(this._registry.entries()),r=i.next();!r.done;r=i.next()){var o=ze(r.value,2),l=o[0],d=o[1];d.some(function(a){var u=a.options;return u.lifecycle===F.ContainerScoped})&&n._registry.setAll(l,d.map(function(a){return a.options.lifecycle===F.ContainerScoped?{provider:a.provider,options:a.options}:a}))}}catch(a){e={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},s.prototype.beforeResolution=function(e,t,n){n===void 0&&(n={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:t,options:n})},s.prototype.afterResolution=function(e,t,n){n===void 0&&(n={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:t,options:n})},s.prototype.dispose=function(){return Ss(this,void 0,void 0,function(){var e;return As(this,function(t){switch(t.label){case 0:return this.disposed=!0,e=[],this.disposables.forEach(function(n){var i=n.dispose();i&&e.push(i)}),[4,Promise.all(e)];case 1:return t.sent(),[2]}})})},s.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},s.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},s.prototype.construct=function(e,t){var n=this;if(e instanceof Bt)return e.createProxy(function(r){return n.resolve(r,t)});var i=function(){var r=Nt.get(e);if(!r||r.length===0){if(e.length===0)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var o=r.map(n.resolveParams(t,e));return new(e.bind.apply(e,ce([void 0],o)))}();return Ts(i)&&this.disposables.add(i),i},s.prototype.resolveParams=function(e,t){var n=this;return function(i,r){var o,l,d;try{return $s(i)?gt(i)?i.multiple?(o=n.resolve(i.transform)).transform.apply(o,ce([n.resolveAll(i.token)],i.transformArgs)):(l=n.resolve(i.transform)).transform.apply(l,ce([n.resolve(i.token,e)],i.transformArgs)):i.multiple?n.resolveAll(i.token):n.resolve(i.token,e):gt(i)?(d=n.resolve(i.transform,e)).transform.apply(d,ce([n.resolve(i.token,e)],i.transformArgs)):n.resolve(i,e)}catch(a){throw new Error(Ds(t,r,a))}}},s.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},s}(),qe=new Ns;function Fe(){return function(s){Nt.set(s,qs(s))}}function zs(s){return s===void 0&&(s=[]),function(e){return s.forEach(function(t){var n=t.token,i=t.options,r=Ms(t,["token","options"]);return qe.register(n,r,i)}),e}}function dt(){return function(s){Fe()(s),qe.registerSingleton(s)}}function Fs(s){var e={token:s,multiple:!0};return Cs(e)}if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);var Hs=Object.defineProperty,Xs=Object.getOwnPropertyDescriptor,zt=(s,e,t,n)=>{for(var i=n>1?void 0:n?Xs(e,t):e,r=s.length-1,o;r>=0;r--)(o=s[r])&&(i=(n?o(e,t,i):o(i))||i);return n&&i&&Hs(e,t,i),i};class B{constructor(e=0,t=0){c(this,"x");c(this,"y");this.x=e,this.y=t}}let Qe=class{constructor(){c(this,"currentImage");c(this,"frameElapsed",0);c(this,"dimensions",{width:80,height:80});c(this,"spriteScale",4);c(this,"animateFrames",0);c(this,"goingDown",!0);c(this,"yOffset",0)}draw(s,e,t,n=!0,i=0,r=0,o=0){var l;if(e.sprites){this.updateScale(s.canvas.width,s.canvas.height);let d=e.gender!=="unknown"?e.sprites[e.gender][t]:e.sprites.male[t],a="frame";e.isShiny&&(a="shiny"),this.frameElapsed+i<100?a+="1":a+="2",this.frameElapsed+i>=200&&(this.frameElapsed=0);let u=d[a];if(!u)return;if(!this.currentImage||this.currentImage.src!==u){let h=new Image;h.src=u,h.onload=()=>{this.currentImage=h}}if(this.goingDown=this.animateFrames<=10,this.yOffset=this.goingDown?this.yOffset+1:this.yOffset-1,this.animateFrames++,this.animateFrames>=20&&(this.animateFrames=0),(l=this.currentImage)!=null&&l.complete){let h=this.getPosition(s,t,r,o);s.drawImage(this.currentImage,0,0,this.dimensions.width,this.dimensions.height,h.x,h.y+(n?this.yOffset:0),this.dimensions.width*this.spriteScale,this.dimensions.height*this.spriteScale),this.frameElapsed++}}}getPosition(s,e,t=0,n=0){let i=new B;return e==="front"?i=new B(s.canvas.width/4*3-this.dimensions.width*(this==null?void 0:this.spriteScale)/2+t,s.canvas.height/2-this.dimensions.height*(this==null?void 0:this.spriteScale)*1.2+n):i=new B(s.canvas.width/4-this.dimensions.width*this.spriteScale/2+t,s.canvas.height/4*3-this.dimensions.height*this.spriteScale*.75+n),i}updateScale(s,e){s<1100?this.spriteScale=2:this.spriteScale=4}};Qe=zt([dt()],Qe);let et=class{constructor(){c(this,"images",{});c(this,"battlefields",{default:"src/assets/battle/battle-default.png",grass:"src/assets/battle/battle-grass.png",water:"src/assets/battle/battle-water.png",rock:"src/assets/battle/battle-rock.png",rainy:"src/assets/battle/battle-rainy.png"});c(this,"dimensions",{width:240,height:112})}draw(s,e="default"){let t=this.images[e];t&&t.complete?this.drawImage(s,t):(t=new Image,t.src=this.battlefields[e],t.onload=()=>{this.images[e]=t,s.drawImage(t,0,0,s.canvas.width,s.canvas.height)})}drawImage(s,e){s.drawImage(e,0,0,this.dimensions.width,this.dimensions.height,0,0,s.canvas.width,s.canvas.height*.75)}};et=zt([dt()],et);class Us{constructor(e,t,n,i,r){c(this,"down");c(this,"up");c(this,"left");c(this,"right");c(this,"battle");c(this,"width",80);c(this,"height",80);this.down=e,this.up=t,this.left=n,this.right=i,this.battle=r}}class Ft{constructor(e,t,n,i=[]){c(this,"name");c(this,"gender");c(this,"sprites");c(this,"monsters");c(this,"bag",[]);c(this,"lvl",1);c(this,"moving",!1);c(this,"direction","down");c(this,"positionOnScreen");c(this,"positionOnMap");c(this,"frames");c(this,"spriteScale",1);this.name=e,this.gender=t,this.sprites=n,this.monsters=i,this.frames={max:3,val:0,elapsed:0},this.positionOnMap=new B(0,0),this.positionOnScreen=new B(0,0)}get sprite(){return this.sprites[this.direction]}draw(e,t,n,i,r){let o=this.sprite||this.sprites.down,l=i*n,d=r*n,a=e.canvas.width/2-l/2,u=e.canvas.height/2-d/2;this.moving?(this.frames.max>1&&(this.frames.elapsed+=1),this.frames.elapsed%2===0&&(this.frames.val+=1,this.frames.val>this.frames.max-1&&(this.frames.val=0))):this.frames.val=1,e.drawImage(o,this.frames.val*(o.width/this.frames.max),0,o.width/this.frames.max,o.height,a+this.positionOnScreen.x,u+this.positionOnScreen.y-10,o.width/this.frames.max*n,o.height*n)}updatePosition(e,t){this.positionOnMap.x=e.x+t.x,this.positionOnMap.y=e.y+t.y}}class Gs{constructor(){c(this,"ready",!1);c(this,"chartById",new Map);fetch("/src/assets/data/final/xp-chart.json").then(e=>e.json()).then(e=>{e.forEach(t=>{this.chartById.has(t.growth_rate_id)||this.chartById.set(t.growth_rate_id,[]),this.chartById.get(t.growth_rate_id).push(new Ws(t.level,t.experience))}),this.ready=!0})}howMuchINeed(e,t){if(!this.ready||e<1||e>100||!this.chartById.has(t))return console.error("ERROR",e,t),0;let n=this.chartById.get(t),i=n==null?void 0:n.find(r=>r.level===e);return(i==null?void 0:i.experience)||0}howMuchIGet(e,t,n,i=!1,r=!1){let o=t.baseXp,l=t.level,d=i?1.5:1,a=r?2*n:n;return Math.floor(o*l/7*d*(1/a)*1*1*1*1*1)}}class Ws{constructor(e,t){c(this,"level");c(this,"experience");this.level=e,this.experience=t}}const vt=new Gs;class Vs{constructor(e,t,n,i,r,o,l,d,a,u,h){c(this,"name");c(this,"type");c(this,"category");c(this,"power");c(this,"accuracy");c(this,"pp");c(this,"priority");c(this,"effect");c(this,"effectChance");c(this,"description");c(this,"level");this.name=e,this.type=t,this.category=n,this.power=i,this.accuracy=r,this.pp=o,this.priority=l,this.effect=d,this.effectChance=a,this.description=u,this.level=h}}class Zs extends Vs{constructor(t,n,i,r,o,l,d,a,u,h,f){super(t,n,i,r,o,l,d,a,u,h,f);c(this,"currentPp");this.currentPp=l}}class He extends ut{constructor(t,n,i){super(t.id,t.name,t.types,t.abilities,t.moves,t.stats,t.height,t.weight,t.description,t.isLegendary,t.captureRate,t.experienceGrowth,t.baseXp,t.percentageMale,t.evolution,t.sprites);c(this,"currentStats",new ae);c(this,"currentHp",1);c(this,"currentXp",0);c(this,"xpToNextLevel",0);c(this,"currentAbility","");c(this,"level",1);c(this,"evsToDistribute",0);c(this,"fainted",!1);c(this,"moves",[]);c(this,"ivs",new ae);c(this,"evs",new ae);c(this,"nature","");c(this,"gender");c(this,"heldItem",{});c(this,"isShiny",!1);c(this,"spriteDrawer");i?(this.currentAbility=t.abilities.includes(i.currentAbility)?i.currentAbility:t.abilities[Math.floor(Math.random()*t.abilities.length)],this.evs=i.evs,this.ivs=i.ivs,this.level=i.level,this.currentXp=i.currentXp,this.currentHp=i.currentHp,this.moves=i.moves,this.isShiny=i.isShiny,this.gender=i.gender,this.evsToDistribute=i.evsToDistribute,this.heldItem=i.heldItem,this.updateCurrentStats()):(this.currentAbility=this.abilities[Math.floor(Math.random()*this.abilities.length)],this.evs=new ae,this.ivs=new ae(Math.floor(Math.random()*32),Math.floor(Math.random()*32),Math.floor(Math.random()*32),Math.floor(Math.random()*32),Math.floor(Math.random()*32),Math.floor(Math.random()*32)),this.level=n||5,this.currentXp=0,this.updateCurrentStats(),this.currentHp=this.currentStats.hp,this.moves=this.selectLatestMoves(t),this.isShiny=Math.floor(Math.random()*2048)===0,this.gender=this.percentageMale?Math.random()*this.percentageMale<=this.percentageMale?"male":"female":"unknown"),this.spriteDrawer=qe.resolve(Qe)}get spriteScale(){return 1}get totalEvs(){return this.evs.attack+this.evs.defense+this.evs.specialAttack+this.evs.specialDefense+this.evs.speed+this.evs.hp}draw(t,n,i=0,r=0,o=0){this.spriteDrawer.draw(t,this,n,!0,i,r,o)}selectMove(t,n){let i=Math.floor(Math.random()*this.moves.length),r=this.moves[i];return t==="Easy"&&n&&((n==null?void 0:n.types.length)===2?this.moves.find(l=>l.type===n.types[0]&&l.power>0):this.moves.find(l=>(l.type===n.types[0]||l.type===n.types[1])&&l.power>0)),r}fromBaseStats(){return new ae(Math.floor((this.ivs.hp+this.stats.hp*2+this.evs.hp/4)*this.level/100+10+this.level),Math.floor((this.ivs.attack+this.stats.attack*2+this.evs.attack/4)*this.level/100+5),Math.floor((this.ivs.defense+this.stats.defense*2+this.evs.defense/4)*this.level/100+5),Math.floor((this.ivs.specialAttack+this.stats.specialAttack*2+this.evs.specialAttack/4)*this.level/100+5),Math.floor((this.ivs.specialDefense+this.stats.specialDefense*2+this.evs.specialDefense/4)*this.level/100+5),Math.floor((this.ivs.speed+this.stats.speed*2+this.evs.speed/4)*this.level/100+5))}howMuchXpWon(t,n=1,i=!1){return vt.howMuchIGet(this,t,n,i,!1)}addXp(t,n){if(this.evsToDistribute+=this.totalEvs+n<=255?n:this.totalEvs+n-255,this.level>=100)return;let i=0;if(this.xpToNextLevel<t){i=t-this.xpToNextLevel;const r=t-i;this.currentXp+=r}else this.currentXp+=t;this.currentXp>=this.xpToNextLevel&&this.levelUp(),i>0&&this.addXp(i,0)}addEvs(t){let n=this.totalEvs;this.evs.hp+=this.evs.hp+t.hp<=255&&n+t.hp<512?t.hp:0,this.evs.attack+=this.evs.attack+t.attack<=255&&n+t.attack<512?t.attack:0,this.evs.defense+=this.evs.defense+t.defense<=255&&n+t.defense<512?t.defense:0,this.evs.specialAttack+=this.evs.specialAttack+t.specialAttack<=255&&n+t.specialAttack<512?t.specialAttack:0,this.evs.specialDefense+=this.evs.specialDefense+t.specialDefense<=255&&n+t.specialDefense<512?t.specialDefense:0,this.evs.speed+=this.evs.speed+t.speed<=255&&n+t.speed<512?t.speed:0}levelUp(){if(this.level>=100)return;let t=this.currentStats.hp;this.level+=1,this.updateCurrentStats(),t=this.currentStats.hp-t,this.currentHp+=t,this.currentXp=0,this.xpToNextLevel=vt.howMuchINeed(this.level,this.experienceGrowth)}checkForNewMoves(){this.moves.filter(t=>t.level===this.level)}evolve(t,n){n.found&&n.result&&(Object.assign(this,new He(n.result,this.level,this)),this.checkForNewMoves())}updateCurrentStats(){this.currentStats=this.fromBaseStats()}selectLatestMoves(t){return t.moves.filter(n=>n.level<=this.level).slice(-4).map(n=>new Zs(n.name,n.type,n.category,n.power,n.accuracy,n.pp,n.priority,n.effect,n.effectChance,n.description,n.level))}}class Ys{constructor(){c(this,"entries",[]);c(this,"ready",!1);c(this,"size",251)}importFromJson(e){var t;((t=this.entries)==null?void 0:t.length)===0&&(e.forEach(n=>{this.entries.push(new ut(n.id,n.name,n.types,n.abilities,n.moves,n.stats,n.height,n.weight,n.description,n.isLegendary,n.captureRate,n.baseXp,n.experienceGrowth,n.percentageMale,n.evolution,n.sprites))}),this.entries.length===this.size&&(this.ready=!0))}findById(e){if(!this.ready||e===void 0||e===null||e<1||e>this.size)return new ye(new Pe);let t=this.entries.find(n=>n.id===e);return t!=null&&t.id?new ye(t):new ye(new Pe)}findByName(e){if(!this.ready||e===void 0||e===null||e==="")return new ye(new Pe);let t=this.entries.find(n=>n.name.toLowerCase()===e.toLowerCase());return t!=null&&t.id?new ye(t):new ye(new Pe)}}class ye{constructor(e){c(this,"result");c(this,"found",!1);this.result=e,this.found=e!==void 0}}class ut{constructor(e,t,n,i,r,o,l,d,a,u,h,f,y,p,w,k){c(this,"id");c(this,"name");c(this,"types");c(this,"abilities");c(this,"moves");c(this,"stats");c(this,"height");c(this,"weight");c(this,"description");c(this,"isLegendary");c(this,"captureRate");c(this,"growthRateId");c(this,"baseXp");c(this,"experienceGrowth");c(this,"percentageMale");c(this,"evolution");c(this,"sprites");switch(this.id=e,this.name=t,this.types=n,this.abilities=i,this.moves=r,this.stats=o,this.height=l,this.weight=d,this.description=a,this.isLegendary=u,this.captureRate=h,this.experienceGrowth=f,this.baseXp=y,this.percentageMale=p,this.evolution=w,this.sprites=k,f){case 6e5:this.growthRateId=5;break;case 8e5:this.growthRateId=3;break;case 1e6:this.growthRateId=2;break;case 1059860:this.growthRateId=4;break;case 125e4:this.growthRateId=1;break;case 164e4:this.growthRateId=6;break;default:this.growthRateId=1;break}}instanciate(e){return new He(this,e)}}class Pe extends ut{constructor(){super(0,"Unknown",[],[],[],new ae,0,0,"Unknown",!1,0,0,0,0,[])}}class ae{constructor(e=0,t=0,n=0,i=0,r=0,o=0,l){c(this,"hp");c(this,"attack");c(this,"defense");c(this,"specialAttack");c(this,"specialDefense");c(this,"speed");c(this,"total");this.hp=e,this.attack=t,this.defense=n,this.specialAttack=i,this.specialDefense=r,this.speed=o,l?this.total=l:this.total=this.hp+this.attack+this.defense+this.specialAttack+this.specialDefense+this.speed}}function Js(s){pe(s,"svelte-1cbbcxy",'.menu.svelte-1cbbcxy.svelte-1cbbcxy{position:absolute;top:0;right:-20dvw;width:20dvw;font-size:36px;background-color:#FFFFFF;z-index:3;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:right 0.3s ease-in-out;border:3px solid #1e1e1e;border-radius:16px}.menu.svelte-1cbbcxy ul.svelte-1cbbcxy{box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;border-radius:12px;list-style:none;padding:12px 32px;margin:0;display:flex;flex-direction:column;height:100%;width:100%;align-items:center}.menu.svelte-1cbbcxy ul li.svelte-1cbbcxy{font-size:4rem;margin:1rem 0;text-align:center;cursor:pointer;flex-grow:1;width:100%;height:100%;min-height:60px;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li:hover .svelte-1cbbcxy:before{content:"";width:0;height:0;border-top:20px solid transparent;border-bottom:20px solid transparent;border-left:20px solid #262626;position:absolute;left:40px}.menu.svelte-1cbbcxy ul li button.svelte-1cbbcxy{background:none;border:none;font-size:inherit;font-family:inherit;cursor:inherit;outline:none;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li button .svelte-1cbbcxy:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%}.menu.open.svelte-1cbbcxy.svelte-1cbbcxy{opacity:1;pointer-events:all;right:0}')}function Ks(s){let e;return{c(){e=m("div"),e.innerHTML='<ul class="svelte-1cbbcxy"><li class="svelte-1cbbcxy"><button tabindex="0" class="svelte-1cbbcxy">Pokedex</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Pokemon</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Bag</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Trainer</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Save</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Options</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Credits</button></li></ul>',v(e,"class","menu svelte-1cbbcxy"),M(e,"open",s[0])},m(t,n){A(t,e,n)},p(t,[n]){n&1&&M(e,"open",t[0])},i:L,o:L,d(t){t&&S(e)}}}function Qs(s,e,t){let{menuOpened:n}=e,{player:i}=e;return s.$$set=r=>{"menuOpened"in r&&t(0,n=r.menuOpened),"player"in r&&t(1,i=r.player)},[n,i]}class Ht extends ve{constructor(e){super(),ge(this,e,Qs,Ks,he,{menuOpened:0,player:1},Js)}get menuOpened(){return this.$$.ctx[0]}set menuOpened(e){this.$$set({menuOpened:e}),I()}get player(){return this.$$.ctx[1]}set player(e){this.$$set({player:e}),I()}}be(Ht,{menuOpened:{},player:{}},[],[],!0);function en(s){pe(s,"svelte-68hs54",".ally-info.svelte-68hs54.svelte-68hs54{opacity:0;visibility:hidden;z-index:9;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;bottom:26dvh;right:-30dvw;transition:right 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly;font-size:46px}.ally-info.opened.svelte-68hs54.svelte-68hs54{opacity:1;visibility:visible;right:1dvw}.ally-info.svelte-68hs54 .name-lvl.svelte-68hs54{display:flex;justify-content:space-between;align-items:center}.ally-info.svelte-68hs54 .status.svelte-68hs54{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.ally-info.svelte-68hs54 .hp.svelte-68hs54{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.ally-info.svelte-68hs54 .hp span.svelte-68hs54{padding:0 0 0 12px;font-weight:bold}.ally-info.svelte-68hs54 .hp .progressbar-wrapper.svelte-68hs54{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.ally-info.svelte-68hs54 .hp .progressbar-wrapper .progressbar.svelte-68hs54{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px;transition:width 1s ease-in-out}.ally-info.svelte-68hs54 .hp .progressbar-wrapper .progressbar.warning.svelte-68hs54{background:rgb(255, 241, 164);background:linear-gradient(0deg, rgb(255, 241, 164) 0%, rgb(255, 194, 16) 30%, rgb(255, 194, 16) 50%, rgb(255, 194, 16) 70%, rgb(255, 241, 164) 100%)}.ally-info.svelte-68hs54 .hp .progressbar-wrapper .progressbar.danger.svelte-68hs54{background:rgb(244, 177, 159);background:linear-gradient(0deg, rgb(244, 177, 159) 0%, rgb(223, 85, 48) 30%, rgb(223, 85, 48) 50%, rgb(223, 85, 48) 70%, rgb(244, 177, 159) 100%)}@media screen and (max-width: 1100px){.ally-info.svelte-68hs54.svelte-68hs54{font-size:36px;border:8px solid #595b59;height:16dvh}.ally-info.svelte-68hs54 .hp.svelte-68hs54{width:80%;height:18px}.ally-info.svelte-68hs54 .hp .progressbar-wrapper.svelte-68hs54{height:14px}}")}function tn(s){let e,t,n,i=s[1].name+"",r,o,l,d,a=s[1].level+"",u,h,f,y,p,w,k,_,C,E=s[1].currentHp+"",Z,N,b=s[1].currentStats.hp+"",$;return{c(){e=m("div"),t=m("div"),n=m("span"),r=P(i),o=q(),l=m("span"),d=P("Lv "),u=P(a),h=q(),f=m("div"),y=m("div"),p=m("span"),p.textContent="HP",w=q(),k=m("div"),_=m("div"),C=q(),Z=P(E),N=P(" / "),$=P(b),v(n,"class","svelte-68hs54"),v(l,"class","svelte-68hs54"),v(t,"class","name-lvl svelte-68hs54"),v(p,"class","svelte-68hs54"),v(_,"class","progressbar svelte-68hs54"),ne(_,"--width",s[2]+"%"),M(_,"warning",s[2]<=50),M(_,"danger",s[2]<15),v(k,"class","progressbar-wrapper svelte-68hs54"),v(y,"class","hp svelte-68hs54"),v(f,"class","status svelte-68hs54"),v(e,"class","ally-info svelte-68hs54"),M(e,"opened",s[0])},m(R,D){A(R,e,D),g(e,t),g(t,n),g(n,r),g(t,o),g(t,l),g(l,d),g(l,u),g(e,h),g(e,f),g(f,y),g(y,p),g(y,w),g(y,k),g(k,_),g(f,C),g(f,Z),g(f,N),g(f,$)},p(R,[D]){D&2&&i!==(i=R[1].name+"")&&X(r,i),D&2&&a!==(a=R[1].level+"")&&X(u,a),D&4&&ne(_,"--width",R[2]+"%"),D&4&&M(_,"warning",R[2]<=50),D&4&&M(_,"danger",R[2]<15),D&2&&E!==(E=R[1].currentHp+"")&&X(Z,E),D&2&&b!==(b=R[1].currentStats.hp+"")&&X($,b),D&1&&M(e,"opened",R[0])},i:L,o:L,d(R){R&&S(e)}}}function sn(s,e,t){let n,{opened:i}=e,{monster:r}=e;return s.$$set=o=>{"opened"in o&&t(0,i=o.opened),"monster"in o&&t(1,r=o.monster)},s.$$.update=()=>{s.$$.dirty&2&&t(2,n=Math.floor(r.currentHp*100/r.currentStats.hp))},[i,r,n]}class Xt extends ve{constructor(e){super(),ge(this,e,sn,tn,he,{opened:0,monster:1},en)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),I()}get monster(){return this.$$.ctx[1]}set monster(e){this.$$set({monster:e}),I()}}be(Xt,{opened:{},monster:{}},[],[],!0);var Ut=Object.defineProperty,nn=Object.getOwnPropertyDescriptor,rn=(s,e,t)=>e in s?Ut(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Ce=(s,e,t,n)=>{for(var i=n>1?void 0:n?nn(e,t):e,r=s.length-1,o;r>=0;r--)(o=s[r])&&(i=(n?o(e,t,i):o(i))||i);return n&&i&&Ut(e,t,i),i},on=(s,e)=>(t,n)=>e(t,n,s),ln=(s,e,t)=>(rn(s,typeof e!="symbol"?e+"":e,t),t);let tt=class{constructor(){c(this,"move_effect_id",1)}apply(s){console.log("RegularDamageEffect")}};tt=Ce([Fe()],tt);let mt=class{constructor(){c(this,"move_effect_id",2)}apply(s){console.log("Sleep")}};mt=Ce([Fe()],mt);let wt=class{constructor(){c(this,"move_effect_id",3)}apply(s){console.log("Poison")}};wt=Ce([Fe()],wt);let Ae=class{};ln(Ae,"token",Symbol("Effects"));Ae=Ce([zs([{token:Ae.token,useToken:tt}])],Ae);let st=class{constructor(s){this.moveEffects=s}apply(s,e,t){var n;(n=this.moveEffects.find(i=>i.move_effect_id===s.move_effect_id))!=null&&n.apply(e)||console.log("No effect found")}};st=Ce([dt(),on(0,Fs(Ae.token))],st);const an=qe.resolve(st);class cn{constructor(e,t,n){c(this,"player");c(this,"playerCurrentMonster");c(this,"opponent");c(this,"opponentCurrentMonster");c(this,"isPlayerTurn");c(this,"turnStack");c(this,"escapeAttempts",0);c(this,"onClose",()=>{});c(this,"currentMessage","What will you do ?");c(this,"sleep",e=>new Promise(t=>setTimeout(t,e)));this.player=e,this.opponent=t,this.playerCurrentMonster=e.monsters[0],this.opponentCurrentMonster=this.wild?t:t.monsters[0],this.turnStack=[],this.isPlayerTurn=!0}get wild(){return this.opponent instanceof He}selectAction(e){this.isPlayerTurn=!1,e instanceof Le&&this.playerCurrentMonster.currentStats.speed>this.opponentCurrentMonster.currentStats.speed||e instanceof nt||e instanceof _t||e instanceof kt?(this.turnStack.push(e),this.selectOpponentAction()):(this.selectOpponentAction(),this.turnStack.push(e)),this.executeAction(this.turnStack.shift())}runAway(){if(this.wild){this.escapeAttempts++;const e=Math.random()*255;Math.floor(this.opponentCurrentMonster.currentStats.speed*128/this.playerCurrentMonster.currentStats.speed)+30*this.escapeAttempts*e>255?(this.turnStack=[],this.turnStack.push(new Ue(this.playerCurrentMonster)),this.turnStack.unshift(new Q("You ran away safely!",this.playerCurrentMonster))):this.turnStack.unshift(new Q("Failed to run away!",this.playerCurrentMonster))}else this.turnStack.unshift(new Q("You can't run away from a trainer battle!",this.playerCurrentMonster))}attack(e){const t=e.initiator,n=e.target==="opponent"?this.opponentCurrentMonster:this.playerCurrentMonster,i=this.calculateDamage(t,n,e.move);an.apply(e.move.effect,[n],t);const r=[];r.push(new Q(t.name+" used "+e.move.name+"!",e.initiator)),i.immune?r.push(new Q("It doesn't affect "+n.name+"...",e.initiator)):i.notVeryEffective?r.push(new Q("It's not very effective...",e.initiator)):i.superEffective&&r.push(new Q("It's super effective!",e.initiator)),i.critical&&r.push(new Q("A critical hit!",e.initiator)),r.push(new yt(i.damages,e.target,e.initiator)),r.reverse().forEach(o=>this.turnStack.unshift(o))}calculateDamage(e,t,n){let i=new dn;if(n.category!=="status"){const r=n.category==="physical"?e.currentStats.attack:e.currentStats.specialAttack,o=n.category==="physical"?t.currentStats.defense:t.currentStats.specialDefense,l=this.calculateTypeEffectiveness(n.type,t.types);i.superEffective=l>1,i.notVeryEffective=l<1,i.immune=l===0;const d=i.immune?0:this.calculateCritical();i.critical=d>1;const a=Math.random()*(1-.85)+.85,u=this.calculateStab(e,n),f=l*d*a*u*1;i.damages=Math.floor(((2*e.level/5+2)*n.power*r/o/50+2)*f)}else i.damages=0;return i}calculateTypeEffectiveness(e,t){return t.reduce((n,i)=>{const r=un(e,i);return n*r},1)}calculateCritical(){return Math.random()<.0625?1.5:1}calculateStab(e,t){return e.types.includes(t.type)?1.5:1}selectOpponentAction(){const e=this.opponentCurrentMonster.selectMove("Easy");this.turnStack.push(new Le(e,"ally",this.opponentCurrentMonster))}executeAction(e){var t;e&&(e instanceof Le&&!e.initiator.fainted?this.attack(e):e instanceof nt?this.runAway():e instanceof _t||e instanceof kt||(e instanceof Q?this.currentMessage=e.description:e instanceof yt?this.removeHP(e):e instanceof Ue&&this.onClose())),(t=this.turnStack)!=null&&t.length||0>0?this.sleep(1e3).then(()=>{var n;return this.executeAction((n=this.turnStack)==null?void 0:n.shift())}):this.isPlayerTurn=!0}removeHP(e){const t=e.target==="opponent"?this.opponentCurrentMonster:this.playerCurrentMonster;t.currentHp-=e.damages,t.currentHp<=0&&(t.currentHp=0,t.fainted=!0,this.turnStack=[],this.turnStack.push(new Q(t.name+" fainted!",e.initiator)),(this.wild||this.opponent instanceof Ft&&this.opponent.monsters.every(n=>n.fainted))&&(this.turnStack.unshift(new Ue(e.initiator)),this.turnStack.unshift(new Q("You won the battle!",e.initiator)),setTimeout(()=>{this.onClose()},1e3)))}}class dn{constructor(){c(this,"superEffective",!1);c(this,"notVeryEffective",!1);c(this,"immune",!1);c(this,"critical",!1);c(this,"effectSuccess",!1);c(this,"effectApplied","");c(this,"damages",0)}}class Ue{constructor(e){c(this,"name");c(this,"description");c(this,"initiator");this.name="End Battle",this.description="End Battle",this.initiator=e}}class yt{constructor(e,t,n){c(this,"name");c(this,"description");c(this,"damages");c(this,"target");c(this,"initiator");this.name="Remove HP",this.description="Remove HP",this.damages=e,this.target=t,this.initiator=n}}class Q{constructor(e,t){c(this,"name");c(this,"description");c(this,"initiator");this.name="Message",this.description=e,this.initiator=t}}class nt{constructor(e){c(this,"description");c(this,"name");c(this,"initiator");this.name="Run Away",this.description="Run away from the battle",this.initiator=e}}class _t{constructor(e,t){c(this,"description");c(this,"name");c(this,"targetIdx");c(this,"initiator");this.name="Change Pokemon",this.description="Change the current pokemon",this.targetIdx=e,this.initiator=t}}class Le{constructor(e,t,n){c(this,"name");c(this,"description");c(this,"move");c(this,"target");c(this,"initiator");this.name=e.name,this.description=e.description,this.move=e,this.target=t,this.initiator=n}}class kt{constructor(e,t,n,i,r,o=0){c(this,"description");c(this,"name");c(this,"itemId");c(this,"targetType");c(this,"targetIdx");c(this,"initiator");this.name=e,this.description=t,this.itemId=n,this.targetType=i,this.targetIdx=o,this.initiator=r}}function un(s,e){return fn[s.toLowerCase()][e.toLowerCase()]}const fn={normal:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:.5,ghost:0,dragon:1,dark:1,steel:.5},fire:{normal:1,fire:.5,water:.5,electric:1,grass:2,ice:2,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:2,rock:.5,ghost:1,dragon:.5,dark:1,steel:2},water:{normal:1,fire:2,water:.5,electric:1,grass:.5,ice:1,fighting:1,poison:1,ground:2,flying:1,psychic:1,bug:1,rock:2,ghost:1,dragon:.5,dark:1,steel:1},electric:{normal:1,fire:1,water:2,electric:.5,grass:.5,ice:1,fighting:1,poison:1,ground:0,flying:2,psychic:1,bug:1,rock:1,ghost:1,dragon:.5,dark:1,steel:1},grass:{normal:1,fire:.5,water:2,electric:1,grass:.5,ice:1,fighting:1,poison:.5,ground:2,flying:.5,psychic:1,bug:.5,rock:2,ghost:1,dragon:.5,dark:1,steel:.5},ice:{normal:1,fire:.5,water:.5,electric:1,grass:2,ice:.5,fighting:1,poison:1,ground:2,flying:2,psychic:1,bug:1,rock:1,ghost:1,dragon:2,dark:1,steel:.5},fighting:{normal:2,fire:1,water:1,electric:1,grass:1,ice:2,fighting:1,poison:.5,ground:1,flying:.5,psychic:.5,bug:.5,rock:2,ghost:0,dragon:1,dark:2,steel:2},poison:{normal:1,fire:1,water:1,electric:1,grass:2,ice:1,fighting:1,poison:.5,ground:.5,flying:1,psychic:1,bug:1,rock:.5,ghost:.5,dragon:1,dark:1,steel:0},ground:{normal:1,fire:2,water:1,electric:2,grass:.5,ice:1,fighting:1,poison:2,ground:1,flying:0,psychic:1,bug:.5,rock:2,ghost:1,dragon:1,dark:1,steel:2},flying:{normal:1,fire:1,water:1,electric:.5,grass:2,ice:1,fighting:2,poison:1,ground:1,flying:1,psychic:1,bug:2,rock:.5,ghost:1,dragon:1,dark:1,steel:.5},psychic:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:2,poison:2,ground:1,flying:1,psychic:.5,bug:1,rock:1,ghost:1,dragon:1,dark:0,steel:.5},bug:{normal:1,fire:.5,water:1,electric:1,grass:2,ice:1,fighting:.5,poison:.5,ground:1,flying:.5,psychic:2,bug:1,rock:1,ghost:.5,dragon:1,dark:2,steel:.5},rock:{normal:1,fire:2,water:1,electric:1,grass:1,ice:2,fighting:.5,poison:1,ground:.5,flying:2,psychic:1,bug:2,rock:1,ghost:1,dragon:1,dark:1,steel:.5},ghost:{normal:0,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:2,bug:1,rock:1,ghost:2,dragon:1,dark:.5,steel:.5},dragon:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:1,ghost:1,dragon:2,dark:1,steel:.5},dark:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:.5,poison:1,ground:1,flying:1,psychic:2,bug:1,rock:1,ghost:2,dragon:1,dark:.5,steel:.5},steel:{normal:1,fire:.5,water:.5,electric:.5,grass:1,ice:2,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:2,ghost:1,dragon:1,dark:1,steel:.5}};function hn(s){pe(s,"svelte-b0lsc5",".action-bar.svelte-b0lsc5.svelte-b0lsc5{opacity:0;visibility:hidden;z-index:9;background-color:white;height:25dvh;width:100dvw;position:absolute;bottom:-25dvh;left:0;transition:bottom 0.5s ease-in-out;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;display:flex;font-size:64px}.action-bar.opened.svelte-b0lsc5.svelte-b0lsc5{opacity:1;visibility:visible;bottom:0}.action-bar.svelte-b0lsc5 .info.svelte-b0lsc5{width:50%;height:100%;display:flex;align-items:center;align-content:center;justify-content:space-around;position:relative}.action-bar.svelte-b0lsc5 .info ._inner.svelte-b0lsc5{position:absolute;left:17px;z-index:1;height:calc(100% - 55px);border:10px solid black;border-radius:10px;display:flex;align-items:center;justify-content:center;width:100%;text-transform:capitalize}.action-bar.svelte-b0lsc5 .info ._inner .move-desc.svelte-b0lsc5{text-transform:initial;font-size:46px;display:flex;flex-wrap:wrap;gap:16px;word-break:break-word;box-sizing:border-box;padding:0 20px}.action-bar.svelte-b0lsc5 .info ._inner .move-desc p.svelte-b0lsc5{flex:45%;margin:0}.action-bar.svelte-b0lsc5 .actions.svelte-b0lsc5,.action-bar.svelte-b0lsc5 .moves.svelte-b0lsc5{width:50%;height:100%;display:flex;background:#FFFFFF;border:14px solid #595b59;border-radius:8px;box-sizing:border-box;padding:12px;z-index:2;flex-wrap:wrap;gap:12px}.action-btn.svelte-b0lsc5.svelte-b0lsc5{background-color:var(--color);font-size:64px;color:white;border-radius:24px;border:6px solid #595b59;font-family:pokemon, serif;transition:color 0.3s ease-in-out, opacity 0.3s ease-in-out;flex:48%}.action-btn.svelte-b0lsc5.svelte-b0lsc5:hover,.action-btn.selected.svelte-b0lsc5.svelte-b0lsc5{cursor:pointer;opacity:0.96;color:#262626}.action-btn[disabled].svelte-b0lsc5.svelte-b0lsc5{opacity:0.5;cursor:not-allowed;pointer-events:none}@media screen and (max-width: 1100px){.action-bar.svelte-b0lsc5.svelte-b0lsc5{font-size:32px}.action-bar.svelte-b0lsc5 .actions.svelte-b0lsc5,.action-bar.svelte-b0lsc5 .moves.svelte-b0lsc5{padding:2px;gap:4px;border:8px solid #595b59}.action-bar.svelte-b0lsc5 .actions .action-btn.svelte-b0lsc5,.action-bar.svelte-b0lsc5 .moves .action-btn.svelte-b0lsc5{font-size:32px}.action-bar.svelte-b0lsc5 .info ._inner.svelte-b0lsc5{left:10px;height:calc(100% - 37px);border:8px solid black}.action-bar.svelte-b0lsc5 .info ._inner .move-desc.svelte-b0lsc5{font-size:32px}}")}function xt(s,e,t){const n=s.slice();return n[11]=e[t],n[13]=t,n}function pn(s){var R,D,Y,V,te,re;let e,t,n=((R=s[1])==null?void 0:R.playerCurrentMonster.moves[s[3]].description)+"",i,r,o,l=((D=s[1])==null?void 0:D.playerCurrentMonster.moves[s[3]].currentPp)+"",d,a,u=((Y=s[1])==null?void 0:Y.playerCurrentMonster.moves[s[3]].pp)+"",h,f,y,p=((V=s[1])==null?void 0:V.playerCurrentMonster.moves[s[3]].category)+"",w,k,_,C=((te=s[1])==null?void 0:te.playerCurrentMonster.moves[s[3]].power)+"",E,Z,N=((re=s[1])==null?void 0:re.playerCurrentMonster.moves[s[3]].accuracy)+"",b,$;return{c(){e=m("div"),t=m("p"),i=P(n),r=q(),o=m("p"),d=P(l),a=P(`
                        / `),h=P(u),f=q(),y=m("p"),w=P(p),k=q(),_=m("p"),E=P(C),Z=P(`
                        | `),b=P(N),$=P(" %"),v(t,"class","svelte-b0lsc5"),v(o,"class","svelte-b0lsc5"),v(y,"class","svelte-b0lsc5"),v(_,"class","svelte-b0lsc5"),v(e,"class","move-desc svelte-b0lsc5")},m(j,ee){A(j,e,ee),g(e,t),g(t,i),g(e,r),g(e,o),g(o,d),g(o,a),g(o,h),g(e,f),g(e,y),g(y,w),g(e,k),g(e,_),g(_,E),g(_,Z),g(_,b),g(_,$)},p(j,ee){var $e,x,K,z,oe,Me;ee&10&&n!==(n=(($e=j[1])==null?void 0:$e.playerCurrentMonster.moves[j[3]].description)+"")&&X(i,n),ee&10&&l!==(l=((x=j[1])==null?void 0:x.playerCurrentMonster.moves[j[3]].currentPp)+"")&&X(d,l),ee&10&&u!==(u=((K=j[1])==null?void 0:K.playerCurrentMonster.moves[j[3]].pp)+"")&&X(h,u),ee&10&&p!==(p=((z=j[1])==null?void 0:z.playerCurrentMonster.moves[j[3]].category)+"")&&X(w,p),ee&10&&C!==(C=((oe=j[1])==null?void 0:oe.playerCurrentMonster.moves[j[3]].power)+"")&&X(E,C),ee&10&&N!==(N=((Me=j[1])==null?void 0:Me.playerCurrentMonster.moves[j[3]].accuracy)+"")&&X(b,N)},d(j){j&&S(e)}}}function gn(s){var n;let e=((n=s[1])==null?void 0:n.currentMessage.toUpperCase())+"",t;return{c(){t=P(e)},m(i,r){A(i,t,r)},p(i,r){var o;r&2&&e!==(e=((o=i[1])==null?void 0:o.currentMessage.toUpperCase())+"")&&X(t,e)},d(i){i&&S(t)}}}function bn(s){let e,t,n,i,r,o,l,d,a,u,h,f,y,p;return{c(){e=m("div"),t=m("button"),n=P("FIGHT"),i=q(),r=m("button"),o=P("BAG"),l=q(),d=m("button"),a=P("POKEMONS"),u=q(),h=m("button"),f=P("RUN"),v(t,"class","action-btn svelte-b0lsc5"),ne(t,"--color","#dc5959"),t.disabled=s[5],M(t,"selected",s[4]===0),v(r,"class","action-btn svelte-b0lsc5"),ne(r,"--color","#eca859"),r.disabled=s[5],M(r,"selected",s[4]===1),v(d,"class","action-btn svelte-b0lsc5"),ne(d,"--color","#7EAF53"),d.disabled=s[5],M(d,"selected",s[4]===2),v(h,"class","action-btn svelte-b0lsc5"),ne(h,"--color","#599bdc"),h.disabled=s[5],M(h,"selected",s[4]===2),v(e,"class","actions svelte-b0lsc5")},m(w,k){A(w,e,k),g(e,t),g(t,n),g(e,i),g(e,r),g(r,o),g(e,l),g(e,d),g(d,a),g(e,u),g(e,h),g(h,f),y||(p=[H(t,"click",s[6]),H(h,"click",s[7])],y=!0)},p(w,k){k&32&&(t.disabled=w[5]),k&16&&M(t,"selected",w[4]===0),k&32&&(r.disabled=w[5]),k&16&&M(r,"selected",w[4]===1),k&32&&(d.disabled=w[5]),k&16&&M(d,"selected",w[4]===2),k&32&&(h.disabled=w[5]),k&16&&M(h,"selected",w[4]===2)},d(w){w&&S(e),y=!1,ie(p)}}}function vn(s){let e,t=pt(s[1].playerCurrentMonster.moves),n=[];for(let i=0;i<t.length;i+=1)n[i]=Mt(xt(s,t,i));return{c(){e=m("div");for(let i=0;i<n.length;i+=1)n[i].c();v(e,"class","moves svelte-b0lsc5")},m(i,r){A(i,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(i,r){if(r&298){t=pt(i[1].playerCurrentMonster.moves);let o;for(o=0;o<t.length;o+=1){const l=xt(i,t,o);n[o]?n[o].p(l,r):(n[o]=Mt(l),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(i){i&&S(e),ns(n,i)}}}function Mt(s){let e,t=s[11].name.toUpperCase()+"",n,i,r,o;function l(){return s[9](s[13])}function d(){return s[10](s[11])}return{c(){e=m("button"),n=P(t),i=q(),v(e,"class","action-btn svelte-b0lsc5"),ne(e,"--color","#dc5959"),e.disabled=s[5],M(e,"selected",s[3]===s[13])},m(a,u){A(a,e,u),g(e,n),g(e,i),r||(o=[H(e,"mouseover",l),H(e,"click",d)],r=!0)},p(a,u){s=a,u&2&&t!==(t=s[11].name.toUpperCase()+"")&&X(n,t),u&32&&(e.disabled=s[5]),u&8&&M(e,"selected",s[3]===s[13])},d(a){a&&S(e),r=!1,ie(o)}}}function mn(s){let e,t,n,i;function r(h,f){return h[2]?pn:gn}let o=r(s),l=o(s);function d(h,f){return h[2]?vn:bn}let a=d(s),u=a(s);return{c(){e=m("div"),t=m("div"),n=m("div"),l.c(),i=q(),u.c(),v(n,"class","_inner svelte-b0lsc5"),v(t,"class","info svelte-b0lsc5"),v(e,"class","action-bar svelte-b0lsc5"),M(e,"opened",s[0])},m(h,f){A(h,e,f),g(e,t),g(t,n),l.m(n,null),g(e,i),u.m(e,null)},p(h,[f]){o===(o=r(h))&&l?l.p(h,f):(l.d(1),l=o(h),l&&(l.c(),l.m(n,null))),a===(a=d(h))&&u?u.p(h,f):(u.d(1),u=a(h),u&&(u.c(),u.m(e,null))),f&1&&M(e,"opened",h[0])},i:L,o:L,d(h){h&&S(e),l.d(),u.d()}}}function wn(s,e,t){let n,{opened:i}=e,{battleState:r}=e,o=!1,l=0,d=0;function a(){t(2,o=!o)}function u(){r.selectAction(new nt(r.playerCurrentMonster))}function h(p){r.selectAction(new Le(p,"opponent",r.playerCurrentMonster)),t(2,o=!1)}window.addEventListener("keydown",p=>{p.key==="ArrowUp"?o?t(3,l=l===0?r.playerCurrentMonster.moves.length-1:l-1):t(4,d=d===0?3:d-1):p.key==="ArrowDown"?o?t(3,l=l===r.playerCurrentMonster.moves.length-1?0:l+1):t(4,d=d===3?0:d+1):p.key==="Enter"&&(o?h(r.playerCurrentMonster.moves[l]):d===0?a():d===3&&u())});const f=p=>t(3,l=p),y=p=>h(p);return s.$$set=p=>{"opened"in p&&t(0,i=p.opened),"battleState"in p&&t(1,r=p.battleState)},s.$$.update=()=>{s.$$.dirty&2&&t(5,n=r&&!r.isPlayerTurn||!1)},[i,r,o,l,d,n,a,u,h,f,y]}class Gt extends ve{constructor(e){super(),ge(this,e,wn,mn,he,{opened:0,battleState:1},hn)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),I()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),I()}}be(Gt,{opened:{},battleState:{}},[],[],!0);function yn(s){pe(s,"svelte-1xvkx5g",".enemy-info.svelte-1xvkx5g.svelte-1xvkx5g{opacity:0;visibility:hidden;z-index:9;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;top:2dvh;left:-30dvw;transition:left 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly;font-size:46px}.enemy-info.opened.svelte-1xvkx5g.svelte-1xvkx5g{opacity:1;visibility:visible;left:1dvw}.enemy-info.svelte-1xvkx5g .name-lvl.svelte-1xvkx5g{display:flex;justify-content:space-between;align-items:center}.enemy-info.svelte-1xvkx5g .status.svelte-1xvkx5g{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.enemy-info.svelte-1xvkx5g .hp.svelte-1xvkx5g{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.enemy-info.svelte-1xvkx5g .hp span.svelte-1xvkx5g{padding:0 0 0 12px;font-weight:bold}.enemy-info.svelte-1xvkx5g .hp .progressbar-wrapper.svelte-1xvkx5g{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.enemy-info.svelte-1xvkx5g .hp .progressbar-wrapper .progressbar.svelte-1xvkx5g{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px;transition:width 1s ease-in-out, background 1s ease-in-out 1s}.enemy-info.svelte-1xvkx5g .hp .progressbar-wrapper .progressbar.warning.svelte-1xvkx5g{background:rgb(255, 241, 164);background:linear-gradient(0deg, rgb(255, 241, 164) 0%, rgb(255, 194, 16) 30%, rgb(255, 194, 16) 50%, rgb(255, 194, 16) 70%, rgb(255, 241, 164) 100%)}.enemy-info.svelte-1xvkx5g .hp .progressbar-wrapper .progressbar.danger.svelte-1xvkx5g{background:rgb(244, 177, 159);background:linear-gradient(0deg, rgb(244, 177, 159) 0%, rgb(223, 85, 48) 30%, rgb(223, 85, 48) 50%, rgb(223, 85, 48) 70%, rgb(244, 177, 159) 100%)}@media screen and (max-width: 1100px){.enemy-info.svelte-1xvkx5g.svelte-1xvkx5g{font-size:36px;border:8px solid #595b59}.enemy-info.svelte-1xvkx5g .hp.svelte-1xvkx5g{width:80%;height:18px}.enemy-info.svelte-1xvkx5g .hp .progressbar-wrapper.svelte-1xvkx5g{height:14px}}")}function _n(s){let e,t,n,i=s[1].name+"",r,o,l,d,a=s[1].level+"",u,h,f,y,p,w,k,_;return{c(){e=m("div"),t=m("div"),n=m("span"),r=P(i),o=q(),l=m("span"),d=P("Lv "),u=P(a),h=q(),f=m("div"),y=m("div"),p=m("span"),p.textContent="HP",w=q(),k=m("div"),_=m("div"),v(n,"class","svelte-1xvkx5g"),v(l,"class","svelte-1xvkx5g"),v(t,"class","name-lvl svelte-1xvkx5g"),v(p,"class","svelte-1xvkx5g"),v(_,"class","progressbar svelte-1xvkx5g"),ne(_,"--width",s[2]+"%"),M(_,"warning",s[2]<=50),M(_,"danger",s[2]<15),v(k,"class","progressbar-wrapper svelte-1xvkx5g"),v(y,"class","hp svelte-1xvkx5g"),v(f,"class","status svelte-1xvkx5g"),v(e,"class","enemy-info svelte-1xvkx5g"),M(e,"opened",s[0])},m(C,E){A(C,e,E),g(e,t),g(t,n),g(n,r),g(t,o),g(t,l),g(l,d),g(l,u),g(e,h),g(e,f),g(f,y),g(y,p),g(y,w),g(y,k),g(k,_)},p(C,[E]){E&2&&i!==(i=C[1].name+"")&&X(r,i),E&2&&a!==(a=C[1].level+"")&&X(u,a),E&4&&ne(_,"--width",C[2]+"%"),E&4&&M(_,"warning",C[2]<=50),E&4&&M(_,"danger",C[2]<15),E&1&&M(e,"opened",C[0])},i:L,o:L,d(C){C&&S(e)}}}function kn(s,e,t){let n,{opened:i}=e,{monster:r}=e;return s.$$set=o=>{"opened"in o&&t(0,i=o.opened),"monster"in o&&t(1,r=o.monster)},s.$$.update=()=>{s.$$.dirty&2&&t(2,n=Math.floor(r.currentHp*100/r.currentStats.hp))},[i,r,n]}class Wt extends ve{constructor(e){super(),ge(this,e,kn,_n,he,{opened:0,monster:1},yn)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),I()}get monster(){return this.$$.ctx[1]}set monster(e){this.$$set({monster:e}),I()}}be(Wt,{opened:{},monster:{}},[],[],!0);function xn(s){pe(s,"svelte-18qu5ee",".battleStart.svelte-18qu5ee{opacity:0;visibility:hidden;background:#000000;height:100dvh;width:100dvw;position:absolute;top:0;left:0;transition:opacity 0.5s ease-in-out;z-index:2}.battleStart.animate.svelte-18qu5ee{visibility:visible;animation:svelte-18qu5ee-animate 2s ease-in-out}.battleStart.hide.svelte-18qu5ee{visibility:hidden;opacity:0}@keyframes svelte-18qu5ee-animate{0%{opacity:1}20%{opacity:0}40%{opacity:1}60%{opacity:0}80%{opacity:1}100%{opacity:0}}")}function St(s){let e,t,n,i,r,o,l,d,a,u,h,f;function y(b){s[3](b)}function p(b){s[4](b)}let w={};s[0]!==void 0&&(w.opened=s[0]),s[1]!==void 0&&(w.battleState=s[1]),e=new Gt({props:w}),T.push(()=>G(e,"opened",y)),T.push(()=>G(e,"battleState",p));function k(b){s[5](b)}function _(b){s[6](b)}let C={};s[0]!==void 0&&(C.opened=s[0]),s[1].playerCurrentMonster!==void 0&&(C.monster=s[1].playerCurrentMonster),r=new Xt({props:C}),T.push(()=>G(r,"opened",k)),T.push(()=>G(r,"monster",_));function E(b){s[7](b)}function Z(b){s[8](b)}let N={};return s[0]!==void 0&&(N.opened=s[0]),s[1].opponentCurrentMonster!==void 0&&(N.monster=s[1].opponentCurrentMonster),a=new Wt({props:N}),T.push(()=>G(a,"opened",E)),T.push(()=>G(a,"monster",Z)),{c(){xe(e.$$.fragment),i=q(),xe(r.$$.fragment),d=q(),xe(a.$$.fragment)},m(b,$){ue(e,b,$),A(b,i,$),ue(r,b,$),A(b,d,$),ue(a,b,$),f=!0},p(b,$){const R={};!t&&$&1&&(t=!0,R.opened=b[0],U(()=>t=!1)),!n&&$&2&&(n=!0,R.battleState=b[1],U(()=>n=!1)),e.$set(R);const D={};!o&&$&1&&(o=!0,D.opened=b[0],U(()=>o=!1)),!l&&$&2&&(l=!0,D.monster=b[1].playerCurrentMonster,U(()=>l=!1)),r.$set(D);const Y={};!u&&$&1&&(u=!0,Y.opened=b[0],U(()=>u=!1)),!h&&$&2&&(h=!0,Y.monster=b[1].opponentCurrentMonster,U(()=>h=!1)),a.$set(Y)},i(b){f||(W(e.$$.fragment,b),W(r.$$.fragment,b),W(a.$$.fragment,b),f=!0)},o(b){J(e.$$.fragment,b),J(r.$$.fragment,b),J(a.$$.fragment,b),f=!1},d(b){b&&(S(i),S(d)),fe(e,b),fe(r,b),fe(a,b)}}}function Mn(s){let e,t,n,i=s[1]&&St(s);return{c(){i&&i.c(),e=q(),t=m("div"),t.innerHTML="",v(t,"class","battleStart svelte-18qu5ee"),M(t,"hide",s[0]),M(t,"animate",s[2])},m(r,o){i&&i.m(r,o),A(r,e,o),A(r,t,o),n=!0},p(r,[o]){r[1]?i?(i.p(r,o),o&2&&W(i,1)):(i=St(r),i.c(),W(i,1),i.m(e.parentNode,e)):i&&(rt(),J(i,1,1,()=>{i=null}),ot()),(!n||o&1)&&M(t,"hide",r[0]),(!n||o&4)&&M(t,"animate",r[2])},i(r){n||(W(i),n=!0)},o(r){J(i),n=!1},d(r){r&&(S(e),S(t)),i&&i.d(r)}}}function Sn(s,e,t){let{opened:n}=e,{battleStart:i}=e,{battleState:r}=e;function o(f){n=f,t(0,n)}function l(f){r=f,t(1,r)}function d(f){n=f,t(0,n)}function a(f){s.$$.not_equal(r.playerCurrentMonster,f)&&(r.playerCurrentMonster=f,t(1,r))}function u(f){n=f,t(0,n)}function h(f){s.$$.not_equal(r.opponentCurrentMonster,f)&&(r.opponentCurrentMonster=f,t(1,r))}return s.$$set=f=>{"opened"in f&&t(0,n=f.opened),"battleStart"in f&&t(2,i=f.battleStart),"battleState"in f&&t(1,r=f.battleState)},[n,r,i,o,l,d,a,u,h]}class Vt extends ve{constructor(e){super(),ge(this,e,Sn,Mn,he,{opened:0,battleStart:2,battleState:1},xn)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),I()}get battleStart(){return this.$$.ctx[2]}set battleStart(e){this.$$set({battleStart:e}),I()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),I()}}be(Vt,{opened:{},battleStart:{},battleState:{}},[],[],!0);class At{constructor(e,t=16,n=16){c(this,"position");c(this,"width");c(this,"height");this.position=e,this.width=t,this.height=n}debug(e,t,n,i,r,o="red"){e.fillStyle=o,e.fillRect(i+this.position.x*16*n,r+this.position.y*16*n,this.width*n,this.height*n)}}const An=8,qn=806;class Cn{constructor(e,t,n,i,r,o,l,d=[1,100]){c(this,"background");c(this,"foreground");c(this,"width");c(this,"height");c(this,"collisions");c(this,"battleZones");c(this,"monsters");c(this,"levelRange",[1,100]);c(this,"playerInitialPosition",new B(11,11));c(this,"startingX",0);c(this,"startingY",0);this.background=e,this.foreground=t,this.width=n,this.height=i,this.collisions=this.initBoundaries(r),this.battleZones=this.initBattlesZones(o),this.monsters=l,this.levelRange=d}randomMonster(e){const t=this.monsters[Math.floor(Math.random()*this.monsters.length)],n=Math.floor(Math.random()*(this.levelRange[1]-this.levelRange[0]+1))+this.levelRange[0];return e.findById(t).result.instanciate(n)}initBattlesZones(e){const t=[];for(let i=0;i<e.length;i+=this.width)t.push(e.slice(i,this.width+i));const n=[];return t.forEach((i,r)=>{i.forEach((o,l)=>{if(o===An){const d=new At(new B(l,r));n.push(d)}})}),n}initBoundaries(e){const t=[];for(let i=0;i<e.length;i+=this.width)t.push(e.slice(i,this.width+i));const n=[];return t.forEach((i,r)=>{i.forEach((o,l)=>{if(o===qn){const d=new At(new B(l,r));n.push(d)}})}),n}drawBackground(e,t,n){let i=this.background.width*n,r=this.background.height*n,o=e.canvas.width/2-i/2,l=e.canvas.height/2-r/2;this.startingX=o+(0-t.x)*(16*n),this.startingY=l+(0-t.y)*(16*n),e.drawImage(this.background,0,0,this.background.width,this.background.height,this.startingX,this.startingY,this.background.width*n,this.background.height*n)}drawForeground(e,t){this.foreground!==null&&e.drawImage(this.foreground,t.x*16,t.y*16,this.foreground.width,this.foreground.height,0,0,this.foreground.width*3,this.foreground.height*3)}drawBoundaries(e,t,n){this.collisions.forEach(i=>{i.debug(e,t,n,this.startingX,this.startingY,"rgba(255, 0, 0, 0.5)")})}drawBattleZones(e,t,n){this.battleZones.forEach(i=>{i.debug(e,t,n,this.startingX,this.startingY,"rgba(0, 0, 255, 0.5)")})}hasBattleZoneAt(e){return this.battleZones.some(t=>t.position.x===e.x&&t.position.y===e.y)}hasBoundaryAt(e){return this.collisions.some(t=>t.position.x===e.x&&t.position.y===e.y)||e.x<0||e.y<0||e.x>this.width-1||e.y>this.height-1}}const Zt=new Image;Zt.src="src/assets/maps/test-map.png";const Yt=new Image;Yt.src="src/assets/maps/test-map-foreground.png";const $n=[95],Rn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,0,806,806,0,0,806,806,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,806,806,806,806,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,806,806,806,806,834,0,0,0,0,0,0,0,0,0],On=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],le=new Cn(Zt,Yt,20,20,Rn,On,$n,[3,6]),O={up:{pressed:!1},down:{pressed:!1},left:{pressed:!1},right:{pressed:!1}};let se={key:""};function qt(s){return e=>{switch(e.key){case"ArrowDown":O.down.pressed=!1;break;case"ArrowUp":O.up.pressed=!1;break;case"ArrowRight":O.right.pressed=!1;break;case"ArrowLeft":O.left.pressed=!1;break}s.moving=!1}}function Ct(){return s=>{switch(s.key){case"ArrowDown":se.key="ArrowDown",O.down.pressed=!0;break;case"ArrowUp":se.key="ArrowUp",O.up.pressed=!0;break;case"ArrowRight":se.key="ArrowRight",O.right.pressed=!0;break;case"ArrowLeft":se.key="ArrowLeft",O.left.pressed=!0;break}}}function Pn(s){pe(s,"svelte-1i2dl8q",'@media(max-width: 1100px){.set.svelte-1i2dl8q .d-pad.svelte-1i2dl8q{width:20dvw;height:20dvw}}.set.svelte-1i2dl8q.svelte-1i2dl8q{overflow:hidden;text-align:center;position:absolute;bottom:8dvh;left:8dvh;z-index:10}.set.svelte-1i2dl8q .d-pad.svelte-1i2dl8q{display:inline-block}.d-pad.svelte-1i2dl8q.svelte-1i2dl8q{position:relative;width:12dvw;height:12dvw;border-radius:48%;overflow:hidden;z-index:9}.d-pad.svelte-1i2dl8q.svelte-1i2dl8q:before{content:"";position:absolute;top:50%;left:50%;border-radius:5%;transform:translate(-50%, -50%);width:66.6%;height:66.6%}.d-pad.svelte-1i2dl8q.svelte-1i2dl8q:after{content:"";position:absolute;display:none;z-index:2;width:20%;height:20%;top:50%;left:50%;background:rgba(221, 221, 221, 0.5);border-radius:50%;transform:translate(-50%, -50%);transition:all 0.25s;cursor:pointer}.d-pad.svelte-1i2dl8q.svelte-1i2dl8q:hover:after{width:30%;height:30%}.d-pad.svelte-1i2dl8q span.svelte-1i2dl8q{display:block;position:absolute;-webkit-tap-highlight-color:rgba(255, 255, 255, 0);width:33.3%;height:43%;line-height:40%;color:#fff;background:rgba(221, 221, 221, 0.5);text-align:center}.d-pad.svelte-1i2dl8q span.svelte-1i2dl8q:hover{background:#eee}.d-pad.svelte-1i2dl8q span.svelte-1i2dl8q:before{content:"";position:absolute;width:0;height:0;border-radius:5px;border-style:solid;transition:all 0.25s}.d-pad.svelte-1i2dl8q span.svelte-1i2dl8q:after{content:"";position:absolute;width:102%;height:78%;background:#fff;border-radius:20%}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q,.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q{width:43%;height:33%}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:after,.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:after{width:78%;height:102%}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q{top:0;left:50%;transform:translate(-50%, 0);border-radius:17% 17% 50% 50%}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:hover{background:linear-gradient(0deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:after{left:0;top:0;transform:translate(-100%, 0);border-top-left-radius:50%;pointer-events:none}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:before{top:40%;left:50%;transform:translate(-50%, -50%);border-width:0 13px 19px 13px;border-color:transparent transparent #aaa transparent}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:active:before{border-bottom-color:#333}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:hover:before{top:35%}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q{bottom:0;left:50%;transform:translate(-50%, 0);border-radius:50% 50% 17% 17%}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:hover{background:linear-gradient(180deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:after{right:0;bottom:0;transform:translate(100%, 0);border-bottom-right-radius:50%;pointer-events:none}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:before{bottom:40%;left:50%;transform:translate(-50%, 50%);border-width:19px 13px 0px 13px;border-color:#aaa transparent transparent transparent}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:active:before{border-top-color:#333}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:hover:before{bottom:35%}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q{top:50%;left:0;transform:translate(0, -50%);border-radius:17% 50% 50% 17%}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:hover{background:linear-gradient(-90deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:after{left:0;bottom:0;transform:translate(0, 100%);border-bottom-left-radius:50%;pointer-events:none}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:before{left:40%;top:50%;transform:translate(-50%, -50%);border-width:13px 19px 13px 0;border-color:transparent #aaa transparent transparent}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:active:before{border-right-color:#333}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:hover:before{left:35%}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q{top:50%;right:0;transform:translate(0, -50%);border-radius:50% 17% 17% 50%}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:hover{background:linear-gradient(90deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:after{right:0;top:0;transform:translate(0, -100%);border-top-right-radius:50%;pointer-events:none}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:before{right:40%;top:50%;transform:translate(50%, -50%);border-width:13px 0 13px 19px;border-color:transparent transparent transparent #aaa}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:active:before{border-left-color:#333}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:hover:before{right:35%}.outline.svelte-1i2dl8q .d-pad.svelte-1i2dl8q{border-radius:0}.outline.svelte-1i2dl8q .d-pad span.svelte-1i2dl8q{border:1px solid rgba(0, 0, 0, 0.1)}.outline.svelte-1i2dl8q .d-pad span.svelte-1i2dl8q:after{display:none}.outline.svelte-1i2dl8q .d-pad span.up.svelte-1i2dl8q:hover{background:linear-gradient(0deg, #fff 0%, #efefef 50%)}.outline.svelte-1i2dl8q .d-pad span.right.svelte-1i2dl8q:hover{background:linear-gradient(90deg, #fff 0%, #efefef 50%)}.outline.svelte-1i2dl8q .d-pad span.down.svelte-1i2dl8q:hover{background:linear-gradient(180deg, #fff 0%, #efefef 50%)}.outline.svelte-1i2dl8q .d-pad span.left.svelte-1i2dl8q:hover{background:linear-gradient(-90deg, #fff 0%, #efefef 50%)}.outline.svelte-1i2dl8q .d-pad span.up.svelte-1i2dl8q:before{border-bottom-color:rgba(0, 0, 0, 0.1)}.outline.svelte-1i2dl8q .d-pad span.right.svelte-1i2dl8q:before{border-left-color:rgba(0, 0, 0, 0.1)}.outline.svelte-1i2dl8q .d-pad span.down.svelte-1i2dl8q:before{border-top-color:rgba(0, 0, 0, 0.1)}.outline.svelte-1i2dl8q .d-pad span.left.svelte-1i2dl8q:before{border-right-color:rgba(0, 0, 0, 0.1)}.buttons-a-b.svelte-1i2dl8q.svelte-1i2dl8q{position:absolute;bottom:8dvh;right:8dvh;z-index:10;display:flex;flex-direction:column;align-content:space-between;align-items:center}.buttons-a-b.svelte-1i2dl8q button.svelte-1i2dl8q{width:7dvw;height:7dvw;border-radius:50%;border:1px solid #fff;background:rgba(221, 221, 221, 0.5);color:#aaa;font-size:3.5rem;font-weight:bold;text-align:center;line-height:10dvw;cursor:pointer;transition:all 0.25s;display:flex;align-content:center;justify-content:center;align-items:center}.buttons-a-b.svelte-1i2dl8q button.svelte-1i2dl8q:hover{background:#eee}.buttons-a-b.svelte-1i2dl8q .button-a.svelte-1i2dl8q{position:relative;right:6dvw}')}function En(s){let e,t,n,i,r,o,l,d,a,u,h,f,y,p,w;return{c(){e=m("div"),t=m("nav"),n=m("span"),i=q(),r=m("span"),o=q(),l=m("span"),d=q(),a=m("span"),u=q(),h=m("div"),h.innerHTML='<button class="button-b svelte-1i2dl8q">B</button> <button class="button-a svelte-1i2dl8q">A</button>',f=q(),y=m("div"),y.innerHTML='<button class="button-start">start</button> <button class="button-select">select</button>',v(n,"class","up svelte-1i2dl8q"),v(r,"class","right svelte-1i2dl8q"),v(l,"class","down svelte-1i2dl8q"),v(a,"class","left svelte-1i2dl8q"),v(t,"class","d-pad svelte-1i2dl8q"),v(e,"class","set outline svelte-1i2dl8q"),v(h,"class","buttons-a-b svelte-1i2dl8q"),v(y,"class","buttons-start-select")},m(k,_){A(k,e,_),g(e,t),g(t,n),g(t,i),g(t,r),g(t,o),g(t,l),g(t,d),g(t,a),A(k,u,_),A(k,h,_),A(k,f,_),A(k,y,_),p||(w=[H(n,"pointerdown",s[5]("ArrowUp")),H(n,"pointerup",s[6]("ArrowUp")),H(r,"pointerdown",s[5]("ArrowRight")),H(r,"pointerup",s[6]("ArrowRight")),H(l,"pointerdown",s[5]("ArrowDown")),H(l,"pointerup",s[6]("ArrowDown")),H(a,"pointerdown",s[5]("ArrowLeft")),H(a,"pointerup",s[6]("ArrowLeft"))],p=!0)},p:L,i:L,o:L,d(k){k&&(S(e),S(u),S(h),S(f),S(y)),p=!1,ie(w)}}}function In(s){let e,t,n,i,r;function o(u){s[10](u)}function l(u){s[11](u)}function d(u){s[12](u)}let a={};return s[0]!==void 0&&(a.opened=s[0]),s[4].battleState!==void 0&&(a.battleState=s[4].battleState),s[2]!==void 0&&(a.battleStart=s[2]),e=new Vt({props:a}),T.push(()=>G(e,"opened",o)),T.push(()=>G(e,"battleState",l)),T.push(()=>G(e,"battleStart",d)),{c(){xe(e.$$.fragment)},m(u,h){ue(e,u,h),r=!0},p(u,h){const f={};!t&&h[0]&1&&(t=!0,f.opened=u[0],U(()=>t=!1)),!n&&h[0]&16&&(n=!0,f.battleState=u[4].battleState,U(()=>n=!1)),!i&&h[0]&4&&(i=!0,f.battleStart=u[2],U(()=>i=!1)),e.$set(f)},i(u){r||(W(e.$$.fragment,u),r=!0)},o(u){J(e.$$.fragment,u),r=!1},d(u){fe(e,u)}}}function Dn(s){let e,t,n,i,r,o,l;const d=[In,En],a=[];function u(p,w){return p[4].initiated?0:1}e=u(s),t=a[e]=d[e](s);function h(p){s[13](p)}function f(p){s[14](p)}let y={};return s[1]!==void 0&&(y.menuOpened=s[1]),s[3]!==void 0&&(y.player=s[3]),i=new Ht({props:y}),T.push(()=>G(i,"menuOpened",h)),T.push(()=>G(i,"player",f)),{c(){t.c(),n=q(),xe(i.$$.fragment)},m(p,w){a[e].m(p,w),A(p,n,w),ue(i,p,w),l=!0},p(p,w){let k=e;e=u(p),e===k?a[e].p(p,w):(rt(),J(a[k],1,1,()=>{a[k]=null}),ot(),t=a[e],t?t.p(p,w):(t=a[e]=d[e](p),t.c()),W(t,1),t.m(n.parentNode,n));const _={};!r&&w[0]&2&&(r=!0,_.menuOpened=p[1],U(()=>r=!1)),!o&&w[0]&8&&(o=!0,_.player=p[3],U(()=>o=!1)),i.$set(_)},i(p){l||(W(t),W(i.$$.fragment,p),l=!0)},o(p){J(t),J(i.$$.fragment,p),l=!1},d(p){p&&S(n),a[e].d(p),fe(i,p)}}}let Ee=3,$t=0;function Tn(s,e,t){let{opened:n=!1}=e,{menuOpened:i=!1}=e,{battleStart:r=!1}=e,{pokedex:o}=e,{currentMap:l=le}=e,{canvas:d}=e,a=qe.resolve(et);const u=d.getContext("2d");window.innerHeight>window.innerWidth?(d.width=window.innerWidth,d.height=window.innerWidth):(d.width=window.innerWidth,d.height=window.innerHeight);let h=16*Ee,{character:f}=e;f.positionOnMap=new B(le.playerInitialPosition.x,le.playerInitialPosition.y),f.positionOnScreen=new B(le.playerInitialPosition.x*h,le.playerInitialPosition.y*h);function y(){window.innerHeight>window.innerWidth?(t(7,d.width=window.innerWidth,d),t(7,d.height=window.innerWidth,d)):(t(7,d.width=window.innerWidth,d),t(7,d.height=window.innerHeight,d)),h=16*Ee,t(3,f.positionOnScreen=new B(le.playerInitialPosition.x*h,le.playerInitialPosition.y*h),f)}window.addEventListener("resize",()=>{y()}),window.addEventListener("orientationchange",()=>{y()});let{battle:p={initiated:!1}}=e,w={fps:12,then:Date.now(),fpsInterval:1e3/12,id:0},k={fps:12,then:Date.now(),fpsInterval:1e3/12,goDown:!0,id:0};const _=new B(0,0);function C(){w.id=window.requestAnimationFrame(C);let x=Date.now(),K=x-w.then;if(K>w.fpsInterval){w.then=x-K%w.fpsInterval,u.fillStyle="black",u.fillRect(0,0,d.width,d.height),l.drawBackground(u,_,Ee),f.draw(u,_,Ee,l.background.width,l.background.height);let z=!0;if(t(3,f.moving=!1,f),p.initiated)return;if(!i){if((O.down.pressed||O.up.pressed||O.left.pressed||O.right.pressed)&&l.hasBattleZoneAt(f.positionOnMap)&&Math.random()<.1){t(3,f.frames.val=0,f);let oe=l.randomMonster(o);window.cancelAnimationFrame(w.id),Z(oe)}O.down.pressed&&se.key==="ArrowDown"&&(l.hasBoundaryAt(new B(f.positionOnMap.x,f.positionOnMap.y+1))&&(z=!1),t(3,f.moving=!0,f),t(3,f.direction="down",f),z&&_.y++),O.up.pressed&&se.key==="ArrowUp"&&(l.hasBoundaryAt(new B(f.positionOnMap.x,f.positionOnMap.y-1))&&(z=!1),t(3,f.moving=!0,f),t(3,f.direction="up",f),z&&_.y--),O.left.pressed&&se.key==="ArrowLeft"&&(l.hasBoundaryAt(new B(f.positionOnMap.x-1,f.positionOnMap.y))&&(z=!1),t(3,f.moving=!0,f),t(3,f.direction="left",f),z&&_.x--),O.right.pressed&&se.key==="ArrowRight"&&(l.hasBoundaryAt(new B(f.positionOnMap.x+1,f.positionOnMap.y))&&(z=!1),t(3,f.moving=!0,f),t(3,f.direction="right",f),z&&_.x++),f.updatePosition(l.playerInitialPosition,_)}}}function E(){var z,oe,Me,ft;k.id=window.requestAnimationFrame(E);let x=Date.now(),K=x-k.then;if(K>k.fpsInterval){if(!p.initiated)return;k.then=x-K%k.fpsInterval,u.fillStyle="black",u.fillRect(0,0,d.width,d.height),a.draw(u,"default"),(oe=(z=p.battleState)==null?void 0:z.opponentCurrentMonster)==null||oe.draw(u,"front",50,0,$t),(ft=(Me=p.battleState)==null?void 0:Me.playerCurrentMonster)==null||ft.draw(u,"back",0,0,$t)}}function Z(x){V(),t(4,p.initiated=!0,p),t(4,p.startDate=new Date,p),t(4,p.battleState=new cn(f,x,d),p),$(),t(4,p.battleState.onClose=()=>{N()},p),t(2,r=!0),setTimeout(()=>{t(2,r=!1),t(0,n=!0),E()},2e3)}function N(x){window.cancelAnimationFrame(k.id),t(4,p.battleState=void 0,p),t(4,p.initiated=!1,p),t(4,p.startDate=void 0,p),t(2,r=!1),t(0,n=!1),t(1,i=!1),C(),b()}function b(){window.addEventListener("keydown",Ct()),window.addEventListener("keyup",qt(f)),window.addEventListener("keydown",R)}function $(){window.removeEventListener("keydown",Ct()),window.removeEventListener("keyup",qt(f)),window.removeEventListener("keydown",R)}function R(x){x.key==="Escape"&&t(1,i=!i)}function D(x){return K=>{switch(K.preventDefault(),x){case"ArrowUp":O.up.pressed=!0;break;case"ArrowDown":O.down.pressed=!0;break;case"ArrowLeft":O.left.pressed=!0;break;case"ArrowRight":O.right.pressed=!0;break}se.key=x}}function Y(x){return K=>{switch(x){case"ArrowDown":O.down.pressed=!1;break;case"ArrowUp":O.up.pressed=!1;break;case"ArrowRight":O.right.pressed=!1;break;case"ArrowLeft":O.left.pressed=!1;break}}}function V(){O.down.pressed=!1,O.up.pressed=!1,O.right.pressed=!1,O.left.pressed=!1,t(3,f.moving=!1,f)}b(),C();function te(x){n=x,t(0,n)}function re(x){s.$$.not_equal(p.battleState,x)&&(p.battleState=x,t(4,p))}function j(x){r=x,t(2,r)}function ee(x){i=x,t(1,i)}function $e(x){f=x,t(3,f)}return s.$$set=x=>{"opened"in x&&t(0,n=x.opened),"menuOpened"in x&&t(1,i=x.menuOpened),"battleStart"in x&&t(2,r=x.battleStart),"pokedex"in x&&t(8,o=x.pokedex),"currentMap"in x&&t(9,l=x.currentMap),"canvas"in x&&t(7,d=x.canvas),"character"in x&&t(3,f=x.character),"battle"in x&&t(4,p=x.battle)},[n,i,r,f,p,D,Y,d,o,l,te,re,j,ee,$e]}class Jt extends ve{constructor(e){super(),ge(this,e,Tn,Dn,he,{opened:0,menuOpened:1,battleStart:2,pokedex:8,currentMap:9,canvas:7,character:3,battle:4},Pn,[-1,-1])}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),I()}get menuOpened(){return this.$$.ctx[1]}set menuOpened(e){this.$$set({menuOpened:e}),I()}get battleStart(){return this.$$.ctx[2]}set battleStart(e){this.$$set({battleStart:e}),I()}get pokedex(){return this.$$.ctx[8]}set pokedex(e){this.$$set({pokedex:e}),I()}get currentMap(){return this.$$.ctx[9]}set currentMap(e){this.$$set({currentMap:e}),I()}get canvas(){return this.$$.ctx[7]}set canvas(e){this.$$set({canvas:e}),I()}get character(){return this.$$.ctx[3]}set character(e){this.$$set({character:e}),I()}get battle(){return this.$$.ctx[4]}set battle(e){this.$$set({battle:e}),I()}}be(Jt,{opened:{type:"Boolean"},menuOpened:{type:"Boolean"},battleStart:{type:"Boolean"},pokedex:{},currentMap:{},canvas:{},character:{},battle:{}},[],[],!0);function jn(s){pe(s,"svelte-1bs37g6",'#canvas-wrapper.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{width:100dvw;height:100dvh;overflow:hidden;position:absolute;top:0;left:0;-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0)}#canvas-wrapper.svelte-1bs37g6 canvas.svelte-1bs37g6.svelte-1bs37g6{position:absolute;top:0;left:0;width:100dvw;height:100dvh}.loading.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100vh}.loading.ready.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{opacity:0.2}.u-swing.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{animation:svelte-1bs37g6-swing 3000ms infinite}@keyframes svelte-1bs37g6-swing{20%{-webkit-transform:rotate(15deg);transform:rotate(15deg)}40%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg)}60%{-webkit-transform:rotate(5deg);transform:rotate(5deg)}80%{-webkit-transform:rotate(-5deg);transform:rotate(-5deg)}to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{width:120px;height:120px;border-radius:120px;border:solid 4.8px black;position:relative;background:linear-gradient(to bottom, #EEEEEE 0%, #FFFFFF 100%);margin:10px auto}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:before,.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:after{content:"";display:block}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6,.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:before,.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:after{transition:all 600ms cubic-bezier(0.67, 0.4, 0.36, 0.75)}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:before{width:120px;height:57.6px;border-bottom:solid 4.8px black;border-radius:60px 60px 0 0;background:linear-gradient(to bottom, #d10000 0%, #ff0000 50%)}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:after{content:"";width:24px;height:24px;background:linear-gradient(to bottom, #fff 0%, #ccc 100%);position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);border-radius:50%;box-shadow:0 0 0 2.4px black, 0 0 0 4.8px #ddd, 0 0 0 8.5714285714px black, 0 0 12px 7.0588235294px rgba(0, 0, 0, 0.4)}.buttons.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{display:flex;justify-content:center;align-items:center;flex-direction:column;gap:120px;position:absolute;left:calc(50dvw - 100px);top:calc(50dvh - 40px)}.buttons.svelte-1bs37g6 .letsgo.svelte-1bs37g6.svelte-1bs37g6{position:relative}.buttons.svelte-1bs37g6 .letsgo .pika.svelte-1bs37g6.svelte-1bs37g6{width:200px;height:200px;position:absolute;bottom:0;left:0;z-index:1}.buttons.svelte-1bs37g6 .letsgo .start-btn.svelte-1bs37g6.svelte-1bs37g6{width:200px;height:80px;border-radius:16px;position:relative;z-index:2;font-family:pokemon, serif;font-size:36px;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;cursor:pointer}.buttons.svelte-1bs37g6 .letsgo .start-btn.svelte-1bs37g6.svelte-1bs37g6:hover{color:#fff;box-shadow:inset #009688 0 0 0 5px;text-shadow:none;font-weight:bold;background:#009688}.buttons.svelte-1bs37g6 .letsgo .start-btn.svelte-1bs37g6:hover+.pika.svelte-1bs37g6{animation:svelte-1bs37g6-bounce 1s infinite}@keyframes svelte-1bs37g6-bounce{0%,20%,53%,80%,to{-webkit-animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-transform:translate3d(0, -30px, 0);transform:translate3d(0, -30px, 0)}40%,43%,70%{-webkit-animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06);animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06)}70%{-webkit-transform:translate3d(0, -15px, 0);transform:translate3d(0, -15px, 0)}90%{-webkit-transform:translate3d(0, -4px, 0);transform:translate3d(0, -4px, 0)}}#preview.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{display:flex;flex-wrap:wrap;justify-content:center}')}function Ln(s){let e,t,n,i=!s[1]&&Rt(s),r=s[1]&&Ot(s);return{c(){e=m("div"),i&&i.c(),t=q(),r&&r.c(),n=is(),v(e,"class","loading svelte-1bs37g6"),M(e,"ready",s[1])},m(o,l){A(o,e,l),i&&i.m(e,null),A(o,t,l),r&&r.m(o,l),A(o,n,l)},p(o,l){o[1]?i&&(i.d(1),i=null):i?i.p(o,l):(i=Rt(o),i.c(),i.m(e,null)),l&2&&M(e,"ready",o[1]),o[1]?r?r.p(o,l):(r=Ot(o),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:L,o:L,d(o){o&&(S(e),S(t),S(n)),i&&i.d(),r&&r.d(o)}}}function Bn(s){let e,t,n,i,r;function o(u){s[10](u)}function l(u){s[11](u)}function d(u){s[12](u)}let a={};return s[2]!==void 0&&(a.pokedex=s[2]),s[0]!==void 0&&(a.canvas=s[0]),s[4]!==void 0&&(a.character=s[4]),e=new Jt({props:a}),T.push(()=>G(e,"pokedex",o)),T.push(()=>G(e,"canvas",l)),T.push(()=>G(e,"character",d)),{c(){xe(e.$$.fragment)},m(u,h){ue(e,u,h),r=!0},p(u,h){const f={};!t&&h&4&&(t=!0,f.pokedex=u[2],U(()=>t=!1)),!n&&h&1&&(n=!0,f.canvas=u[0],U(()=>n=!1)),!i&&h&16&&(i=!0,f.character=u[4],U(()=>i=!1)),e.$set(f)},i(u){r||(W(e.$$.fragment,u),r=!0)},o(u){J(e.$$.fragment,u),r=!1},d(u){fe(e,u)}}}function Rt(s){let e,t,n,i,r;return{c(){e=m("div"),t=q(),n=m("span"),n.textContent=`Gotta catch em all... ${s[8]}`,i=q(),r=m("div"),r.innerHTML="",v(e,"class","o-pokeball c-loader u-swing svelte-1bs37g6"),v(r,"id","preview"),v(r,"class","svelte-1bs37g6")},m(o,l){A(o,e,l),A(o,t,l),A(o,n,l),A(o,i,l),A(o,r,l),s[13](r)},p:L,d(o){o&&(S(e),S(t),S(n),S(i),S(r)),s[13](null)}}}function Ot(s){let e,t,n,i,r,o,l,d,a,u=s[7]&&Nn(s);return{c(){e=m("div"),u&&u.c(),t=q(),n=m("div"),i=m("button"),i.textContent="New game!",r=q(),o=m("img"),v(i,"class","start-btn svelte-1bs37g6"),v(o,"class","pika svelte-1bs37g6"),v(o,"alt","pikachu"),It(o.src,l="src/assets/monsters/heartgold-soulsilver/25.png")||v(o,"src",l),v(n,"class","letsgo svelte-1bs37g6"),v(e,"class","buttons svelte-1bs37g6")},m(h,f){A(h,e,f),u&&u.m(e,null),g(e,t),g(e,n),g(n,i),g(n,r),g(n,o),d||(a=H(i,"click",s[15]),d=!0)},p(h,f){h[7]&&u.p(h,f)},d(h){h&&S(e),u&&u.d(),d=!1,a()}}}function Nn(s){let e,t,n,i,r,o,l;return{c(){e=m("div"),t=m("button"),t.textContent="Continue!",n=q(),i=m("img"),v(t,"class","start-btn svelte-1bs37g6"),v(i,"class","pika svelte-1bs37g6"),v(i,"alt","Evoli"),It(i.src,r="src/assets/monsters/heartgold-soulsilver/133.png")||v(i,"src",r),v(e,"class","letsgo svelte-1bs37g6")},m(d,a){A(d,e,a),g(e,t),g(e,n),g(e,i),o||(l=H(t,"click",s[14]),o=!0)},p:L,d(d){d&&S(e),o=!1,l()}}}function zn(s){let e,t,n,i,r,o;const l=[Bn,Ln],d=[];function a(u,h){return u[1]&&u[5]?0:1}return t=a(s),n=d[t]=l[t](s),{c(){e=m("div"),n.c(),i=q(),r=m("canvas"),v(r,"class","svelte-1bs37g6"),v(e,"id","canvas-wrapper"),v(e,"class","svelte-1bs37g6")},m(u,h){A(u,e,h),d[t].m(e,null),g(e,i),g(e,r),s[16](r),s[17](e),o=!0},p(u,[h]){let f=t;t=a(u),t===f?d[t].p(u,h):(rt(),J(d[f],1,1,()=>{d[f]=null}),ot(),n=d[t],n?n.p(u,h):(n=d[t]=l[t](u),n.c()),W(n,1),n.m(e,i))},i(u){o||(W(n),o=!0)},o(u){J(n),o=!1},d(u){u&&S(e),d[t].d(),s[16](null),s[17](null)}}}function Fn(s,e,t){let{canvas:n}=e,i,r,{ready:o=!1}=e,l=!1,d,a,u,{pokedex:h=new Ys}=e;fetch("src/assets/data/final/pokedex.json").then(b=>b.json()).then(b=>{h.importFromJson(b);let $=5,R=Date.now();for(;!h.ready&&Date.now()-R<$*1e3;)console.log("loading dex...");h.ready||(console.error("Pokedex not ready after "+$+" seconds"),window.location.reload()),f()});function f(){let b=new Image;b.src="src/assets/characters/hero_male_front.png";let $=new Image;$.src="src/assets/characters/hero_male_back.png";let R=new Image;R.src="src/assets/characters/hero_male_left.png";let D=new Image;D.src="src/assets/characters/hero_male_right.png";let Y=new Image;Y.src="src/assets/characters/hero_male_back.png",Promise.all(Array.from([b,$,R,D,Y].filter(V=>!V.complete)).map(V=>new Promise(te=>{V.onload=V.onerror=te}))).then(()=>{var te,re;let V=(re=(te=h.findById(1))==null?void 0:te.result)==null?void 0:re.instanciate(5);if(!V)throw new Error("Could not find pokemon with id 251");V.isShiny=!0,t(4,r=new Ft("Kaiser","MALE",new Us(b,$,R,D,Y),[V])),t(1,o=!0)})}function y(){t(5,l=!0)}function p(b){h=b,t(2,h)}function w(b){n=b,t(0,n)}function k(b){r=b,t(4,r)}function _(b){T[b?"unshift":"push"](()=>{u=b,t(6,u)})}const C=()=>y(),E=()=>y();function Z(b){T[b?"unshift":"push"](()=>{n=b,t(0,n)})}function N(b){T[b?"unshift":"push"](()=>{i=b,t(3,i)})}return s.$$set=b=>{"canvas"in b&&t(0,n=b.canvas),"ready"in b&&t(1,o=b.ready),"pokedex"in b&&t(2,h=b.pokedex)},[n,o,h,i,r,l,u,d,a,y,p,w,k,_,C,E,Z,N]}class Hn extends ve{constructor(e){super(),ge(this,e,Fn,zn,he,{canvas:0,ready:1,pokedex:2},jn)}get canvas(){return this.$$.ctx[0]}set canvas(e){this.$$set({canvas:e}),I()}get ready(){return this.$$.ctx[1]}set ready(e){this.$$set({ready:e}),I()}get pokedex(){return this.$$.ctx[2]}set pokedex(e){this.$$set({pokedex:e}),I()}}customElements.define("open-mon",be(Hn,{canvas:{},ready:{type:"Boolean"},pokedex:{}},[],[],!0));
