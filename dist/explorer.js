var bt=Object.defineProperty;var vt=(s,e,t)=>e in s?bt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var c=(s,e,t)=>(vt(s,typeof e!="symbol"?e+"":e,t),t);function N(){}function st(s){return s()}function Ue(){return Object.create(null)}function ie(s){s.forEach(st)}function it(s){return typeof s=="function"}function ce(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let Me;function nt(s,e){return s===e?!0:(Me||(Me=document.createElement("a")),Me.href=e,s===Me.href)}function mt(s){return Object.keys(s).length===0}function u(s,e){s.appendChild(e)}function de(s,e,t){const i=yt(s);if(!i.getElementById(e)){const n=m("style");n.id=e,n.textContent=t,wt(i,n)}}function yt(s){if(!s)return document;const e=s.getRootNode?s.getRootNode():s.ownerDocument;return e&&e.host?e:s.ownerDocument}function wt(s,e){return u(s.head||s,e),e.sheet}function H(s,e,t){s.insertBefore(e,t||null)}function E(s){s.parentNode&&s.parentNode.removeChild(s)}function xt(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function m(s){return document.createElement(s)}function I(s){return document.createTextNode(s)}function $(){return I(" ")}function kt(){return I("")}function q(s,e,t,i){return s.addEventListener(e,t,i),()=>s.removeEventListener(e,t,i)}function v(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function _t(s){return Array.from(s.childNodes)}function R(s,e){e=""+e,s.data!==e&&(s.data=e)}function se(s,e,t,i){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,i?"important":"")}function C(s,e,t){s.classList.toggle(e,!!t)}function St(s){const e={};return s.childNodes.forEach(t=>{e[t.slot||"default"]=!0}),e}let Be;function we(s){Be=s}const ge=[],j=[];let be=[];const Oe=[],Mt=Promise.resolve();let He=!1;function Ct(){He||(He=!0,Mt.then(T))}function Le(s){be.push(s)}function Y(s){Oe.push(s)}const Ie=new Set;let ue=0;function T(){if(ue!==0)return;const s=Be;do{try{for(;ue<ge.length;){const e=ge[ue];ue++,we(e),$t(e.$$)}}catch(e){throw ge.length=0,ue=0,e}for(we(null),ge.length=0,ue=0;j.length;)j.pop()();for(let e=0;e<be.length;e+=1){const t=be[e];Ie.has(t)||(Ie.add(t),t())}be.length=0}while(ge.length);for(;Oe.length;)Oe.pop()();He=!1,Ie.clear(),we(s)}function $t(s){if(s.fragment!==null){s.update(),ie(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(Le)}}function At(s){const e=[],t=[];be.forEach(i=>s.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),be=e}const $e=new Set;let oe;function Te(){oe={r:0,c:[],p:oe}}function ze(){oe.r||ie(oe.c),oe=oe.p}function W(s,e){s&&s.i&&($e.delete(s),s.i(e))}function G(s,e,t,i){if(s&&s.o){if($e.has(s))return;$e.add(s),oe.c.push(()=>{$e.delete(s),i&&(t&&s.d(1),i())}),s.o(e)}else i&&i()}function qe(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function V(s,e,t){const i=s.$$.props[e];i!==void 0&&(s.$$.bound[i]=t,t(s.$$.ctx[i]))}function ve(s){s&&s.c()}function ae(s,e,t){const{fragment:i,after_update:n}=s.$$;i&&i.m(e,t),Le(()=>{const o=s.$$.on_mount.map(st).filter(it);s.$$.on_destroy?s.$$.on_destroy.push(...o):ie(o),s.$$.on_mount=[]}),n.forEach(Le)}function le(s,e){const t=s.$$;t.fragment!==null&&(At(t.after_update),ie(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Pt(s,e){s.$$.dirty[0]===-1&&(ge.push(s),Ct(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function pe(s,e,t,i,n,o,r=null,a=[-1]){const d=Be;we(s);const p=s.$$={fragment:null,ctx:[],props:o,update:N,not_equal:n,bound:Ue(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:Ue(),dirty:a,skip_bound:!1,root:e.target||d.$$.root};r&&r(p.root);let l=!1;if(p.ctx=t?t(s,e.props||{},(f,h,...y)=>{const b=y.length?y[0]:h;return p.ctx&&n(p.ctx[f],p.ctx[f]=b)&&(!p.skip_bound&&p.bound[f]&&p.bound[f](b),l&&Pt(s,f)),h}):[],p.update(),l=!0,ie(p.before_update),p.fragment=i?i(p.ctx):!1,e.target){if(e.hydrate){const f=_t(e.target);p.fragment&&p.fragment.l(f),f.forEach(E)}else p.fragment&&p.fragment.c();e.intro&&W(s.$$.fragment),ae(s,e.target,e.anchor),T()}we(d)}let rt;typeof HTMLElement=="function"&&(rt=class extends HTMLElement{constructor(e,t,i){super();c(this,"$$ctor");c(this,"$$s");c(this,"$$c");c(this,"$$cn",!1);c(this,"$$d",{});c(this,"$$r",!1);c(this,"$$p_d",{});c(this,"$$l",{});c(this,"$$l_u",new Map);this.$$ctor=e,this.$$s=t,i&&this.attachShadow({mode:"open"})}addEventListener(e,t,i){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){const n=this.$$c.$on(e,t);this.$$l_u.set(t,n)}super.addEventListener(e,t,i)}removeEventListener(e,t,i){if(super.removeEventListener(e,t,i),this.$$c){const n=this.$$l_u.get(t);n&&(n(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(r){return()=>{let a;return{c:function(){a=m("slot"),r!=="default"&&v(a,"name",r)},m:function(l,f){H(l,a,f)},d:function(l){l&&E(a)}}}};var e=t;if(await Promise.resolve(),!this.$$cn)return;const i={},n=St(this);for(const r of this.$$s)r in n&&(i[r]=[t(r)]);for(const r of this.attributes){const a=this.$$g_p(r.name);a in this.$$d||(this.$$d[a]=Ae(a,r.value,this.$$p_d,"toProp"))}for(const r in this.$$p_d)!(r in this.$$d)&&this[r]!==void 0&&(this.$$d[r]=this[r],delete this[r]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:i,$$scope:{ctx:[]}}});const o=()=>{this.$$r=!0;for(const r in this.$$p_d)if(this.$$d[r]=this.$$c.$$.ctx[this.$$c.$$.props[r]],this.$$p_d[r].reflect){const a=Ae(r,this.$$d[r],this.$$p_d,"toAttribute");a==null?this.removeAttribute(this.$$p_d[r].attribute||r):this.setAttribute(this.$$p_d[r].attribute||r,a)}this.$$r=!1};this.$$c.$$.after_update.push(o),o();for(const r in this.$$l)for(const a of this.$$l[r]){const d=this.$$c.$on(r,a);this.$$l_u.set(a,d)}this.$$l={}}}attributeChangedCallback(e,t,i){var n;this.$$r||(e=this.$$g_p(e),this.$$d[e]=Ae(e,i,this.$$p_d,"toProp"),(n=this.$$c)==null||n.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e)||e}});function Ae(s,e,t,i){var o;const n=(o=t[s])==null?void 0:o.type;if(e=n==="Boolean"&&typeof e!="boolean"?e!=null:e,!i||!t[s])return e;if(i==="toAttribute")switch(n){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(n){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function he(s,e,t,i,n,o){let r=class extends rt{constructor(){super(s,t,n),this.$$p_d=e}static get observedAttributes(){return Object.keys(e).map(a=>(e[a].attribute||a).toLowerCase())}};return Object.keys(e).forEach(a=>{Object.defineProperty(r.prototype,a,{get(){return this.$$c&&a in this.$$c?this.$$c[a]:this.$$d[a]},set(d){var p;d=Ae(a,d,e),this.$$d[a]=d,(p=this.$$c)==null||p.$set({[a]:d})}})}),i.forEach(a=>{Object.defineProperty(r.prototype,a,{get(){var d;return(d=this.$$c)==null?void 0:d[a]}})}),o&&(r=o(r)),s.element=r,r}class fe{constructor(){c(this,"$$");c(this,"$$set")}$destroy(){le(this,1),this.$destroy=N}$on(e,t){if(!it(t))return N;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const n=i.indexOf(t);n!==-1&&i.splice(n,1)}}$set(e){this.$$set&&!mt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const It="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(It);class B{constructor(e,t){c(this,"x");c(this,"y");this.x=e,this.y=t}}class ot{constructor(e,t,i,n=[]){c(this,"name");c(this,"gender");c(this,"sprites");c(this,"monsters");c(this,"bag",[]);c(this,"lvl",1);c(this,"moving",!1);c(this,"direction","down");c(this,"positionOnScreen");c(this,"positionOnMap");c(this,"frames");c(this,"spriteScale",1);this.name=e,this.gender=t,this.sprites=i,this.monsters=n,this.frames={max:3,val:0,elapsed:0},this.positionOnMap=new B(0,0),this.positionOnScreen=new B(0,0)}get sprite(){return this.sprites[this.direction]}draw(e,t,i,n,o){let r=this.sprite||this.sprites.down,a=n*i,d=o*i,p=e.canvas.width/2-a/2,l=e.canvas.height/2-d/2;this.moving?(this.frames.max>1&&(this.frames.elapsed+=1),this.frames.elapsed%2===0&&(this.frames.val+=1,this.frames.val>this.frames.max-1&&(this.frames.val=0))):this.frames.val=1,e.drawImage(r,this.frames.val*(r.width/this.frames.max),0,r.width/this.frames.max,r.height,p+this.positionOnScreen.x,l+this.positionOnScreen.y,r.width/this.frames.max*i,r.height*i)}updatePosition(e,t){this.positionOnMap.x=e.x+t.x,this.positionOnMap.y=e.y+t.y}}class Et{constructor(e,t,i,n,o){c(this,"down");c(this,"up");c(this,"left");c(this,"right");c(this,"battle");c(this,"width",80);c(this,"height",80);this.down=e,this.up=t,this.left=i,this.right=n,this.battle=o}}const P={up:{pressed:!1},down:{pressed:!1},left:{pressed:!1},right:{pressed:!1}};let ee={key:""};function We(s){return e=>{switch(e.key){case"ArrowDown":P.down.pressed=!1;break;case"ArrowUp":P.up.pressed=!1;break;case"ArrowRight":P.right.pressed=!1;break;case"ArrowLeft":P.left.pressed=!1;break}s.moving=!1}}function Xe(){return s=>{switch(s.key){case"ArrowDown":ee.key="ArrowDown",P.down.pressed=!0;break;case"ArrowUp":ee.key="ArrowUp",P.up.pressed=!0;break;case"ArrowRight":ee.key="ArrowRight",P.right.pressed=!0;break;case"ArrowLeft":ee.key="ArrowLeft",P.left.pressed=!0;break}}}class me{constructor(e,t,i,n,o,r,a,d,p,l=new te(1,1,1,1,1,1),f=new te(0,0,0,0,0,0)){c(this,"id");c(this,"name");c(this,"types");c(this,"abilities");c(this,"baseStats");c(this,"ivs");c(this,"evs");c(this,"evolution");c(this,"currentStats",new te);c(this,"currentHp",1);c(this,"currentXp",0);c(this,"xpToNextLevel",0);c(this,"currentAbility");c(this,"level",5);c(this,"evsToDistribute",0);c(this,"fainted");c(this,"moves");c(this,"isShiny",!1);c(this,"sprites");c(this,"position");c(this,"currentImage");c(this,"currentImage2");c(this,"height",0);c(this,"spriteScale",1);c(this,"frames",{max:2,val:0,elapsed:0});this.id=e,this.name=t,this.types=i,this.abilities=n,this.baseStats=o,this.evolution=r,this.fainted=!1,this.ivs=l,this.evs=f,this.updateCurrentStats(),this.currentHp=this.currentStats.HP,this.currentAbility=d||this.abilities[0],this.moves=p||[],this.sprites=a,this.position=new B(0,0)}get totalEvs(){return this.evs.attack+this.evs.defense+this.evs.specialAttack+this.evs.specialDefense+this.evs.speed+this.evs.HP}selectMove(e,t){let i=Math.floor(Math.random()*this.moves.length),n=this.moves[i];return e==="Easy"&&t&&((t==null?void 0:t.types.length)===2?this.moves.find(r=>r.type===t.types[0]&&r.power>0):this.moves.find(r=>(r.type===t.types[0]||r.type===t.types[1])&&r.power>0)),n}levelUp(){let e=this.currentStats.HP;this.level+=1,console.log("from:",this.currentStats),this.updateCurrentStats(),console.log("to:",this.currentStats),e=this.currentStats.HP-e,this.currentHp+=e,this.currentXp=0,this.checkForNewMoves(),this.checkForEvolutions()}addXp(e,t){if(this.evsToDistribute+=this.totalEvs+t<=255?t:this.totalEvs+t-255,!(this.level>=100)){if(this.xpToNextLevel<e){const i=e-this.xpToNextLevel,n=e-i;this.currentXp+=n}else this.currentXp+=e;this.currentXp>=this.xpToNextLevel&&this.levelUp()}}draw2(e,t="front"){var o;this.currentImage||(this.currentImage=new Image,this.currentImage.src=this.sprites[t]),this.currentImage2||(this.currentImage2=new Image,this.currentImage2.src=this.sprites.front2),this.frames.elapsed>=100&&(this.frames.elapsed=0);let i=t==="front"&&this.currentImage.complete&&((o=this.currentImage2)==null?void 0:o.complete)||t!=="front"&&this.currentImage.complete,n=t!=="front"?this.currentImage:this.frames.elapsed<100?this.currentImage:this.currentImage2;if(i){this.frames.elapsed++;let r;window.innerWidth<1100?t==="front"?r=new B(e.canvas.width/4*3-this.sprites.width*2*(this==null?void 0:this.spriteScale)/2,e.canvas.height/3.5*2-(this==null?void 0:this.sprites.height)*2*(this==null?void 0:this.spriteScale)-16*2):r=new B(e.canvas.width/4-this.sprites.width*2*this.spriteScale/2,e.canvas.height*.75-this.sprites.height*2*this.spriteScale+16*2):t==="front"?r=new B(e.canvas.width/4*3-(this==null?void 0:this.sprites.width)*2.5*(this==null?void 0:this.spriteScale)/2,e.canvas.height/2-(this==null?void 0:this.sprites.height)*2.5*(this==null?void 0:this.spriteScale)-12*2.5):r=new B(e.canvas.width/4-this.sprites.width*2.5*this.spriteScale/2,e.canvas.height*.75-this.sprites.height*2.5*this.spriteScale+15*2.5),e.drawImage(n,0,0,this.sprites.width,this.sprites.height,r.x,r.y,this.sprites.width*this.spriteScale*2.5,this.sprites.height*this.spriteScale*2.5)}}draw(e,t="front"){var o;this.isShiny&&(t="shiny"),this.currentImage||(this.currentImage=new Image,this.currentImage.src=this.sprites[t]),this.currentImage2||(this.currentImage2=new Image,this.currentImage2.src=this.sprites.front2),this.frames.elapsed>=100&&(this.frames.elapsed=0);let i=t==="front"&&this.currentImage.complete&&((o=this.currentImage2)==null?void 0:o.complete)||t!=="front"&&this.currentImage.complete,n=t!=="front"?this.currentImage:this.frames.elapsed<100?this.currentImage:this.currentImage2;i&&(this.frames.elapsed++,e.drawImage(n,0,0,this.sprites.width,this.sprites.height,this.position.x,this.position.y,this.sprites.width*this.spriteScale*2.5,this.sprites.height*this.spriteScale*2.5))}checkForNewMoves(){}checkForEvolutions(){this.evolution&&this.level>=this.evolution.level&&this.evolve()}evolve(){this.id++;const t=(localStorage.getItem("pokedex")&&JSON.parse(localStorage.getItem("pokedex")||"[]")||[]).find(i=>i.id===this.id);t&&(Object.setPrototypeOf(t,me.prototype),this.baseStats=t.baseStats,this.updateCurrentStats(),this.sprites=t.sprites,this.currentImage=void 0,this.currentImage2=void 0,this.spriteScale=t.spriteScale,this.height=t.height)}updateCurrentStats(){this.currentStats=this.fromBaseStats()}addEvs(e){if(e){let t=this.totalEvs;this.evs.HP+=this.evs.HP+e.HP<=255&&t+e.HP<512?e.HP:0,this.evs.attack+=this.evs.attack+e.attack<=255&&t+e.attack<512?e.attack:0,this.evs.defense+=this.evs.defense+e.defense<=255&&t+e.defense<512?e.defense:0,this.evs.specialAttack+=this.evs.specialAttack+e.specialAttack<=255&&t+e.specialAttack<512?e.specialAttack:0,this.evs.specialDefense+=this.evs.specialDefense+e.specialDefense<=255&&t+e.specialDefense<512?e.specialDefense:0,this.evs.speed+=this.evs.speed+e.speed<=255&&t+e.speed<512?e.speed:0}}fromBaseStats(){return new te(Math.floor((this.ivs.HP+this.baseStats.HP*2+this.evs.HP/4)*this.level/100+10+this.level),Math.floor((this.ivs.attack+this.baseStats.attack*2+this.evs.attack/4)*this.level/100+5),Math.floor((this.ivs.defense+this.baseStats.defense*2+this.evs.defense/4)*this.level/100+5),Math.floor((this.ivs.specialAttack+this.baseStats.specialAttack*2+this.evs.specialAttack/4)*this.level/100+5),Math.floor((this.ivs.specialDefense+this.baseStats.specialDefense*2+this.evs.specialDefense/4)*this.level/100+5),Math.floor((this.ivs.speed+this.baseStats.speed*2+this.evs.speed/4)*this.level/100+5))}}class te{constructor(e=0,t=0,i=0,n=0,o=0,r=0){c(this,"HP");c(this,"attack");c(this,"defense");c(this,"specialAttack");c(this,"specialDefense");c(this,"speed");this.HP=e,this.attack=t,this.defense=i,this.specialAttack=n,this.specialDefense=o,this.speed=r}}class Ot{constructor(e,t,i,n){c(this,"front");c(this,"front2");c(this,"back");c(this,"shiny");c(this,"width",80);c(this,"height",80);this.front=e,this.front2=t,this.back=i,this.shiny=n}}class ye{constructor(e,t,i,n,o,r,a,d,p,l){c(this,"name");c(this,"type");c(this,"category");c(this,"power");c(this,"accuracy");c(this,"pp");c(this,"currentPp");c(this,"priority");c(this,"effect");c(this,"effectChance");c(this,"description");this.name=e,this.type=t,this.category=i,this.power=n,this.accuracy=o,this.pp=r,this.currentPp=r,this.priority=a,this.effect=d,this.effectChance=p,this.description=l}}class Ht{constructor(e,t,i){c(this,"player");c(this,"playerCurrentMonster");c(this,"opponent");c(this,"opponentCurrentMonster");c(this,"isPlayerTurn");c(this,"turnStack");c(this,"initialOpponentPosition");c(this,"initialAllyPosition");c(this,"escapeAttempts",0);c(this,"onClose",()=>{});c(this,"currentMessage","What will you do ?");c(this,"sleep",e=>new Promise(t=>setTimeout(t,e)));var n,o,r,a;this.player=e,this.opponent=t,this.playerCurrentMonster=e.monsters[0],this.opponentCurrentMonster=this.wild?t:t.monsters[0],this.turnStack=[],window.innerWidth<1100?(this.initialOpponentPosition=new B(i.width/4*3-(t==null?void 0:t.sprites.width)*2*(t==null?void 0:t.spriteScale)/2,i.height/3.5*2-(t==null?void 0:t.sprites.height)*2*(t==null?void 0:t.spriteScale)-16*2),this.initialAllyPosition=new B(i.width/4-((n=this.playerCurrentMonster)==null?void 0:n.sprites.width)*2*this.playerCurrentMonster.spriteScale/2,i.height*.75-((o=this.playerCurrentMonster)==null?void 0:o.sprites.height)*2*this.playerCurrentMonster.spriteScale+16*2)):(this.initialOpponentPosition=new B(i.width/4*3-(t==null?void 0:t.sprites.width)*2.5*(t==null?void 0:t.spriteScale)/2,i.height/2-(t==null?void 0:t.sprites.height)*2.5*(t==null?void 0:t.spriteScale)-12*2.5),this.initialAllyPosition=new B(i.width/4-((r=this.playerCurrentMonster)==null?void 0:r.sprites.width)*2.5*this.playerCurrentMonster.spriteScale/2,i.height*.75-((a=this.playerCurrentMonster)==null?void 0:a.sprites.height)*2.5*this.playerCurrentMonster.spriteScale+15*2.5)),this.playerCurrentMonster.position=this.initialAllyPosition,this.opponentCurrentMonster.position=this.initialOpponentPosition,this.isPlayerTurn=!0}get wild(){return this.opponent instanceof me}selectAction(e){this.isPlayerTurn=!1,e instanceof Pe&&this.playerCurrentMonster.currentStats.speed>this.opponentCurrentMonster.currentStats.speed||e instanceof De||e instanceof Ye||e instanceof Ve?(this.turnStack.push(e),this.selectOpponentAction()):(this.selectOpponentAction(),this.turnStack.push(e)),this.executeAction(this.turnStack.shift())}runAway(){if(this.wild){this.escapeAttempts++;const e=Math.random()*255;Math.floor(this.opponentCurrentMonster.currentStats.speed*128/this.playerCurrentMonster.currentStats.speed)+30*this.escapeAttempts*e>255?(this.turnStack=[],this.turnStack.push(new Ee(this.playerCurrentMonster)),this.turnStack.unshift(new K("You ran away safely!",this.playerCurrentMonster))):this.turnStack.unshift(new K("Failed to run away!",this.playerCurrentMonster))}else this.turnStack.unshift(new K("You can't run away from a trainer battle!",this.playerCurrentMonster))}attack(e){const t=e.initiator,i=e.target==="opponent"?this.opponentCurrentMonster:this.playerCurrentMonster,n=this.calculateDamage(t,i,e.move),o=[];o.push(new K(t.name+" used "+e.move.name+"!",e.initiator)),n.immune?o.push(new K("It doesn't affect "+i.name+"...",e.initiator)):n.notVeryEffective?o.push(new K("It's not very effective...",e.initiator)):n.superEffective&&o.push(new K("It's super effective!",e.initiator)),n.critical&&o.push(new K("A critical hit!",e.initiator)),o.push(new Ze(n.damages,e.target,e.initiator)),o.reverse().forEach(r=>this.turnStack.unshift(r))}calculateDamage(e,t,i){let n=new Lt;if(i.category!=="Status"){const o=i.category==="Physical"?e.currentStats.attack:e.currentStats.specialAttack,r=i.category==="Physical"?t.currentStats.defense:t.currentStats.specialDefense,a=this.calculateTypeEffectiveness(i.type,t.types);n.superEffective=a>1,n.notVeryEffective=a<1,n.immune=a===0;const d=n.immune?0:this.calculateCritical();n.critical=d>1;const p=Math.random()*(1-.85)+.85,l=this.calculateStab(e,i),h=a*d*p*l*1;n.damages=Math.floor(((2*e.level/5+2)*i.power*o/r/50+2)*h)}else n.damages=0;return n}calculateTypeEffectiveness(e,t){return t.reduce((i,n)=>{const o=Tt(e,n);return i*o},1)}calculateCritical(){return Math.random()<.0625?1.5:1}calculateStab(e,t){return e.types.includes(t.type)?1.5:1}selectOpponentAction(){const e=this.opponentCurrentMonster.selectMove("Easy");this.turnStack.push(new Pe(e,"ally",this.opponentCurrentMonster))}executeAction(e){var t;e&&(e instanceof Pe&&!e.initiator.fainted?this.attack(e):e instanceof De?this.runAway():e instanceof Ye||e instanceof Ve||(e instanceof K?this.currentMessage=e.description:e instanceof Ze?this.removeHP(e):e instanceof Ee&&this.onClose())),(t=this.turnStack)!=null&&t.length||0>0?this.sleep(1e3).then(()=>{var i;return this.executeAction((i=this.turnStack)==null?void 0:i.shift())}):this.isPlayerTurn=!0}removeHP(e){const t=e.target==="opponent"?this.opponentCurrentMonster:this.playerCurrentMonster;t.currentHp-=e.damages,t.currentHp<=0&&(t.currentHp=0,t.fainted=!0,this.turnStack=[],this.turnStack.push(new K(t.name+" fainted!",e.initiator)),(this.wild||this.opponent instanceof ot&&this.opponent.monsters.every(i=>i.fainted))&&(this.turnStack.unshift(new Ee(e.initiator)),this.turnStack.unshift(new K("You won the battle!",e.initiator)),setTimeout(()=>{this.onClose()},1e3)))}}class Lt{constructor(){c(this,"superEffective",!1);c(this,"notVeryEffective",!1);c(this,"immune",!1);c(this,"critical",!1);c(this,"effectSuccess",!1);c(this,"effectApplied","");c(this,"damages",0)}}class Ee{constructor(e){c(this,"name");c(this,"description");c(this,"initiator");this.name="End Battle",this.description="End Battle",this.initiator=e}}class Ze{constructor(e,t,i){c(this,"name");c(this,"description");c(this,"damages");c(this,"target");c(this,"initiator");this.name="Remove HP",this.description="Remove HP",this.damages=e,this.target=t,this.initiator=i}}class K{constructor(e,t){c(this,"name");c(this,"description");c(this,"initiator");this.name="Message",this.description=e,this.initiator=t}}class De{constructor(e){c(this,"description");c(this,"name");c(this,"initiator");this.name="Run Away",this.description="Run away from the battle",this.initiator=e}}class Ye{constructor(e,t){c(this,"description");c(this,"name");c(this,"targetIdx");c(this,"initiator");this.name="Change Pokemon",this.description="Change the current pokemon",this.targetIdx=e,this.initiator=t}}class Pe{constructor(e,t,i){c(this,"name");c(this,"description");c(this,"move");c(this,"target");c(this,"initiator");this.name=e.name,this.description=e.description,this.move=e,this.target=t,this.initiator=i}}class Ve{constructor(e,t,i,n,o,r=0){c(this,"description");c(this,"name");c(this,"itemId");c(this,"targetType");c(this,"targetIdx");c(this,"initiator");this.name=e,this.description=t,this.itemId=i,this.targetType=n,this.targetIdx=r,this.initiator=o}}class Dt{constructor(e,t){c(this,"position");c(this,"image");c(this,"width",0);c(this,"height",0);this.position=e,this.image=t,this.image.onload=()=>{this.width=this.image.width,this.height=this.image.height}}draw(e,t){e.drawImage(this.image,0,0,this.image.width,this.image.height,0,0,t.width,t.height*.75)}}const at=new Image;at.src="src/assets/battle/battle-grass.png";const Bt=new Dt(new B(0,0),at);function Tt(s,e){return zt[s.toLowerCase()][e.toLowerCase()]}const zt={normal:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:.5,ghost:0,dragon:1,dark:1,steel:.5},fire:{normal:1,fire:.5,water:.5,electric:1,grass:2,ice:2,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:2,rock:.5,ghost:1,dragon:.5,dark:1,steel:2},water:{normal:1,fire:2,water:.5,electric:1,grass:.5,ice:1,fighting:1,poison:1,ground:2,flying:1,psychic:1,bug:1,rock:2,ghost:1,dragon:.5,dark:1,steel:1},electric:{normal:1,fire:1,water:2,electric:.5,grass:.5,ice:1,fighting:1,poison:1,ground:0,flying:2,psychic:1,bug:1,rock:1,ghost:1,dragon:.5,dark:1,steel:1},grass:{normal:1,fire:.5,water:2,electric:1,grass:.5,ice:1,fighting:1,poison:.5,ground:2,flying:.5,psychic:1,bug:.5,rock:2,ghost:1,dragon:.5,dark:1,steel:.5},ice:{normal:1,fire:.5,water:.5,electric:1,grass:2,ice:.5,fighting:1,poison:1,ground:2,flying:2,psychic:1,bug:1,rock:1,ghost:1,dragon:2,dark:1,steel:.5},fighting:{normal:2,fire:1,water:1,electric:1,grass:1,ice:2,fighting:1,poison:.5,ground:1,flying:.5,psychic:.5,bug:.5,rock:2,ghost:0,dragon:1,dark:2,steel:2},poison:{normal:1,fire:1,water:1,electric:1,grass:2,ice:1,fighting:1,poison:.5,ground:.5,flying:1,psychic:1,bug:1,rock:.5,ghost:.5,dragon:1,dark:1,steel:0},ground:{normal:1,fire:2,water:1,electric:2,grass:.5,ice:1,fighting:1,poison:2,ground:1,flying:0,psychic:1,bug:.5,rock:2,ghost:1,dragon:1,dark:1,steel:2},flying:{normal:1,fire:1,water:1,electric:.5,grass:2,ice:1,fighting:2,poison:1,ground:1,flying:1,psychic:1,bug:2,rock:.5,ghost:1,dragon:1,dark:1,steel:.5},psychic:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:2,poison:2,ground:1,flying:1,psychic:.5,bug:1,rock:1,ghost:1,dragon:1,dark:0,steel:.5},bug:{normal:1,fire:.5,water:1,electric:1,grass:2,ice:1,fighting:.5,poison:.5,ground:1,flying:.5,psychic:2,bug:1,rock:1,ghost:.5,dragon:1,dark:2,steel:.5},rock:{normal:1,fire:2,water:1,electric:1,grass:1,ice:2,fighting:.5,poison:1,ground:.5,flying:2,psychic:1,bug:2,rock:1,ghost:1,dragon:1,dark:1,steel:.5},ghost:{normal:0,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:2,bug:1,rock:1,ghost:2,dragon:1,dark:.5,steel:.5},dragon:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:1,ghost:1,dragon:2,dark:1,steel:.5},dark:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:.5,poison:1,ground:1,flying:1,psychic:2,bug:1,rock:1,ghost:2,dragon:1,dark:.5,steel:.5},steel:{normal:1,fire:.5,water:.5,electric:.5,grass:1,ice:2,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:2,ghost:1,dragon:1,dark:1,steel:.5}};function Ft(s){de(s,"svelte-68hs54",".ally-info.svelte-68hs54.svelte-68hs54{opacity:0;visibility:hidden;z-index:9;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;bottom:26dvh;right:-30dvw;transition:right 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly;font-size:46px}.ally-info.opened.svelte-68hs54.svelte-68hs54{opacity:1;visibility:visible;right:1dvw}.ally-info.svelte-68hs54 .name-lvl.svelte-68hs54{display:flex;justify-content:space-between;align-items:center}.ally-info.svelte-68hs54 .status.svelte-68hs54{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.ally-info.svelte-68hs54 .hp.svelte-68hs54{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.ally-info.svelte-68hs54 .hp span.svelte-68hs54{padding:0 0 0 12px;font-weight:bold}.ally-info.svelte-68hs54 .hp .progressbar-wrapper.svelte-68hs54{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.ally-info.svelte-68hs54 .hp .progressbar-wrapper .progressbar.svelte-68hs54{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px;transition:width 1s ease-in-out}.ally-info.svelte-68hs54 .hp .progressbar-wrapper .progressbar.warning.svelte-68hs54{background:rgb(255, 241, 164);background:linear-gradient(0deg, rgb(255, 241, 164) 0%, rgb(255, 194, 16) 30%, rgb(255, 194, 16) 50%, rgb(255, 194, 16) 70%, rgb(255, 241, 164) 100%)}.ally-info.svelte-68hs54 .hp .progressbar-wrapper .progressbar.danger.svelte-68hs54{background:rgb(244, 177, 159);background:linear-gradient(0deg, rgb(244, 177, 159) 0%, rgb(223, 85, 48) 30%, rgb(223, 85, 48) 50%, rgb(223, 85, 48) 70%, rgb(244, 177, 159) 100%)}@media screen and (max-width: 1100px){.ally-info.svelte-68hs54.svelte-68hs54{font-size:36px;border:8px solid #595b59;height:16dvh}.ally-info.svelte-68hs54 .hp.svelte-68hs54{width:80%;height:18px}.ally-info.svelte-68hs54 .hp .progressbar-wrapper.svelte-68hs54{height:14px}}")}function jt(s){let e,t,i,n=s[1].name+"",o,r,a,d,p=s[1].level+"",l,f,h,y,b,_,S,w,M,D=s[1].currentHp+"",X,k,g=s[1].currentStats.HP+"",A;return{c(){e=m("div"),t=m("div"),i=m("span"),o=I(n),r=$(),a=m("span"),d=I("Lv "),l=I(p),f=$(),h=m("div"),y=m("div"),b=m("span"),b.textContent="HP",_=$(),S=m("div"),w=m("div"),M=$(),X=I(D),k=I(" / "),A=I(g),v(i,"class","svelte-68hs54"),v(a,"class","svelte-68hs54"),v(t,"class","name-lvl svelte-68hs54"),v(b,"class","svelte-68hs54"),v(w,"class","progressbar svelte-68hs54"),se(w,"--width",s[2]+"%"),C(w,"warning",s[2]<=50),C(w,"danger",s[2]<15),v(S,"class","progressbar-wrapper svelte-68hs54"),v(y,"class","hp svelte-68hs54"),v(h,"class","status svelte-68hs54"),v(e,"class","ally-info svelte-68hs54"),C(e,"opened",s[0])},m(O,L){H(O,e,L),u(e,t),u(t,i),u(i,o),u(t,r),u(t,a),u(a,d),u(a,l),u(e,f),u(e,h),u(h,y),u(y,b),u(y,_),u(y,S),u(S,w),u(h,M),u(h,X),u(h,k),u(h,A)},p(O,[L]){L&2&&n!==(n=O[1].name+"")&&R(o,n),L&2&&p!==(p=O[1].level+"")&&R(l,p),L&4&&se(w,"--width",O[2]+"%"),L&4&&C(w,"warning",O[2]<=50),L&4&&C(w,"danger",O[2]<15),L&2&&D!==(D=O[1].currentHp+"")&&R(X,D),L&2&&g!==(g=O[1].currentStats.HP+"")&&R(A,g),L&1&&C(e,"opened",O[0])},i:N,o:N,d(O){O&&E(e)}}}function Nt(s,e,t){let i,{opened:n}=e,{monster:o}=e;return s.$$set=r=>{"opened"in r&&t(0,n=r.opened),"monster"in r&&t(1,o=r.monster)},s.$$.update=()=>{s.$$.dirty&2&&t(2,i=Math.floor(o.currentHp*100/o.currentStats.HP))},[n,o,i]}class lt extends fe{constructor(e){super(),pe(this,e,Nt,jt,ce,{opened:0,monster:1},Ft)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),T()}get monster(){return this.$$.ctx[1]}set monster(e){this.$$set({monster:e}),T()}}he(lt,{opened:{},monster:{}},[],[],!0);function Rt(s){de(s,"svelte-150lop2",".action-bar.svelte-150lop2.svelte-150lop2{opacity:0;visibility:hidden;z-index:9;background-color:white;height:25dvh;width:100dvw;position:absolute;bottom:-25dvh;left:0;transition:bottom 0.5s ease-in-out;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;display:flex;font-size:64px}.action-bar.opened.svelte-150lop2.svelte-150lop2{opacity:1;visibility:visible;bottom:0}.action-bar.svelte-150lop2 .info.svelte-150lop2{width:50%;height:100%;display:flex;align-items:center;align-content:center;justify-content:space-around;position:relative}.action-bar.svelte-150lop2 .info ._inner.svelte-150lop2{position:absolute;left:17px;z-index:1;height:calc(100% - 55px);border:10px solid black;border-radius:10px;display:flex;align-items:center;justify-content:center;width:100%;text-transform:capitalize}.action-bar.svelte-150lop2 .info ._inner .move-desc.svelte-150lop2{text-transform:initial;font-size:46px;display:flex;flex-wrap:wrap;gap:16px;word-break:break-word;box-sizing:border-box;padding:0 20px}.action-bar.svelte-150lop2 .info ._inner .move-desc p.svelte-150lop2{flex:45%;margin:0}.action-bar.svelte-150lop2 .actions.svelte-150lop2,.action-bar.svelte-150lop2 .moves.svelte-150lop2{width:50%;height:100%;display:flex;background:#FFFFFF;border:14px solid #595b59;border-radius:8px;box-sizing:border-box;padding:12px;z-index:2;flex-wrap:wrap;gap:12px}.action-btn.svelte-150lop2.svelte-150lop2{background-color:var(--color);font-size:64px;color:white;border-radius:24px;border:6px solid #595b59;font-family:pokemon, serif;transition:color 0.3s ease-in-out, opacity 0.3s ease-in-out;flex:48%}.action-btn.svelte-150lop2.svelte-150lop2:hover,.action-btn.selected.svelte-150lop2.svelte-150lop2{cursor:pointer;opacity:0.96;color:#262626}.action-btn[disabled].svelte-150lop2.svelte-150lop2{opacity:0.5;cursor:not-allowed;pointer-events:none}@media screen and (max-width: 1100px){.action-bar.svelte-150lop2.svelte-150lop2{font-size:32px}.action-bar.svelte-150lop2 .actions.svelte-150lop2{padding:2px;gap:4px;border:8px solid #595b59}.action-bar.svelte-150lop2 .actions .action-btn.svelte-150lop2{font-size:32px}.action-bar.svelte-150lop2 .info ._inner .move-desc.svelte-150lop2{font-size:32px}}")}function Ge(s,e,t){const i=s.slice();return i[11]=e[t],i[13]=t,i}function Ut(s){var O,L,z,Z,xe,ke;let e,t,i=((O=s[1])==null?void 0:O.playerCurrentMonster.moves[s[3]].description)+"",n,o,r,a=((L=s[1])==null?void 0:L.playerCurrentMonster.moves[s[3]].currentPp)+"",d,p,l=((z=s[1])==null?void 0:z.playerCurrentMonster.moves[s[3]].pp)+"",f,h,y,b=((Z=s[1])==null?void 0:Z.playerCurrentMonster.moves[s[3]].category)+"",_,S,w,M=((xe=s[1])==null?void 0:xe.playerCurrentMonster.moves[s[3]].power)+"",D,X,k=((ke=s[1])==null?void 0:ke.playerCurrentMonster.moves[s[3]].accuracy)+"",g,A;return{c(){e=m("div"),t=m("p"),n=I(i),o=$(),r=m("p"),d=I(a),p=I(`
                        / `),f=I(l),h=$(),y=m("p"),_=I(b),S=$(),w=m("p"),D=I(M),X=I(`
                        | `),g=I(k),A=I(" %"),v(t,"class","svelte-150lop2"),v(r,"class","svelte-150lop2"),v(y,"class","svelte-150lop2"),v(w,"class","svelte-150lop2"),v(e,"class","move-desc svelte-150lop2")},m(F,Q){H(F,e,Q),u(e,t),u(t,n),u(e,o),u(e,r),u(r,d),u(r,p),u(r,f),u(e,h),u(e,y),u(y,_),u(e,S),u(e,w),u(w,D),u(w,X),u(w,g),u(w,A)},p(F,Q){var _e,Se,x,J,U,ne;Q&10&&i!==(i=((_e=F[1])==null?void 0:_e.playerCurrentMonster.moves[F[3]].description)+"")&&R(n,i),Q&10&&a!==(a=((Se=F[1])==null?void 0:Se.playerCurrentMonster.moves[F[3]].currentPp)+"")&&R(d,a),Q&10&&l!==(l=((x=F[1])==null?void 0:x.playerCurrentMonster.moves[F[3]].pp)+"")&&R(f,l),Q&10&&b!==(b=((J=F[1])==null?void 0:J.playerCurrentMonster.moves[F[3]].category)+"")&&R(_,b),Q&10&&M!==(M=((U=F[1])==null?void 0:U.playerCurrentMonster.moves[F[3]].power)+"")&&R(D,M),Q&10&&k!==(k=((ne=F[1])==null?void 0:ne.playerCurrentMonster.moves[F[3]].accuracy)+"")&&R(g,k)},d(F){F&&E(e)}}}function qt(s){var i;let e=((i=s[1])==null?void 0:i.currentMessage.toUpperCase())+"",t;return{c(){t=I(e)},m(n,o){H(n,t,o)},p(n,o){var r;o&2&&e!==(e=((r=n[1])==null?void 0:r.currentMessage.toUpperCase())+"")&&R(t,e)},d(n){n&&E(t)}}}function Wt(s){let e,t,i,n,o,r,a,d,p,l,f,h,y,b;return{c(){e=m("div"),t=m("button"),i=I("FIGHT"),n=$(),o=m("button"),r=I("BAG"),a=$(),d=m("button"),p=I("POKEMONS"),l=$(),f=m("button"),h=I("RUN"),v(t,"class","action-btn svelte-150lop2"),se(t,"--color","#dc5959"),t.disabled=s[5],C(t,"selected",s[4]===0),v(o,"class","action-btn svelte-150lop2"),se(o,"--color","#eca859"),o.disabled=s[5],C(o,"selected",s[4]===1),v(d,"class","action-btn svelte-150lop2"),se(d,"--color","#7EAF53"),d.disabled=s[5],C(d,"selected",s[4]===2),v(f,"class","action-btn svelte-150lop2"),se(f,"--color","#599bdc"),f.disabled=s[5],C(f,"selected",s[4]===2),v(e,"class","actions svelte-150lop2")},m(_,S){H(_,e,S),u(e,t),u(t,i),u(e,n),u(e,o),u(o,r),u(e,a),u(e,d),u(d,p),u(e,l),u(e,f),u(f,h),y||(b=[q(t,"click",s[6]),q(f,"click",s[7])],y=!0)},p(_,S){S&32&&(t.disabled=_[5]),S&16&&C(t,"selected",_[4]===0),S&32&&(o.disabled=_[5]),S&16&&C(o,"selected",_[4]===1),S&32&&(d.disabled=_[5]),S&16&&C(d,"selected",_[4]===2),S&32&&(f.disabled=_[5]),S&16&&C(f,"selected",_[4]===2)},d(_){_&&E(e),y=!1,ie(b)}}}function Xt(s){let e,t=qe(s[1].playerCurrentMonster.moves),i=[];for(let n=0;n<t.length;n+=1)i[n]=Je(Ge(s,t,n));return{c(){e=m("div");for(let n=0;n<i.length;n+=1)i[n].c();v(e,"class","moves svelte-150lop2")},m(n,o){H(n,e,o);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(n,o){if(o&298){t=qe(n[1].playerCurrentMonster.moves);let r;for(r=0;r<t.length;r+=1){const a=Ge(n,t,r);i[r]?i[r].p(a,o):(i[r]=Je(a),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},d(n){n&&E(e),xt(i,n)}}}function Je(s){let e,t=s[11].name.toUpperCase()+"",i,n,o,r;function a(){return s[9](s[13])}function d(){return s[10](s[11])}return{c(){e=m("button"),i=I(t),n=$(),v(e,"class","action-btn svelte-150lop2"),se(e,"--color","#dc5959"),e.disabled=s[5],C(e,"selected",s[3]===s[13])},m(p,l){H(p,e,l),u(e,i),u(e,n),o||(r=[q(e,"mouseover",a),q(e,"click",d)],o=!0)},p(p,l){s=p,l&2&&t!==(t=s[11].name.toUpperCase()+"")&&R(i,t),l&32&&(e.disabled=s[5]),l&8&&C(e,"selected",s[3]===s[13])},d(p){p&&E(e),o=!1,ie(r)}}}function Zt(s){let e,t,i,n;function o(f,h){return f[2]?Ut:qt}let r=o(s),a=r(s);function d(f,h){return f[2]?Xt:Wt}let p=d(s),l=p(s);return{c(){e=m("div"),t=m("div"),i=m("div"),a.c(),n=$(),l.c(),v(i,"class","_inner svelte-150lop2"),v(t,"class","info svelte-150lop2"),v(e,"class","action-bar svelte-150lop2"),C(e,"opened",s[0])},m(f,h){H(f,e,h),u(e,t),u(t,i),a.m(i,null),u(e,n),l.m(e,null)},p(f,[h]){r===(r=o(f))&&a?a.p(f,h):(a.d(1),a=r(f),a&&(a.c(),a.m(i,null))),p===(p=d(f))&&l?l.p(f,h):(l.d(1),l=p(f),l&&(l.c(),l.m(e,null))),h&1&&C(e,"opened",f[0])},i:N,o:N,d(f){f&&E(e),a.d(),l.d()}}}function Yt(s,e,t){let i,{opened:n}=e,{battleState:o}=e,r=!1,a=0,d=0;function p(){t(2,r=!r)}function l(){console.log(o),o.selectAction(new De(o.playerCurrentMonster))}function f(b){o.selectAction(new Pe(b,"opponent",o.playerCurrentMonster)),t(2,r=!1)}window.addEventListener("keydown",b=>{b.key==="ArrowUp"?r?t(3,a=a===0?o.playerCurrentMonster.moves.length-1:a-1):t(4,d=d===0?3:d-1):b.key==="ArrowDown"?r?t(3,a=a===o.playerCurrentMonster.moves.length-1?0:a+1):t(4,d=d===3?0:d+1):b.key==="Enter"&&(r?f(o.playerCurrentMonster.moves[a]):d===0?p():d===3&&l()),console.log(d,a)});const h=b=>t(3,a=b),y=b=>f(b);return s.$$set=b=>{"opened"in b&&t(0,n=b.opened),"battleState"in b&&t(1,o=b.battleState)},s.$$.update=()=>{s.$$.dirty&2&&t(5,i=o&&!o.isPlayerTurn||!1)},[n,o,r,a,d,i,p,l,f,h,y]}class ct extends fe{constructor(e){super(),pe(this,e,Yt,Zt,ce,{opened:0,battleState:1},Rt)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),T()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),T()}}he(ct,{opened:{},battleState:{}},[],[],!0);function Vt(s){de(s,"svelte-1xvkx5g",".enemy-info.svelte-1xvkx5g.svelte-1xvkx5g{opacity:0;visibility:hidden;z-index:9;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;top:2dvh;left:-30dvw;transition:left 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly;font-size:46px}.enemy-info.opened.svelte-1xvkx5g.svelte-1xvkx5g{opacity:1;visibility:visible;left:1dvw}.enemy-info.svelte-1xvkx5g .name-lvl.svelte-1xvkx5g{display:flex;justify-content:space-between;align-items:center}.enemy-info.svelte-1xvkx5g .status.svelte-1xvkx5g{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.enemy-info.svelte-1xvkx5g .hp.svelte-1xvkx5g{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.enemy-info.svelte-1xvkx5g .hp span.svelte-1xvkx5g{padding:0 0 0 12px;font-weight:bold}.enemy-info.svelte-1xvkx5g .hp .progressbar-wrapper.svelte-1xvkx5g{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.enemy-info.svelte-1xvkx5g .hp .progressbar-wrapper .progressbar.svelte-1xvkx5g{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px;transition:width 1s ease-in-out, background 1s ease-in-out 1s}.enemy-info.svelte-1xvkx5g .hp .progressbar-wrapper .progressbar.warning.svelte-1xvkx5g{background:rgb(255, 241, 164);background:linear-gradient(0deg, rgb(255, 241, 164) 0%, rgb(255, 194, 16) 30%, rgb(255, 194, 16) 50%, rgb(255, 194, 16) 70%, rgb(255, 241, 164) 100%)}.enemy-info.svelte-1xvkx5g .hp .progressbar-wrapper .progressbar.danger.svelte-1xvkx5g{background:rgb(244, 177, 159);background:linear-gradient(0deg, rgb(244, 177, 159) 0%, rgb(223, 85, 48) 30%, rgb(223, 85, 48) 50%, rgb(223, 85, 48) 70%, rgb(244, 177, 159) 100%)}@media screen and (max-width: 1100px){.enemy-info.svelte-1xvkx5g.svelte-1xvkx5g{font-size:36px;border:8px solid #595b59}.enemy-info.svelte-1xvkx5g .hp.svelte-1xvkx5g{width:80%;height:18px}.enemy-info.svelte-1xvkx5g .hp .progressbar-wrapper.svelte-1xvkx5g{height:14px}}")}function Gt(s){let e,t,i,n=s[1].name+"",o,r,a,d,p=s[1].level+"",l,f,h,y,b,_,S,w;return{c(){e=m("div"),t=m("div"),i=m("span"),o=I(n),r=$(),a=m("span"),d=I("Lv "),l=I(p),f=$(),h=m("div"),y=m("div"),b=m("span"),b.textContent="HP",_=$(),S=m("div"),w=m("div"),v(i,"class","svelte-1xvkx5g"),v(a,"class","svelte-1xvkx5g"),v(t,"class","name-lvl svelte-1xvkx5g"),v(b,"class","svelte-1xvkx5g"),v(w,"class","progressbar svelte-1xvkx5g"),se(w,"--width",s[2]+"%"),C(w,"warning",s[2]<=50),C(w,"danger",s[2]<15),v(S,"class","progressbar-wrapper svelte-1xvkx5g"),v(y,"class","hp svelte-1xvkx5g"),v(h,"class","status svelte-1xvkx5g"),v(e,"class","enemy-info svelte-1xvkx5g"),C(e,"opened",s[0])},m(M,D){H(M,e,D),u(e,t),u(t,i),u(i,o),u(t,r),u(t,a),u(a,d),u(a,l),u(e,f),u(e,h),u(h,y),u(y,b),u(y,_),u(y,S),u(S,w)},p(M,[D]){D&2&&n!==(n=M[1].name+"")&&R(o,n),D&2&&p!==(p=M[1].level+"")&&R(l,p),D&4&&se(w,"--width",M[2]+"%"),D&4&&C(w,"warning",M[2]<=50),D&4&&C(w,"danger",M[2]<15),D&1&&C(e,"opened",M[0])},i:N,o:N,d(M){M&&E(e)}}}function Jt(s,e,t){let i,{opened:n}=e,{monster:o}=e;return s.$$set=r=>{"opened"in r&&t(0,n=r.opened),"monster"in r&&t(1,o=r.monster)},s.$$.update=()=>{s.$$.dirty&2&&t(2,i=Math.floor(o.currentHp*100/o.currentStats.HP))},[n,o,i]}class dt extends fe{constructor(e){super(),pe(this,e,Jt,Gt,ce,{opened:0,monster:1},Vt)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),T()}get monster(){return this.$$.ctx[1]}set monster(e){this.$$set({monster:e}),T()}}he(dt,{opened:{},monster:{}},[],[],!0);function Kt(s){de(s,"svelte-18qu5ee",".battleStart.svelte-18qu5ee{opacity:0;visibility:hidden;background:#000000;height:100dvh;width:100dvw;position:absolute;top:0;left:0;transition:opacity 0.5s ease-in-out;z-index:2}.battleStart.animate.svelte-18qu5ee{visibility:visible;animation:svelte-18qu5ee-animate 2s ease-in-out}.battleStart.hide.svelte-18qu5ee{visibility:hidden;opacity:0}@keyframes svelte-18qu5ee-animate{0%{opacity:1}20%{opacity:0}40%{opacity:1}60%{opacity:0}80%{opacity:1}100%{opacity:0}}")}function Ke(s){let e,t,i,n,o,r,a,d,p,l,f,h;function y(g){s[3](g)}function b(g){s[4](g)}let _={};s[0]!==void 0&&(_.opened=s[0]),s[1]!==void 0&&(_.battleState=s[1]),e=new ct({props:_}),j.push(()=>V(e,"opened",y)),j.push(()=>V(e,"battleState",b));function S(g){s[5](g)}function w(g){s[6](g)}let M={};s[0]!==void 0&&(M.opened=s[0]),s[1].playerCurrentMonster!==void 0&&(M.monster=s[1].playerCurrentMonster),o=new lt({props:M}),j.push(()=>V(o,"opened",S)),j.push(()=>V(o,"monster",w));function D(g){s[7](g)}function X(g){s[8](g)}let k={};return s[0]!==void 0&&(k.opened=s[0]),s[1].opponentCurrentMonster!==void 0&&(k.monster=s[1].opponentCurrentMonster),p=new dt({props:k}),j.push(()=>V(p,"opened",D)),j.push(()=>V(p,"monster",X)),{c(){ve(e.$$.fragment),n=$(),ve(o.$$.fragment),d=$(),ve(p.$$.fragment)},m(g,A){ae(e,g,A),H(g,n,A),ae(o,g,A),H(g,d,A),ae(p,g,A),h=!0},p(g,A){const O={};!t&&A&1&&(t=!0,O.opened=g[0],Y(()=>t=!1)),!i&&A&2&&(i=!0,O.battleState=g[1],Y(()=>i=!1)),e.$set(O);const L={};!r&&A&1&&(r=!0,L.opened=g[0],Y(()=>r=!1)),!a&&A&2&&(a=!0,L.monster=g[1].playerCurrentMonster,Y(()=>a=!1)),o.$set(L);const z={};!l&&A&1&&(l=!0,z.opened=g[0],Y(()=>l=!1)),!f&&A&2&&(f=!0,z.monster=g[1].opponentCurrentMonster,Y(()=>f=!1)),p.$set(z)},i(g){h||(W(e.$$.fragment,g),W(o.$$.fragment,g),W(p.$$.fragment,g),h=!0)},o(g){G(e.$$.fragment,g),G(o.$$.fragment,g),G(p.$$.fragment,g),h=!1},d(g){g&&(E(n),E(d)),le(e,g),le(o,g),le(p,g)}}}function Qt(s){let e,t,i,n=s[1]&&Ke(s);return{c(){n&&n.c(),e=$(),t=m("div"),t.innerHTML="",v(t,"class","battleStart svelte-18qu5ee"),C(t,"hide",s[0]),C(t,"animate",s[2])},m(o,r){n&&n.m(o,r),H(o,e,r),H(o,t,r),i=!0},p(o,[r]){o[1]?n?(n.p(o,r),r&2&&W(n,1)):(n=Ke(o),n.c(),W(n,1),n.m(e.parentNode,e)):n&&(Te(),G(n,1,1,()=>{n=null}),ze()),(!i||r&1)&&C(t,"hide",o[0]),(!i||r&4)&&C(t,"animate",o[2])},i(o){i||(W(n),i=!0)},o(o){G(n),i=!1},d(o){o&&(E(e),E(t)),n&&n.d(o)}}}function es(s,e,t){let{opened:i}=e,{battleStart:n}=e,{battleState:o}=e;function r(h){i=h,t(0,i)}function a(h){o=h,t(1,o)}function d(h){i=h,t(0,i)}function p(h){s.$$.not_equal(o.playerCurrentMonster,h)&&(o.playerCurrentMonster=h,t(1,o))}function l(h){i=h,t(0,i)}function f(h){s.$$.not_equal(o.opponentCurrentMonster,h)&&(o.opponentCurrentMonster=h,t(1,o))}return s.$$set=h=>{"opened"in h&&t(0,i=h.opened),"battleStart"in h&&t(2,n=h.battleStart),"battleState"in h&&t(1,o=h.battleState)},[i,o,n,r,a,d,p,l,f]}class pt extends fe{constructor(e){super(),pe(this,e,es,Qt,ce,{opened:0,battleStart:2,battleState:1},Kt)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),T()}get battleStart(){return this.$$.ctx[2]}set battleStart(e){this.$$set({battleStart:e}),T()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),T()}}he(pt,{opened:{},battleStart:{},battleState:{}},[],[],!0);function ts(s){de(s,"svelte-1cbbcxy",'.menu.svelte-1cbbcxy.svelte-1cbbcxy{position:absolute;top:0;right:-20dvw;width:20dvw;font-size:36px;background-color:#FFFFFF;z-index:3;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:right 0.3s ease-in-out;border:3px solid #1e1e1e;border-radius:16px}.menu.svelte-1cbbcxy ul.svelte-1cbbcxy{box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;border-radius:12px;list-style:none;padding:12px 32px;margin:0;display:flex;flex-direction:column;height:100%;width:100%;align-items:center}.menu.svelte-1cbbcxy ul li.svelte-1cbbcxy{font-size:4rem;margin:1rem 0;text-align:center;cursor:pointer;flex-grow:1;width:100%;height:100%;min-height:60px;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li:hover .svelte-1cbbcxy:before{content:"";width:0;height:0;border-top:20px solid transparent;border-bottom:20px solid transparent;border-left:20px solid #262626;position:absolute;left:40px}.menu.svelte-1cbbcxy ul li button.svelte-1cbbcxy{background:none;border:none;font-size:inherit;font-family:inherit;cursor:inherit;outline:none;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li button .svelte-1cbbcxy:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%}.menu.open.svelte-1cbbcxy.svelte-1cbbcxy{opacity:1;pointer-events:all;right:0}')}function ss(s){let e;return{c(){e=m("div"),e.innerHTML='<ul class="svelte-1cbbcxy"><li class="svelte-1cbbcxy"><button tabindex="0" class="svelte-1cbbcxy">Pokedex</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Pokemon</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Bag</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Trainer</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Save</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Options</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Credits</button></li></ul>',v(e,"class","menu svelte-1cbbcxy"),C(e,"open",s[0])},m(t,i){H(t,e,i)},p(t,[i]){i&1&&C(e,"open",t[0])},i:N,o:N,d(t){t&&E(e)}}}function is(s,e,t){let{menuOpened:i}=e,{player:n}=e;return s.$$set=o=>{"menuOpened"in o&&t(0,i=o.menuOpened),"player"in o&&t(1,n=o.player)},[i,n]}class ht extends fe{constructor(e){super(),pe(this,e,is,ss,ce,{menuOpened:0,player:1},ts)}get menuOpened(){return this.$$.ctx[0]}set menuOpened(e){this.$$set({menuOpened:e}),T()}get player(){return this.$$.ctx[1]}set player(e){this.$$set({player:e}),T()}}he(ht,{menuOpened:{},player:{}},[],[],!0);class Qe{constructor(e,t=16,i=16){c(this,"position");c(this,"width");c(this,"height");this.position=e,this.width=t,this.height=i}debug(e,t,i,n,o,r="red"){e.fillStyle=r,e.fillRect(n+this.position.x*16*i,o+this.position.y*16*i,this.width*i,this.height*i)}}const ns=8,rs=806;class os{constructor(e,t,i,n,o,r,a){c(this,"background");c(this,"foreground");c(this,"width");c(this,"height");c(this,"collisions");c(this,"battleZones");c(this,"monsters");c(this,"playerInitialPosition",new B(11,11));c(this,"startingX",0);c(this,"startingY",0);this.background=e,this.foreground=t,this.width=i,this.height=n,this.collisions=this.initBoundaries(o),this.battleZones=this.initBattlesZones(r),this.monsters=a}randomMonster(){const e=this.monsters[Math.floor(Math.random()*this.monsters.length)],i=(localStorage.getItem("pokedex")&&JSON.parse(localStorage.getItem("pokedex")||"[]")||[]).find(n=>n.id===e);return Object.setPrototypeOf(i,me.prototype),i}initBattlesZones(e){const t=[];for(let n=0;n<e.length;n+=this.width)t.push(e.slice(n,this.width+n));const i=[];return t.forEach((n,o)=>{n.forEach((r,a)=>{if(r===ns){const d=new Qe(new B(a,o));i.push(d)}})}),i}initBoundaries(e){const t=[];for(let n=0;n<e.length;n+=this.width)t.push(e.slice(n,this.width+n));const i=[];return t.forEach((n,o)=>{n.forEach((r,a)=>{if(r===rs){const d=new Qe(new B(a,o));i.push(d)}})}),i}drawBackground(e,t,i){let n=this.background.width*i,o=this.background.height*i,r=e.canvas.width/2-n/2,a=e.canvas.height/2-o/2;this.startingX=r+(0-t.x)*(16*i),this.startingY=a+(0-t.y)*(16*i),e.drawImage(this.background,0,0,this.background.width,this.background.height,this.startingX,this.startingY,this.background.width*i,this.background.height*i)}drawForeground(e,t){this.foreground!==null&&e.drawImage(this.foreground,t.x*16,t.y*16,this.foreground.width,this.foreground.height,0,0,this.foreground.width*3,this.foreground.height*3)}drawBoundaries(e,t,i){this.collisions.forEach(n=>{n.debug(e,t,i,this.startingX,this.startingY,"rgba(255, 0, 0, 0.5)")})}drawBattleZones(e,t,i){this.battleZones.forEach(n=>{n.debug(e,t,i,this.startingX,this.startingY,"rgba(0, 0, 255, 0.5)")})}hasBattleZoneAt(e){return this.battleZones.some(t=>t.position.x===e.x&&t.position.y===e.y)}hasBoundaryAt(e){return this.collisions.some(t=>t.position.x===e.x&&t.position.y===e.y)||e.x<0||e.y<0||e.x>this.width-1||e.y>this.height-1}}const ft=new Image;ft.src="src/assets/maps/test-map.png";const ut=new Image;ut.src="src/assets/maps/test-map-foreground.png";const as=[95],ls=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,0,806,806,0,0,806,806,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,806,806,806,806,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,806,806,806,806,834,0,0,0,0,0,0,0,0,0],cs=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],re=new os(ft,ut,20,20,ls,cs,as);function ds(s){de(s,"svelte-17ytc58",'@media(max-width: 1100px){.set.svelte-17ytc58 .d-pad.svelte-17ytc58{width:20dvw;height:20dvw}}.set.svelte-17ytc58.svelte-17ytc58{overflow:hidden;text-align:center;position:absolute;bottom:8dvh;left:8dvh;z-index:10}.set.svelte-17ytc58 .d-pad.svelte-17ytc58{display:inline-block}.d-pad.svelte-17ytc58.svelte-17ytc58{position:relative;width:12dvw;height:12dvw;border-radius:48%;overflow:hidden;z-index:9}.d-pad.svelte-17ytc58.svelte-17ytc58:before{content:"";position:absolute;top:50%;left:50%;border-radius:5%;transform:translate(-50%, -50%);width:66.6%;height:66.6%}.d-pad.svelte-17ytc58.svelte-17ytc58:after{content:"";position:absolute;display:none;z-index:2;width:20%;height:20%;top:50%;left:50%;background:rgba(221, 221, 221, 0.5);border-radius:50%;transform:translate(-50%, -50%);transition:all 0.25s;cursor:pointer}.d-pad.svelte-17ytc58.svelte-17ytc58:hover:after{width:30%;height:30%}.d-pad.svelte-17ytc58 span.svelte-17ytc58{display:block;position:absolute;-webkit-tap-highlight-color:rgba(255, 255, 255, 0);width:33.3%;height:43%;line-height:40%;color:#fff;background:rgba(221, 221, 221, 0.5);text-align:center}.d-pad.svelte-17ytc58 span.svelte-17ytc58:hover{background:#eee}.d-pad.svelte-17ytc58 span.svelte-17ytc58:before{content:"";position:absolute;width:0;height:0;border-radius:5px;border-style:solid;transition:all 0.25s}.d-pad.svelte-17ytc58 span.svelte-17ytc58:after{content:"";position:absolute;width:102%;height:78%;background:#fff;border-radius:20%}.d-pad.svelte-17ytc58 span.left.svelte-17ytc58,.d-pad.svelte-17ytc58 span.right.svelte-17ytc58{width:43%;height:33%}.d-pad.svelte-17ytc58 span.left.svelte-17ytc58:after,.d-pad.svelte-17ytc58 span.right.svelte-17ytc58:after{width:78%;height:102%}.d-pad.svelte-17ytc58 span.up.svelte-17ytc58{top:0;left:50%;transform:translate(-50%, 0);border-radius:17% 17% 50% 50%}.d-pad.svelte-17ytc58 span.up.svelte-17ytc58:hover{background:linear-gradient(0deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-17ytc58 span.up.svelte-17ytc58:after{left:0;top:0;transform:translate(-100%, 0);border-top-left-radius:50%;pointer-events:none}.d-pad.svelte-17ytc58 span.up.svelte-17ytc58:before{top:40%;left:50%;transform:translate(-50%, -50%);border-width:0 13px 19px 13px;border-color:transparent transparent #aaa transparent}.d-pad.svelte-17ytc58 span.up.svelte-17ytc58:active:before{border-bottom-color:#333}.d-pad.svelte-17ytc58 span.up.svelte-17ytc58:hover:before{top:35%}.d-pad.svelte-17ytc58 span.down.svelte-17ytc58{bottom:0;left:50%;transform:translate(-50%, 0);border-radius:50% 50% 17% 17%}.d-pad.svelte-17ytc58 span.down.svelte-17ytc58:hover{background:linear-gradient(180deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-17ytc58 span.down.svelte-17ytc58:after{right:0;bottom:0;transform:translate(100%, 0);border-bottom-right-radius:50%;pointer-events:none}.d-pad.svelte-17ytc58 span.down.svelte-17ytc58:before{bottom:40%;left:50%;transform:translate(-50%, 50%);border-width:19px 13px 0px 13px;border-color:#aaa transparent transparent transparent}.d-pad.svelte-17ytc58 span.down.svelte-17ytc58:active:before{border-top-color:#333}.d-pad.svelte-17ytc58 span.down.svelte-17ytc58:hover:before{bottom:35%}.d-pad.svelte-17ytc58 span.left.svelte-17ytc58{top:50%;left:0;transform:translate(0, -50%);border-radius:17% 50% 50% 17%}.d-pad.svelte-17ytc58 span.left.svelte-17ytc58:hover{background:linear-gradient(-90deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-17ytc58 span.left.svelte-17ytc58:after{left:0;bottom:0;transform:translate(0, 100%);border-bottom-left-radius:50%;pointer-events:none}.d-pad.svelte-17ytc58 span.left.svelte-17ytc58:before{left:40%;top:50%;transform:translate(-50%, -50%);border-width:13px 19px 13px 0;border-color:transparent #aaa transparent transparent}.d-pad.svelte-17ytc58 span.left.svelte-17ytc58:active:before{border-right-color:#333}.d-pad.svelte-17ytc58 span.left.svelte-17ytc58:hover:before{left:35%}.d-pad.svelte-17ytc58 span.right.svelte-17ytc58{top:50%;right:0;transform:translate(0, -50%);border-radius:50% 17% 17% 50%}.d-pad.svelte-17ytc58 span.right.svelte-17ytc58:hover{background:linear-gradient(90deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-17ytc58 span.right.svelte-17ytc58:after{right:0;top:0;transform:translate(0, -100%);border-top-right-radius:50%;pointer-events:none}.d-pad.svelte-17ytc58 span.right.svelte-17ytc58:before{right:40%;top:50%;transform:translate(50%, -50%);border-width:13px 0 13px 19px;border-color:transparent transparent transparent #aaa}.d-pad.svelte-17ytc58 span.right.svelte-17ytc58:active:before{border-left-color:#333}.d-pad.svelte-17ytc58 span.right.svelte-17ytc58:hover:before{right:35%}.clear .d-pad.svelte-17ytc58 span.svelte-17ytc58{border:1px solid #fff}.clear .d-pad.svelte-17ytc58 span.svelte-17ytc58{background:none}.clear .d-pad.svelte-17ytc58 span.svelte-17ytc58:after{display:none}.clear .d-pad.svelte-17ytc58 span.up.svelte-17ytc58:hover{background:linear-gradient(0deg, #5f9837 0%, #6ea248 50%)}.clear .d-pad.svelte-17ytc58 span.right.svelte-17ytc58:hover{background:linear-gradient(90deg, #5f9837 0%, #6ea248 50%)}.clear .d-pad.svelte-17ytc58 span.down.svelte-17ytc58:hover{background:linear-gradient(180deg, #5f9837 0%, #6ea248 50%)}.clear .d-pad.svelte-17ytc58 span.left.svelte-17ytc58:hover{background:linear-gradient(-90deg, #5f9837 0%, #6ea248 50%)}.clear .d-pad.svelte-17ytc58 span.up.svelte-17ytc58:before{border-bottom-color:#fff}.clear .d-pad.svelte-17ytc58 span.right.svelte-17ytc58:before{border-left-color:#fff}.clear .d-pad.svelte-17ytc58 span.down.svelte-17ytc58:before{border-top-color:#fff}.clear .d-pad.svelte-17ytc58 span.left.svelte-17ytc58:before{border-right-color:#fff}.clear .d-pad.svelte-17ytc58 span.up.svelte-17ytc58:active:before{border-bottom-color:rgba(0, 0, 0, 0.6)}.clear .d-pad.svelte-17ytc58 span.right.svelte-17ytc58:active:before{border-left-color:rgba(0, 0, 0, 0.6)}.clear .d-pad.svelte-17ytc58 span.down.svelte-17ytc58:active:before{border-top-color:rgba(0, 0, 0, 0.6)}.clear .d-pad.svelte-17ytc58 span.left.svelte-17ytc58:active:before{border-right-color:rgba(0, 0, 0, 0.6)}.outline.svelte-17ytc58 .d-pad.svelte-17ytc58{border-radius:0}.outline.svelte-17ytc58 .d-pad span.svelte-17ytc58{border:1px solid rgba(0, 0, 0, 0.1)}.outline.svelte-17ytc58 .d-pad span.svelte-17ytc58:after{display:none}.outline.svelte-17ytc58 .d-pad span.up.svelte-17ytc58:hover{background:linear-gradient(0deg, #fff 0%, #efefef 50%)}.outline.svelte-17ytc58 .d-pad span.right.svelte-17ytc58:hover{background:linear-gradient(90deg, #fff 0%, #efefef 50%)}.outline.svelte-17ytc58 .d-pad span.down.svelte-17ytc58:hover{background:linear-gradient(180deg, #fff 0%, #efefef 50%)}.outline.svelte-17ytc58 .d-pad span.left.svelte-17ytc58:hover{background:linear-gradient(-90deg, #fff 0%, #efefef 50%)}.outline.svelte-17ytc58 .d-pad span.up.svelte-17ytc58:before{border-bottom-color:rgba(0, 0, 0, 0.1)}.outline.svelte-17ytc58 .d-pad span.right.svelte-17ytc58:before{border-left-color:rgba(0, 0, 0, 0.1)}.outline.svelte-17ytc58 .d-pad span.down.svelte-17ytc58:before{border-top-color:rgba(0, 0, 0, 0.1)}.outline.svelte-17ytc58 .d-pad span.left.svelte-17ytc58:before{border-right-color:rgba(0, 0, 0, 0.1)}.setbg.white .d-pad.svelte-17ytc58 span.svelte-17ytc58{background:#fff}.setbg.white .d-pad.svelte-17ytc58 span.svelte-17ytc58:after{border-radius:40%;background:#222}.setbg.white .d-pad.svelte-17ytc58 span.up.svelte-17ytc58:hover{background:#fff}.setbg.white .d-pad.svelte-17ytc58 span.right.svelte-17ytc58:hover{background:#fff}.setbg.white .d-pad.svelte-17ytc58 span.down.svelte-17ytc58:hover{background:#fff}.setbg.white .d-pad.svelte-17ytc58 span.left.svelte-17ytc58:hover{background:#fff}.setbg.white .d-pad.svelte-17ytc58 span.up.svelte-17ytc58:before{border-bottom-color:#0074D9}.setbg.white .d-pad.svelte-17ytc58 span.right.svelte-17ytc58:before{border-left-color:#FF851B}.setbg.white .d-pad.svelte-17ytc58 span.down.svelte-17ytc58:before{border-top-color:#3D9970}.setbg.white .d-pad.svelte-17ytc58 span.left.svelte-17ytc58:before{border-right-color:#FFDC00}.setbg.white .d-pad.svelte-17ytc58 span.up.svelte-17ytc58:active:before{border-bottom-color:rgba(0, 0, 0, 0.6)}.setbg.white .d-pad.svelte-17ytc58 span.right.svelte-17ytc58:active:before{border-left-color:rgba(0, 0, 0, 0.6)}.setbg.white .d-pad.svelte-17ytc58 span.down.svelte-17ytc58:active:before{border-top-color:rgba(0, 0, 0, 0.6)}.setbg.white .d-pad.svelte-17ytc58 span.left.svelte-17ytc58:active:before{border-right-color:rgba(0, 0, 0, 0.6)}')}function ps(s){let e,t,i,n,o,r,a,d,p,l,f;return{c(){e=m("div"),t=m("nav"),i=m("span"),n=$(),o=m("span"),r=$(),a=m("span"),d=$(),p=m("span"),v(i,"class","up svelte-17ytc58"),v(o,"class","right svelte-17ytc58"),v(a,"class","down svelte-17ytc58"),v(p,"class","left svelte-17ytc58"),v(t,"class","d-pad svelte-17ytc58"),v(e,"class","set outline svelte-17ytc58")},m(h,y){H(h,e,y),u(e,t),u(t,i),u(t,n),u(t,o),u(t,r),u(t,a),u(t,d),u(t,p),l||(f=[q(i,"pointerdown",s[5]("ArrowUp")),q(i,"pointerup",s[6]("ArrowUp")),q(o,"pointerdown",s[5]("ArrowRight")),q(o,"pointerup",s[6]("ArrowRight")),q(a,"pointerdown",s[5]("ArrowDown")),q(a,"pointerup",s[6]("ArrowDown")),q(p,"pointerdown",s[5]("ArrowLeft")),q(p,"pointerup",s[6]("ArrowLeft"))],l=!0)},p:N,i:N,o:N,d(h){h&&E(e),l=!1,ie(f)}}}function hs(s){let e,t,i,n,o;function r(l){s[9](l)}function a(l){s[10](l)}function d(l){s[11](l)}let p={};return s[0]!==void 0&&(p.opened=s[0]),s[4].battleState!==void 0&&(p.battleState=s[4].battleState),s[2]!==void 0&&(p.battleStart=s[2]),e=new pt({props:p}),j.push(()=>V(e,"opened",r)),j.push(()=>V(e,"battleState",a)),j.push(()=>V(e,"battleStart",d)),{c(){ve(e.$$.fragment)},m(l,f){ae(e,l,f),o=!0},p(l,f){const h={};!t&&f[0]&1&&(t=!0,h.opened=l[0],Y(()=>t=!1)),!i&&f[0]&16&&(i=!0,h.battleState=l[4].battleState,Y(()=>i=!1)),!n&&f[0]&4&&(n=!0,h.battleStart=l[2],Y(()=>n=!1)),e.$set(h)},i(l){o||(W(e.$$.fragment,l),o=!0)},o(l){G(e.$$.fragment,l),o=!1},d(l){le(e,l)}}}function fs(s){let e,t,i,n,o,r,a;const d=[hs,ps],p=[];function l(b,_){return b[4].initiated?0:1}e=l(s),t=p[e]=d[e](s);function f(b){s[12](b)}function h(b){s[13](b)}let y={};return s[1]!==void 0&&(y.menuOpened=s[1]),s[3]!==void 0&&(y.player=s[3]),n=new ht({props:y}),j.push(()=>V(n,"menuOpened",f)),j.push(()=>V(n,"player",h)),{c(){t.c(),i=$(),ve(n.$$.fragment)},m(b,_){p[e].m(b,_),H(b,i,_),ae(n,b,_),a=!0},p(b,_){let S=e;e=l(b),e===S?p[e].p(b,_):(Te(),G(p[S],1,1,()=>{p[S]=null}),ze(),t=p[e],t?t.p(b,_):(t=p[e]=d[e](b),t.c()),W(t,1),t.m(i.parentNode,i));const w={};!o&&_[0]&2&&(o=!0,w.menuOpened=b[1],Y(()=>o=!1)),!r&&_[0]&8&&(r=!0,w.player=b[3],Y(()=>r=!1)),n.$set(w)},i(b){a||(W(t),W(n.$$.fragment,b),a=!0)},o(b){G(t),G(n.$$.fragment,b),a=!1},d(b){b&&E(i),p[e].d(b),le(n,b)}}}let Ce=3;function us(s,e,t){let{opened:i=!1}=e,{menuOpened:n=!1}=e,{battleStart:o=!1}=e,{currentMap:r=re}=e,{canvas:a}=e;const d=a.getContext("2d");window.innerHeight>window.innerWidth?(console.log("portrait"),a.width=window.innerWidth,a.height=window.innerWidth):(a.width=window.innerWidth,a.height=window.innerHeight);let p=16*Ce,{character:l}=e;l.positionOnMap=new B(re.playerInitialPosition.x,re.playerInitialPosition.y),l.positionOnScreen=new B(re.playerInitialPosition.x*p,re.playerInitialPosition.y*p);function f(){window.innerHeight>window.innerWidth?(console.log("portrait"),t(7,a.width=window.innerWidth,a),t(7,a.height=window.innerWidth,a)):(t(7,a.width=window.innerWidth,a),t(7,a.height=window.innerHeight,a)),p=16*Ce,t(3,l.positionOnScreen=new B(re.playerInitialPosition.x*p,re.playerInitialPosition.y*p),l)}window.addEventListener("resize",()=>{f()}),window.addEventListener("orientationchange",()=>{f()});let{battle:h={initiated:!1,frameElapsed:0}}=e,y=0,b=new B(0,0),_=new B(0,0),S={fps:12,then:Date.now(),fpsInterval:1e3/12,id:0},w={fps:12,then:Date.now(),fpsInterval:1e3/12,goDown:!0,id:0};const M=new B(0,0);function D(){S.id=window.requestAnimationFrame(D);let x=Date.now(),J=x-S.then;if(J>S.fpsInterval){S.then=x-J%S.fpsInterval,d.fillStyle="black",d.fillRect(0,0,a.width,a.height),r.drawBackground(d,M,Ce),l.draw(d,M,Ce,r.background.width,r.background.height);let U=!0;if(t(3,l.moving=!1,l),h.initiated)return;if(!n){if((P.down.pressed||P.up.pressed||P.left.pressed||P.right.pressed)&&r.hasBattleZoneAt(l.positionOnMap)&&Math.random()<.1){t(3,l.frames.val=0,l);let ne=r.randomMonster();window.cancelAnimationFrame(S.id),k(ne)}P.down.pressed&&ee.key==="ArrowDown"&&(r.hasBoundaryAt(new B(l.positionOnMap.x,l.positionOnMap.y+1))&&(U=!1),t(3,l.moving=!0,l),t(3,l.direction="down",l),U&&M.y++),P.up.pressed&&ee.key==="ArrowUp"&&(r.hasBoundaryAt(new B(l.positionOnMap.x,l.positionOnMap.y-1))&&(U=!1),t(3,l.moving=!0,l),t(3,l.direction="up",l),U&&M.y--),P.left.pressed&&ee.key==="ArrowLeft"&&(r.hasBoundaryAt(new B(l.positionOnMap.x-1,l.positionOnMap.y))&&(U=!1),t(3,l.moving=!0,l),t(3,l.direction="left",l),U&&M.x--),P.right.pressed&&ee.key==="ArrowRight"&&(r.hasBoundaryAt(new B(l.positionOnMap.x+1,l.positionOnMap.y))&&(U=!1),t(3,l.moving=!0,l),t(3,l.direction="right",l),U&&M.x++),l.updatePosition(r.playerInitialPosition,M)}}}function X(){var U,ne,Fe,je,Ne,Re;w.id=window.requestAnimationFrame(X);let x=Date.now(),J=x-w.then;if(J>w.fpsInterval){if(!h.initiated)return;w.then=x-J%w.fpsInterval,t(4,h.frameElapsed++,h),d.fillStyle="black",d.fillRect(0,0,a.width,a.height),Bt.draw(d,a),(ne=(U=h.battleState)==null?void 0:U.opponentCurrentMonster)==null||ne.draw2(d,"front"),(je=(Fe=h.battleState)==null?void 0:Fe.playerCurrentMonster)==null||je.draw2(d,"back"),(Re=(Ne=h.battleState)==null?void 0:Ne.opponentCurrentMonster)!=null&&Re.position&&(w.goDown=h.frameElapsed<=10,w.goDown?y++:y--,t(4,h.battleState.opponentCurrentMonster.position.y=b.y-y,h),t(4,h.battleState.playerCurrentMonster.position.y=_.y+y,h),h.frameElapsed>20&&t(4,h.frameElapsed=0,h))}}function k(x){xe(),t(4,h.frameElapsed=0,h),t(4,h.initiated=!0,h),t(4,h.startDate=new Date,h),t(4,h.battleState=new Ht(l,x,a),h),b={...h.battleState.opponentCurrentMonster.position},_={...h.battleState.playerCurrentMonster.position},O(),t(4,h.battleState.onClose=()=>{g()},h),t(2,o=!0),setTimeout(()=>{t(2,o=!1),t(0,i=!0),X()},2e3)}function g(x){window.cancelAnimationFrame(w.id),t(4,h.battleState=void 0,h),t(4,h.initiated=!1,h),t(4,h.startDate=void 0,h),t(2,o=!1),t(0,i=!1),t(1,n=!1),D(),A()}function A(){window.addEventListener("keydown",Xe()),window.addEventListener("keyup",We(l)),window.addEventListener("keydown",L)}function O(){window.removeEventListener("keydown",Xe()),window.removeEventListener("keyup",We(l)),window.removeEventListener("keydown",L)}function L(x){x.key==="Escape"&&t(1,n=!n)}function z(x){return J=>{switch(J.preventDefault(),x){case"ArrowUp":P.up.pressed=!0;break;case"ArrowDown":P.down.pressed=!0;break;case"ArrowLeft":P.left.pressed=!0;break;case"ArrowRight":P.right.pressed=!0;break}ee.key=x}}function Z(x){return J=>{switch(x){case"ArrowDown":P.down.pressed=!1;break;case"ArrowUp":P.up.pressed=!1;break;case"ArrowRight":P.right.pressed=!1;break;case"ArrowLeft":P.left.pressed=!1;break}}}function xe(){P.down.pressed=!1,P.up.pressed=!1,P.right.pressed=!1,P.left.pressed=!1,t(3,l.moving=!1,l)}A(),D();function ke(x){i=x,t(0,i)}function F(x){s.$$.not_equal(h.battleState,x)&&(h.battleState=x,t(4,h))}function Q(x){o=x,t(2,o)}function _e(x){n=x,t(1,n)}function Se(x){l=x,t(3,l)}return s.$$set=x=>{"opened"in x&&t(0,i=x.opened),"menuOpened"in x&&t(1,n=x.menuOpened),"battleStart"in x&&t(2,o=x.battleStart),"currentMap"in x&&t(8,r=x.currentMap),"canvas"in x&&t(7,a=x.canvas),"character"in x&&t(3,l=x.character),"battle"in x&&t(4,h=x.battle)},[i,n,o,l,h,z,Z,a,r,ke,F,Q,_e,Se]}class gt extends fe{constructor(e){super(),pe(this,e,us,fs,ce,{opened:0,menuOpened:1,battleStart:2,currentMap:8,canvas:7,character:3,battle:4},ds,[-1,-1])}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),T()}get menuOpened(){return this.$$.ctx[1]}set menuOpened(e){this.$$set({menuOpened:e}),T()}get battleStart(){return this.$$.ctx[2]}set battleStart(e){this.$$set({battleStart:e}),T()}get currentMap(){return this.$$.ctx[8]}set currentMap(e){this.$$set({currentMap:e}),T()}get canvas(){return this.$$.ctx[7]}set canvas(e){this.$$set({canvas:e}),T()}get character(){return this.$$.ctx[3]}set character(e){this.$$set({character:e}),T()}get battle(){return this.$$.ctx[4]}set battle(e){this.$$set({battle:e}),T()}}he(gt,{opened:{type:"Boolean"},menuOpened:{type:"Boolean"},battleStart:{type:"Boolean"},currentMap:{},canvas:{},character:{},battle:{}},[],[],!0);function gs(s){de(s,"svelte-is1xco",'#canvas-wrapper.svelte-is1xco.svelte-is1xco.svelte-is1xco{width:100dvw;height:100dvh;overflow:hidden;position:absolute;top:0;left:0;-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0)}#canvas-wrapper.svelte-is1xco canvas.svelte-is1xco.svelte-is1xco{position:absolute;top:0;left:0;width:100dvw;height:100dvh}.loading.svelte-is1xco.svelte-is1xco.svelte-is1xco{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100vh}.loading.ready.svelte-is1xco.svelte-is1xco.svelte-is1xco{opacity:0.2}.u-swing.svelte-is1xco.svelte-is1xco.svelte-is1xco{animation:svelte-is1xco-swing 3000ms infinite}@keyframes svelte-is1xco-swing{20%{-webkit-transform:rotate(15deg);transform:rotate(15deg)}40%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg)}60%{-webkit-transform:rotate(5deg);transform:rotate(5deg)}80%{-webkit-transform:rotate(-5deg);transform:rotate(-5deg)}to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}.o-pokeball.svelte-is1xco.svelte-is1xco.svelte-is1xco{width:120px;height:120px;border-radius:120px;border:solid 4.8px black;position:relative;background:linear-gradient(to bottom, #EEEEEE 0%, #FFFFFF 100%);margin:10px auto}.o-pokeball.svelte-is1xco.svelte-is1xco.svelte-is1xco:before,.o-pokeball.svelte-is1xco.svelte-is1xco.svelte-is1xco:after{content:"";display:block}.o-pokeball.svelte-is1xco.svelte-is1xco.svelte-is1xco,.o-pokeball.svelte-is1xco.svelte-is1xco.svelte-is1xco:before,.o-pokeball.svelte-is1xco.svelte-is1xco.svelte-is1xco:after{transition:all 600ms cubic-bezier(0.67, 0.4, 0.36, 0.75)}.o-pokeball.svelte-is1xco.svelte-is1xco.svelte-is1xco:before{width:120px;height:57.6px;border-bottom:solid 4.8px black;border-radius:60px 60px 0 0;background:linear-gradient(to bottom, #d10000 0%, #ff0000 50%)}.o-pokeball.svelte-is1xco.svelte-is1xco.svelte-is1xco:after{content:"";width:24px;height:24px;background:linear-gradient(to bottom, #fff 0%, #ccc 100%);position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);border-radius:50%;box-shadow:0 0 0 2.4px black, 0 0 0 4.8px #ddd, 0 0 0 8.5714285714px black, 0 0 12px 7.0588235294px rgba(0, 0, 0, 0.4)}.buttons.svelte-is1xco.svelte-is1xco.svelte-is1xco{display:flex;justify-content:center;align-items:center;flex-direction:column;gap:120px;position:absolute;left:calc(50dvw - 100px);top:calc(50dvh - 40px)}.buttons.svelte-is1xco .letsgo.svelte-is1xco.svelte-is1xco{position:relative}.buttons.svelte-is1xco .letsgo .pika.svelte-is1xco.svelte-is1xco{width:200px;height:200px;position:absolute;bottom:0;left:0;z-index:1}.buttons.svelte-is1xco .letsgo .start-btn.svelte-is1xco.svelte-is1xco{width:200px;height:80px;border-radius:16px;position:relative;z-index:2;font-family:pokemon, serif;font-size:36px;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;cursor:pointer}.buttons.svelte-is1xco .letsgo .start-btn.svelte-is1xco.svelte-is1xco:hover{color:#fff;box-shadow:inset #009688 0 0 0 5px;text-shadow:none;font-weight:bold;background:#009688}.buttons.svelte-is1xco .letsgo .start-btn.svelte-is1xco:hover+.pika.svelte-is1xco{animation:svelte-is1xco-bounce 1s infinite}@keyframes svelte-is1xco-bounce{0%,20%,53%,80%,to{-webkit-animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-transform:translate3d(0, -30px, 0);transform:translate3d(0, -30px, 0)}40%,43%,70%{-webkit-animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06);animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06)}70%{-webkit-transform:translate3d(0, -15px, 0);transform:translate3d(0, -15px, 0)}90%{-webkit-transform:translate3d(0, -4px, 0);transform:translate3d(0, -4px, 0)}}#preview.svelte-is1xco.svelte-is1xco.svelte-is1xco{display:flex;flex-wrap:wrap;justify-content:center}')}function bs(s){let e,t,i,n=!s[1]&&et(s),o=s[1]&&tt(s);return{c(){e=m("div"),n&&n.c(),t=$(),o&&o.c(),i=kt(),v(e,"class","loading svelte-is1xco"),C(e,"ready",s[1])},m(r,a){H(r,e,a),n&&n.m(e,null),H(r,t,a),o&&o.m(r,a),H(r,i,a)},p(r,a){r[1]?n&&(n.d(1),n=null):n?n.p(r,a):(n=et(r),n.c(),n.m(e,null)),a&2&&C(e,"ready",r[1]),r[1]?o?o.p(r,a):(o=tt(r),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},i:N,o:N,d(r){r&&(E(e),E(t),E(i)),n&&n.d(),o&&o.d(r)}}}function vs(s){let e,t,i,n;function o(d){s[9](d)}function r(d){s[10](d)}let a={};return s[0]!==void 0&&(a.canvas=s[0]),s[3]!==void 0&&(a.character=s[3]),e=new gt({props:a}),j.push(()=>V(e,"canvas",o)),j.push(()=>V(e,"character",r)),{c(){ve(e.$$.fragment)},m(d,p){ae(e,d,p),n=!0},p(d,p){const l={};!t&&p&1&&(t=!0,l.canvas=d[0],Y(()=>t=!1)),!i&&p&8&&(i=!0,l.character=d[3],Y(()=>i=!1)),e.$set(l)},i(d){n||(W(e.$$.fragment,d),n=!0)},o(d){G(e.$$.fragment,d),n=!1},d(d){le(e,d)}}}function et(s){let e,t,i,n,o,r,a;return{c(){e=m("div"),t=$(),i=m("span"),n=I("Gotta catch em all... "),o=I(s[5]),r=$(),a=m("div"),a.innerHTML="",v(e,"class","o-pokeball c-loader u-swing svelte-is1xco"),v(a,"id","preview"),v(a,"class","svelte-is1xco")},m(d,p){H(d,e,p),H(d,t,p),H(d,i,p),u(i,n),u(i,o),H(d,r,p),H(d,a,p),s[11](a)},p(d,p){p&32&&R(o,d[5])},d(d){d&&(E(e),E(t),E(i),E(r),E(a)),s[11](null)}}}function tt(s){let e,t,i,n,o,r,a,d,p,l=s[7]&&ms(s);return{c(){e=m("div"),l&&l.c(),t=$(),i=m("div"),n=m("button"),n.textContent="New game!",o=$(),r=m("img"),v(n,"class","start-btn svelte-is1xco"),v(r,"class","pika svelte-is1xco"),v(r,"alt","pikachu"),nt(r.src,a="src/assets/monsters/heartgold-soulsilver/25.png")||v(r,"src",a),v(i,"class","letsgo svelte-is1xco"),v(e,"class","buttons svelte-is1xco")},m(f,h){H(f,e,h),l&&l.m(e,null),u(e,t),u(e,i),u(i,n),u(i,o),u(i,r),d||(p=q(n,"click",s[13]),d=!0)},p(f,h){f[7]&&l.p(f,h)},d(f){f&&E(e),l&&l.d(),d=!1,p()}}}function ms(s){let e,t,i,n,o,r,a;return{c(){e=m("div"),t=m("button"),t.textContent="Continue!",i=$(),n=m("img"),v(t,"class","start-btn svelte-is1xco"),v(n,"class","pika svelte-is1xco"),v(n,"alt","Evoli"),nt(n.src,o="src/assets/monsters/heartgold-soulsilver/133.png")||v(n,"src",o),v(e,"class","letsgo svelte-is1xco")},m(d,p){H(d,e,p),u(e,t),u(e,i),u(e,n),r||(a=q(t,"click",s[12]),r=!0)},p:N,d(d){d&&E(e),r=!1,a()}}}function ys(s){let e,t,i,n,o,r;const a=[vs,bs],d=[];function p(l,f){return l[1]&&l[4]?0:1}return t=p(s),i=d[t]=a[t](s),{c(){e=m("div"),i.c(),n=$(),o=m("canvas"),v(o,"class","svelte-is1xco"),v(e,"id","canvas-wrapper"),v(e,"class","svelte-is1xco")},m(l,f){H(l,e,f),d[t].m(e,null),u(e,n),u(e,o),s[14](o),s[15](e),r=!0},p(l,[f]){let h=t;t=p(l),t===h?d[t].p(l,f):(Te(),G(d[h],1,1,()=>{d[h]=null}),ze(),i=d[t],i?i.p(l,f):(i=d[t]=a[t](l),i.c()),W(i,1),i.m(e,n))},i(l){r||(W(i),r=!0)},o(l){G(i),r=!1},d(l){l&&E(e),d[t].d(),s[14](null),s[15](null)}}}function ws(s,e,t){let{canvas:i}=e,n,o,{ready:r=!1}=e,a=[],d=!1,p,l,f;a.length>0&&o?(a.forEach(k=>{setTimeout(()=>{const g=new Image;g.src=`src/assets/monsters/heartgold-soulsilver/${k.id}.png`,f.appendChild(g)},100)}),r=!0):fetch("src/assets/data/pokedex-gen1.json").then(k=>k.json()).then(k=>{k.forEach(g=>{t(5,l=g.name.english);let A=`src/assets/monsters/heartgold-soulsilver/${g.id}.png`,O=`src/assets/monsters/heartgold-soulsilver/frame2/${g.id}.png`,L=`src/assets/monsters/heartgold-soulsilver/back/${g.id}.png`,z=`src/assets/monsters/heartgold-soulsilver/shiny/${g.id}.png`;setTimeout(()=>{const Z=new me(g.id,g.name.english,g.type,g.profile.ability,new te(g.base.HP,g.base.Attack,g.base.Defense,g.base["Sp. Attack"],g.base["Sp. Defense"],g.base.Speed),g.evolution,new Ot(A,O,L,z),void 0,[new ye("Tackle","Normal","Physical",40,100,35,0,"",0,"Basic hit")],new te(10,10,10,10,10,10),new te(0,0,0,10,0,0));Z.height=Number.parseFloat(g.profile.height.replace(" m",""))*100,window.innerWidth<1100?Z.spriteScale=Math.max(.8,Math.min(Z.height/100,1.3)):Z.spriteScale=Math.max(1.2,Math.min(Z.height/100,2)),a.push(Z),a.length===k.length&&(t(5,l="Ready!"),localStorage.setItem("pokedex",JSON.stringify(a)),h())},100)})});function h(){let k=new Image;k.src="src/assets/sprites/hero_male_front.png";let g=new Image;g.src="src/assets/sprites/hero_male_back.png";let A=new Image;A.src="src/assets/sprites/hero_male_left.png";let O=new Image;O.src="src/assets/sprites/hero_male_right.png";let L=new Image;L.src="src/assets/sprites/hero_male_back.png",Promise.all(Array.from([k,g,A,O,L].filter(z=>!z.complete)).map(z=>new Promise(Z=>{z.onload=z.onerror=Z}))).then(()=>{let z={...a.at(70),ivs:new te(31,31,31,31,31,31),evs:new te(120,0,0,255,0,135),moves:[new ye("Tackle","Normal","Physical",40,100,35,0,"",0,"Basic hit"),new ye("Growl","Normal","Status",0,100,40,0,"",0,"Lowers the target's Attack by one stage."),new ye("Tail Whip","Normal","Status",0,100,30,0,"",0,"Lowers the target's Defense by one stage."),new ye("Vine whip","Grass","Physical",40,100,30,0,"",0,"Strong hit with vines.")]};Object.setPrototypeOf(z,me.prototype),z.updateCurrentStats(),z.currentHp=z.currentStats.HP,t(3,o=new ot("Kaiser","MALE",new Et(k,g,A,O,L),[z])),t(1,r=!0)})}function y(){t(4,d=!0)}function b(k){i=k,t(0,i)}function _(k){o=k,t(3,o)}function S(k){j[k?"unshift":"push"](()=>{f=k,t(6,f)})}const w=()=>y(),M=()=>y();function D(k){j[k?"unshift":"push"](()=>{i=k,t(0,i)})}function X(k){j[k?"unshift":"push"](()=>{n=k,t(2,n)})}return s.$$set=k=>{"canvas"in k&&t(0,i=k.canvas),"ready"in k&&t(1,r=k.ready)},[i,r,n,o,d,l,f,p,y,b,_,S,w,M,D,X]}class xs extends fe{constructor(e){super(),pe(this,e,ws,ys,ce,{canvas:0,ready:1},gs)}get canvas(){return this.$$.ctx[0]}set canvas(e){this.$$set({canvas:e}),T()}get ready(){return this.$$.ctx[1]}set ready(e){this.$$set({ready:e}),T()}}customElements.define("open-mon",he(xs,{canvas:{},ready:{type:"Boolean"}},[],[],!0));
