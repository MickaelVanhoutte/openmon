var Ft=Object.defineProperty;var Xt=(s,e,t)=>e in s?Ft(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var c=(s,e,t)=>(Xt(s,typeof e!="symbol"?e+"":e,t),t);function L(){}function Mt(s){return s()}function lt(){return Object.create(null)}function ie(s){s.forEach(Mt)}function Ct(s){return typeof s=="function"}function fe(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let qe;function At(s,e){return s===e?!0:(qe||(qe=document.createElement("a")),qe.href=e,s===qe.href)}function Ut(s){return Object.keys(s).length===0}function g(s,e){s.appendChild(e)}function he(s,e,t){const n=Wt(s);if(!n.getElementById(e)){const i=w("style");i.id=e,i.textContent=t,Gt(n,i)}}function Wt(s){if(!s)return document;const e=s.getRootNode?s.getRootNode():s.ownerDocument;return e&&e.host?e:s.ownerDocument}function Gt(s,e){return g(s.head||s,e),e.sheet}function A(s,e,t){s.insertBefore(e,t||null)}function C(s){s.parentNode&&s.parentNode.removeChild(s)}function Vt(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function w(s){return document.createElement(s)}function O(s){return document.createTextNode(s)}function q(){return O(" ")}function Zt(){return O("")}function X(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function m(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function Kt(s){return Array.from(s.childNodes)}function U(s,e){e=""+e,s.data!==e&&(s.data=e)}function ne(s,e,t,n){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,n?"important":"")}function M(s,e,t){s.classList.toggle(e,!!t)}function Yt(s){const e={};return s.childNodes.forEach(t=>{e[t.slot||"default"]=!0}),e}let Ke;function xe(s){Ke=s}const ye=[],z=[];let _e=[];const Ne=[],Jt=Promise.resolve();let He=!1;function Qt(){He||(He=!0,Jt.then(D))}function Fe(s){_e.push(s)}function W(s){Ne.push(s)}const Le=new Set;let ve=0;function D(){if(ve!==0)return;const s=Ke;do{try{for(;ve<ye.length;){const e=ye[ve];ve++,xe(e),es(e.$$)}}catch(e){throw ye.length=0,ve=0,e}for(xe(null),ye.length=0,ve=0;z.length;)z.pop()();for(let e=0;e<_e.length;e+=1){const t=_e[e];Le.has(t)||(Le.add(t),t())}_e.length=0}while(ye.length);for(;Ne.length;)Ne.pop()();He=!1,Le.clear(),xe(s)}function es(s){if(s.fragment!==null){s.update(),ie(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(Fe)}}function ts(s){const e=[],t=[];_e.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),_e=e}const Pe=new Set;let ce;function Ye(){ce={r:0,c:[],p:ce}}function Je(){ce.r||ie(ce.c),ce=ce.p}function V(s,e){s&&s.i&&(Pe.delete(s),s.i(e))}function Y(s,e,t,n){if(s&&s.o){if(Pe.has(s))return;Pe.add(s),ce.c.push(()=>{Pe.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}function at(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function G(s,e,t){const n=s.$$.props[e];n!==void 0&&(s.$$.bound[n]=t,t(s.$$.ctx[n]))}function ke(s){s&&s.c()}function de(s,e,t){const{fragment:n,after_update:i}=s.$$;n&&n.m(e,t),Fe(()=>{const r=s.$$.on_mount.map(Mt).filter(Ct);s.$$.on_destroy?s.$$.on_destroy.push(...r):ie(r),s.$$.on_mount=[]}),i.forEach(Fe)}function ue(s,e){const t=s.$$;t.fragment!==null&&(ts(t.after_update),ie(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function ss(s,e){s.$$.dirty[0]===-1&&(ye.push(s),Qt(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function pe(s,e,t,n,i,r,o=null,l=[-1]){const u=Ke;xe(s);const a=s.$$={fragment:null,ctx:[],props:r,update:L,not_equal:i,bound:lt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:lt(),dirty:l,skip_bound:!1,root:e.target||u.$$.root};o&&o(a.root);let f=!1;if(a.ctx=t?t(s,e.props||{},(d,h,...p)=>{const b=p.length?p[0]:h;return a.ctx&&i(a.ctx[d],a.ctx[d]=b)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](b),f&&ss(s,d)),h}):[],a.update(),f=!0,ie(a.before_update),a.fragment=n?n(a.ctx):!1,e.target){if(e.hydrate){const d=Kt(e.target);a.fragment&&a.fragment.l(d),d.forEach(C)}else a.fragment&&a.fragment.c();e.intro&&V(s.$$.fragment),de(s,e.target,e.anchor),D()}xe(u)}let qt;typeof HTMLElement=="function"&&(qt=class extends HTMLElement{constructor(e,t,n){super();c(this,"$$ctor");c(this,"$$s");c(this,"$$c");c(this,"$$cn",!1);c(this,"$$d",{});c(this,"$$r",!1);c(this,"$$p_d",{});c(this,"$$l",{});c(this,"$$l_u",new Map);this.$$ctor=e,this.$$s=t,n&&this.attachShadow({mode:"open"})}addEventListener(e,t,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){const i=this.$$c.$on(e,t);this.$$l_u.set(t,i)}super.addEventListener(e,t,n)}removeEventListener(e,t,n){if(super.removeEventListener(e,t,n),this.$$c){const i=this.$$l_u.get(t);i&&(i(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(o){return()=>{let l;return{c:function(){l=w("slot"),o!=="default"&&m(l,"name",o)},m:function(f,d){A(f,l,d)},d:function(f){f&&C(l)}}}};var e=t;if(await Promise.resolve(),!this.$$cn)return;const n={},i=Yt(this);for(const o of this.$$s)o in i&&(n[o]=[t(o)]);for(const o of this.attributes){const l=this.$$g_p(o.name);l in this.$$d||(this.$$d[l]=Ie(l,o.value,this.$$p_d,"toProp"))}for(const o in this.$$p_d)!(o in this.$$d)&&this[o]!==void 0&&(this.$$d[o]=this[o],delete this[o]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:n,$$scope:{ctx:[]}}});const r=()=>{this.$$r=!0;for(const o in this.$$p_d)if(this.$$d[o]=this.$$c.$$.ctx[this.$$c.$$.props[o]],this.$$p_d[o].reflect){const l=Ie(o,this.$$d[o],this.$$p_d,"toAttribute");l==null?this.removeAttribute(this.$$p_d[o].attribute||o):this.setAttribute(this.$$p_d[o].attribute||o,l)}this.$$r=!1};this.$$c.$$.after_update.push(r),r();for(const o in this.$$l)for(const l of this.$$l[o]){const u=this.$$c.$on(o,l);this.$$l_u.set(l,u)}this.$$l={}}}attributeChangedCallback(e,t,n){var i;this.$$r||(e=this.$$g_p(e),this.$$d[e]=Ie(e,n,this.$$p_d,"toProp"),(i=this.$$c)==null||i.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e)||e}});function Ie(s,e,t,n){var r;const i=(r=t[s])==null?void 0:r.type;if(e=i==="Boolean"&&typeof e!="boolean"?e!=null:e,!n||!t[s])return e;if(n==="toAttribute")switch(i){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(i){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function ge(s,e,t,n,i,r){let o=class extends qt{constructor(){super(s,t,i),this.$$p_d=e}static get observedAttributes(){return Object.keys(e).map(l=>(e[l].attribute||l).toLowerCase())}};return Object.keys(e).forEach(l=>{Object.defineProperty(o.prototype,l,{get(){return this.$$c&&l in this.$$c?this.$$c[l]:this.$$d[l]},set(u){var a;u=Ie(l,u,e),this.$$d[l]=u,(a=this.$$c)==null||a.$set({[l]:u})}})}),n.forEach(l=>{Object.defineProperty(o.prototype,l,{get(){var u;return(u=this.$$c)==null?void 0:u[l]}})}),r&&(o=r(o)),s.element=o,o}class be{constructor(){c(this,"$$");c(this,"$$set")}$destroy(){ue(this,1),this.$destroy=L}$on(e,t){if(!Ct(t))return L;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Ut(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ns="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ns);class I{constructor(e=0,t=0){c(this,"x");c(this,"y");this.x=e,this.y=t}}class Rt{constructor(e,t,n,i=[]){c(this,"name");c(this,"gender");c(this,"sprites");c(this,"monsters");c(this,"bag",[]);c(this,"lvl",1);c(this,"moving",!1);c(this,"direction","down");c(this,"positionOnScreen");c(this,"positionOnMap");c(this,"frames");c(this,"spriteScale",1);this.name=e,this.gender=t,this.sprites=n,this.monsters=i,this.frames={max:3,val:0,elapsed:0},this.positionOnMap=new I(0,0),this.positionOnScreen=new I(0,0)}get sprite(){return this.sprites[this.direction]}draw(e,t,n,i,r){let o=this.sprite||this.sprites.down,l=i*n,u=r*n,a=e.canvas.width/2-l/2,f=e.canvas.height/2-u/2;this.moving?(this.frames.max>1&&(this.frames.elapsed+=1),this.frames.elapsed%2===0&&(this.frames.val+=1,this.frames.val>this.frames.max-1&&(this.frames.val=0))):this.frames.val=1,e.drawImage(o,this.frames.val*(o.width/this.frames.max),0,o.width/this.frames.max,o.height,a+this.positionOnScreen.x,f+this.positionOnScreen.y-10,o.width/this.frames.max*n,o.height*n)}updatePosition(e,t){this.positionOnMap.x=e.x+t.x,this.positionOnMap.y=e.y+t.y}}class is{constructor(e,t,n,i,r){c(this,"down");c(this,"up");c(this,"left");c(this,"right");c(this,"battle");c(this,"width",80);c(this,"height",80);this.down=e,this.up=t,this.left=n,this.right=i,this.battle=r}}const P={up:{pressed:!1},down:{pressed:!1},left:{pressed:!1},right:{pressed:!1}};let se={key:""};function ct(s){return e=>{switch(e.key){case"ArrowDown":P.down.pressed=!1;break;case"ArrowUp":P.up.pressed=!1;break;case"ArrowRight":P.right.pressed=!1;break;case"ArrowLeft":P.left.pressed=!1;break}s.moving=!1}}function dt(){return s=>{switch(s.key){case"ArrowDown":se.key="ArrowDown",P.down.pressed=!0;break;case"ArrowUp":se.key="ArrowUp",P.up.pressed=!0;break;case"ArrowRight":se.key="ArrowRight",P.right.pressed=!0;break;case"ArrowLeft":se.key="ArrowLeft",P.left.pressed=!0;break}}}class rs{constructor(){c(this,"entries",[]);c(this,"ready",!1);c(this,"size",251)}importFromJson(e){var t;((t=this.entries)==null?void 0:t.length)===0&&(e.forEach(n=>{this.entries.push(new Qe(n.id,n.name,n.types,n.abilities,n.moves,n.stats,n.height,n.weight,n.description,n.isLegendary,n.captureRate,n.baseXp,n.experienceGrowth,n.percentageMale,n.evolution,n.sprites))}),this.entries.length===this.size&&(this.ready=!0))}findById(e){if(!this.ready||e===void 0||e===null||e<1||e>this.size)return new me(new Re);let t=this.entries.find(n=>n.id===e);return t!=null&&t.id?new me(t):new me(new Re)}findByName(e){if(!this.ready||e===void 0||e===null||e==="")return new me(new Re);let t=this.entries.find(n=>n.name.toLowerCase()===e.toLowerCase());return t!=null&&t.id?new me(t):new me(new Re)}}class me{constructor(e){c(this,"result");c(this,"found",!1);this.result=e,this.found=e!==void 0}}class Qe{constructor(e,t,n,i,r,o,l,u,a,f,d,h,p,b,_,x){c(this,"id");c(this,"name");c(this,"types");c(this,"abilities");c(this,"moves");c(this,"stats");c(this,"height");c(this,"weight");c(this,"description");c(this,"isLegendary");c(this,"captureRate");c(this,"growthRateId");c(this,"baseXp");c(this,"experienceGrowth");c(this,"percentageMale");c(this,"evolution");c(this,"sprites");switch(this.id=e,this.name=t,this.types=n,this.abilities=i,this.moves=r,this.stats=o,this.height=l,this.weight=u,this.description=a,this.isLegendary=f,this.captureRate=d,this.experienceGrowth=h,this.baseXp=p,this.percentageMale=b,this.evolution=_,this.sprites=x,h){case 6e5:this.growthRateId=5;break;case 8e5:this.growthRateId=3;break;case 1e6:this.growthRateId=2;break;case 1059860:this.growthRateId=4;break;case 125e4:this.growthRateId=1;break;case 164e4:this.growthRateId=6;break;default:this.growthRateId=1;break}}instanciate(e){return new Be(this,e)}}class Re extends Qe{constructor(){super(0,"Unknown",[],[],[],new le,0,0,"Unknown",!1,0,0,0,0,[])}}class os{constructor(e,t,n,i,r,o,l,u,a,f,d){c(this,"name");c(this,"type");c(this,"category");c(this,"power");c(this,"accuracy");c(this,"pp");c(this,"priority");c(this,"effect");c(this,"effectChance");c(this,"description");c(this,"level");this.name=e,this.type=t,this.category=n,this.power=i,this.accuracy=r,this.pp=o,this.priority=l,this.effect=u,this.effectChance=a,this.description=f,this.level=d}}class le{constructor(e=0,t=0,n=0,i=0,r=0,o=0,l){c(this,"hp");c(this,"attack");c(this,"defense");c(this,"specialAttack");c(this,"specialDefense");c(this,"speed");c(this,"total");this.hp=e,this.attack=t,this.defense=n,this.specialAttack=i,this.specialDefense=r,this.speed=o,l?this.total=l:this.total=this.hp+this.attack+this.defense+this.specialAttack+this.specialDefense+this.speed}}class ls{constructor(){c(this,"ready",!1);c(this,"chartById",new Map);fetch("/src/assets/data/final/xp-chart.json").then(e=>e.json()).then(e=>{e.forEach(t=>{this.chartById.has(t.growth_rate_id)||this.chartById.set(t.growth_rate_id,[]),this.chartById.get(t.growth_rate_id).push(new as(t.level,t.experience))}),this.ready=!0})}howMuchINeed(e,t){if(!this.ready||e<1||e>100||!this.chartById.has(t))return console.error("ERROR",e,t),0;let n=this.chartById.get(t),i=n==null?void 0:n.find(r=>r.level===e);return(i==null?void 0:i.experience)||0}howMuchIGet(e,t,n,i=!1,r=!1){let o=t.baseXp,l=t.level,u=i?1.5:1,a=r?2*n:n;return Math.floor(o*l/7*u*(1/a)*1*1*1*1*1)}}class as{constructor(e,t){c(this,"level");c(this,"experience");this.level=e,this.experience=t}}const ut=new ls;class cs extends os{constructor(t,n,i,r,o,l,u,a,f,d,h){super(t,n,i,r,o,l,u,a,f,d,h);c(this,"currentPp");this.currentPp=l}}class Be extends Qe{constructor(t,n,i){super(t.id,t.name,t.types,t.abilities,t.moves,t.stats,t.height,t.weight,t.description,t.isLegendary,t.captureRate,t.experienceGrowth,t.baseXp,t.percentageMale,t.evolution,t.sprites);c(this,"currentStats",new le);c(this,"currentHp",1);c(this,"currentXp",0);c(this,"xpToNextLevel",0);c(this,"currentAbility","");c(this,"level",1);c(this,"evsToDistribute",0);c(this,"fainted",!1);c(this,"moves",[]);c(this,"ivs",new le);c(this,"evs",new le);c(this,"nature","");c(this,"gender");c(this,"heldItem",{});c(this,"isShiny",!1);c(this,"spriteDrawer");c(this,"position",new I(0,0));i?(this.currentAbility=t.abilities.includes(i.currentAbility)?i.currentAbility:t.abilities[Math.floor(Math.random()*t.abilities.length)],this.evs=i.evs,this.ivs=i.ivs,this.level=i.level,this.currentXp=i.currentXp,this.currentHp=i.currentHp,this.moves=i.moves,this.isShiny=i.isShiny,this.gender=i.gender,this.evsToDistribute=i.evsToDistribute,this.heldItem=i.heldItem,this.updateCurrentStats()):(this.currentAbility=this.abilities[Math.floor(Math.random()*this.abilities.length)],this.evs=new le,this.ivs=new le(Math.floor(Math.random()*32),Math.floor(Math.random()*32),Math.floor(Math.random()*32),Math.floor(Math.random()*32),Math.floor(Math.random()*32),Math.floor(Math.random()*32)),this.level=n||5,this.currentXp=0,this.updateCurrentStats(),this.currentHp=this.currentStats.hp,this.moves=this.selectLatestMoves(t),this.isShiny=Math.floor(Math.random()*2048)===0,this.gender=this.percentageMale?Math.random()*this.percentageMale<=this.percentageMale?"male":"female":"unknown"),this.spriteDrawer=new ds}get spriteScale(){return 1}get totalEvs(){return this.evs.attack+this.evs.defense+this.evs.specialAttack+this.evs.specialDefense+this.evs.speed+this.evs.hp}draw(t,n,i=0,r=0,o=0){this.spriteDrawer.draw(t,this,n,i,r,o)}selectMove(t,n){let i=Math.floor(Math.random()*this.moves.length),r=this.moves[i];return t==="Easy"&&n&&((n==null?void 0:n.types.length)===2?this.moves.find(l=>l.type===n.types[0]&&l.power>0):this.moves.find(l=>(l.type===n.types[0]||l.type===n.types[1])&&l.power>0)),r}fromBaseStats(){return new le(Math.floor((this.ivs.hp+this.stats.hp*2+this.evs.hp/4)*this.level/100+10+this.level),Math.floor((this.ivs.attack+this.stats.attack*2+this.evs.attack/4)*this.level/100+5),Math.floor((this.ivs.defense+this.stats.defense*2+this.evs.defense/4)*this.level/100+5),Math.floor((this.ivs.specialAttack+this.stats.specialAttack*2+this.evs.specialAttack/4)*this.level/100+5),Math.floor((this.ivs.specialDefense+this.stats.specialDefense*2+this.evs.specialDefense/4)*this.level/100+5),Math.floor((this.ivs.speed+this.stats.speed*2+this.evs.speed/4)*this.level/100+5))}howMuchXpWon(t,n=1,i=!1){return ut.howMuchIGet(this,t,n,i,!1)}addXp(t,n){if(this.evsToDistribute+=this.totalEvs+n<=255?n:this.totalEvs+n-255,this.level>=100)return;let i=0;if(this.xpToNextLevel<t){i=t-this.xpToNextLevel;const r=t-i;this.currentXp+=r}else this.currentXp+=t;this.currentXp>=this.xpToNextLevel&&this.levelUp(),i>0&&this.addXp(i,0)}addEvs(t){let n=this.totalEvs;this.evs.hp+=this.evs.hp+t.hp<=255&&n+t.hp<512?t.hp:0,this.evs.attack+=this.evs.attack+t.attack<=255&&n+t.attack<512?t.attack:0,this.evs.defense+=this.evs.defense+t.defense<=255&&n+t.defense<512?t.defense:0,this.evs.specialAttack+=this.evs.specialAttack+t.specialAttack<=255&&n+t.specialAttack<512?t.specialAttack:0,this.evs.specialDefense+=this.evs.specialDefense+t.specialDefense<=255&&n+t.specialDefense<512?t.specialDefense:0,this.evs.speed+=this.evs.speed+t.speed<=255&&n+t.speed<512?t.speed:0}levelUp(){if(this.level>=100)return;let t=this.currentStats.hp;this.level+=1,this.updateCurrentStats(),t=this.currentStats.hp-t,this.currentHp+=t,this.currentXp=0,this.xpToNextLevel=ut.howMuchINeed(this.level,this.experienceGrowth)}checkForNewMoves(){this.moves.filter(t=>t.level===this.level)}evolve(t,n){n.found&&n.result&&(Object.assign(this,new Be(n.result,this.level,this)),this.checkForNewMoves())}updateCurrentStats(){this.currentStats=this.fromBaseStats()}selectLatestMoves(t){return t.moves.filter(n=>n.level<=this.level).slice(-4).map(n=>new cs(n.name,n.type,n.category,n.power,n.accuracy,n.pp,n.priority,n.effect,n.effectChance,n.description,n.level))}}class ds{constructor(){c(this,"currentImage");c(this,"frameElapsed",0);c(this,"spriteSize",80);c(this,"spriteScale",1.5)}draw(e,t,n,i=0,r=0,o=0){var l;if(t.sprites){let u=t.gender!=="unknown"?t.sprites[t.gender][n]:t.sprites.male[n],a="frame";t.isShiny&&(a="shiny"),this.frameElapsed+i<100?a+="1":a+="2",console.log(t.sprites,t.gender,a,u[a]),this.frameElapsed+i>=200&&(this.frameElapsed=0);let f=u[a];if(!this.currentImage||this.currentImage.src!==f){let d=new Image;d.src=f,d.onload=()=>{this.currentImage=d}}if((l=this.currentImage)!=null&&l.complete){let d=this.getPosition(e,n,r,o);e.drawImage(this.currentImage,0,0,this.spriteSize,this.spriteSize,d.x,d.y,this.spriteSize*this.spriteScale*2.5,this.spriteSize*this.spriteScale*2.5),this.frameElapsed++}}}getPosition(e,t,n=0,i=0){let r=new I;return e.canvas.width<1100?t==="front"?r=new I(e.canvas.width/4*3-this.spriteSize*2*(this==null?void 0:this.spriteScale)/2+n,e.canvas.height/3.5*2-this.spriteSize*2*(this==null?void 0:this.spriteScale)-16*2+i):r=new I(e.canvas.width/4-this.spriteSize*2*this.spriteScale/2+n,e.canvas.height*.75-this.spriteSize*2*this.spriteScale+16*2+i):t==="front"?r=new I(e.canvas.width/4*3-this.spriteSize*2.5*(this==null?void 0:this.spriteScale)/2+n,e.canvas.height/2-this.spriteSize*2.5*(this==null?void 0:this.spriteScale)-12*2.5+i):r=new I(e.canvas.width/4-this.spriteSize*2.5*this.spriteScale/2+n,e.canvas.height*.75-this.spriteSize*2.5*this.spriteScale+15*2.5+i),r}}var Xe;(function(s){s[s.Transient=0]="Transient",s[s.Singleton=1]="Singleton",s[s.ResolutionScoped=2]="ResolutionScoped",s[s.ContainerScoped=3]="ContainerScoped"})(Xe||(Xe={}));const F=Xe;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ue=function(s,e){return Ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},Ue(s,e)};function et(s,e){Ue(s,e);function t(){this.constructor=s}s.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function us(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function l(f){try{a(n.next(f))}catch(d){o(d)}}function u(f){try{a(n.throw(f))}catch(d){o(d)}}function a(f){f.done?r(f.value):i(f.value).then(l,u)}a((n=n.apply(s,e||[])).next())})}function fs(s,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,i,r,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(a){return function(f){return u([a,f])}}function u(a){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(r=a[0]&2?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,i=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){t.label=a[1];break}if(a[0]===6&&t.label<r[1]){t.label=r[1],r=a;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(a);break}r[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(s,t)}catch(f){a=[6,f],i=0}finally{n=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function Ee(s){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&s[e],n=0;if(t)return t.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&n>=s.length&&(s=void 0),{value:s&&s[n++],done:!s}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ze(s,e){var t=typeof Symbol=="function"&&s[Symbol.iterator];if(!t)return s;var n=t.call(s),i,r=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)r.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return r}function ae(){for(var s=[],e=0;e<arguments.length;e++)s=s.concat(ze(arguments[e]));return s}var We="injectionTokens";function hs(s){var e=Reflect.getMetadata("design:paramtypes",s)||[],t=Reflect.getOwnMetadata(We,s)||{};return Object.keys(t).forEach(function(n){e[+n]=t[n]}),e}function ps(s,e){return function(t,n,i){var r=Reflect.getOwnMetadata(We,t)||{};r[i]=e?{token:s,transform:e.transformToken,transformArgs:e.args||[]}:s,Reflect.defineMetadata(We,r,t)}}function Et(s){return!!s.useClass}function Ge(s){return!!s.useFactory}var $t=function(){function s(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return s.prototype.createProxy=function(e){var t=this,n={},i=!1,r,o=function(){return i||(r=e(t.wrap()),i=!0),r};return new Proxy(n,this.createHandler(o))},s.prototype.createHandler=function(e){var t={},n=function(i){t[i]=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];r[0]=e();var l=Reflect[i];return l.apply(void 0,ae(r))}};return this.reflectMethods.forEach(n),t},s}();function we(s){return typeof s=="string"||typeof s=="symbol"}function gs(s){return typeof s=="object"&&"token"in s&&"multiple"in s}function ft(s){return typeof s=="object"&&"token"in s&&"transform"in s}function bs(s){return typeof s=="function"||s instanceof $t}function Oe(s){return!!s.useToken}function De(s){return s.useValue!=null}function vs(s){return Et(s)||De(s)||Oe(s)||Ge(s)}var tt=function(){function s(){this._registryMap=new Map}return s.prototype.entries=function(){return this._registryMap.entries()},s.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},s.prototype.get=function(e){this.ensure(e);var t=this._registryMap.get(e);return t[t.length-1]||null},s.prototype.set=function(e,t){this.ensure(e),this._registryMap.get(e).push(t)},s.prototype.setAll=function(e,t){this._registryMap.set(e,t)},s.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},s.prototype.clear=function(){this._registryMap.clear()},s.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},s}(),ms=function(s){et(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e}(tt),ht=function(){function s(){this.scopedResolutions=new Map}return s}();function ws(s,e){if(s===null)return"at position #"+e;var t=s.split(",")[e].trim();return'"'+t+'" at position #'+e}function ys(s,e,t){return t===void 0&&(t="    "),ae([s],e.message.split(`
`).map(function(n){return t+n})).join(`
`)}function _s(s,e,t){var n=ze(s.toString().match(/constructor\(([\w, ]+)\)/)||[],2),i=n[1],r=i===void 0?null:i,o=ws(r,e);return ys("Cannot inject the dependency "+o+' of "'+s.name+'" constructor. Reason:',t)}function ks(s){if(typeof s.dispose!="function")return!1;var e=s.dispose;return!(e.length>0)}var xs=function(s){et(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e}(tt),Ss=function(s){et(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e}(tt),Ms=function(){function s(){this.preResolution=new xs,this.postResolution=new Ss}return s}(),Pt=new Map,Cs=function(){function s(e){this.parent=e,this._registry=new ms,this.interceptors=new Ms,this.disposed=!1,this.disposables=new Set}return s.prototype.register=function(e,t,n){n===void 0&&(n={lifecycle:F.Transient}),this.ensureNotDisposed();var i;if(vs(t)?i=t:i={useClass:t},Oe(i))for(var r=[e],o=i;o!=null;){var l=o.useToken;if(r.includes(l))throw new Error("Token registration cycle detected! "+ae(r,[l]).join(" -> "));r.push(l);var u=this._registry.get(l);u&&Oe(u.provider)?o=u.provider:o=null}if((n.lifecycle===F.Singleton||n.lifecycle==F.ContainerScoped||n.lifecycle==F.ResolutionScoped)&&(De(i)||Ge(i)))throw new Error('Cannot use lifecycle "'+F[n.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:i,options:n}),this},s.prototype.registerType=function(e,t){return this.ensureNotDisposed(),we(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})},s.prototype.registerInstance=function(e,t){return this.ensureNotDisposed(),this.register(e,{useValue:t})},s.prototype.registerSingleton=function(e,t){if(this.ensureNotDisposed(),we(e)){if(we(t))return this.register(e,{useToken:t},{lifecycle:F.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:F.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var n=e;return t&&!we(t)&&(n=t),this.register(e,{useClass:n},{lifecycle:F.Singleton})},s.prototype.resolve=function(e,t){t===void 0&&(t=new ht),this.ensureNotDisposed();var n=this.getRegistration(e);if(!n&&we(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"Single"),n){var i=this.resolveRegistration(n,t);return this.executePostResolutionInterceptor(e,i,"Single"),i}if(bs(e)){var i=this.construct(e,t);return this.executePostResolutionInterceptor(e,i,"Single"),i}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},s.prototype.executePreResolutionInterceptor=function(e,t){var n,i;if(this.interceptors.preResolution.has(e)){var r=[];try{for(var o=Ee(this.interceptors.preResolution.getAll(e)),l=o.next();!l.done;l=o.next()){var u=l.value;u.options.frequency!="Once"&&r.push(u),u.callback(e,t)}}catch(a){n={error:a}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}this.interceptors.preResolution.setAll(e,r)}},s.prototype.executePostResolutionInterceptor=function(e,t,n){var i,r;if(this.interceptors.postResolution.has(e)){var o=[];try{for(var l=Ee(this.interceptors.postResolution.getAll(e)),u=l.next();!u.done;u=l.next()){var a=u.value;a.options.frequency!="Once"&&o.push(a),a.callback(e,t,n)}}catch(f){i={error:f}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}this.interceptors.postResolution.setAll(e,o)}},s.prototype.resolveRegistration=function(e,t){if(this.ensureNotDisposed(),e.options.lifecycle===F.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);var n=e.options.lifecycle===F.Singleton,i=e.options.lifecycle===F.ContainerScoped,r=n||i,o;return De(e.provider)?o=e.provider.useValue:Oe(e.provider)?o=r?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t):Et(e.provider)?o=r?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t):Ge(e.provider)?o=e.provider.useFactory(this):o=this.construct(e.provider,t),e.options.lifecycle===F.ResolutionScoped&&t.scopedResolutions.set(e,o),o},s.prototype.resolveAll=function(e,t){var n=this;t===void 0&&(t=new ht),this.ensureNotDisposed();var i=this.getAllRegistrations(e);if(!i&&we(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"All"),i){var r=i.map(function(l){return n.resolveRegistration(l,t)});return this.executePostResolutionInterceptor(e,r,"All"),r}var o=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,o,"All"),o},s.prototype.isRegistered=function(e,t){return t===void 0&&(t=!1),this.ensureNotDisposed(),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},s.prototype.reset=function(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},s.prototype.clearInstances=function(){var e,t;this.ensureNotDisposed();try{for(var n=Ee(this._registry.entries()),i=n.next();!i.done;i=n.next()){var r=ze(i.value,2),o=r[0],l=r[1];this._registry.setAll(o,l.filter(function(u){return!De(u.provider)}).map(function(u){return u.instance=void 0,u}))}}catch(u){e={error:u}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},s.prototype.createChildContainer=function(){var e,t;this.ensureNotDisposed();var n=new s(this);try{for(var i=Ee(this._registry.entries()),r=i.next();!r.done;r=i.next()){var o=ze(r.value,2),l=o[0],u=o[1];u.some(function(a){var f=a.options;return f.lifecycle===F.ContainerScoped})&&n._registry.setAll(l,u.map(function(a){return a.options.lifecycle===F.ContainerScoped?{provider:a.provider,options:a.options}:a}))}}catch(a){e={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},s.prototype.beforeResolution=function(e,t,n){n===void 0&&(n={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:t,options:n})},s.prototype.afterResolution=function(e,t,n){n===void 0&&(n={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:t,options:n})},s.prototype.dispose=function(){return us(this,void 0,void 0,function(){var e;return fs(this,function(t){switch(t.label){case 0:return this.disposed=!0,e=[],this.disposables.forEach(function(n){var i=n.dispose();i&&e.push(i)}),[4,Promise.all(e)];case 1:return t.sent(),[2]}})})},s.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},s.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},s.prototype.construct=function(e,t){var n=this;if(e instanceof $t)return e.createProxy(function(r){return n.resolve(r,t)});var i=function(){var r=Pt.get(e);if(!r||r.length===0){if(e.length===0)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var o=r.map(n.resolveParams(t,e));return new(e.bind.apply(e,ae([void 0],o)))}();return ks(i)&&this.disposables.add(i),i},s.prototype.resolveParams=function(e,t){var n=this;return function(i,r){var o,l,u;try{return gs(i)?ft(i)?i.multiple?(o=n.resolve(i.transform)).transform.apply(o,ae([n.resolveAll(i.token)],i.transformArgs)):(l=n.resolve(i.transform)).transform.apply(l,ae([n.resolve(i.token,e)],i.transformArgs)):i.multiple?n.resolveAll(i.token):n.resolve(i.token,e):ft(i)?(u=n.resolve(i.transform,e)).transform.apply(u,ae([n.resolve(i.token,e)],i.transformArgs)):n.resolve(i,e)}catch(a){throw new Error(_s(t,r,a))}}},s.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},s}(),As=new Cs;function It(){return function(s){Pt.set(s,hs(s))}}function qs(s){var e={token:s,multiple:!0};return ps(e)}if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);var Rs=Object.defineProperty,Es=Object.getOwnPropertyDescriptor,st=(s,e,t,n)=>{for(var i=n>1?void 0:n?Es(e,t):e,r=s.length-1,o;r>=0;r--)(o=s[r])&&(i=(n?o(e,t,i):o(i))||i);return n&&i&&Rs(e,t,i),i},$s=(s,e)=>(t,n)=>e(t,n,s);let Ve=class{constructor(s){this.moveEffects=s,console.log(this.moveEffects)}apply(s,e){console.log("MoveEffectApplier")}};Ve=st([$s(0,qs("MoveEffect"))],Ve);const Ps=As.resolve(Ve);let pt=class{constructor(){}apply(s){console.log("RegularDamageEffect")}};pt=st([It()],pt);let gt=class{constructor(){}apply(s){console.log("Heal")}};gt=st([It()],gt);class Is{constructor(e,t,n){c(this,"player");c(this,"playerCurrentMonster");c(this,"opponent");c(this,"opponentCurrentMonster");c(this,"isPlayerTurn");c(this,"turnStack");c(this,"initialOpponentPosition");c(this,"initialAllyPosition");c(this,"escapeAttempts",0);c(this,"onClose",()=>{});c(this,"currentMessage","What will you do ?");c(this,"sleep",e=>new Promise(t=>setTimeout(t,e)));this.player=e,this.opponent=t,this.playerCurrentMonster=e.monsters[0],this.opponentCurrentMonster=this.wild?t:t.monsters[0],this.turnStack=[],window.innerWidth<1100?(this.initialOpponentPosition=new I(n.width/4*3-80*2*(t==null?void 0:t.spriteScale)/2,n.height/3.5*2-80*2*(t==null?void 0:t.spriteScale)-16*2),this.initialAllyPosition=new I(n.width/4-80*2*this.playerCurrentMonster.spriteScale/2,n.height*.75-80*2*this.playerCurrentMonster.spriteScale+16*2)):(this.initialOpponentPosition=new I(n.width/4*3-80*2.5*(t==null?void 0:t.spriteScale)/2,n.height/2-80*2.5*(t==null?void 0:t.spriteScale)-12*2.5),this.initialAllyPosition=new I(n.width/4-80*2.5*this.playerCurrentMonster.spriteScale/2,n.height*.75-80*2.5*this.playerCurrentMonster.spriteScale+15*2.5)),this.playerCurrentMonster.position=this.initialAllyPosition,this.opponentCurrentMonster.position=this.initialOpponentPosition,this.isPlayerTurn=!0}get wild(){return this.opponent instanceof Be}selectAction(e){this.isPlayerTurn=!1,e instanceof Te&&this.playerCurrentMonster.currentStats.speed>this.opponentCurrentMonster.currentStats.speed||e instanceof Ze||e instanceof vt||e instanceof mt?(this.turnStack.push(e),this.selectOpponentAction()):(this.selectOpponentAction(),this.turnStack.push(e)),this.executeAction(this.turnStack.shift())}runAway(){if(this.wild){this.escapeAttempts++;const e=Math.random()*255;Math.floor(this.opponentCurrentMonster.currentStats.speed*128/this.playerCurrentMonster.currentStats.speed)+30*this.escapeAttempts*e>255?(this.turnStack=[],this.turnStack.push(new je(this.playerCurrentMonster)),this.turnStack.unshift(new Q("You ran away safely!",this.playerCurrentMonster))):this.turnStack.unshift(new Q("Failed to run away!",this.playerCurrentMonster))}else this.turnStack.unshift(new Q("You can't run away from a trainer battle!",this.playerCurrentMonster))}attack(e){const t=e.initiator,n=e.target==="opponent"?this.opponentCurrentMonster:this.playerCurrentMonster,i=this.calculateDamage(t,n,e.move);Ps.apply(e.move.effect,[n]);const r=[];r.push(new Q(t.name+" used "+e.move.name+"!",e.initiator)),i.immune?r.push(new Q("It doesn't affect "+n.name+"...",e.initiator)):i.notVeryEffective?r.push(new Q("It's not very effective...",e.initiator)):i.superEffective&&r.push(new Q("It's super effective!",e.initiator)),i.critical&&r.push(new Q("A critical hit!",e.initiator)),r.push(new bt(i.damages,e.target,e.initiator)),r.reverse().forEach(o=>this.turnStack.unshift(o))}calculateDamage(e,t,n){let i=new Os;if(n.category!=="status"){const r=n.category==="physical"?e.currentStats.attack:e.currentStats.specialAttack,o=n.category==="physical"?t.currentStats.defense:t.currentStats.specialDefense,l=this.calculateTypeEffectiveness(n.type,t.types);i.superEffective=l>1,i.notVeryEffective=l<1,i.immune=l===0;const u=i.immune?0:this.calculateCritical();i.critical=u>1;const a=Math.random()*(1-.85)+.85,f=this.calculateStab(e,n),h=l*u*a*f*1;i.damages=Math.floor(((2*e.level/5+2)*n.power*r/o/50+2)*h)}else i.damages=0;return i}calculateTypeEffectiveness(e,t){return t.reduce((n,i)=>{const r=zs(e,i);return n*r},1)}calculateCritical(){return Math.random()<.0625?1.5:1}calculateStab(e,t){return e.types.includes(t.type)?1.5:1}selectOpponentAction(){const e=this.opponentCurrentMonster.selectMove("Easy");this.turnStack.push(new Te(e,"ally",this.opponentCurrentMonster))}executeAction(e){var t;e&&(e instanceof Te&&!e.initiator.fainted?this.attack(e):e instanceof Ze?this.runAway():e instanceof vt||e instanceof mt||(e instanceof Q?this.currentMessage=e.description:e instanceof bt?this.removeHP(e):e instanceof je&&this.onClose())),(t=this.turnStack)!=null&&t.length||0>0?this.sleep(1e3).then(()=>{var n;return this.executeAction((n=this.turnStack)==null?void 0:n.shift())}):this.isPlayerTurn=!0}removeHP(e){const t=e.target==="opponent"?this.opponentCurrentMonster:this.playerCurrentMonster;t.currentHp-=e.damages,t.currentHp<=0&&(t.currentHp=0,t.fainted=!0,this.turnStack=[],this.turnStack.push(new Q(t.name+" fainted!",e.initiator)),(this.wild||this.opponent instanceof Rt&&this.opponent.monsters.every(n=>n.fainted))&&(this.turnStack.unshift(new je(e.initiator)),this.turnStack.unshift(new Q("You won the battle!",e.initiator)),setTimeout(()=>{this.onClose()},1e3)))}}class Os{constructor(){c(this,"superEffective",!1);c(this,"notVeryEffective",!1);c(this,"immune",!1);c(this,"critical",!1);c(this,"effectSuccess",!1);c(this,"effectApplied","");c(this,"damages",0)}}class je{constructor(e){c(this,"name");c(this,"description");c(this,"initiator");this.name="End Battle",this.description="End Battle",this.initiator=e}}class bt{constructor(e,t,n){c(this,"name");c(this,"description");c(this,"damages");c(this,"target");c(this,"initiator");this.name="Remove HP",this.description="Remove HP",this.damages=e,this.target=t,this.initiator=n}}class Q{constructor(e,t){c(this,"name");c(this,"description");c(this,"initiator");this.name="Message",this.description=e,this.initiator=t}}class Ze{constructor(e){c(this,"description");c(this,"name");c(this,"initiator");this.name="Run Away",this.description="Run away from the battle",this.initiator=e}}class vt{constructor(e,t){c(this,"description");c(this,"name");c(this,"targetIdx");c(this,"initiator");this.name="Change Pokemon",this.description="Change the current pokemon",this.targetIdx=e,this.initiator=t}}class Te{constructor(e,t,n){c(this,"name");c(this,"description");c(this,"move");c(this,"target");c(this,"initiator");this.name=e.name,this.description=e.description,this.move=e,this.target=t,this.initiator=n}}class mt{constructor(e,t,n,i,r,o=0){c(this,"description");c(this,"name");c(this,"itemId");c(this,"targetType");c(this,"targetIdx");c(this,"initiator");this.name=e,this.description=t,this.itemId=n,this.targetType=i,this.targetIdx=o,this.initiator=r}}class Ds{constructor(e,t){c(this,"position");c(this,"image");c(this,"width",0);c(this,"height",0);this.position=e,this.image=t,this.image.onload=()=>{this.width=this.image.width,this.height=this.image.height}}draw(e,t){e.drawImage(this.image,0,0,this.image.width,this.image.height,0,0,t.width,t.height*.75)}}const Ot=new Image;Ot.src="src/assets/battle/battle-grass.png";const Ts=new Ds(new I(0,0),Ot);function zs(s,e){return Bs[s.toLowerCase()][e.toLowerCase()]}const Bs={normal:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:.5,ghost:0,dragon:1,dark:1,steel:.5},fire:{normal:1,fire:.5,water:.5,electric:1,grass:2,ice:2,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:2,rock:.5,ghost:1,dragon:.5,dark:1,steel:2},water:{normal:1,fire:2,water:.5,electric:1,grass:.5,ice:1,fighting:1,poison:1,ground:2,flying:1,psychic:1,bug:1,rock:2,ghost:1,dragon:.5,dark:1,steel:1},electric:{normal:1,fire:1,water:2,electric:.5,grass:.5,ice:1,fighting:1,poison:1,ground:0,flying:2,psychic:1,bug:1,rock:1,ghost:1,dragon:.5,dark:1,steel:1},grass:{normal:1,fire:.5,water:2,electric:1,grass:.5,ice:1,fighting:1,poison:.5,ground:2,flying:.5,psychic:1,bug:.5,rock:2,ghost:1,dragon:.5,dark:1,steel:.5},ice:{normal:1,fire:.5,water:.5,electric:1,grass:2,ice:.5,fighting:1,poison:1,ground:2,flying:2,psychic:1,bug:1,rock:1,ghost:1,dragon:2,dark:1,steel:.5},fighting:{normal:2,fire:1,water:1,electric:1,grass:1,ice:2,fighting:1,poison:.5,ground:1,flying:.5,psychic:.5,bug:.5,rock:2,ghost:0,dragon:1,dark:2,steel:2},poison:{normal:1,fire:1,water:1,electric:1,grass:2,ice:1,fighting:1,poison:.5,ground:.5,flying:1,psychic:1,bug:1,rock:.5,ghost:.5,dragon:1,dark:1,steel:0},ground:{normal:1,fire:2,water:1,electric:2,grass:.5,ice:1,fighting:1,poison:2,ground:1,flying:0,psychic:1,bug:.5,rock:2,ghost:1,dragon:1,dark:1,steel:2},flying:{normal:1,fire:1,water:1,electric:.5,grass:2,ice:1,fighting:2,poison:1,ground:1,flying:1,psychic:1,bug:2,rock:.5,ghost:1,dragon:1,dark:1,steel:.5},psychic:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:2,poison:2,ground:1,flying:1,psychic:.5,bug:1,rock:1,ghost:1,dragon:1,dark:0,steel:.5},bug:{normal:1,fire:.5,water:1,electric:1,grass:2,ice:1,fighting:.5,poison:.5,ground:1,flying:.5,psychic:2,bug:1,rock:1,ghost:.5,dragon:1,dark:2,steel:.5},rock:{normal:1,fire:2,water:1,electric:1,grass:1,ice:2,fighting:.5,poison:1,ground:.5,flying:2,psychic:1,bug:2,rock:1,ghost:1,dragon:1,dark:1,steel:.5},ghost:{normal:0,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:2,bug:1,rock:1,ghost:2,dragon:1,dark:.5,steel:.5},dragon:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:1,ghost:1,dragon:2,dark:1,steel:.5},dark:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:.5,poison:1,ground:1,flying:1,psychic:2,bug:1,rock:1,ghost:2,dragon:1,dark:.5,steel:.5},steel:{normal:1,fire:.5,water:.5,electric:.5,grass:1,ice:2,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:2,ghost:1,dragon:1,dark:1,steel:.5}};function Ls(s){he(s,"svelte-68hs54",".ally-info.svelte-68hs54.svelte-68hs54{opacity:0;visibility:hidden;z-index:9;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;bottom:26dvh;right:-30dvw;transition:right 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly;font-size:46px}.ally-info.opened.svelte-68hs54.svelte-68hs54{opacity:1;visibility:visible;right:1dvw}.ally-info.svelte-68hs54 .name-lvl.svelte-68hs54{display:flex;justify-content:space-between;align-items:center}.ally-info.svelte-68hs54 .status.svelte-68hs54{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.ally-info.svelte-68hs54 .hp.svelte-68hs54{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.ally-info.svelte-68hs54 .hp span.svelte-68hs54{padding:0 0 0 12px;font-weight:bold}.ally-info.svelte-68hs54 .hp .progressbar-wrapper.svelte-68hs54{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.ally-info.svelte-68hs54 .hp .progressbar-wrapper .progressbar.svelte-68hs54{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px;transition:width 1s ease-in-out}.ally-info.svelte-68hs54 .hp .progressbar-wrapper .progressbar.warning.svelte-68hs54{background:rgb(255, 241, 164);background:linear-gradient(0deg, rgb(255, 241, 164) 0%, rgb(255, 194, 16) 30%, rgb(255, 194, 16) 50%, rgb(255, 194, 16) 70%, rgb(255, 241, 164) 100%)}.ally-info.svelte-68hs54 .hp .progressbar-wrapper .progressbar.danger.svelte-68hs54{background:rgb(244, 177, 159);background:linear-gradient(0deg, rgb(244, 177, 159) 0%, rgb(223, 85, 48) 30%, rgb(223, 85, 48) 50%, rgb(223, 85, 48) 70%, rgb(244, 177, 159) 100%)}@media screen and (max-width: 1100px){.ally-info.svelte-68hs54.svelte-68hs54{font-size:36px;border:8px solid #595b59;height:16dvh}.ally-info.svelte-68hs54 .hp.svelte-68hs54{width:80%;height:18px}.ally-info.svelte-68hs54 .hp .progressbar-wrapper.svelte-68hs54{height:14px}}")}function js(s){let e,t,n,i=s[1].name+"",r,o,l,u,a=s[1].level+"",f,d,h,p,b,_,x,y,S,R=s[1].currentHp+"",N,j,v=s[1].currentStats.hp+"",E;return{c(){e=w("div"),t=w("div"),n=w("span"),r=O(i),o=q(),l=w("span"),u=O("Lv "),f=O(a),d=q(),h=w("div"),p=w("div"),b=w("span"),b.textContent="HP",_=q(),x=w("div"),y=w("div"),S=q(),N=O(R),j=O(" / "),E=O(v),m(n,"class","svelte-68hs54"),m(l,"class","svelte-68hs54"),m(t,"class","name-lvl svelte-68hs54"),m(b,"class","svelte-68hs54"),m(y,"class","progressbar svelte-68hs54"),ne(y,"--width",s[2]+"%"),M(y,"warning",s[2]<=50),M(y,"danger",s[2]<15),m(x,"class","progressbar-wrapper svelte-68hs54"),m(p,"class","hp svelte-68hs54"),m(h,"class","status svelte-68hs54"),m(e,"class","ally-info svelte-68hs54"),M(e,"opened",s[0])},m($,T){A($,e,T),g(e,t),g(t,n),g(n,r),g(t,o),g(t,l),g(l,u),g(l,f),g(e,d),g(e,h),g(h,p),g(p,b),g(p,_),g(p,x),g(x,y),g(h,S),g(h,N),g(h,j),g(h,E)},p($,[T]){T&2&&i!==(i=$[1].name+"")&&U(r,i),T&2&&a!==(a=$[1].level+"")&&U(f,a),T&4&&ne(y,"--width",$[2]+"%"),T&4&&M(y,"warning",$[2]<=50),T&4&&M(y,"danger",$[2]<15),T&2&&R!==(R=$[1].currentHp+"")&&U(N,R),T&2&&v!==(v=$[1].currentStats.hp+"")&&U(E,v),T&1&&M(e,"opened",$[0])},i:L,o:L,d($){$&&C(e)}}}function Ns(s,e,t){let n,{opened:i}=e,{monster:r}=e;return s.$$set=o=>{"opened"in o&&t(0,i=o.opened),"monster"in o&&t(1,r=o.monster)},s.$$.update=()=>{s.$$.dirty&2&&t(2,n=Math.floor(r.currentHp*100/r.currentStats.hp))},[i,r,n]}class Dt extends be{constructor(e){super(),pe(this,e,Ns,js,fe,{opened:0,monster:1},Ls)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),D()}get monster(){return this.$$.ctx[1]}set monster(e){this.$$set({monster:e}),D()}}ge(Dt,{opened:{},monster:{}},[],[],!0);function Hs(s){he(s,"svelte-b0lsc5",".action-bar.svelte-b0lsc5.svelte-b0lsc5{opacity:0;visibility:hidden;z-index:9;background-color:white;height:25dvh;width:100dvw;position:absolute;bottom:-25dvh;left:0;transition:bottom 0.5s ease-in-out;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;display:flex;font-size:64px}.action-bar.opened.svelte-b0lsc5.svelte-b0lsc5{opacity:1;visibility:visible;bottom:0}.action-bar.svelte-b0lsc5 .info.svelte-b0lsc5{width:50%;height:100%;display:flex;align-items:center;align-content:center;justify-content:space-around;position:relative}.action-bar.svelte-b0lsc5 .info ._inner.svelte-b0lsc5{position:absolute;left:17px;z-index:1;height:calc(100% - 55px);border:10px solid black;border-radius:10px;display:flex;align-items:center;justify-content:center;width:100%;text-transform:capitalize}.action-bar.svelte-b0lsc5 .info ._inner .move-desc.svelte-b0lsc5{text-transform:initial;font-size:46px;display:flex;flex-wrap:wrap;gap:16px;word-break:break-word;box-sizing:border-box;padding:0 20px}.action-bar.svelte-b0lsc5 .info ._inner .move-desc p.svelte-b0lsc5{flex:45%;margin:0}.action-bar.svelte-b0lsc5 .actions.svelte-b0lsc5,.action-bar.svelte-b0lsc5 .moves.svelte-b0lsc5{width:50%;height:100%;display:flex;background:#FFFFFF;border:14px solid #595b59;border-radius:8px;box-sizing:border-box;padding:12px;z-index:2;flex-wrap:wrap;gap:12px}.action-btn.svelte-b0lsc5.svelte-b0lsc5{background-color:var(--color);font-size:64px;color:white;border-radius:24px;border:6px solid #595b59;font-family:pokemon, serif;transition:color 0.3s ease-in-out, opacity 0.3s ease-in-out;flex:48%}.action-btn.svelte-b0lsc5.svelte-b0lsc5:hover,.action-btn.selected.svelte-b0lsc5.svelte-b0lsc5{cursor:pointer;opacity:0.96;color:#262626}.action-btn[disabled].svelte-b0lsc5.svelte-b0lsc5{opacity:0.5;cursor:not-allowed;pointer-events:none}@media screen and (max-width: 1100px){.action-bar.svelte-b0lsc5.svelte-b0lsc5{font-size:32px}.action-bar.svelte-b0lsc5 .actions.svelte-b0lsc5,.action-bar.svelte-b0lsc5 .moves.svelte-b0lsc5{padding:2px;gap:4px;border:8px solid #595b59}.action-bar.svelte-b0lsc5 .actions .action-btn.svelte-b0lsc5,.action-bar.svelte-b0lsc5 .moves .action-btn.svelte-b0lsc5{font-size:32px}.action-bar.svelte-b0lsc5 .info ._inner.svelte-b0lsc5{left:10px;height:calc(100% - 37px);border:8px solid black}.action-bar.svelte-b0lsc5 .info ._inner .move-desc.svelte-b0lsc5{font-size:32px}}")}function wt(s,e,t){const n=s.slice();return n[11]=e[t],n[13]=t,n}function Fs(s){var $,T,Z,K,te,re;let e,t,n=(($=s[1])==null?void 0:$.playerCurrentMonster.moves[s[3]].description)+"",i,r,o,l=((T=s[1])==null?void 0:T.playerCurrentMonster.moves[s[3]].currentPp)+"",u,a,f=((Z=s[1])==null?void 0:Z.playerCurrentMonster.moves[s[3]].pp)+"",d,h,p,b=((K=s[1])==null?void 0:K.playerCurrentMonster.moves[s[3]].category)+"",_,x,y,S=((te=s[1])==null?void 0:te.playerCurrentMonster.moves[s[3]].power)+"",R,N,j=((re=s[1])==null?void 0:re.playerCurrentMonster.moves[s[3]].accuracy)+"",v,E;return{c(){e=w("div"),t=w("p"),i=O(n),r=q(),o=w("p"),u=O(l),a=O(`
                        / `),d=O(f),h=q(),p=w("p"),_=O(b),x=q(),y=w("p"),R=O(S),N=O(`
                        | `),v=O(j),E=O(" %"),m(t,"class","svelte-b0lsc5"),m(o,"class","svelte-b0lsc5"),m(p,"class","svelte-b0lsc5"),m(y,"class","svelte-b0lsc5"),m(e,"class","move-desc svelte-b0lsc5")},m(B,ee){A(B,e,ee),g(e,t),g(t,i),g(e,r),g(e,o),g(o,u),g(o,a),g(o,d),g(e,h),g(e,p),g(p,_),g(e,x),g(e,y),g(y,R),g(y,N),g(y,v),g(y,E)},p(B,ee){var Se,Me,Ce,k,J,H;ee&10&&n!==(n=((Se=B[1])==null?void 0:Se.playerCurrentMonster.moves[B[3]].description)+"")&&U(i,n),ee&10&&l!==(l=((Me=B[1])==null?void 0:Me.playerCurrentMonster.moves[B[3]].currentPp)+"")&&U(u,l),ee&10&&f!==(f=((Ce=B[1])==null?void 0:Ce.playerCurrentMonster.moves[B[3]].pp)+"")&&U(d,f),ee&10&&b!==(b=((k=B[1])==null?void 0:k.playerCurrentMonster.moves[B[3]].category)+"")&&U(_,b),ee&10&&S!==(S=((J=B[1])==null?void 0:J.playerCurrentMonster.moves[B[3]].power)+"")&&U(R,S),ee&10&&j!==(j=((H=B[1])==null?void 0:H.playerCurrentMonster.moves[B[3]].accuracy)+"")&&U(v,j)},d(B){B&&C(e)}}}function Xs(s){var n;let e=((n=s[1])==null?void 0:n.currentMessage.toUpperCase())+"",t;return{c(){t=O(e)},m(i,r){A(i,t,r)},p(i,r){var o;r&2&&e!==(e=((o=i[1])==null?void 0:o.currentMessage.toUpperCase())+"")&&U(t,e)},d(i){i&&C(t)}}}function Us(s){let e,t,n,i,r,o,l,u,a,f,d,h,p,b;return{c(){e=w("div"),t=w("button"),n=O("FIGHT"),i=q(),r=w("button"),o=O("BAG"),l=q(),u=w("button"),a=O("POKEMONS"),f=q(),d=w("button"),h=O("RUN"),m(t,"class","action-btn svelte-b0lsc5"),ne(t,"--color","#dc5959"),t.disabled=s[5],M(t,"selected",s[4]===0),m(r,"class","action-btn svelte-b0lsc5"),ne(r,"--color","#eca859"),r.disabled=s[5],M(r,"selected",s[4]===1),m(u,"class","action-btn svelte-b0lsc5"),ne(u,"--color","#7EAF53"),u.disabled=s[5],M(u,"selected",s[4]===2),m(d,"class","action-btn svelte-b0lsc5"),ne(d,"--color","#599bdc"),d.disabled=s[5],M(d,"selected",s[4]===2),m(e,"class","actions svelte-b0lsc5")},m(_,x){A(_,e,x),g(e,t),g(t,n),g(e,i),g(e,r),g(r,o),g(e,l),g(e,u),g(u,a),g(e,f),g(e,d),g(d,h),p||(b=[X(t,"click",s[6]),X(d,"click",s[7])],p=!0)},p(_,x){x&32&&(t.disabled=_[5]),x&16&&M(t,"selected",_[4]===0),x&32&&(r.disabled=_[5]),x&16&&M(r,"selected",_[4]===1),x&32&&(u.disabled=_[5]),x&16&&M(u,"selected",_[4]===2),x&32&&(d.disabled=_[5]),x&16&&M(d,"selected",_[4]===2)},d(_){_&&C(e),p=!1,ie(b)}}}function Ws(s){let e,t=at(s[1].playerCurrentMonster.moves),n=[];for(let i=0;i<t.length;i+=1)n[i]=yt(wt(s,t,i));return{c(){e=w("div");for(let i=0;i<n.length;i+=1)n[i].c();m(e,"class","moves svelte-b0lsc5")},m(i,r){A(i,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(i,r){if(r&298){t=at(i[1].playerCurrentMonster.moves);let o;for(o=0;o<t.length;o+=1){const l=wt(i,t,o);n[o]?n[o].p(l,r):(n[o]=yt(l),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(i){i&&C(e),Vt(n,i)}}}function yt(s){let e,t=s[11].name.toUpperCase()+"",n,i,r,o;function l(){return s[9](s[13])}function u(){return s[10](s[11])}return{c(){e=w("button"),n=O(t),i=q(),m(e,"class","action-btn svelte-b0lsc5"),ne(e,"--color","#dc5959"),e.disabled=s[5],M(e,"selected",s[3]===s[13])},m(a,f){A(a,e,f),g(e,n),g(e,i),r||(o=[X(e,"mouseover",l),X(e,"click",u)],r=!0)},p(a,f){s=a,f&2&&t!==(t=s[11].name.toUpperCase()+"")&&U(n,t),f&32&&(e.disabled=s[5]),f&8&&M(e,"selected",s[3]===s[13])},d(a){a&&C(e),r=!1,ie(o)}}}function Gs(s){let e,t,n,i;function r(d,h){return d[2]?Fs:Xs}let o=r(s),l=o(s);function u(d,h){return d[2]?Ws:Us}let a=u(s),f=a(s);return{c(){e=w("div"),t=w("div"),n=w("div"),l.c(),i=q(),f.c(),m(n,"class","_inner svelte-b0lsc5"),m(t,"class","info svelte-b0lsc5"),m(e,"class","action-bar svelte-b0lsc5"),M(e,"opened",s[0])},m(d,h){A(d,e,h),g(e,t),g(t,n),l.m(n,null),g(e,i),f.m(e,null)},p(d,[h]){o===(o=r(d))&&l?l.p(d,h):(l.d(1),l=o(d),l&&(l.c(),l.m(n,null))),a===(a=u(d))&&f?f.p(d,h):(f.d(1),f=a(d),f&&(f.c(),f.m(e,null))),h&1&&M(e,"opened",d[0])},i:L,o:L,d(d){d&&C(e),l.d(),f.d()}}}function Vs(s,e,t){let n,{opened:i}=e,{battleState:r}=e,o=!1,l=0,u=0;console.log(r);function a(){t(2,o=!o)}function f(){r.selectAction(new Ze(r.playerCurrentMonster))}function d(b){r.selectAction(new Te(b,"opponent",r.playerCurrentMonster)),t(2,o=!1)}window.addEventListener("keydown",b=>{b.key==="ArrowUp"?o?t(3,l=l===0?r.playerCurrentMonster.moves.length-1:l-1):t(4,u=u===0?3:u-1):b.key==="ArrowDown"?o?t(3,l=l===r.playerCurrentMonster.moves.length-1?0:l+1):t(4,u=u===3?0:u+1):b.key==="Enter"&&(o?d(r.playerCurrentMonster.moves[l]):u===0?a():u===3&&f())});const h=b=>t(3,l=b),p=b=>d(b);return s.$$set=b=>{"opened"in b&&t(0,i=b.opened),"battleState"in b&&t(1,r=b.battleState)},s.$$.update=()=>{s.$$.dirty&2&&t(5,n=r&&!r.isPlayerTurn||!1)},[i,r,o,l,u,n,a,f,d,h,p]}class Tt extends be{constructor(e){super(),pe(this,e,Vs,Gs,fe,{opened:0,battleState:1},Hs)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),D()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),D()}}ge(Tt,{opened:{},battleState:{}},[],[],!0);function Zs(s){he(s,"svelte-1xvkx5g",".enemy-info.svelte-1xvkx5g.svelte-1xvkx5g{opacity:0;visibility:hidden;z-index:9;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;top:2dvh;left:-30dvw;transition:left 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly;font-size:46px}.enemy-info.opened.svelte-1xvkx5g.svelte-1xvkx5g{opacity:1;visibility:visible;left:1dvw}.enemy-info.svelte-1xvkx5g .name-lvl.svelte-1xvkx5g{display:flex;justify-content:space-between;align-items:center}.enemy-info.svelte-1xvkx5g .status.svelte-1xvkx5g{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.enemy-info.svelte-1xvkx5g .hp.svelte-1xvkx5g{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.enemy-info.svelte-1xvkx5g .hp span.svelte-1xvkx5g{padding:0 0 0 12px;font-weight:bold}.enemy-info.svelte-1xvkx5g .hp .progressbar-wrapper.svelte-1xvkx5g{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.enemy-info.svelte-1xvkx5g .hp .progressbar-wrapper .progressbar.svelte-1xvkx5g{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px;transition:width 1s ease-in-out, background 1s ease-in-out 1s}.enemy-info.svelte-1xvkx5g .hp .progressbar-wrapper .progressbar.warning.svelte-1xvkx5g{background:rgb(255, 241, 164);background:linear-gradient(0deg, rgb(255, 241, 164) 0%, rgb(255, 194, 16) 30%, rgb(255, 194, 16) 50%, rgb(255, 194, 16) 70%, rgb(255, 241, 164) 100%)}.enemy-info.svelte-1xvkx5g .hp .progressbar-wrapper .progressbar.danger.svelte-1xvkx5g{background:rgb(244, 177, 159);background:linear-gradient(0deg, rgb(244, 177, 159) 0%, rgb(223, 85, 48) 30%, rgb(223, 85, 48) 50%, rgb(223, 85, 48) 70%, rgb(244, 177, 159) 100%)}@media screen and (max-width: 1100px){.enemy-info.svelte-1xvkx5g.svelte-1xvkx5g{font-size:36px;border:8px solid #595b59}.enemy-info.svelte-1xvkx5g .hp.svelte-1xvkx5g{width:80%;height:18px}.enemy-info.svelte-1xvkx5g .hp .progressbar-wrapper.svelte-1xvkx5g{height:14px}}")}function Ks(s){let e,t,n,i=s[1].name+"",r,o,l,u,a=s[1].level+"",f,d,h,p,b,_,x,y;return{c(){e=w("div"),t=w("div"),n=w("span"),r=O(i),o=q(),l=w("span"),u=O("Lv "),f=O(a),d=q(),h=w("div"),p=w("div"),b=w("span"),b.textContent="HP",_=q(),x=w("div"),y=w("div"),m(n,"class","svelte-1xvkx5g"),m(l,"class","svelte-1xvkx5g"),m(t,"class","name-lvl svelte-1xvkx5g"),m(b,"class","svelte-1xvkx5g"),m(y,"class","progressbar svelte-1xvkx5g"),ne(y,"--width",s[2]+"%"),M(y,"warning",s[2]<=50),M(y,"danger",s[2]<15),m(x,"class","progressbar-wrapper svelte-1xvkx5g"),m(p,"class","hp svelte-1xvkx5g"),m(h,"class","status svelte-1xvkx5g"),m(e,"class","enemy-info svelte-1xvkx5g"),M(e,"opened",s[0])},m(S,R){A(S,e,R),g(e,t),g(t,n),g(n,r),g(t,o),g(t,l),g(l,u),g(l,f),g(e,d),g(e,h),g(h,p),g(p,b),g(p,_),g(p,x),g(x,y)},p(S,[R]){R&2&&i!==(i=S[1].name+"")&&U(r,i),R&2&&a!==(a=S[1].level+"")&&U(f,a),R&4&&ne(y,"--width",S[2]+"%"),R&4&&M(y,"warning",S[2]<=50),R&4&&M(y,"danger",S[2]<15),R&1&&M(e,"opened",S[0])},i:L,o:L,d(S){S&&C(e)}}}function Ys(s,e,t){let n,{opened:i}=e,{monster:r}=e;return s.$$set=o=>{"opened"in o&&t(0,i=o.opened),"monster"in o&&t(1,r=o.monster)},s.$$.update=()=>{s.$$.dirty&2&&t(2,n=Math.floor(r.currentHp*100/r.currentStats.hp))},[i,r,n]}class zt extends be{constructor(e){super(),pe(this,e,Ys,Ks,fe,{opened:0,monster:1},Zs)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),D()}get monster(){return this.$$.ctx[1]}set monster(e){this.$$set({monster:e}),D()}}ge(zt,{opened:{},monster:{}},[],[],!0);function Js(s){he(s,"svelte-18qu5ee",".battleStart.svelte-18qu5ee{opacity:0;visibility:hidden;background:#000000;height:100dvh;width:100dvw;position:absolute;top:0;left:0;transition:opacity 0.5s ease-in-out;z-index:2}.battleStart.animate.svelte-18qu5ee{visibility:visible;animation:svelte-18qu5ee-animate 2s ease-in-out}.battleStart.hide.svelte-18qu5ee{visibility:hidden;opacity:0}@keyframes svelte-18qu5ee-animate{0%{opacity:1}20%{opacity:0}40%{opacity:1}60%{opacity:0}80%{opacity:1}100%{opacity:0}}")}function _t(s){let e,t,n,i,r,o,l,u,a,f,d,h;function p(v){s[3](v)}function b(v){s[4](v)}let _={};s[0]!==void 0&&(_.opened=s[0]),s[1]!==void 0&&(_.battleState=s[1]),e=new Tt({props:_}),z.push(()=>G(e,"opened",p)),z.push(()=>G(e,"battleState",b));function x(v){s[5](v)}function y(v){s[6](v)}let S={};s[0]!==void 0&&(S.opened=s[0]),s[1].playerCurrentMonster!==void 0&&(S.monster=s[1].playerCurrentMonster),r=new Dt({props:S}),z.push(()=>G(r,"opened",x)),z.push(()=>G(r,"monster",y));function R(v){s[7](v)}function N(v){s[8](v)}let j={};return s[0]!==void 0&&(j.opened=s[0]),s[1].opponentCurrentMonster!==void 0&&(j.monster=s[1].opponentCurrentMonster),a=new zt({props:j}),z.push(()=>G(a,"opened",R)),z.push(()=>G(a,"monster",N)),{c(){ke(e.$$.fragment),i=q(),ke(r.$$.fragment),u=q(),ke(a.$$.fragment)},m(v,E){de(e,v,E),A(v,i,E),de(r,v,E),A(v,u,E),de(a,v,E),h=!0},p(v,E){const $={};!t&&E&1&&(t=!0,$.opened=v[0],W(()=>t=!1)),!n&&E&2&&(n=!0,$.battleState=v[1],W(()=>n=!1)),e.$set($);const T={};!o&&E&1&&(o=!0,T.opened=v[0],W(()=>o=!1)),!l&&E&2&&(l=!0,T.monster=v[1].playerCurrentMonster,W(()=>l=!1)),r.$set(T);const Z={};!f&&E&1&&(f=!0,Z.opened=v[0],W(()=>f=!1)),!d&&E&2&&(d=!0,Z.monster=v[1].opponentCurrentMonster,W(()=>d=!1)),a.$set(Z)},i(v){h||(V(e.$$.fragment,v),V(r.$$.fragment,v),V(a.$$.fragment,v),h=!0)},o(v){Y(e.$$.fragment,v),Y(r.$$.fragment,v),Y(a.$$.fragment,v),h=!1},d(v){v&&(C(i),C(u)),ue(e,v),ue(r,v),ue(a,v)}}}function Qs(s){let e,t,n,i=s[1]&&_t(s);return{c(){i&&i.c(),e=q(),t=w("div"),t.innerHTML="",m(t,"class","battleStart svelte-18qu5ee"),M(t,"hide",s[0]),M(t,"animate",s[2])},m(r,o){i&&i.m(r,o),A(r,e,o),A(r,t,o),n=!0},p(r,[o]){r[1]?i?(i.p(r,o),o&2&&V(i,1)):(i=_t(r),i.c(),V(i,1),i.m(e.parentNode,e)):i&&(Ye(),Y(i,1,1,()=>{i=null}),Je()),(!n||o&1)&&M(t,"hide",r[0]),(!n||o&4)&&M(t,"animate",r[2])},i(r){n||(V(i),n=!0)},o(r){Y(i),n=!1},d(r){r&&(C(e),C(t)),i&&i.d(r)}}}function en(s,e,t){let{opened:n}=e,{battleStart:i}=e,{battleState:r}=e;function o(h){n=h,t(0,n)}function l(h){r=h,t(1,r)}function u(h){n=h,t(0,n)}function a(h){s.$$.not_equal(r.playerCurrentMonster,h)&&(r.playerCurrentMonster=h,t(1,r))}function f(h){n=h,t(0,n)}function d(h){s.$$.not_equal(r.opponentCurrentMonster,h)&&(r.opponentCurrentMonster=h,t(1,r))}return s.$$set=h=>{"opened"in h&&t(0,n=h.opened),"battleStart"in h&&t(2,i=h.battleStart),"battleState"in h&&t(1,r=h.battleState)},[n,r,i,o,l,u,a,f,d]}class Bt extends be{constructor(e){super(),pe(this,e,en,Qs,fe,{opened:0,battleStart:2,battleState:1},Js)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),D()}get battleStart(){return this.$$.ctx[2]}set battleStart(e){this.$$set({battleStart:e}),D()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),D()}}ge(Bt,{opened:{},battleStart:{},battleState:{}},[],[],!0);function tn(s){he(s,"svelte-1cbbcxy",'.menu.svelte-1cbbcxy.svelte-1cbbcxy{position:absolute;top:0;right:-20dvw;width:20dvw;font-size:36px;background-color:#FFFFFF;z-index:3;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:right 0.3s ease-in-out;border:3px solid #1e1e1e;border-radius:16px}.menu.svelte-1cbbcxy ul.svelte-1cbbcxy{box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;border-radius:12px;list-style:none;padding:12px 32px;margin:0;display:flex;flex-direction:column;height:100%;width:100%;align-items:center}.menu.svelte-1cbbcxy ul li.svelte-1cbbcxy{font-size:4rem;margin:1rem 0;text-align:center;cursor:pointer;flex-grow:1;width:100%;height:100%;min-height:60px;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li:hover .svelte-1cbbcxy:before{content:"";width:0;height:0;border-top:20px solid transparent;border-bottom:20px solid transparent;border-left:20px solid #262626;position:absolute;left:40px}.menu.svelte-1cbbcxy ul li button.svelte-1cbbcxy{background:none;border:none;font-size:inherit;font-family:inherit;cursor:inherit;outline:none;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li button .svelte-1cbbcxy:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%}.menu.open.svelte-1cbbcxy.svelte-1cbbcxy{opacity:1;pointer-events:all;right:0}')}function sn(s){let e;return{c(){e=w("div"),e.innerHTML='<ul class="svelte-1cbbcxy"><li class="svelte-1cbbcxy"><button tabindex="0" class="svelte-1cbbcxy">Pokedex</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Pokemon</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Bag</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Trainer</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Save</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Options</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Credits</button></li></ul>',m(e,"class","menu svelte-1cbbcxy"),M(e,"open",s[0])},m(t,n){A(t,e,n)},p(t,[n]){n&1&&M(e,"open",t[0])},i:L,o:L,d(t){t&&C(e)}}}function nn(s,e,t){let{menuOpened:n}=e,{player:i}=e;return s.$$set=r=>{"menuOpened"in r&&t(0,n=r.menuOpened),"player"in r&&t(1,i=r.player)},[n,i]}class Lt extends be{constructor(e){super(),pe(this,e,nn,sn,fe,{menuOpened:0,player:1},tn)}get menuOpened(){return this.$$.ctx[0]}set menuOpened(e){this.$$set({menuOpened:e}),D()}get player(){return this.$$.ctx[1]}set player(e){this.$$set({player:e}),D()}}ge(Lt,{menuOpened:{},player:{}},[],[],!0);class kt{constructor(e,t=16,n=16){c(this,"position");c(this,"width");c(this,"height");this.position=e,this.width=t,this.height=n}debug(e,t,n,i,r,o="red"){e.fillStyle=o,e.fillRect(i+this.position.x*16*n,r+this.position.y*16*n,this.width*n,this.height*n)}}const rn=8,on=806;class ln{constructor(e,t,n,i,r,o,l,u=[1,100]){c(this,"background");c(this,"foreground");c(this,"width");c(this,"height");c(this,"collisions");c(this,"battleZones");c(this,"monsters");c(this,"levelRange",[1,100]);c(this,"playerInitialPosition",new I(11,11));c(this,"startingX",0);c(this,"startingY",0);this.background=e,this.foreground=t,this.width=n,this.height=i,this.collisions=this.initBoundaries(r),this.battleZones=this.initBattlesZones(o),this.monsters=l,this.levelRange=u}randomMonster(e){const t=this.monsters[Math.floor(Math.random()*this.monsters.length)],n=Math.floor(Math.random()*(this.levelRange[1]-this.levelRange[0]+1))+this.levelRange[0];return e.findById(t).result.instanciate(n)}initBattlesZones(e){const t=[];for(let i=0;i<e.length;i+=this.width)t.push(e.slice(i,this.width+i));const n=[];return t.forEach((i,r)=>{i.forEach((o,l)=>{if(o===rn){const u=new kt(new I(l,r));n.push(u)}})}),n}initBoundaries(e){const t=[];for(let i=0;i<e.length;i+=this.width)t.push(e.slice(i,this.width+i));const n=[];return t.forEach((i,r)=>{i.forEach((o,l)=>{if(o===on){const u=new kt(new I(l,r));n.push(u)}})}),n}drawBackground(e,t,n){let i=this.background.width*n,r=this.background.height*n,o=e.canvas.width/2-i/2,l=e.canvas.height/2-r/2;this.startingX=o+(0-t.x)*(16*n),this.startingY=l+(0-t.y)*(16*n),e.drawImage(this.background,0,0,this.background.width,this.background.height,this.startingX,this.startingY,this.background.width*n,this.background.height*n)}drawForeground(e,t){this.foreground!==null&&e.drawImage(this.foreground,t.x*16,t.y*16,this.foreground.width,this.foreground.height,0,0,this.foreground.width*3,this.foreground.height*3)}drawBoundaries(e,t,n){this.collisions.forEach(i=>{i.debug(e,t,n,this.startingX,this.startingY,"rgba(255, 0, 0, 0.5)")})}drawBattleZones(e,t,n){this.battleZones.forEach(i=>{i.debug(e,t,n,this.startingX,this.startingY,"rgba(0, 0, 255, 0.5)")})}hasBattleZoneAt(e){return this.battleZones.some(t=>t.position.x===e.x&&t.position.y===e.y)}hasBoundaryAt(e){return this.collisions.some(t=>t.position.x===e.x&&t.position.y===e.y)||e.x<0||e.y<0||e.x>this.width-1||e.y>this.height-1}}const jt=new Image;jt.src="src/assets/maps/test-map.png";const Nt=new Image;Nt.src="src/assets/maps/test-map-foreground.png";const an=[95],cn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,0,806,806,0,0,806,806,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,806,806,806,806,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,806,806,806,806,834,0,0,0,0,0,0,0,0,0],dn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],oe=new ln(jt,Nt,20,20,cn,dn,an,[3,6]);function un(s){he(s,"svelte-1i2dl8q",'@media(max-width: 1100px){.set.svelte-1i2dl8q .d-pad.svelte-1i2dl8q{width:20dvw;height:20dvw}}.set.svelte-1i2dl8q.svelte-1i2dl8q{overflow:hidden;text-align:center;position:absolute;bottom:8dvh;left:8dvh;z-index:10}.set.svelte-1i2dl8q .d-pad.svelte-1i2dl8q{display:inline-block}.d-pad.svelte-1i2dl8q.svelte-1i2dl8q{position:relative;width:12dvw;height:12dvw;border-radius:48%;overflow:hidden;z-index:9}.d-pad.svelte-1i2dl8q.svelte-1i2dl8q:before{content:"";position:absolute;top:50%;left:50%;border-radius:5%;transform:translate(-50%, -50%);width:66.6%;height:66.6%}.d-pad.svelte-1i2dl8q.svelte-1i2dl8q:after{content:"";position:absolute;display:none;z-index:2;width:20%;height:20%;top:50%;left:50%;background:rgba(221, 221, 221, 0.5);border-radius:50%;transform:translate(-50%, -50%);transition:all 0.25s;cursor:pointer}.d-pad.svelte-1i2dl8q.svelte-1i2dl8q:hover:after{width:30%;height:30%}.d-pad.svelte-1i2dl8q span.svelte-1i2dl8q{display:block;position:absolute;-webkit-tap-highlight-color:rgba(255, 255, 255, 0);width:33.3%;height:43%;line-height:40%;color:#fff;background:rgba(221, 221, 221, 0.5);text-align:center}.d-pad.svelte-1i2dl8q span.svelte-1i2dl8q:hover{background:#eee}.d-pad.svelte-1i2dl8q span.svelte-1i2dl8q:before{content:"";position:absolute;width:0;height:0;border-radius:5px;border-style:solid;transition:all 0.25s}.d-pad.svelte-1i2dl8q span.svelte-1i2dl8q:after{content:"";position:absolute;width:102%;height:78%;background:#fff;border-radius:20%}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q,.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q{width:43%;height:33%}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:after,.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:after{width:78%;height:102%}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q{top:0;left:50%;transform:translate(-50%, 0);border-radius:17% 17% 50% 50%}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:hover{background:linear-gradient(0deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:after{left:0;top:0;transform:translate(-100%, 0);border-top-left-radius:50%;pointer-events:none}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:before{top:40%;left:50%;transform:translate(-50%, -50%);border-width:0 13px 19px 13px;border-color:transparent transparent #aaa transparent}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:active:before{border-bottom-color:#333}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:hover:before{top:35%}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q{bottom:0;left:50%;transform:translate(-50%, 0);border-radius:50% 50% 17% 17%}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:hover{background:linear-gradient(180deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:after{right:0;bottom:0;transform:translate(100%, 0);border-bottom-right-radius:50%;pointer-events:none}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:before{bottom:40%;left:50%;transform:translate(-50%, 50%);border-width:19px 13px 0px 13px;border-color:#aaa transparent transparent transparent}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:active:before{border-top-color:#333}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:hover:before{bottom:35%}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q{top:50%;left:0;transform:translate(0, -50%);border-radius:17% 50% 50% 17%}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:hover{background:linear-gradient(-90deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:after{left:0;bottom:0;transform:translate(0, 100%);border-bottom-left-radius:50%;pointer-events:none}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:before{left:40%;top:50%;transform:translate(-50%, -50%);border-width:13px 19px 13px 0;border-color:transparent #aaa transparent transparent}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:active:before{border-right-color:#333}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:hover:before{left:35%}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q{top:50%;right:0;transform:translate(0, -50%);border-radius:50% 17% 17% 50%}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:hover{background:linear-gradient(90deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:after{right:0;top:0;transform:translate(0, -100%);border-top-right-radius:50%;pointer-events:none}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:before{right:40%;top:50%;transform:translate(50%, -50%);border-width:13px 0 13px 19px;border-color:transparent transparent transparent #aaa}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:active:before{border-left-color:#333}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:hover:before{right:35%}.outline.svelte-1i2dl8q .d-pad.svelte-1i2dl8q{border-radius:0}.outline.svelte-1i2dl8q .d-pad span.svelte-1i2dl8q{border:1px solid rgba(0, 0, 0, 0.1)}.outline.svelte-1i2dl8q .d-pad span.svelte-1i2dl8q:after{display:none}.outline.svelte-1i2dl8q .d-pad span.up.svelte-1i2dl8q:hover{background:linear-gradient(0deg, #fff 0%, #efefef 50%)}.outline.svelte-1i2dl8q .d-pad span.right.svelte-1i2dl8q:hover{background:linear-gradient(90deg, #fff 0%, #efefef 50%)}.outline.svelte-1i2dl8q .d-pad span.down.svelte-1i2dl8q:hover{background:linear-gradient(180deg, #fff 0%, #efefef 50%)}.outline.svelte-1i2dl8q .d-pad span.left.svelte-1i2dl8q:hover{background:linear-gradient(-90deg, #fff 0%, #efefef 50%)}.outline.svelte-1i2dl8q .d-pad span.up.svelte-1i2dl8q:before{border-bottom-color:rgba(0, 0, 0, 0.1)}.outline.svelte-1i2dl8q .d-pad span.right.svelte-1i2dl8q:before{border-left-color:rgba(0, 0, 0, 0.1)}.outline.svelte-1i2dl8q .d-pad span.down.svelte-1i2dl8q:before{border-top-color:rgba(0, 0, 0, 0.1)}.outline.svelte-1i2dl8q .d-pad span.left.svelte-1i2dl8q:before{border-right-color:rgba(0, 0, 0, 0.1)}.buttons-a-b.svelte-1i2dl8q.svelte-1i2dl8q{position:absolute;bottom:8dvh;right:8dvh;z-index:10;display:flex;flex-direction:column;align-content:space-between;align-items:center}.buttons-a-b.svelte-1i2dl8q button.svelte-1i2dl8q{width:7dvw;height:7dvw;border-radius:50%;border:1px solid #fff;background:rgba(221, 221, 221, 0.5);color:#aaa;font-size:3.5rem;font-weight:bold;text-align:center;line-height:10dvw;cursor:pointer;transition:all 0.25s;display:flex;align-content:center;justify-content:center;align-items:center}.buttons-a-b.svelte-1i2dl8q button.svelte-1i2dl8q:hover{background:#eee}.buttons-a-b.svelte-1i2dl8q .button-a.svelte-1i2dl8q{position:relative;right:6dvw}')}function fn(s){let e,t,n,i,r,o,l,u,a,f,d,h,p,b,_;return{c(){e=w("div"),t=w("nav"),n=w("span"),i=q(),r=w("span"),o=q(),l=w("span"),u=q(),a=w("span"),f=q(),d=w("div"),d.innerHTML='<button class="button-b svelte-1i2dl8q">B</button> <button class="button-a svelte-1i2dl8q">A</button>',h=q(),p=w("div"),p.innerHTML='<button class="button-start">start</button> <button class="button-select">select</button>',m(n,"class","up svelte-1i2dl8q"),m(r,"class","right svelte-1i2dl8q"),m(l,"class","down svelte-1i2dl8q"),m(a,"class","left svelte-1i2dl8q"),m(t,"class","d-pad svelte-1i2dl8q"),m(e,"class","set outline svelte-1i2dl8q"),m(d,"class","buttons-a-b svelte-1i2dl8q"),m(p,"class","buttons-start-select")},m(x,y){A(x,e,y),g(e,t),g(t,n),g(t,i),g(t,r),g(t,o),g(t,l),g(t,u),g(t,a),A(x,f,y),A(x,d,y),A(x,h,y),A(x,p,y),b||(_=[X(n,"pointerdown",s[5]("ArrowUp")),X(n,"pointerup",s[6]("ArrowUp")),X(r,"pointerdown",s[5]("ArrowRight")),X(r,"pointerup",s[6]("ArrowRight")),X(l,"pointerdown",s[5]("ArrowDown")),X(l,"pointerup",s[6]("ArrowDown")),X(a,"pointerdown",s[5]("ArrowLeft")),X(a,"pointerup",s[6]("ArrowLeft"))],b=!0)},p:L,i:L,o:L,d(x){x&&(C(e),C(f),C(d),C(h),C(p)),b=!1,ie(_)}}}function hn(s){let e,t,n,i,r;function o(f){s[10](f)}function l(f){s[11](f)}function u(f){s[12](f)}let a={};return s[0]!==void 0&&(a.opened=s[0]),s[4].battleState!==void 0&&(a.battleState=s[4].battleState),s[2]!==void 0&&(a.battleStart=s[2]),e=new Bt({props:a}),z.push(()=>G(e,"opened",o)),z.push(()=>G(e,"battleState",l)),z.push(()=>G(e,"battleStart",u)),{c(){ke(e.$$.fragment)},m(f,d){de(e,f,d),r=!0},p(f,d){const h={};!t&&d[0]&1&&(t=!0,h.opened=f[0],W(()=>t=!1)),!n&&d[0]&16&&(n=!0,h.battleState=f[4].battleState,W(()=>n=!1)),!i&&d[0]&4&&(i=!0,h.battleStart=f[2],W(()=>i=!1)),e.$set(h)},i(f){r||(V(e.$$.fragment,f),r=!0)},o(f){Y(e.$$.fragment,f),r=!1},d(f){ue(e,f)}}}function pn(s){let e,t,n,i,r,o,l;const u=[hn,fn],a=[];function f(b,_){return b[4].initiated?0:1}e=f(s),t=a[e]=u[e](s);function d(b){s[13](b)}function h(b){s[14](b)}let p={};return s[1]!==void 0&&(p.menuOpened=s[1]),s[3]!==void 0&&(p.player=s[3]),i=new Lt({props:p}),z.push(()=>G(i,"menuOpened",d)),z.push(()=>G(i,"player",h)),{c(){t.c(),n=q(),ke(i.$$.fragment)},m(b,_){a[e].m(b,_),A(b,n,_),de(i,b,_),l=!0},p(b,_){let x=e;e=f(b),e===x?a[e].p(b,_):(Ye(),Y(a[x],1,1,()=>{a[x]=null}),Je(),t=a[e],t?t.p(b,_):(t=a[e]=u[e](b),t.c()),V(t,1),t.m(n.parentNode,n));const y={};!r&&_[0]&2&&(r=!0,y.menuOpened=b[1],W(()=>r=!1)),!o&&_[0]&8&&(o=!0,y.player=b[3],W(()=>o=!1)),i.$set(y)},i(b){l||(V(t),V(i.$$.fragment,b),l=!0)},o(b){Y(t),Y(i.$$.fragment,b),l=!1},d(b){b&&C(n),a[e].d(b),ue(i,b)}}}let $e=3;function gn(s,e,t){let{opened:n=!1}=e,{menuOpened:i=!1}=e,{battleStart:r=!1}=e,{pokedex:o}=e,{currentMap:l=oe}=e,{canvas:u}=e;const a=u.getContext("2d");window.innerHeight>window.innerWidth?(u.width=window.innerWidth,u.height=window.innerWidth):(u.width=window.innerWidth,u.height=window.innerHeight);let f=16*$e,{character:d}=e;d.positionOnMap=new I(oe.playerInitialPosition.x,oe.playerInitialPosition.y),d.positionOnScreen=new I(oe.playerInitialPosition.x*f,oe.playerInitialPosition.y*f);function h(){window.innerHeight>window.innerWidth?(t(7,u.width=window.innerWidth,u),t(7,u.height=window.innerWidth,u)):(t(7,u.width=window.innerWidth,u),t(7,u.height=window.innerHeight,u)),f=16*$e,t(3,d.positionOnScreen=new I(oe.playerInitialPosition.x*f,oe.playerInitialPosition.y*f),d)}window.addEventListener("resize",()=>{h()}),window.addEventListener("orientationchange",()=>{h()});let{battle:p={initiated:!1,frameElapsed:0}}=e,b=0,_=new I(0,0),x=new I(0,0),y={fps:12,then:Date.now(),fpsInterval:1e3/12,id:0},S={fps:12,then:Date.now(),fpsInterval:1e3/12,goDown:!0,id:0};const R=new I(0,0);function N(){y.id=window.requestAnimationFrame(N);let k=Date.now(),J=k-y.then;if(J>y.fpsInterval){y.then=k-J%y.fpsInterval,a.fillStyle="black",a.fillRect(0,0,u.width,u.height),l.drawBackground(a,R,$e),d.draw(a,R,$e,l.background.width,l.background.height);let H=!0;if(t(3,d.moving=!1,d),p.initiated)return;if(!i){if((P.down.pressed||P.up.pressed||P.left.pressed||P.right.pressed)&&l.hasBattleZoneAt(d.positionOnMap)&&Math.random()<.1){t(3,d.frames.val=0,d);let Ae=l.randomMonster(o);window.cancelAnimationFrame(y.id),v(Ae)}P.down.pressed&&se.key==="ArrowDown"&&(l.hasBoundaryAt(new I(d.positionOnMap.x,d.positionOnMap.y+1))&&(H=!1),t(3,d.moving=!0,d),t(3,d.direction="down",d),H&&R.y++),P.up.pressed&&se.key==="ArrowUp"&&(l.hasBoundaryAt(new I(d.positionOnMap.x,d.positionOnMap.y-1))&&(H=!1),t(3,d.moving=!0,d),t(3,d.direction="up",d),H&&R.y--),P.left.pressed&&se.key==="ArrowLeft"&&(l.hasBoundaryAt(new I(d.positionOnMap.x-1,d.positionOnMap.y))&&(H=!1),t(3,d.moving=!0,d),t(3,d.direction="left",d),H&&R.x--),P.right.pressed&&se.key==="ArrowRight"&&(l.hasBoundaryAt(new I(d.positionOnMap.x+1,d.positionOnMap.y))&&(H=!1),t(3,d.moving=!0,d),t(3,d.direction="right",d),H&&R.x++),d.updatePosition(l.playerInitialPosition,R)}}}function j(){var H,Ae,nt,it,rt,ot;S.id=window.requestAnimationFrame(j);let k=Date.now(),J=k-S.then;if(J>S.fpsInterval){if(!p.initiated)return;S.then=k-J%S.fpsInterval,t(4,p.frameElapsed++,p),a.fillStyle="black",a.fillRect(0,0,u.width,u.height),Ts.draw(a,u),(Ae=(H=p.battleState)==null?void 0:H.opponentCurrentMonster)==null||Ae.draw(a,"front",50,0,b),(it=(nt=p.battleState)==null?void 0:nt.playerCurrentMonster)==null||it.draw(a,"back",0,0,b),(ot=(rt=p.battleState)==null?void 0:rt.opponentCurrentMonster)!=null&&ot.position&&(S.goDown=p.frameElapsed<=10,S.goDown?b++:b--,t(4,p.battleState.opponentCurrentMonster.position.y=_.y-b,p),t(4,p.battleState.playerCurrentMonster.position.y=x.y+b,p),p.frameElapsed>20&&t(4,p.frameElapsed=0,p))}}function v(k){re(),t(4,p.frameElapsed=0,p),t(4,p.initiated=!0,p),t(4,p.startDate=new Date,p),t(4,p.battleState=new Is(d,k,u),p),_={...p.battleState.opponentCurrentMonster.position},x={...p.battleState.playerCurrentMonster.position},T(),t(4,p.battleState.onClose=()=>{E()},p),t(2,r=!0),setTimeout(()=>{t(2,r=!1),t(0,n=!0),j()},2e3)}function E(k){window.cancelAnimationFrame(S.id),t(4,p.battleState=void 0,p),t(4,p.initiated=!1,p),t(4,p.startDate=void 0,p),t(2,r=!1),t(0,n=!1),t(1,i=!1),N(),$()}function $(){window.addEventListener("keydown",dt()),window.addEventListener("keyup",ct(d)),window.addEventListener("keydown",Z)}function T(){window.removeEventListener("keydown",dt()),window.removeEventListener("keyup",ct(d)),window.removeEventListener("keydown",Z)}function Z(k){k.key==="Escape"&&t(1,i=!i)}function K(k){return J=>{switch(J.preventDefault(),k){case"ArrowUp":P.up.pressed=!0;break;case"ArrowDown":P.down.pressed=!0;break;case"ArrowLeft":P.left.pressed=!0;break;case"ArrowRight":P.right.pressed=!0;break}se.key=k}}function te(k){return J=>{switch(k){case"ArrowDown":P.down.pressed=!1;break;case"ArrowUp":P.up.pressed=!1;break;case"ArrowRight":P.right.pressed=!1;break;case"ArrowLeft":P.left.pressed=!1;break}}}function re(){P.down.pressed=!1,P.up.pressed=!1,P.right.pressed=!1,P.left.pressed=!1,t(3,d.moving=!1,d)}$(),N();function B(k){n=k,t(0,n)}function ee(k){s.$$.not_equal(p.battleState,k)&&(p.battleState=k,t(4,p))}function Se(k){r=k,t(2,r)}function Me(k){i=k,t(1,i)}function Ce(k){d=k,t(3,d)}return s.$$set=k=>{"opened"in k&&t(0,n=k.opened),"menuOpened"in k&&t(1,i=k.menuOpened),"battleStart"in k&&t(2,r=k.battleStart),"pokedex"in k&&t(8,o=k.pokedex),"currentMap"in k&&t(9,l=k.currentMap),"canvas"in k&&t(7,u=k.canvas),"character"in k&&t(3,d=k.character),"battle"in k&&t(4,p=k.battle)},[n,i,r,d,p,K,te,u,o,l,B,ee,Se,Me,Ce]}class Ht extends be{constructor(e){super(),pe(this,e,gn,pn,fe,{opened:0,menuOpened:1,battleStart:2,pokedex:8,currentMap:9,canvas:7,character:3,battle:4},un,[-1,-1])}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),D()}get menuOpened(){return this.$$.ctx[1]}set menuOpened(e){this.$$set({menuOpened:e}),D()}get battleStart(){return this.$$.ctx[2]}set battleStart(e){this.$$set({battleStart:e}),D()}get pokedex(){return this.$$.ctx[8]}set pokedex(e){this.$$set({pokedex:e}),D()}get currentMap(){return this.$$.ctx[9]}set currentMap(e){this.$$set({currentMap:e}),D()}get canvas(){return this.$$.ctx[7]}set canvas(e){this.$$set({canvas:e}),D()}get character(){return this.$$.ctx[3]}set character(e){this.$$set({character:e}),D()}get battle(){return this.$$.ctx[4]}set battle(e){this.$$set({battle:e}),D()}}ge(Ht,{opened:{type:"Boolean"},menuOpened:{type:"Boolean"},battleStart:{type:"Boolean"},pokedex:{},currentMap:{},canvas:{},character:{},battle:{}},[],[],!0);function bn(s){he(s,"svelte-1bs37g6",'#canvas-wrapper.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{width:100dvw;height:100dvh;overflow:hidden;position:absolute;top:0;left:0;-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0)}#canvas-wrapper.svelte-1bs37g6 canvas.svelte-1bs37g6.svelte-1bs37g6{position:absolute;top:0;left:0;width:100dvw;height:100dvh}.loading.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100vh}.loading.ready.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{opacity:0.2}.u-swing.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{animation:svelte-1bs37g6-swing 3000ms infinite}@keyframes svelte-1bs37g6-swing{20%{-webkit-transform:rotate(15deg);transform:rotate(15deg)}40%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg)}60%{-webkit-transform:rotate(5deg);transform:rotate(5deg)}80%{-webkit-transform:rotate(-5deg);transform:rotate(-5deg)}to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{width:120px;height:120px;border-radius:120px;border:solid 4.8px black;position:relative;background:linear-gradient(to bottom, #EEEEEE 0%, #FFFFFF 100%);margin:10px auto}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:before,.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:after{content:"";display:block}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6,.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:before,.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:after{transition:all 600ms cubic-bezier(0.67, 0.4, 0.36, 0.75)}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:before{width:120px;height:57.6px;border-bottom:solid 4.8px black;border-radius:60px 60px 0 0;background:linear-gradient(to bottom, #d10000 0%, #ff0000 50%)}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:after{content:"";width:24px;height:24px;background:linear-gradient(to bottom, #fff 0%, #ccc 100%);position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);border-radius:50%;box-shadow:0 0 0 2.4px black, 0 0 0 4.8px #ddd, 0 0 0 8.5714285714px black, 0 0 12px 7.0588235294px rgba(0, 0, 0, 0.4)}.buttons.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{display:flex;justify-content:center;align-items:center;flex-direction:column;gap:120px;position:absolute;left:calc(50dvw - 100px);top:calc(50dvh - 40px)}.buttons.svelte-1bs37g6 .letsgo.svelte-1bs37g6.svelte-1bs37g6{position:relative}.buttons.svelte-1bs37g6 .letsgo .pika.svelte-1bs37g6.svelte-1bs37g6{width:200px;height:200px;position:absolute;bottom:0;left:0;z-index:1}.buttons.svelte-1bs37g6 .letsgo .start-btn.svelte-1bs37g6.svelte-1bs37g6{width:200px;height:80px;border-radius:16px;position:relative;z-index:2;font-family:pokemon, serif;font-size:36px;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;cursor:pointer}.buttons.svelte-1bs37g6 .letsgo .start-btn.svelte-1bs37g6.svelte-1bs37g6:hover{color:#fff;box-shadow:inset #009688 0 0 0 5px;text-shadow:none;font-weight:bold;background:#009688}.buttons.svelte-1bs37g6 .letsgo .start-btn.svelte-1bs37g6:hover+.pika.svelte-1bs37g6{animation:svelte-1bs37g6-bounce 1s infinite}@keyframes svelte-1bs37g6-bounce{0%,20%,53%,80%,to{-webkit-animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-transform:translate3d(0, -30px, 0);transform:translate3d(0, -30px, 0)}40%,43%,70%{-webkit-animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06);animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06)}70%{-webkit-transform:translate3d(0, -15px, 0);transform:translate3d(0, -15px, 0)}90%{-webkit-transform:translate3d(0, -4px, 0);transform:translate3d(0, -4px, 0)}}#preview.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{display:flex;flex-wrap:wrap;justify-content:center}')}function vn(s){let e,t,n,i=!s[1]&&xt(s),r=s[1]&&St(s);return{c(){e=w("div"),i&&i.c(),t=q(),r&&r.c(),n=Zt(),m(e,"class","loading svelte-1bs37g6"),M(e,"ready",s[1])},m(o,l){A(o,e,l),i&&i.m(e,null),A(o,t,l),r&&r.m(o,l),A(o,n,l)},p(o,l){o[1]?i&&(i.d(1),i=null):i?i.p(o,l):(i=xt(o),i.c(),i.m(e,null)),l&2&&M(e,"ready",o[1]),o[1]?r?r.p(o,l):(r=St(o),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:L,o:L,d(o){o&&(C(e),C(t),C(n)),i&&i.d(),r&&r.d(o)}}}function mn(s){let e,t,n,i,r;function o(f){s[10](f)}function l(f){s[11](f)}function u(f){s[12](f)}let a={};return s[2]!==void 0&&(a.pokedex=s[2]),s[0]!==void 0&&(a.canvas=s[0]),s[4]!==void 0&&(a.character=s[4]),e=new Ht({props:a}),z.push(()=>G(e,"pokedex",o)),z.push(()=>G(e,"canvas",l)),z.push(()=>G(e,"character",u)),{c(){ke(e.$$.fragment)},m(f,d){de(e,f,d),r=!0},p(f,d){const h={};!t&&d&4&&(t=!0,h.pokedex=f[2],W(()=>t=!1)),!n&&d&1&&(n=!0,h.canvas=f[0],W(()=>n=!1)),!i&&d&16&&(i=!0,h.character=f[4],W(()=>i=!1)),e.$set(h)},i(f){r||(V(e.$$.fragment,f),r=!0)},o(f){Y(e.$$.fragment,f),r=!1},d(f){ue(e,f)}}}function xt(s){let e,t,n,i,r;return{c(){e=w("div"),t=q(),n=w("span"),n.textContent=`Gotta catch em all... ${s[8]}`,i=q(),r=w("div"),r.innerHTML="",m(e,"class","o-pokeball c-loader u-swing svelte-1bs37g6"),m(r,"id","preview"),m(r,"class","svelte-1bs37g6")},m(o,l){A(o,e,l),A(o,t,l),A(o,n,l),A(o,i,l),A(o,r,l),s[13](r)},p:L,d(o){o&&(C(e),C(t),C(n),C(i),C(r)),s[13](null)}}}function St(s){let e,t,n,i,r,o,l,u,a,f=s[7]&&wn(s);return{c(){e=w("div"),f&&f.c(),t=q(),n=w("div"),i=w("button"),i.textContent="New game!",r=q(),o=w("img"),m(i,"class","start-btn svelte-1bs37g6"),m(o,"class","pika svelte-1bs37g6"),m(o,"alt","pikachu"),At(o.src,l="src/assets/monsters/heartgold-soulsilver/25.png")||m(o,"src",l),m(n,"class","letsgo svelte-1bs37g6"),m(e,"class","buttons svelte-1bs37g6")},m(d,h){A(d,e,h),f&&f.m(e,null),g(e,t),g(e,n),g(n,i),g(n,r),g(n,o),u||(a=X(i,"click",s[15]),u=!0)},p(d,h){d[7]&&f.p(d,h)},d(d){d&&C(e),f&&f.d(),u=!1,a()}}}function wn(s){let e,t,n,i,r,o,l;return{c(){e=w("div"),t=w("button"),t.textContent="Continue!",n=q(),i=w("img"),m(t,"class","start-btn svelte-1bs37g6"),m(i,"class","pika svelte-1bs37g6"),m(i,"alt","Evoli"),At(i.src,r="src/assets/monsters/heartgold-soulsilver/133.png")||m(i,"src",r),m(e,"class","letsgo svelte-1bs37g6")},m(u,a){A(u,e,a),g(e,t),g(e,n),g(e,i),o||(l=X(t,"click",s[14]),o=!0)},p:L,d(u){u&&C(e),o=!1,l()}}}function yn(s){let e,t,n,i,r,o;const l=[mn,vn],u=[];function a(f,d){return f[1]&&f[5]?0:1}return t=a(s),n=u[t]=l[t](s),{c(){e=w("div"),n.c(),i=q(),r=w("canvas"),m(r,"class","svelte-1bs37g6"),m(e,"id","canvas-wrapper"),m(e,"class","svelte-1bs37g6")},m(f,d){A(f,e,d),u[t].m(e,null),g(e,i),g(e,r),s[16](r),s[17](e),o=!0},p(f,[d]){let h=t;t=a(f),t===h?u[t].p(f,d):(Ye(),Y(u[h],1,1,()=>{u[h]=null}),Je(),n=u[t],n?n.p(f,d):(n=u[t]=l[t](f),n.c()),V(n,1),n.m(e,i))},i(f){o||(V(n),o=!0)},o(f){Y(n),o=!1},d(f){f&&C(e),u[t].d(),s[16](null),s[17](null)}}}function _n(s,e,t){let{canvas:n}=e,i,r,{ready:o=!1}=e,l=!1,u,a,f,{pokedex:d=new rs}=e;fetch("src/assets/data/final/pokedex.json").then(v=>v.json()).then(v=>{d.importFromJson(v);let E=5,$=Date.now();for(;!d.ready&&Date.now()-$<E*1e3;)console.log("loading dex...");d.ready||(console.error("Pokedex not ready after "+E+" seconds"),window.location.reload()),h()});function h(){let v=new Image;v.src="src/assets/sprites/hero_male_front.png";let E=new Image;E.src="src/assets/sprites/hero_male_back.png";let $=new Image;$.src="src/assets/sprites/hero_male_left.png";let T=new Image;T.src="src/assets/sprites/hero_male_right.png";let Z=new Image;Z.src="src/assets/sprites/hero_male_back.png",Promise.all(Array.from([v,E,$,T,Z].filter(K=>!K.complete)).map(K=>new Promise(te=>{K.onload=K.onerror=te}))).then(()=>{var te,re;let K=(re=(te=d.findById(251))==null?void 0:te.result)==null?void 0:re.instanciate(5);if(!K)throw new Error("Could not find pokemon with id 251");K.isShiny=!0,t(4,r=new Rt("Kaiser","MALE",new is(v,E,$,T,Z),[K])),t(1,o=!0)})}function p(){t(5,l=!0)}function b(v){d=v,t(2,d)}function _(v){n=v,t(0,n)}function x(v){r=v,t(4,r)}function y(v){z[v?"unshift":"push"](()=>{f=v,t(6,f)})}const S=()=>p(),R=()=>p();function N(v){z[v?"unshift":"push"](()=>{n=v,t(0,n)})}function j(v){z[v?"unshift":"push"](()=>{i=v,t(3,i)})}return s.$$set=v=>{"canvas"in v&&t(0,n=v.canvas),"ready"in v&&t(1,o=v.ready),"pokedex"in v&&t(2,d=v.pokedex)},[n,o,d,i,r,l,f,u,a,p,b,_,x,y,S,R,N,j]}class kn extends be{constructor(e){super(),pe(this,e,_n,yn,fe,{canvas:0,ready:1,pokedex:2},bn)}get canvas(){return this.$$.ctx[0]}set canvas(e){this.$$set({canvas:e}),D()}get ready(){return this.$$.ctx[1]}set ready(e){this.$$set({ready:e}),D()}get pokedex(){return this.$$.ctx[2]}set pokedex(e){this.$$set({pokedex:e}),D()}}customElements.define("open-mon",ge(kn,{canvas:{},ready:{type:"Boolean"},pokedex:{}},[],[],!0));
