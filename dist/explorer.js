var rt=Object.defineProperty;var ot=(s,e,t)=>e in s?rt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var d=(s,e,t)=>(ot(s,typeof e!="symbol"?e+"":e,t),t);function T(){}function je(s){return s()}function Ce(){return Object.create(null)}function oe(s){s.forEach(je)}function Ge(s){return typeof s=="function"}function Y(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let be;function Re(s,e){return s===e?!0:(be||(be=document.createElement("a")),be.href=e,s===be.href)}function at(s){return Object.keys(s).length===0}function p(s,e){s.appendChild(e)}function ae(s,e,t){const n=lt(s);if(!n.getElementById(e)){const i=v("style");i.id=e,i.textContent=t,ct(n,i)}}function lt(s){if(!s)return document;const e=s.getRootNode?s.getRootNode():s.ownerDocument;return e&&e.host?e:s.ownerDocument}function ct(s,e){return p(s.head||s,e),e.sheet}function I(s,e,t){s.insertBefore(e,t||null)}function E(s){s.parentNode&&s.parentNode.removeChild(s)}function ut(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function v(s){return document.createElement(s)}function O(s){return document.createTextNode(s)}function P(){return O(" ")}function dt(){return O("")}function he(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function y(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function ht(s){return Array.from(s.childNodes)}function W(s,e){e=""+e,s.data!==e&&(s.data=e)}function U(s,e,t,n){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,n?"important":"")}function j(s,e,t){s.classList.toggle(e,!!t)}function ft(s){const e={};return s.childNodes.forEach(t=>{e[t.slot||"default"]=!0}),e}let Se;function de(s){Se=s}const ne=[],D=[];let ie=[];const _e=[],pt=Promise.resolve();let ke=!1;function bt(){ke||(ke=!0,pt.then(A))}function xe(s){ie.push(s)}function G(s){_e.push(s)}const ye=new Set;let se=0;function A(){if(se!==0)return;const s=Se;do{try{for(;se<ne.length;){const e=ne[se];se++,de(e),gt(e.$$)}}catch(e){throw ne.length=0,se=0,e}for(de(null),ne.length=0,se=0;D.length;)D.pop()();for(let e=0;e<ie.length;e+=1){const t=ie[e];ye.has(t)||(ye.add(t),t())}ie.length=0}while(ne.length);for(;_e.length;)_e.pop()();ke=!1,ye.clear(),de(s)}function gt(s){if(s.fragment!==null){s.update(),oe(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(xe)}}function mt(s){const e=[],t=[];ie.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),ie=e}const ge=new Set;let K;function $e(){K={r:0,c:[],p:K}}function Pe(){K.r||oe(K.c),K=K.p}function N(s,e){s&&s.i&&(ge.delete(s),s.i(e))}function Z(s,e,t,n){if(s&&s.o){if(ge.has(s))return;ge.add(s),K.c.push(()=>{ge.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}function Fe(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function R(s,e,t){const n=s.$$.props[e];n!==void 0&&(s.$$.bound[n]=t,t(s.$$.ctx[n]))}function re(s){s&&s.c()}function X(s,e,t){const{fragment:n,after_update:i}=s.$$;n&&n.m(e,t),xe(()=>{const o=s.$$.on_mount.map(je).filter(Ge);s.$$.on_destroy?s.$$.on_destroy.push(...o):oe(o),s.$$.on_mount=[]}),i.forEach(xe)}function V(s,e){const t=s.$$;t.fragment!==null&&(mt(t.after_update),oe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function yt(s,e){s.$$.dirty[0]===-1&&(ne.push(s),bt(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function Q(s,e,t,n,i,o,r=null,c=[-1]){const u=Se;de(s);const l=s.$$={fragment:null,ctx:[],props:o,update:T,not_equal:i,bound:Ce(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Ce(),dirty:c,skip_bound:!1,root:e.target||u.$$.root};r&&r(l.root);let a=!1;if(l.ctx=t?t(s,e.props||{},(h,f,..._)=>{const x=_.length?_[0]:f;return l.ctx&&i(l.ctx[h],l.ctx[h]=x)&&(!l.skip_bound&&l.bound[h]&&l.bound[h](x),a&&yt(s,h)),f}):[],l.update(),a=!0,oe(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){const h=ht(e.target);l.fragment&&l.fragment.l(h),h.forEach(E)}else l.fragment&&l.fragment.c();e.intro&&N(s.$$.fragment),X(s,e.target,e.anchor),A()}de(u)}let Ze;typeof HTMLElement=="function"&&(Ze=class extends HTMLElement{constructor(e,t,n){super();d(this,"$$ctor");d(this,"$$s");d(this,"$$c");d(this,"$$cn",!1);d(this,"$$d",{});d(this,"$$r",!1);d(this,"$$p_d",{});d(this,"$$l",{});d(this,"$$l_u",new Map);this.$$ctor=e,this.$$s=t,n&&this.attachShadow({mode:"open"})}addEventListener(e,t,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){const i=this.$$c.$on(e,t);this.$$l_u.set(t,i)}super.addEventListener(e,t,n)}removeEventListener(e,t,n){if(super.removeEventListener(e,t,n),this.$$c){const i=this.$$l_u.get(t);i&&(i(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(r){return()=>{let c;return{c:function(){c=v("slot"),r!=="default"&&y(c,"name",r)},m:function(a,h){I(a,c,h)},d:function(a){a&&E(c)}}}};var e=t;if(await Promise.resolve(),!this.$$cn)return;const n={},i=ft(this);for(const r of this.$$s)r in i&&(n[r]=[t(r)]);for(const r of this.attributes){const c=this.$$g_p(r.name);c in this.$$d||(this.$$d[c]=me(c,r.value,this.$$p_d,"toProp"))}for(const r in this.$$p_d)!(r in this.$$d)&&this[r]!==void 0&&(this.$$d[r]=this[r],delete this[r]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:n,$$scope:{ctx:[]}}});const o=()=>{this.$$r=!0;for(const r in this.$$p_d)if(this.$$d[r]=this.$$c.$$.ctx[this.$$c.$$.props[r]],this.$$p_d[r].reflect){const c=me(r,this.$$d[r],this.$$p_d,"toAttribute");c==null?this.removeAttribute(this.$$p_d[r].attribute||r):this.setAttribute(this.$$p_d[r].attribute||r,c)}this.$$r=!1};this.$$c.$$.after_update.push(o),o();for(const r in this.$$l)for(const c of this.$$l[r]){const u=this.$$c.$on(r,c);this.$$l_u.set(c,u)}this.$$l={}}}attributeChangedCallback(e,t,n){var i;this.$$r||(e=this.$$g_p(e),this.$$d[e]=me(e,n,this.$$p_d,"toProp"),(i=this.$$c)==null||i.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e)||e}});function me(s,e,t,n){var o;const i=(o=t[s])==null?void 0:o.type;if(e=i==="Boolean"&&typeof e!="boolean"?e!=null:e,!n||!t[s])return e;if(n==="toAttribute")switch(i){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(i){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function ee(s,e,t,n,i,o){let r=class extends Ze{constructor(){super(s,t,i),this.$$p_d=e}static get observedAttributes(){return Object.keys(e).map(c=>(e[c].attribute||c).toLowerCase())}};return Object.keys(e).forEach(c=>{Object.defineProperty(r.prototype,c,{get(){return this.$$c&&c in this.$$c?this.$$c[c]:this.$$d[c]},set(u){var l;u=me(c,u,e),this.$$d[c]=u,(l=this.$$c)==null||l.$set({[c]:u})}})}),n.forEach(c=>{Object.defineProperty(r.prototype,c,{get(){var u;return(u=this.$$c)==null?void 0:u[c]}})}),o&&(r=o(r)),s.element=r,r}class te{constructor(){d(this,"$$");d(this,"$$set")}$destroy(){V(this,1),this.$destroy=T}$on(e,t){if(!Ge(t))return T;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!at(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const vt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(vt);class B{constructor(e,t){d(this,"x");d(this,"y");this.x=e,this.y=t}}class wt{constructor(e,t,n,i=[]){d(this,"name");d(this,"gender");d(this,"sprites");d(this,"monsters");d(this,"bag",[]);d(this,"lvl",1);d(this,"moving",!1);d(this,"direction","down");d(this,"position");d(this,"frames");d(this,"spriteScale",1);this.name=e,this.gender=t,this.sprites=n,this.monsters=i,this.frames={max:3,val:0,elapsed:0},this.position=new B(0,0)}get sprite(){return this.sprites[this.direction]}draw(e){let t=this.sprite||this.sprites.down;e.drawImage(t,this.frames.val*(t.width/this.frames.max),0,t.width/this.frames.max,t.height,this.position.x,this.position.y,t.width/this.frames.max*3,t.height*3),this.moving&&(this.frames.max>1&&(this.frames.elapsed+=1),this.frames.elapsed%2===0&&(this.frames.val+=1,this.frames.val>this.frames.max-1&&(this.frames.val=0)))}}const L={up:{pressed:!1},down:{pressed:!1},left:{pressed:!1},right:{pressed:!1}};let J="";function Ie(){return s=>{switch(s.key){case"ArrowDown":L.down.pressed=!1;break;case"ArrowUp":L.up.pressed=!1;break;case"ArrowRight":L.right.pressed=!1;break;case"ArrowLeft":L.left.pressed=!1;break}}}function ze(){return s=>{switch(s.key){case"ArrowDown":J="ArrowDown",L.down.pressed=!0;break;case"ArrowUp":J="ArrowUp",L.up.pressed=!0;break;case"ArrowRight":J="ArrowRight",L.right.pressed=!0;break;case"ArrowLeft":J="ArrowLeft",L.left.pressed=!0;break}}}class fe{constructor(e,t,n,i,o,r,c,u,l){d(this,"id");d(this,"name");d(this,"types");d(this,"abilities");d(this,"baseStats");d(this,"ivs");d(this,"evs");d(this,"evolution");d(this,"currentStats");d(this,"currentHp",0);d(this,"currentXp",0);d(this,"xpToNextLevel",0);d(this,"currentAbility");d(this,"level",1);d(this,"evsToDistribute",0);d(this,"fainted");d(this,"moves");d(this,"isShiny",!1);d(this,"sprites");d(this,"position");d(this,"currentImage");d(this,"currentImage2");d(this,"height",0);d(this,"spriteScale",1);d(this,"frames",{max:2,val:0,elapsed:0});this.id=e,this.name=t,this.types=n,this.abilities=i,this.baseStats=o,this.evolution=r,this.fainted=!1,this.ivs=new ve,this.evs=new ve,this.currentStats=this.fromBaseStats(),this.currentAbility=u||this.abilities[0],this.moves=l||[],this.sprites=c,this.position=new B(0,0)}get totalEvs(){return this.evs.attack+this.evs.defense+this.evs.specialAttack+this.evs.specialDefense+this.evs.speed+this.evs.HP}selectMove(e,t){let n=Math.floor(Math.random()*this.moves.length),i=this.moves[n];return e==="Easy"&&t&&((t==null?void 0:t.types.length)===2?this.moves.find(r=>r.type===t.types[0]&&r.power>0):this.moves.find(r=>(r.type===t.types[0]||r.type===t.types[1])&&r.power>0)),i}levelUp(){let e=this.currentStats.HP;this.level+=1,console.log(this.currentStats),this.currentStats=this.fromBaseStats(),console.log(this.currentStats),e=this.currentStats.HP-e,this.currentHp+=e,this.checkForNewMoves(),this.checkForEvolutions()}addXp(e,t){if(this.evsToDistribute+=this.totalEvs+t<=255?t:this.totalEvs+t-255,!(this.level>=100)){if(this.xpToNextLevel<e){const n=e-this.xpToNextLevel,i=e-n;this.currentXp+=i}else this.currentXp+=e;this.currentXp>=this.xpToNextLevel&&this.levelUp()}}draw(e,t="front"){var o;this.isShiny&&(t="shiny"),this.currentImage||(this.currentImage=new Image,this.currentImage.src=this.sprites[t]),this.currentImage2||(this.currentImage2=new Image,this.currentImage2.src=this.sprites.front2),this.frames.elapsed>=100&&(this.frames.elapsed=0);let n=t==="front"&&this.currentImage.complete&&((o=this.currentImage2)==null?void 0:o.complete)||t!=="front"&&this.currentImage.complete,i=t!=="front"?this.currentImage:this.frames.elapsed<50?this.currentImage:this.currentImage2;n&&(this.frames.elapsed++,e.drawImage(i,0,0,this.sprites.width,this.sprites.height,this.position.x,this.position.y,this.sprites.width*this.spriteScale*2.5,this.sprites.height*this.spriteScale*2.5))}checkForNewMoves(){}checkForEvolutions(){this.evolution&&this.level>=this.evolution.level&&this.evolve()}evolve(){this.id++;const t=(localStorage.getItem("pokedex")&&JSON.parse(localStorage.getItem("pokedex")||"[]")||[]).find(n=>n.id===this.id);t&&(Object.setPrototypeOf(t,fe.prototype),this.baseStats=t.baseStats,this.currentStats=this.fromBaseStats(),this.sprites=t.sprites,this.currentImage=void 0,this.currentImage2=void 0,this.spriteScale=t.spriteScale,this.height=t.height)}addEvs(e){if(e){let t=this.totalEvs;this.evs.HP+=this.evs.HP+e.HP<=255&&t+e.HP<512?e.HP:0,this.evs.attack+=this.evs.attack+e.attack<=255&&t+e.attack<512?e.attack:0,this.evs.defense+=this.evs.defense+e.defense<=255&&t+e.defense<512?e.defense:0,this.evs.specialAttack+=this.evs.specialAttack+e.specialAttack<=255&&t+e.specialAttack<512?e.specialAttack:0,this.evs.specialDefense+=this.evs.specialDefense+e.specialDefense<=255&&t+e.specialDefense<512?e.specialDefense:0,this.evs.speed+=this.evs.speed+e.speed<=255&&t+e.speed<512?e.speed:0}}fromBaseStats(){debugger;return new ve((this.baseStats.HP*2+this.ivs.HP+this.evs.HP/4+100)*this.level/100+10,(this.baseStats.attack*2+this.ivs.attack+this.evs.attack/4)*this.level/100+5,(this.baseStats.defense*2+this.ivs.defense+this.evs.defense/4)*this.level/100+5,(this.baseStats.specialAttack*2+this.ivs.specialAttack+this.evs.specialAttack/4)*this.level/100+5,(this.baseStats.specialDefense*2+this.ivs.specialDefense+this.evs.specialDefense/4)*this.level/100+5,(this.baseStats.speed*2+this.ivs.speed+this.evs.speed/4)*this.level/100+5)}}class ve{constructor(e,t,n,i,o,r){d(this,"HP");d(this,"attack");d(this,"defense");d(this,"specialAttack");d(this,"specialDefense");d(this,"speed");this.HP=e||1,this.attack=t||1,this.defense=n||1,this.specialAttack=i||1,this.specialDefense=o||1,this.speed=r||1}}class _t{constructor(e,t,n,i){d(this,"front");d(this,"front2");d(this,"back");d(this,"shiny");d(this,"width",80);d(this,"height",80);this.front=e,this.front2=t,this.back=n,this.shiny=i}}class kt{constructor(e,t,n,i,o,r,c,u,l,a){d(this,"name");d(this,"type");d(this,"category");d(this,"power");d(this,"accuracy");d(this,"pp");d(this,"priority");d(this,"effect");d(this,"effectChance");d(this,"description");this.name=e,this.type=t,this.category=n,this.power=i,this.accuracy=o,this.pp=r,this.priority=c,this.effect=u,this.effectChance=l,this.description=a}}class xt{constructor(e,t,n){d(this,"player");d(this,"playerCurrentMonster");d(this,"opponent");d(this,"opponentCurrentMonster");d(this,"isPlayerTurn",!1);d(this,"turnStack");d(this,"initialOpponentPosition");d(this,"initialAllyPosition");d(this,"onClose",()=>{});d(this,"currentMessage","What will you do ?");var i,o;this.player=e,this.opponent=t,this.playerCurrentMonster=e.monsters[0],this.opponentCurrentMonster=this.wild?t:t.monsters[0],this.turnStack=[],this.isPlayerTurn=this.playerCurrentMonster.currentStats.speed>=this.opponentCurrentMonster.currentStats.speed,this.initialOpponentPosition=new B(n.width/4*3-(t==null?void 0:t.sprites.width)*2.5*(t==null?void 0:t.spriteScale)/2,n.height/2-(t==null?void 0:t.sprites.height)*2.5*(t==null?void 0:t.spriteScale)-12*2.5),this.initialAllyPosition=new B(n.width/4-((i=this.playerCurrentMonster)==null?void 0:i.sprites.width)*2.5*this.playerCurrentMonster.spriteScale/2,n.height*.75-((o=this.playerCurrentMonster)==null?void 0:o.sprites.height)*2.5*this.playerCurrentMonster.spriteScale+15*2.5),this.playerCurrentMonster.position=this.initialAllyPosition,this.opponentCurrentMonster.position=this.initialOpponentPosition}get wild(){return this.opponent instanceof fe}selectAction(e){this.turnStack.push(e),this.isPlayerTurn=!this.isPlayerTurn,this.selectOpponentAction()}resolveStack(){console.log("resolving stack"),this.turnStack.forEach(e=>{e instanceof Oe?this.attack(e):e instanceof St||e instanceof qe&&this.runAway()}),this.turnStack=[],this.isPlayerTurn=!this.isPlayerTurn}runAway(){if(console.log("executing runaway"),this.wild){const e=Math.random()*255;Math.floor(this.opponentCurrentMonster.currentStats.speed*128/this.playerCurrentMonster.currentStats.speed)+30*e>255?(this.currentMessage="Got away safely!",setTimeout(()=>{this.onClose()},1e3)):this.currentMessage="Failed to run away!"}else this.currentMessage="You can't run away from a trainer battle!"}attack(e){const t=e.target==="opponent"?this.playerCurrentMonster:this.opponentCurrentMonster,n=e.target==="opponent"?this.opponentCurrentMonster:this.playerCurrentMonster,i=this.calculateDamage(t,n,e.move);console.log(i),n.currentStats.HP-=i,n.currentStats.HP<=0&&(n.currentStats.HP=0,n.fainted=!0)}calculateDamage(e,t,n){debugger;if(n.category!=="Status"){const i=n.category==="Physical"?e.currentStats.attack:e.currentStats.specialAttack,o=n.category==="Physical"?t.currentStats.defense:t.currentStats.specialDefense,r=this.calculateModifier(e,t,n);return Math.floor(((2*e.level/5+2)*n.power*i/o/50+2)*r)}return 0}calculateModifier(e,t,n){const i=this.calculateTypeEffectiveness(n.type,t.types),o=this.calculateCritical(),r=Math.random()*(1-.85)+.85,c=this.calculateStab(e,n);return i*o*r*c*1}calculateTypeEffectiveness(e,t){return t.reduce((n,i)=>{const o=Mt(e,i);return n*o},1)}calculateCritical(){return Math.random()<.0625?1.5:1}calculateStab(e,t){return e.types.includes(t.type)?1.5:1}selectOpponentAction(){const e=this.opponentCurrentMonster.selectMove("Easy");this.turnStack.push(new Oe("Attack","Attack",e,"ally")),this.resolveStack()}}class qe{constructor(){d(this,"description");d(this,"name");this.name="Run Away",this.description="Run away from the battle"}}class St{constructor(e){d(this,"description");d(this,"name");d(this,"targetIdx");this.name="Change Pokemon",this.description="Change the current pokemon",this.targetIdx=e}}class Oe{constructor(e,t,n,i){d(this,"name");d(this,"description");d(this,"move");d(this,"target");this.name=e,this.description=t,this.move=n,this.target=i}}class $t{constructor(e,t){d(this,"position");d(this,"image");d(this,"width",0);d(this,"height",0);this.position=e,this.image=t,this.image.onload=()=>{this.width=this.image.width,this.height=this.image.height}}draw(e,t){e.drawImage(this.image,0,0,this.image.width,this.image.height,0,0,t.width,t.height*.75)}}const We=new Image;We.src="src/assets/battle/battle-grass.png";const Pt=new $t(new B(0,0),We);function Mt(s,e){const t=At.find(n=>n.name===s);return t?t.immunes.includes(e)?0:t.weaknesses.includes(e)?2:t.strengths.includes(e)?.5:1:0}const At=[{name:"Normal",immunes:["Ghost"],weaknesses:["Rock","Steel"],strengths:[]},{name:"Fire",immunes:[],weaknesses:["Fire","Water","Rock","Dragon"],strengths:["Grass","Ice","Bug","Steel"]},{name:"Water",immunes:[],weaknesses:["Water","Grass","Dragon"],strengths:["Fire","Ground","Rock"]},{name:"Electric",immunes:["Ground"],weaknesses:["Electric","Grass","Dragon"],strengths:["Water","Flying"]},{name:"Grass",immunes:[],weaknesses:["Fire","Grass","Poison","Flying","Bug","Dragon","Steel"],strengths:["Water","Ground","Rock"]},{name:"Ice",immunes:[],weaknesses:["Fire","Water","Ice","Steel"],strengths:["Grass","Ground","Flying","Dragon"]},{name:"Fighting",immunes:["Ghost"],weaknesses:["Poison","Flying","Psychic","Bug","Fairy"],strengths:["Normal","Ice","Rock","Dark","Steel"]},{name:"Poison",immunes:["Steel"],weaknesses:["Poison","Ground","Rock","Ghost"],strengths:["Grass","Fairy"]},{name:"Ground",immunes:["Flying"],weaknesses:["Grass","Bug"],strengths:["Fire","Electric","Poison","Rock","Steel"]},{name:"Flying",immunes:[],weaknesses:["Electric","Rock","Steel"],strengths:["Grass","Fighting","Bug"]},{name:"Psychic",immunes:["Dark"],weaknesses:["Psychic","Steel"],strengths:["Fighting","Poison"]},{name:"Bug",immunes:[],weaknesses:["Fire","Fighting","Poison","Flying","Ghost","Steel","Fairy"],strengths:["Grass","Psychic","Dark"]},{name:"Rock",immunes:[],weaknesses:["Fighting","Ground","Steel"],strengths:["Fire","Ice","Flying","Bug"]},{name:"Ghost",immunes:["Normal"],weaknesses:["Dark"],strengths:["Psychic","Ghost"]},{name:"Dragon",immunes:["Fairy"],weaknesses:["Steel"],strengths:["Dragon"]},{name:"Dark",immunes:[],weaknesses:["Fighting","Dark","Fairy"],strengths:["Psychic","Ghost"]},{name:"Steel",immunes:[],weaknesses:["Fire","Water","Electric","Steel"],strengths:["Ice","Rock","Fairy"]},{name:"Fairy",immunes:[],weaknesses:["Fire","Poison","Steel"],strengths:["Fighting","Dragon","Dark"]}];function Et(s){ae(s,"svelte-1g06i6b",".ally-info.svelte-1g06i6b.svelte-1g06i6b{opacity:0;visibility:hidden;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;bottom:26dvh;right:-30dvw;transition:right 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly}.ally-info.opened.svelte-1g06i6b.svelte-1g06i6b{opacity:1;visibility:visible;right:1dvw}.ally-info.svelte-1g06i6b .name-lvl.svelte-1g06i6b{display:flex;justify-content:space-between;align-items:center;font-size:46px}.ally-info.svelte-1g06i6b .status.svelte-1g06i6b{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.ally-info.svelte-1g06i6b .hp.svelte-1g06i6b{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.ally-info.svelte-1g06i6b .hp span.svelte-1g06i6b{padding:0 0 0 12px;font-weight:bold}.ally-info.svelte-1g06i6b .hp .progressbar-wrapper.svelte-1g06i6b{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.ally-info.svelte-1g06i6b .hp .progressbar-wrapper .progressbar.svelte-1g06i6b{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px}")}function Ct(s){let e,t,n,i=s[1].name+"",o,r,c,u,l=s[1].level+"",a,h,f,_,x,z,C,M,m,g=s[1].currentHp+"",$,F,b=s[1].currentStats.HP+"",k;return{c(){e=v("div"),t=v("div"),n=v("span"),o=O(i),r=P(),c=v("span"),u=O("Lv "),a=O(l),h=P(),f=v("div"),_=v("div"),x=v("span"),x.textContent="HP",z=P(),C=v("div"),M=v("div"),m=P(),$=O(g),F=O(" / "),k=O(b),y(n,"class","svelte-1g06i6b"),y(c,"class","svelte-1g06i6b"),y(t,"class","name-lvl svelte-1g06i6b"),y(x,"class","svelte-1g06i6b"),y(M,"class","progressbar svelte-1g06i6b"),U(M,"--width",s[2]+"%"),y(C,"class","progressbar-wrapper svelte-1g06i6b"),y(_,"class","hp svelte-1g06i6b"),y(f,"class","status svelte-1g06i6b"),y(e,"class","ally-info svelte-1g06i6b"),j(e,"opened",s[0])},m(S,H){I(S,e,H),p(e,t),p(t,n),p(n,o),p(t,r),p(t,c),p(c,u),p(c,a),p(e,h),p(e,f),p(f,_),p(_,x),p(_,z),p(_,C),p(C,M),p(f,m),p(f,$),p(f,F),p(f,k)},p(S,[H]){H&2&&i!==(i=S[1].name+"")&&W(o,i),H&2&&l!==(l=S[1].level+"")&&W(a,l),H&4&&U(M,"--width",S[2]+"%"),H&2&&g!==(g=S[1].currentHp+"")&&W($,g),H&2&&b!==(b=S[1].currentStats.HP+"")&&W(k,b),H&1&&j(e,"opened",S[0])},i:T,o:T,d(S){S&&E(e)}}}function Ft(s,e,t){let n,{opened:i}=e,{monster:o}=e;return s.$$set=r=>{"opened"in r&&t(0,i=r.opened),"monster"in r&&t(1,o=r.monster)},s.$$.update=()=>{s.$$.dirty&2&&t(2,n=o.currentHp*100/o.currentStats.HP)},[i,o,n]}class Ue extends te{constructor(e){super(),Q(this,e,Ft,Ct,Y,{opened:0,monster:1},Et)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),A()}get monster(){return this.$$.ctx[1]}set monster(e){this.$$set({monster:e}),A()}}ee(Ue,{opened:{},monster:{}},[],[],!0);function It(s){ae(s,"svelte-1e417u5",".action-bar.svelte-1e417u5.svelte-1e417u5{opacity:0;visibility:hidden;background-color:white;height:25dvh;width:100dvw;position:absolute;bottom:-25dvh;left:0;transition:bottom 0.5s ease-in-out;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;display:flex}.action-bar.opened.svelte-1e417u5.svelte-1e417u5{opacity:1;visibility:visible;bottom:0}.action-bar.svelte-1e417u5 .info.svelte-1e417u5{width:50%;height:100%;font-size:64px;display:flex;align-items:center;align-content:center;justify-content:space-around;position:relative}.action-bar.svelte-1e417u5 .info ._inner.svelte-1e417u5{position:absolute;left:17px;z-index:1;height:calc(100% - 55px);border:10px solid black;border-radius:10px;display:flex;align-items:center;justify-content:center;width:100%;text-transform:capitalize}.action-bar.svelte-1e417u5 .actions.svelte-1e417u5{width:50%;height:100%;display:flex;background:#FFFFFF;border:14px solid #595b59;border-radius:8px;box-sizing:border-box;padding:12px;z-index:2;flex-wrap:wrap;gap:12px}.action-btn.svelte-1e417u5.svelte-1e417u5{background-color:var(--color);font-size:64px;color:white;border-radius:24px;border:6px solid #595b59;font-family:pokemon, serif;transition:color 0.3s ease-in-out, opacity 0.3s ease-in-out;flex:49%}.action-btn.svelte-1e417u5.svelte-1e417u5:hover{cursor:pointer;opacity:0.96;color:#262626}@media(max-width: 1280px){.action-btn.svelte-1e417u5.svelte-1e417u5{font-size:48px;flex:30%}}")}function Te(s,e,t){const n=s.slice();return n[6]=e[t],n}function zt(s){return{c:T,m:T,p:T,d:T}}function Ot(s){var n;let e=((n=s[1])==null?void 0:n.currentMessage)+"",t;return{c(){t=O(e)},m(i,o){I(i,t,o)},p(i,o){var r;o&2&&e!==(e=((r=i[1])==null?void 0:r.currentMessage)+"")&&W(t,e)},d(i){i&&E(t)}}}function Tt(s){let e,t,n,i,o,r,c,u,l,a,h,f,_,x,z,C,M,m;return{c(){var g,$,F,b;e=v("div"),t=v("button"),n=O("FIGHT"),o=P(),r=v("button"),c=O("BAG"),l=P(),a=v("button"),h=O("POKEMONS"),_=P(),x=v("button"),z=O("RUN"),y(t,"class","action-btn svelte-1e417u5"),U(t,"--color","#dc5959"),t.disabled=i=!((g=s[1])!=null&&g.isPlayerTurn),y(r,"class","action-btn svelte-1e417u5"),U(r,"--color","#eca859"),r.disabled=u=!(($=s[1])!=null&&$.isPlayerTurn),y(a,"class","action-btn svelte-1e417u5"),U(a,"--color","#7EAF53"),a.disabled=f=!((F=s[1])!=null&&F.isPlayerTurn),y(x,"class","action-btn svelte-1e417u5"),U(x,"--color","#599bdc"),x.disabled=C=!((b=s[1])!=null&&b.isPlayerTurn),y(e,"class","actions svelte-1e417u5")},m(g,$){I(g,e,$),p(e,t),p(t,n),p(e,o),p(e,r),p(r,c),p(e,l),p(e,a),p(a,h),p(e,_),p(e,x),p(x,z),M||(m=[he(t,"click",s[3]),he(x,"click",s[4])],M=!0)},p(g,$){var F,b,k,S;$&2&&i!==(i=!((F=g[1])!=null&&F.isPlayerTurn))&&(t.disabled=i),$&2&&u!==(u=!((b=g[1])!=null&&b.isPlayerTurn))&&(r.disabled=u),$&2&&f!==(f=!((k=g[1])!=null&&k.isPlayerTurn))&&(a.disabled=f),$&2&&C!==(C=!((S=g[1])!=null&&S.isPlayerTurn))&&(x.disabled=C)},d(g){g&&E(e),M=!1,oe(m)}}}function Bt(s){let e,t=Fe(s[1].playerPokemon.moves),n=[];for(let i=0;i<t.length;i+=1)n[i]=Be(Te(s,t,i));return{c(){e=v("div");for(let i=0;i<n.length;i+=1)n[i].c();y(e,"class","moves")},m(i,o){I(i,e,o);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(i,o){if(o&2){t=Fe(i[1].playerPokemon.moves);let r;for(r=0;r<t.length;r+=1){const c=Te(i,t,r);n[r]?n[r].p(c,o):(n[r]=Be(c),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(i){i&&E(e),ut(n,i)}}}function Be(s){let e,t=s[6].name+"",n,i,o,r,c;function u(){return s[5](s[6])}return{c(){var l;e=v("button"),n=O(t),i=P(),y(e,"class","action-btn svelte-1e417u5"),U(e,"--color","#dc5959"),e.disabled=o=!((l=s[1])!=null&&l.isPlayerTurn)},m(l,a){I(l,e,a),p(e,n),p(e,i),r||(c=he(e,"click",u),r=!0)},p(l,a){var h;s=l,a&2&&t!==(t=s[6].name+"")&&W(n,t),a&2&&o!==(o=!((h=s[1])!=null&&h.isPlayerTurn))&&(e.disabled=o)},d(l){l&&E(e),r=!1,c()}}}function Dt(s){let e,t,n,i;function o(h,f){return h[2]?zt:Ot}let r=o(s),c=r(s);function u(h,f){return h[2]?Bt:Tt}let l=u(s),a=l(s);return{c(){e=v("div"),t=v("div"),n=v("div"),c.c(),i=P(),a.c(),y(n,"class","_inner svelte-1e417u5"),y(t,"class","info svelte-1e417u5"),y(e,"class","action-bar svelte-1e417u5"),j(e,"opened",s[0])},m(h,f){I(h,e,f),p(e,t),p(t,n),c.m(n,null),p(e,i),a.m(e,null)},p(h,[f]){r===(r=o(h))&&c?c.p(h,f):(c.d(1),c=r(h),c&&(c.c(),c.m(n,null))),l===(l=u(h))&&a?a.p(h,f):(a.d(1),a=l(h),a&&(a.c(),a.m(e,null))),f&1&&j(e,"opened",h[0])},i:T,o:T,d(h){h&&E(e),c.d(),a.d()}}}function Lt(s,e,t){let{opened:n}=e,i=!1,{battleState:o}=e;console.log(o);function r(){t(2,i=!i)}function c(){console.log(o),o.selectAction(new qe)}const u=l=>o.selectAction(l);return s.$$set=l=>{"opened"in l&&t(0,n=l.opened),"battleState"in l&&t(1,o=l.battleState)},[n,o,i,r,c,u]}class Je extends te{constructor(e){super(),Q(this,e,Lt,Dt,Y,{opened:0,battleState:1},It)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),A()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),A()}}ee(Je,{opened:{},battleState:{}},[],[],!0);function Ht(s){ae(s,"svelte-v8z2l8",".enemy-info.svelte-v8z2l8.svelte-v8z2l8{opacity:0;visibility:hidden;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;top:2dvh;left:-30dvw;transition:left 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly}.enemy-info.opened.svelte-v8z2l8.svelte-v8z2l8{opacity:1;visibility:visible;left:1dvw}.enemy-info.svelte-v8z2l8 .name-lvl.svelte-v8z2l8{display:flex;justify-content:space-between;align-items:center;font-size:46px}.enemy-info.svelte-v8z2l8 .status.svelte-v8z2l8{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.enemy-info.svelte-v8z2l8 .hp.svelte-v8z2l8{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.enemy-info.svelte-v8z2l8 .hp span.svelte-v8z2l8{padding:0 0 0 12px;font-weight:bold}.enemy-info.svelte-v8z2l8 .hp .progressbar-wrapper.svelte-v8z2l8{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.enemy-info.svelte-v8z2l8 .hp .progressbar-wrapper .progressbar.svelte-v8z2l8{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px}")}function Nt(s){let e,t,n,i=s[1].name+"",o,r,c,u,l=s[1].level+"",a,h,f,_,x,z,C,M;return{c(){e=v("div"),t=v("div"),n=v("span"),o=O(i),r=P(),c=v("span"),u=O("Lv "),a=O(l),h=P(),f=v("div"),_=v("div"),x=v("span"),x.textContent="HP",z=P(),C=v("div"),M=v("div"),y(n,"class","svelte-v8z2l8"),y(c,"class","svelte-v8z2l8"),y(t,"class","name-lvl svelte-v8z2l8"),y(x,"class","svelte-v8z2l8"),y(M,"class","progressbar svelte-v8z2l8"),U(M,"--width",s[2]+"%"),y(C,"class","progressbar-wrapper svelte-v8z2l8"),y(_,"class","hp svelte-v8z2l8"),y(f,"class","status svelte-v8z2l8"),y(e,"class","enemy-info svelte-v8z2l8"),j(e,"opened",s[0])},m(m,g){I(m,e,g),p(e,t),p(t,n),p(n,o),p(t,r),p(t,c),p(c,u),p(c,a),p(e,h),p(e,f),p(f,_),p(_,x),p(_,z),p(_,C),p(C,M)},p(m,[g]){g&2&&i!==(i=m[1].name+"")&&W(o,i),g&2&&l!==(l=m[1].level+"")&&W(a,l),g&4&&U(M,"--width",m[2]+"%"),g&1&&j(e,"opened",m[0])},i:T,o:T,d(m){m&&E(e)}}}function jt(s,e,t){let n,{opened:i}=e,{monster:o}=e;return s.$$set=r=>{"opened"in r&&t(0,i=r.opened),"monster"in r&&t(1,o=r.monster)},s.$$.update=()=>{s.$$.dirty&2&&t(2,n=o.currentHp*100/o.currentStats.HP)},[i,o,n]}class Ke extends te{constructor(e){super(),Q(this,e,jt,Nt,Y,{opened:0,monster:1},Ht)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),A()}get monster(){return this.$$.ctx[1]}set monster(e){this.$$set({monster:e}),A()}}ee(Ke,{opened:{},monster:{}},[],[],!0);function Gt(s){ae(s,"svelte-hx8zpy",".battleStart.svelte-hx8zpy{opacity:0;visibility:hidden;background:#000000;height:100dvh;width:100dvw;position:absolute;top:0;left:0;transition:opacity 0.5s ease-in-out;z-index:2}.battleStart.animate.svelte-hx8zpy{visibility:visible;animation:svelte-hx8zpy-animate 2s ease-in-out}.battleStart.hide.svelte-hx8zpy{visibility:hidden;opacity:0}@keyframes svelte-hx8zpy-animate{0%{opacity:1}20%{opacity:0}40%{opacity:1}60%{opacity:0}80%{opacity:1}100%{opacity:0}}")}function De(s){let e,t,n,i,o,r,c,u,l,a,h,f;function _(b){s[3](b)}function x(b){s[4](b)}let z={};s[0]!==void 0&&(z.opened=s[0]),s[1]!==void 0&&(z.battleState=s[1]),e=new Je({props:z}),D.push(()=>R(e,"opened",_)),D.push(()=>R(e,"battleState",x));function C(b){s[5](b)}function M(b){s[6](b)}let m={};s[0]!==void 0&&(m.opened=s[0]),s[1].playerCurrentMonster!==void 0&&(m.monster=s[1].playerCurrentMonster),o=new Ue({props:m}),D.push(()=>R(o,"opened",C)),D.push(()=>R(o,"monster",M));function g(b){s[7](b)}function $(b){s[8](b)}let F={};return s[0]!==void 0&&(F.opened=s[0]),s[1].opponentCurrentMonster!==void 0&&(F.monster=s[1].opponentCurrentMonster),l=new Ke({props:F}),D.push(()=>R(l,"opened",g)),D.push(()=>R(l,"monster",$)),{c(){re(e.$$.fragment),i=P(),re(o.$$.fragment),u=P(),re(l.$$.fragment)},m(b,k){X(e,b,k),I(b,i,k),X(o,b,k),I(b,u,k),X(l,b,k),f=!0},p(b,k){const S={};!t&&k&1&&(t=!0,S.opened=b[0],G(()=>t=!1)),!n&&k&2&&(n=!0,S.battleState=b[1],G(()=>n=!1)),e.$set(S);const H={};!r&&k&1&&(r=!0,H.opened=b[0],G(()=>r=!1)),!c&&k&2&&(c=!0,H.monster=b[1].playerCurrentMonster,G(()=>c=!1)),o.$set(H);const le={};!a&&k&1&&(a=!0,le.opened=b[0],G(()=>a=!1)),!h&&k&2&&(h=!0,le.monster=b[1].opponentCurrentMonster,G(()=>h=!1)),l.$set(le)},i(b){f||(N(e.$$.fragment,b),N(o.$$.fragment,b),N(l.$$.fragment,b),f=!0)},o(b){Z(e.$$.fragment,b),Z(o.$$.fragment,b),Z(l.$$.fragment,b),f=!1},d(b){b&&(E(i),E(u)),V(e,b),V(o,b),V(l,b)}}}function Rt(s){let e,t,n,i=s[1]&&De(s);return{c(){i&&i.c(),e=P(),t=v("div"),t.innerHTML="",y(t,"class","battleStart svelte-hx8zpy"),j(t,"hide",s[0]),j(t,"animate",s[2])},m(o,r){i&&i.m(o,r),I(o,e,r),I(o,t,r),n=!0},p(o,[r]){o[1]?i?(i.p(o,r),r&2&&N(i,1)):(i=De(o),i.c(),N(i,1),i.m(e.parentNode,e)):i&&($e(),Z(i,1,1,()=>{i=null}),Pe()),(!n||r&1)&&j(t,"hide",o[0]),(!n||r&4)&&j(t,"animate",o[2])},i(o){n||(N(i),n=!0)},o(o){Z(i),n=!1},d(o){o&&(E(e),E(t)),i&&i.d(o)}}}function Zt(s,e,t){let{opened:n}=e,{battleStart:i}=e,{battleState:o}=e;function r(f){n=f,t(0,n)}function c(f){o=f,t(1,o)}function u(f){n=f,t(0,n)}function l(f){s.$$.not_equal(o.playerCurrentMonster,f)&&(o.playerCurrentMonster=f,t(1,o))}function a(f){n=f,t(0,n)}function h(f){s.$$.not_equal(o.opponentCurrentMonster,f)&&(o.opponentCurrentMonster=f,t(1,o))}return s.$$set=f=>{"opened"in f&&t(0,n=f.opened),"battleStart"in f&&t(2,i=f.battleStart),"battleState"in f&&t(1,o=f.battleState)},[n,o,i,r,c,u,l,a,h]}class Xe extends te{constructor(e){super(),Q(this,e,Zt,Rt,Y,{opened:0,battleStart:2,battleState:1},Gt)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),A()}get battleStart(){return this.$$.ctx[2]}set battleStart(e){this.$$set({battleStart:e}),A()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),A()}}ee(Xe,{opened:{},battleStart:{},battleState:{}},[],[],!0);function qt(s){ae(s,"svelte-1cbbcxy",'.menu.svelte-1cbbcxy.svelte-1cbbcxy{position:absolute;top:0;right:-20dvw;width:20dvw;font-size:36px;background-color:#FFFFFF;z-index:3;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:right 0.3s ease-in-out;border:3px solid #1e1e1e;border-radius:16px}.menu.svelte-1cbbcxy ul.svelte-1cbbcxy{box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;border-radius:12px;list-style:none;padding:12px 32px;margin:0;display:flex;flex-direction:column;height:100%;width:100%;align-items:center}.menu.svelte-1cbbcxy ul li.svelte-1cbbcxy{font-size:4rem;margin:1rem 0;text-align:center;cursor:pointer;flex-grow:1;width:100%;height:100%;min-height:60px;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li:hover .svelte-1cbbcxy:before{content:"";width:0;height:0;border-top:20px solid transparent;border-bottom:20px solid transparent;border-left:20px solid #262626;position:absolute;left:40px}.menu.svelte-1cbbcxy ul li button.svelte-1cbbcxy{background:none;border:none;font-size:inherit;font-family:inherit;cursor:inherit;outline:none;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li button .svelte-1cbbcxy:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%}.menu.open.svelte-1cbbcxy.svelte-1cbbcxy{opacity:1;pointer-events:all;right:0}')}function Wt(s){let e;return{c(){e=v("div"),e.innerHTML='<ul class="svelte-1cbbcxy"><li class="svelte-1cbbcxy"><button tabindex="0" class="svelte-1cbbcxy">Pokedex</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Pokemon</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Bag</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Trainer</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Save</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Options</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Credits</button></li></ul>',y(e,"class","menu svelte-1cbbcxy"),j(e,"open",s[0])},m(t,n){I(t,e,n)},p(t,[n]){n&1&&j(e,"open",t[0])},i:T,o:T,d(t){t&&E(e)}}}function Ut(s,e,t){let{menuOpened:n}=e,{player:i}=e;return s.$$set=o=>{"menuOpened"in o&&t(0,n=o.menuOpened),"player"in o&&t(1,i=o.player)},[n,i]}class Ve extends te{constructor(e){super(),Q(this,e,Ut,Wt,Y,{menuOpened:0,player:1},qt)}get menuOpened(){return this.$$.ctx[0]}set menuOpened(e){this.$$set({menuOpened:e}),A()}get player(){return this.$$.ctx[1]}set player(e){this.$$set({player:e}),A()}}ee(Ve,{menuOpened:{},player:{}},[],[],!0);class Le{constructor(e,t=16*3,n=16*3){d(this,"position");d(this,"width");d(this,"height");this.position=e,this.width=t,this.height=n}debug(e,t,n="red"){e.fillStyle=n,e.fillRect((this.position.x+t.x)*this.width,(this.position.y+t.y)*this.height,this.width,this.height)}}const Jt=8,Kt=806;class Xt{constructor(e,t,n,i,o,r,c){d(this,"background");d(this,"foreground");d(this,"width");d(this,"height");d(this,"collisions");d(this,"battleZones");d(this,"monsters");d(this,"playerInitialPosition",new B(11,11));d(this,"playerPosition",new B(11,11));this.background=e,this.foreground=t,this.width=n,this.height=i,this.collisions=this.initBoundaries(o),console.log(this.collisions),this.battleZones=this.initBattlesZones(r),this.monsters=c}randomMonster(){const e=this.monsters[Math.floor(Math.random()*this.monsters.length)],n=(localStorage.getItem("pokedex")&&JSON.parse(localStorage.getItem("pokedex")||"[]")||[]).find(i=>i.id===e);return Object.setPrototypeOf(n,fe.prototype),n}initBattlesZones(e){const t=[];for(let i=0;i<e.length;i+=this.width)t.push(e.slice(i,this.width+i));const n=[];return t.forEach((i,o)=>{i.forEach((r,c)=>{if(r===Jt){const u=new Le(new B(c,o));n.push(u)}})}),n}initBoundaries(e){const t=[];for(let i=0;i<e.length;i+=this.width)t.push(e.slice(i,this.width+i));const n=[];return t.forEach((i,o)=>{i.forEach((r,c)=>{if(r===Kt){const u=new Le(new B(c,o));n.push(u)}})}),n}drawBackground(e,t){e.drawImage(this.background,t.x*16,t.y*16,this.background.width,this.background.height,0,0,this.background.width*3,this.background.height*3)}drawForeground(e,t){this.foreground!==null&&e.drawImage(this.foreground,t.x*16,t.y*16,this.foreground.width,this.foreground.height,0,0,this.foreground.width*3,this.foreground.height*3)}drawBoundaries(e,t){this.collisions.forEach(n=>{n.debug(e,t)})}drawBattleZones(e,t){this.battleZones.forEach(n=>{n.debug(e,t,"blue")})}hasBattleZoneAt(e){return this.battleZones.some(t=>t.position.x===e.x&&t.position.y===e.y)}hasBoundaryAt(e){return this.collisions.some(t=>t.position.x===e.x&&t.position.y===e.y)||e.x<0||e.y<0||e.x>this.width-1||e.y>this.height-1}updatePlayerPosition(e){this.playerPosition.x=this.playerInitialPosition.x+e.x,this.playerPosition.y=this.playerInitialPosition.y+e.y}}const Ye=new Image;Ye.src="src/assets/maps/test-map.png";const Qe=new Image;Qe.src="src/assets/maps/test-map-foreground.png";const Vt=[95],Yt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,0,806,806,0,0,806,806,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,806,806,806,806,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,806,806,806,806,834,0,0,0,0,0,0,0,0,0],Qt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],we=new Xt(Ye,Qe,20,20,Yt,Qt,Vt);function He(s){let e,t,n,i,o;function r(a){s[7](a)}function c(a){s[8](a)}function u(a){s[9](a)}let l={};return s[0]!==void 0&&(l.opened=s[0]),s[3].battleState!==void 0&&(l.battleState=s[3].battleState),s[2]!==void 0&&(l.battleStart=s[2]),e=new Xe({props:l}),D.push(()=>R(e,"opened",r)),D.push(()=>R(e,"battleState",c)),D.push(()=>R(e,"battleStart",u)),{c(){re(e.$$.fragment)},m(a,h){X(e,a,h),o=!0},p(a,h){const f={};!t&&h&1&&(t=!0,f.opened=a[0],G(()=>t=!1)),!n&&h&8&&(n=!0,f.battleState=a[3].battleState,G(()=>n=!1)),!i&&h&4&&(i=!0,f.battleStart=a[2],G(()=>i=!1)),e.$set(f)},i(a){o||(N(e.$$.fragment,a),o=!0)},o(a){Z(e.$$.fragment,a),o=!1},d(a){V(e,a)}}}function es(s){let e,t,n,i,o,r=s[3].initiated&&He(s);function c(a){s[10](a)}function u(a){s[11](a)}let l={};return s[1]!==void 0&&(l.menuOpened=s[1]),s[4]!==void 0&&(l.player=s[4]),t=new Ve({props:l}),D.push(()=>R(t,"menuOpened",c)),D.push(()=>R(t,"player",u)),{c(){r&&r.c(),e=P(),re(t.$$.fragment)},m(a,h){r&&r.m(a,h),I(a,e,h),X(t,a,h),o=!0},p(a,[h]){a[3].initiated?r?(r.p(a,h),h&8&&N(r,1)):(r=He(a),r.c(),N(r,1),r.m(e.parentNode,e)):r&&($e(),Z(r,1,1,()=>{r=null}),Pe());const f={};!n&&h&2&&(n=!0,f.menuOpened=a[1],G(()=>n=!1)),!i&&h&16&&(i=!0,f.player=a[4],G(()=>i=!1)),t.$set(f)},i(a){o||(N(r),N(t.$$.fragment,a),o=!0)},o(a){Z(r),Z(t.$$.fragment,a),o=!1},d(a){a&&E(e),r&&r.d(a),V(t,a)}}}let ts=12;function ss(s,e,t){let{opened:n=!1}=e,{menuOpened:i=!1}=e,{battleStart:o=!1}=e,{currentMap:r=we}=e,{canvas:c}=e,{battle:u={initiated:!1,frameElapsed:0}}=e;const l=c.getContext("2d");c.width=window.innerWidth,c.height=window.innerHeight;let{character:a}=e;a.position=new B(we.playerPosition.x*48,we.playerPosition.y*48);const h=new B(0,0);function f(){const w=window.requestAnimationFrame(f);let ce=Date.now(),ue=ce-m;if(ue>g){m=ce-ue%g,l.fillStyle="black",l.fillRect(0,0,c.width,c.height),r.drawBackground(l,h),a.draw(l);let q=!0;if(t(4,a.moving=!1,a),u.initiated)return;if(!i){if((L.down.pressed||L.up.pressed||L.left.pressed||L.right.pressed)&&r.hasBattleZoneAt(r.playerPosition)&&Math.random()<.1){let pe=r.randomMonster();window.cancelAnimationFrame(w),_(pe)}L.down.pressed&&J==="ArrowDown"&&(r.hasBoundaryAt(new B(r.playerPosition.x,r.playerPosition.y+1))&&(q=!1),t(4,a.moving=!0,a),t(4,a.direction="down",a),q&&h.y++),L.up.pressed&&J==="ArrowUp"&&(r.hasBoundaryAt(new B(r.playerPosition.x,r.playerPosition.y-1))&&(q=!1),t(4,a.moving=!0,a),t(4,a.direction="up",a),q&&h.y--),L.left.pressed&&J==="ArrowLeft"&&(r.hasBoundaryAt(new B(r.playerPosition.x-1,r.playerPosition.y))&&(q=!1),t(4,a.moving=!0,a),t(4,a.direction="left",a),q&&h.x--),L.right.pressed&&J==="ArrowRight"&&(r.hasBoundaryAt(new B(r.playerPosition.x+1,r.playerPosition.y))&&(q=!1),t(4,a.moving=!0,a),t(4,a.direction="right",a),q&&h.x++),r.updatePlayerPosition(h)}}}function _(w){t(3,u.initiated=!0,u),t(3,u.startDate=new Date,u),t(3,u.battleState=new xt(a,w,c),u),C={...u.battleState.opponentCurrentMonster.position},M={...u.battleState.playerCurrentMonster.position},S(),t(3,u.battleState.onClose=()=>{x()},u),t(2,o=!0),setTimeout(()=>{t(2,o=!1),t(0,n=!0),b()},2e3)}function x(w){window.cancelAnimationFrame(F),t(3,u.battleState=void 0,u),t(3,u.initiated=!1,u),t(3,u.startDate=void 0,u),t(2,o=!1),t(0,n=!1),t(1,i=!1),f(),k()}let z=0,C=new B(0,0),M=new B(0,0),m=Date.now(),g=1e3/ts,$=!0,F;function b(){var ue,q,pe,Me,Ae,Ee;F=window.requestAnimationFrame(b);let w=Date.now(),ce=w-m;ce>g&&(m=w-ce%g,t(3,u.frameElapsed++,u),l.fillStyle="black",l.fillRect(0,0,c.width,c.height),Pt.draw(l,c),(q=(ue=u.battleState)==null?void 0:ue.opponentCurrentMonster)==null||q.draw(l,"front"),(Me=(pe=u.battleState)==null?void 0:pe.playerCurrentMonster)==null||Me.draw(l,"back"),(Ee=(Ae=u.battleState)==null?void 0:Ae.opponentCurrentMonster)!=null&&Ee.position&&($=u.frameElapsed<=10,$?z++:z--,t(3,u.battleState.opponentCurrentMonster.position.y=C.y-z,u),t(3,u.battleState.playerCurrentMonster.position.y=M.y+z,u),u.frameElapsed>20&&t(3,u.frameElapsed=0,u)))}k(),f();function k(){window.addEventListener("keydown",ze()),window.addEventListener("keyup",Ie()),window.addEventListener("keydown",H)}function S(){window.removeEventListener("keydown",ze()),window.removeEventListener("keyup",Ie()),window.removeEventListener("keydown",H)}function H(w){w.key==="Escape"&&t(1,i=!i)}function le(w){n=w,t(0,n)}function tt(w){s.$$.not_equal(u.battleState,w)&&(u.battleState=w,t(3,u))}function st(w){o=w,t(2,o)}function nt(w){i=w,t(1,i)}function it(w){a=w,t(4,a)}return s.$$set=w=>{"opened"in w&&t(0,n=w.opened),"menuOpened"in w&&t(1,i=w.menuOpened),"battleStart"in w&&t(2,o=w.battleStart),"currentMap"in w&&t(6,r=w.currentMap),"canvas"in w&&t(5,c=w.canvas),"battle"in w&&t(3,u=w.battle),"character"in w&&t(4,a=w.character)},[n,i,o,u,a,c,r,le,tt,st,nt,it]}class et extends te{constructor(e){super(),Q(this,e,ss,es,Y,{opened:0,menuOpened:1,battleStart:2,currentMap:6,canvas:5,battle:3,character:4})}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),A()}get menuOpened(){return this.$$.ctx[1]}set menuOpened(e){this.$$set({menuOpened:e}),A()}get battleStart(){return this.$$.ctx[2]}set battleStart(e){this.$$set({battleStart:e}),A()}get currentMap(){return this.$$.ctx[6]}set currentMap(e){this.$$set({currentMap:e}),A()}get canvas(){return this.$$.ctx[5]}set canvas(e){this.$$set({canvas:e}),A()}get battle(){return this.$$.ctx[3]}set battle(e){this.$$set({battle:e}),A()}get character(){return this.$$.ctx[4]}set character(e){this.$$set({character:e}),A()}}ee(et,{opened:{type:"Boolean"},menuOpened:{type:"Boolean"},battleStart:{type:"Boolean"},currentMap:{},canvas:{},battle:{},character:{}},[],[],!0);function ns(s){ae(s,"svelte-1ryb1u7",'.loading.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100dvh}.loading.ready.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7{opacity:0.2}.u-swing.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7{animation:svelte-1ryb1u7-swing 3000ms infinite}@keyframes svelte-1ryb1u7-swing{20%{-webkit-transform:rotate(15deg);transform:rotate(15deg)}40%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg)}60%{-webkit-transform:rotate(5deg);transform:rotate(5deg)}80%{-webkit-transform:rotate(-5deg);transform:rotate(-5deg)}to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7{width:120px;height:120px;border-radius:120px;border:solid 4.8px black;position:relative;background:linear-gradient(to bottom, #EEEEEE 0%, #FFFFFF 100%);margin:10px auto}.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7:before,.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7:after{content:"";display:block}.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7,.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7:before,.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7:after{transition:all 600ms cubic-bezier(0.67, 0.4, 0.36, 0.75)}.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7:before{width:120px;height:57.6px;border-bottom:solid 4.8px black;border-radius:60px 60px 0 0;background:linear-gradient(to bottom, #d10000 0%, #ff0000 50%)}.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7:after{content:"";width:24px;height:24px;background:linear-gradient(to bottom, #fff 0%, #ccc 100%);position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);border-radius:50%;box-shadow:0 0 0 2.4px black, 0 0 0 4.8px #ddd, 0 0 0 8.5714285714px black, 0 0 12px 7.0588235294px rgba(0, 0, 0, 0.4)}.buttons.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7{display:flex;justify-content:center;align-items:center;flex-direction:column;gap:120px;position:absolute;left:calc(50dvw - 100px);top:calc(50dvh - 40px)}.buttons.svelte-1ryb1u7 .letsgo.svelte-1ryb1u7.svelte-1ryb1u7{position:relative}.buttons.svelte-1ryb1u7 .letsgo .pika.svelte-1ryb1u7.svelte-1ryb1u7{width:200px;height:200px;position:absolute;bottom:0;left:0;z-index:1}.buttons.svelte-1ryb1u7 .letsgo .start-btn.svelte-1ryb1u7.svelte-1ryb1u7{width:200px;height:80px;border-radius:16px;position:relative;z-index:2;font-family:pokemon, serif;font-size:36px;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;cursor:pointer}.buttons.svelte-1ryb1u7 .letsgo .start-btn.svelte-1ryb1u7.svelte-1ryb1u7:hover{color:#fff;box-shadow:inset #009688 0 0 0 5px;text-shadow:none;font-weight:bold;background:#009688}.buttons.svelte-1ryb1u7 .letsgo .start-btn.svelte-1ryb1u7:hover+.pika.svelte-1ryb1u7{animation:svelte-1ryb1u7-bounce 1s infinite}@keyframes svelte-1ryb1u7-bounce{0%,20%,53%,80%,to{-webkit-animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-transform:translate3d(0, -30px, 0);transform:translate3d(0, -30px, 0)}40%,43%,70%{-webkit-animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06);animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06)}70%{-webkit-transform:translate3d(0, -15px, 0);transform:translate3d(0, -15px, 0)}90%{-webkit-transform:translate3d(0, -4px, 0);transform:translate3d(0, -4px, 0)}}#preview.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7{display:flex;flex-wrap:wrap;justify-content:center}')}function is(s){let e,t,n,i,o,r,c,u,l,a,h=s[1]&&Ne(s);return{c(){e=v("div"),t=v("div"),n=P(),i=v("span"),o=O("Gotta catch em all... "),r=O(s[4]),c=P(),u=v("div"),u.innerHTML="",l=P(),h&&h.c(),a=dt(),y(t,"class","o-pokeball c-loader u-swing svelte-1ryb1u7"),y(u,"id","preview"),y(u,"class","svelte-1ryb1u7"),y(e,"class","loading svelte-1ryb1u7"),j(e,"ready",s[1])},m(f,_){I(f,e,_),p(e,t),p(e,n),p(e,i),p(i,o),p(i,r),p(e,c),p(e,u),s[9](u),I(f,l,_),h&&h.m(f,_),I(f,a,_)},p(f,_){_&16&&W(r,f[4]),_&2&&j(e,"ready",f[1]),f[1]?h?h.p(f,_):(h=Ne(f),h.c(),h.m(a.parentNode,a)):h&&(h.d(1),h=null)},i:T,o:T,d(f){f&&(E(e),E(l),E(a)),s[9](null),h&&h.d(f)}}}function rs(s){let e,t,n,i;function o(u){s[7](u)}function r(u){s[8](u)}let c={};return s[0]!==void 0&&(c.canvas=s[0]),s[2]!==void 0&&(c.character=s[2]),e=new et({props:c}),D.push(()=>R(e,"canvas",o)),D.push(()=>R(e,"character",r)),{c(){re(e.$$.fragment)},m(u,l){X(e,u,l),i=!0},p(u,l){const a={};!t&&l&1&&(t=!0,a.canvas=u[0],G(()=>t=!1)),!n&&l&4&&(n=!0,a.character=u[2],G(()=>n=!1)),e.$set(a)},i(u){i||(N(e.$$.fragment,u),i=!0)},o(u){Z(e.$$.fragment,u),i=!1},d(u){V(e,u)}}}function Ne(s){let e,t,n,i,o,r,c,u,l,a=s[6]&&os(s);return{c(){e=v("div"),a&&a.c(),t=P(),n=v("div"),i=v("button"),i.textContent="New game!",o=P(),r=v("img"),y(i,"class","start-btn svelte-1ryb1u7"),y(r,"class","pika svelte-1ryb1u7"),y(r,"alt","pikachu"),Re(r.src,c="src/assets/monsters/heartgold-soulsilver/25.png")||y(r,"src",c),y(n,"class","letsgo svelte-1ryb1u7"),y(e,"class","buttons svelte-1ryb1u7")},m(h,f){I(h,e,f),a&&a.m(e,null),p(e,t),p(e,n),p(n,i),p(n,o),p(n,r),u||(l=he(i,"click",s[11]),u=!0)},p(h,f){h[6]&&a.p(h,f)},d(h){h&&E(e),a&&a.d(),u=!1,l()}}}function os(s){let e,t,n,i,o,r,c;return{c(){e=v("div"),t=v("button"),t.textContent="Continue!",n=P(),i=v("img"),y(t,"class","start-btn svelte-1ryb1u7"),y(i,"class","pika svelte-1ryb1u7"),y(i,"alt","Evoli"),Re(i.src,o="src/assets/monsters/heartgold-soulsilver/133.png")||y(i,"src",o),y(e,"class","letsgo svelte-1ryb1u7")},m(u,l){I(u,e,l),p(e,t),p(e,n),p(e,i),r||(c=he(t,"click",s[10]),r=!0)},p:T,d(u){u&&E(e),r=!1,c()}}}function as(s){let e,t,n,i,o;const r=[rs,is],c=[];function u(l,a){return l[1]&&l[3]?0:1}return e=u(s),t=c[e]=r[e](s),{c(){t.c(),n=P(),i=v("canvas")},m(l,a){c[e].m(l,a),I(l,n,a),I(l,i,a),s[12](i),o=!0},p(l,[a]){let h=e;e=u(l),e===h?c[e].p(l,a):($e(),Z(c[h],1,1,()=>{c[h]=null}),Pe(),t=c[e],t?t.p(l,a):(t=c[e]=r[e](l),t.c()),N(t,1),t.m(n.parentNode,n))},i(l){o||(N(t),o=!0)},o(l){Z(t),o=!1},d(l){l&&(E(n),E(i)),c[e].d(l),s[12](null)}}}function ls(s,e,t){let{canvas:n}=e,i,{ready:o=!1}=e,r=[],c=!1,u,l,a;r.length>0&&i?(r.forEach(m=>{setTimeout(()=>{const g=new Image;g.src=`/src/assets/monsters/heartgold-soulsilver/${m.id}.png`,a.appendChild(g)},100)}),o=!0):fetch("/src/assets/data/pokedex-gen1.json").then(m=>m.json()).then(m=>{m.forEach(g=>{t(4,l=g.name.english);let $=`/src/assets/monsters/heartgold-soulsilver/${g.id}.png`,F=`/src/assets/monsters/heartgold-soulsilver/frame2/${g.id}.png`,b=`/src/assets/monsters/heartgold-soulsilver/back/${g.id}.png`,k=`/src/assets/monsters/heartgold-soulsilver/shiny/${g.id}.png`;setTimeout(()=>{const S=new fe(g.id,g.name.english,g.type,g.profile.ability,g.base,g.evolution,new _t($,F,b,k),void 0,[new kt("Tackle","Normal","Physical",40,100,35,0,"",0,"Basic hit")]);S.height=Number.parseFloat(g.profile.height.replace(" m",""))*100,S.spriteScale=Math.max(1.2,Math.min(S.height/100,2)),r.push(S),r.length===m.length&&(t(4,l="Ready!"),localStorage.setItem("pokedex",JSON.stringify(r)),h())},100)})});function h(){let m=new Image;m.src="/src/assets/sprites/hero_male_front.png";let g=new Image;g.src="/src/assets/sprites/hero_male_back.png";let $=new Image;$.src="/src/assets/sprites/hero_male_left.png";let F=new Image;F.src="/src/assets/sprites/hero_male_right.png";let b=new Image;b.src="/src/assets/sprites/hero_male_back.png",Promise.all(Array.from([m,g,$,F,b].filter(k=>!k.complete)).map(k=>new Promise(S=>{k.onload=k.onerror=S}))).then(()=>{t(2,i=new wt("Kaiser","MALE",{down:m,up:g,left:$,right:F,battle:b},[r.at(70)])),console.log(i),t(1,o=!0)})}function f(m){n=m,t(0,n)}function _(m){i=m,t(2,i)}function x(m){D[m?"unshift":"push"](()=>{a=m,t(5,a)})}const z=()=>t(3,c=!0),C=()=>t(3,c=!0);function M(m){D[m?"unshift":"push"](()=>{n=m,t(0,n)})}return s.$$set=m=>{"canvas"in m&&t(0,n=m.canvas),"ready"in m&&t(1,o=m.ready)},[n,o,i,c,l,a,u,f,_,x,z,C,M]}class cs extends te{constructor(e){super(),Q(this,e,ls,as,Y,{canvas:0,ready:1},ns)}get canvas(){return this.$$.ctx[0]}set canvas(e){this.$$set({canvas:e}),A()}get ready(){return this.$$.ctx[1]}set ready(e){this.$$set({ready:e}),A()}}customElements.define("open-mon",ee(cs,{canvas:{},ready:{type:"Boolean"}},[],[],!0));
