var b0=Object.defineProperty;var _0=(e,t,s)=>t in e?b0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var c=(e,t,s)=>(_0(e,typeof t!="symbol"?t+"":t,s),s);function _(){}function o0(e){return e()}function i0(){return Object.create(null)}function q(e){e.forEach(o0)}function a0(e){return typeof e=="function"}function S(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function y0(e){return Object.keys(e).length===0}function I(e,t,s){e.insertBefore(t,s||null)}function b(e){e.parentNode&&e.parentNode.removeChild(e)}function h0(e){return document.createElement(e)}function x0(e){return document.createTextNode(e)}function T(){return x0(" ")}function k0(e,t,s){s==null?e.removeAttribute(t):e.getAttribute(t)!==s&&e.setAttribute(t,s)}function E0(e){return Array.from(e.childNodes)}function M0(e){const t={};return e.childNodes.forEach(s=>{t[s.slot||"default"]=!0}),t}let W;function Z(e){W=e}const k=[],J=[];let B=[];const n0=[],A0=Promise.resolve();let U=!1;function I0(){U||(U=!0,A0.then(c0))}function V(e){B.push(e)}const z=new Set;let x=0;function c0(){if(x!==0)return;const e=W;do{try{for(;x<k.length;){const t=k[x];x++,Z(t),v0(t.$$)}}catch(t){throw k.length=0,x=0,t}for(Z(null),k.length=0,x=0;J.length;)J.pop()();for(let t=0;t<B.length;t+=1){const s=B[t];z.has(s)||(z.add(s),s())}B.length=0}while(k.length);for(;n0.length;)n0.pop()();U=!1,z.clear(),Z(e)}function v0(e){if(e.fragment!==null){e.update(),q(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(V)}}function B0(e){const t=[],s=[];B.forEach(i=>e.indexOf(i)===-1?t.push(i):s.push(i)),s.forEach(i=>i()),B=t}const H=new Set;let S0;function E(e,t){e&&e.i&&(H.delete(e),e.i(t))}function j(e,t,s,i){if(e&&e.o){if(H.has(e))return;H.add(e),S0.c.push(()=>{H.delete(e),i&&(s&&e.d(1),i())}),e.o(t)}else i&&i()}function L(e){e&&e.c()}function M(e,t,s){const{fragment:i,after_update:o}=e.$$;i&&i.m(t,s),V(()=>{const r=e.$$.on_mount.map(o0).filter(a0);e.$$.on_destroy?e.$$.on_destroy.push(...r):q(r),e.$$.on_mount=[]}),o.forEach(V)}function A(e,t){const s=e.$$;s.fragment!==null&&(B0(s.after_update),q(s.on_destroy),s.fragment&&s.fragment.d(t),s.on_destroy=s.fragment=null,s.ctx=[])}function P0(e,t){e.$$.dirty[0]===-1&&(k.push(e),I0(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function P(e,t,s,i,o,r,n=null,a=[-1]){const f=W;Z(e);const u=e.$$={fragment:null,ctx:[],props:r,update:_,not_equal:o,bound:i0(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:i0(),dirty:a,skip_bound:!1,root:t.target||f.$$.root};n&&n(u.root);let m=!1;if(u.ctx=s?s(e,t.props||{},(h,$,...g)=>{const p=g.length?g[0]:$;return u.ctx&&o(u.ctx[h],u.ctx[h]=p)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](p),m&&P0(e,h)),$}):[],u.update(),m=!0,q(u.before_update),u.fragment=i?i(u.ctx):!1,t.target){if(t.hydrate){const h=E0(t.target);u.fragment&&u.fragment.l(h),h.forEach(b)}else u.fragment&&u.fragment.c();t.intro&&E(e.$$.fragment),M(e,t.target,t.anchor),c0()}Z(f)}let u0;typeof HTMLElement=="function"&&(u0=class extends HTMLElement{constructor(t,s,i){super();c(this,"$$ctor");c(this,"$$s");c(this,"$$c");c(this,"$$cn",!1);c(this,"$$d",{});c(this,"$$r",!1);c(this,"$$p_d",{});c(this,"$$l",{});c(this,"$$l_u",new Map);this.$$ctor=t,this.$$s=s,i&&this.attachShadow({mode:"open"})}addEventListener(t,s,i){if(this.$$l[t]=this.$$l[t]||[],this.$$l[t].push(s),this.$$c){const o=this.$$c.$on(t,s);this.$$l_u.set(s,o)}super.addEventListener(t,s,i)}removeEventListener(t,s,i){if(super.removeEventListener(t,s,i),this.$$c){const o=this.$$l_u.get(s);o&&(o(),this.$$l_u.delete(s))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let s=function(n){return()=>{let a;return{c:function(){a=h0("slot"),n!=="default"&&k0(a,"name",n)},m:function(m,h){I(m,a,h)},d:function(m){m&&b(a)}}}};var t=s;if(await Promise.resolve(),!this.$$cn)return;const i={},o=M0(this);for(const n of this.$$s)n in o&&(i[n]=[s(n)]);for(const n of this.attributes){const a=this.$$g_p(n.name);a in this.$$d||(this.$$d[a]=K(a,n.value,this.$$p_d,"toProp"))}for(const n in this.$$p_d)!(n in this.$$d)&&this[n]!==void 0&&(this.$$d[n]=this[n],delete this[n]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:i,$$scope:{ctx:[]}}});const r=()=>{this.$$r=!0;for(const n in this.$$p_d)if(this.$$d[n]=this.$$c.$$.ctx[this.$$c.$$.props[n]],this.$$p_d[n].reflect){const a=K(n,this.$$d[n],this.$$p_d,"toAttribute");a==null?this.removeAttribute(this.$$p_d[n].attribute||n):this.setAttribute(this.$$p_d[n].attribute||n,a)}this.$$r=!1};this.$$c.$$.after_update.push(r),r();for(const n in this.$$l)for(const a of this.$$l[n]){const f=this.$$c.$on(n,a);this.$$l_u.set(a,f)}this.$$l={}}}attributeChangedCallback(t,s,i){var o;this.$$r||(t=this.$$g_p(t),this.$$d[t]=K(t,i,this.$$p_d,"toProp"),(o=this.$$c)==null||o.$set({[t]:this.$$d[t]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(t){return Object.keys(this.$$p_d).find(s=>this.$$p_d[s].attribute===t||!this.$$p_d[s].attribute&&s.toLowerCase()===t)||t}});function K(e,t,s,i){var r;const o=(r=s[e])==null?void 0:r.type;if(t=o==="Boolean"&&typeof t!="boolean"?t!=null:t,!i||!s[e])return t;if(i==="toAttribute")switch(o){case"Object":case"Array":return t==null?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return t??null;default:return t}else switch(o){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":return t;case"Number":return t!=null?+t:t;default:return t}}function C(e,t,s,i,o,r){let n=class extends u0{constructor(){super(e,s,o),this.$$p_d=t}static get observedAttributes(){return Object.keys(t).map(a=>(t[a].attribute||a).toLowerCase())}};return Object.keys(t).forEach(a=>{Object.defineProperty(n.prototype,a,{get(){return this.$$c&&a in this.$$c?this.$$c[a]:this.$$d[a]},set(f){var u;f=K(a,f,t),this.$$d[a]=f,(u=this.$$c)==null||u.$set({[a]:f})}})}),i.forEach(a=>{Object.defineProperty(n.prototype,a,{get(){var f;return(f=this.$$c)==null?void 0:f[a]}})}),r&&(n=r(n)),e.element=n,n}class O{constructor(){c(this,"$$");c(this,"$$set")}$destroy(){A(this,1),this.$destroy=_}$on(t,s){if(!a0(s))return _;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(s),()=>{const o=i.indexOf(s);o!==-1&&i.splice(o,1)}}$set(t){this.$$set&&!y0(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const C0="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(C0);class R{constructor(t,s,i={max:1},o){c(this,"position");c(this,"image");c(this,"frames");c(this,"sprites");c(this,"width",0);c(this,"height",0);c(this,"moving");this.position=t,this.image=s,this.frames={...i,val:0,elapsed:0},this.sprites=o,this.image.onload=()=>{this.width=this.image.width/this.frames.max,this.height=this.image.height},this.moving=!1}draw(t,s){t.drawImage(this.image,this.frames.val*this.width,0,this.image.width/this.frames.max,this.image.height,this.position.x,this.position.y,this.image.width/this.frames.max,this.image.height),this.moving&&(this.frames.max>1&&(this.frames.elapsed+=1),this.frames.elapsed%10===0&&(this.frames.val+=1,this.frames.val>this.frames.max-1&&(this.frames.val=0)))}}class O0 extends R{constructor(t,s){super(new y(s.width-s.width*.26,s.height*.118),t)}draw(t){t.drawImage(this.image,this.frames.val*this.width,0,this.image.width,this.image.height,this.position.x,this.position.y,this.image.width*4,this.image.height*4)}}class j0 extends R{constructor(t,s){super(s,t)}draw(t){t.drawImage(this.image,0,0,this.image.width,this.image.height,this.position.x,this.position.y,this.image.width*5,this.image.height*5)}}let y=class{constructor(t,s){c(this,"x");c(this,"y");this.x=t,this.y=s}};class L0{constructor(t,s){c(this,"name");c(this,"sprite");c(this,"monsters");this.name=t;const i=new Image;i.src="./assets/sprites/char_front-bicubic.png";const o=new Image;o.src="./assets/sprites/char_back-bicubic.png";const r=new Image;r.src="./assets/sprites/char_left-bicubic.png";const n=new Image;n.src="./assets/sprites/char_right-bicubic.png",this.sprite=new R(new y(s.width/2-i.width/3/2,s.height/2-i.height/3/2),i,{max:3},{front:i,back:o,right:n,left:r}),this.monsters=[];const a=new Image;a.src="./assets/monsters/heartgold-soulsilver/back/104.png",a.onload=()=>{this.monsters.push(new j0(a,new y(s.width*.2,s.height*.75-a.height*5+19*3)))}}updatePosition(t){this.sprite.position.x=t.width/2-this.sprite.image.width/3/2,this.sprite.position.y=t.height/2-this.sprite.image.height/3/2}}let r0=class{constructor(t){c(this,"position");c(this,"width");c(this,"height");this.position=t,this.width=v,this.height=v}debug(t){t.fillStyle="red",t.fillRect(this.position.x,this.position.y,this.width,this.height)}};const v=56;class N0{constructor(t,s,i,o,r,n,a){c(this,"background");c(this,"foreground");c(this,"width");c(this,"height");c(this,"boundaries");c(this,"battleZones");c(this,"monsters");c(this,"currentMonster");this.background=t,this.foreground=s,this.width=i,this.height=o,this.boundaries=this.initBoundaries(r),this.battleZones=this.initBattlesZones(n),this.monsters=a}randomMonster(t){const s=this.monsters[Math.floor(Math.random()*this.monsters.length)],i=new Image;i.src=`./assets/monsters/heartgold-soulsilver/${s}.png`,this.currentMonster=new O0(i,t)}initBattlesZones(t){const s=[];for(let o=0;o<t.length;o+=N)s.push(t.slice(o,N+o));const i=[];return s.forEach((o,r)=>{o.forEach((n,a)=>{if(n===F0){const f=new r0(new y(a*v,r*v-220));i.push(f)}})}),i}initBoundaries(t){const s=[];for(let o=0;o<t.length;o+=N)s.push(t.slice(o,N+o));const i=[];return s.forEach((o,r)=>{o.forEach((n,a)=>{if(n===T0){const f=new r0(new y(a*v,r*v-220));i.push(f)}})}),i}}const l0=new Image;l0.src="./assets/maps/map-1-background.png";const f0=new Image;f0.src="./assets/maps/map-1-foreground.png";const F={x:0,y:-220},Z0=new R(new y(F.x,F.y),l0),R0=new R(new y(F.x,F.y),f0),T0=145,N=40,H0=30,K0=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,145,145,145,145,145,145,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,145,145,145,145,145,145,145,145,145,145,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,145,145,145,145,145,145,145,145,145,0,145,145,145,0,0,0,0,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,145,0,145,145,145,0,0,0,145,0,145,145,145,0,0,145,145,145,145,145,0,0,0,0,145,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,145,0,145,145,145,145,0,0,145,0,0,0,0,0,0,145,145,145,145,145,0,0,0,0,145,0,0,0,0,0,0,0,145,0,0,145,145,145,0,0,145,0,145,145,145,0,0,0,145,0,0,0,0,0,0,145,145,145,145,145,145,0,0,0,145,0,0,0,0,0,0,0,145,0,0,145,145,145,0,0,145,0,145,145,145,0,0,145,145,0,0,0,0,0,0,145,145,145,145,145,0,0,0,0,145,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,145,145,145,145,0,0,0,0,145,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,145,145,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,145,0,0,0,0,145,145,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,145,0,0,0,0,145,145,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,145,0,145,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,145,145,145,0,0,0,0,0,0,0,145,0,145,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,145,145,0,145,0,0,0,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,145,145,0,145,0,0,0,0,0,0,0,0,0,0,145,145,145,145,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,0,0,0,145,145,145,145,145,0,0,145,145,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,0,0,0,145,0,0,0,145,0,0,145,145,145,0,0,0,0,0,0,0,0,0,0,0,0,0,145,145,145,0,0,0,145,0,0,0,0,0,0,0,0,0,0,145,145,145,0,145,0,0,0,0,0,0,0,0,0,0,0,0,0,145,145,145,145,0,145,145,145,0,0,0,145,0,0,0,0,0,0,0,0,0,0,0,0,145,145,145,0,0,0,0,0,0,0,145,0,0,0,145,0,145,145,145,145,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,0,0,0,0,0,0,145,145,145,145,145,145,145,145,145,145,0,0,0,145,145,0,0,0,0,145,145,145,145,145,145,145,145,0,0,0,0,0,0,0,0,0,0,0,0,145,0,0,145,145,145,145,145,145,145,145,0,0,0,145,145,0,0,0,0,145,145,145,145,145,145,145,145,0,0,0,0,0,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,145,0,0,0,0,0,0,0,0,0,0,0,0,145,145,145,0,0,145,145,145,145,145,0,0,0,0,0,0,0,0,0,0,0,0,145,145,145,145,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,145,145,145,0,0,0,145,145,145,145,145,145,145,145,145,145,145,145,145,145,0,0,0,0,0,0,0,0,0,0,0,0],F0=74,q0=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,74,74,74,74,74,0,0,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,74,74,74,74,74,74,74,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,74,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,74,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0,44,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,74,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0,74,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,74,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0,74,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,74,74,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,74,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],z0=["1","4","7"],J0=new N0(Z0,R0,N,H0,K0,q0,z0);function U0(e){let t;return{c(){t=h0("canvas")},m(s,i){I(s,t,i),e[1](t)},p:_,i:_,o:_,d(s){s&&b(t),e[1](null)}}}const w=12;function V0(e,t,s){let i;const o=i.getContext("2d");i.width=window.innerWidth,i.height=window.innerHeight;const r=new L0("Player 1",i);window.addEventListener("resize",()=>{s(0,i.width=window.innerWidth,i),s(0,i.height=window.innerHeight,i),r.updatePosition(i)});let n=J0;const a=[n.background,n.foreground,...n.boundaries,...n.battleZones],f={initiated:!1};function u(){var D,G,Q,X,Y,t0,e0,s0;const g=window.requestAnimationFrame(u);o.fillStyle="black",o.fillRect(0,0,i.width,i.height),n.background.draw(o,i),r.sprite.draw(o,i),n.foreground&&n.foreground.draw(o,i);let p=!0;if(r.sprite.moving=!1,!f.initiated){if(keys.down.pressed||keys.up.pressed||keys.left.pressed||keys.right.pressed)for(let l=0;l<n.battleZones.length;l++){const d=n.battleZones[l],w0=Math.max(0,Math.min(r.sprite.position.x+r.sprite.width,d.position.x+d.width)-Math.max(r.sprite.position.x,d.position.x))*Math.max(0,Math.min(r.sprite.position.y+r.sprite.height,d.position.y+d.height)-Math.max(r.sprite.position.y,d.position.y))/(r.sprite.width*r.sprite.height);if(rectangularCollision(r.sprite,d)&&w0>=.5&&Math.random()<.01){f.initiated=!0,window.cancelAnimationFrame(g),m();break}}if(keys.down.pressed&&lastKey==="ArrowDown"){for(let l=0;l<n.boundaries.length;l++){let d=n.boundaries[l];if(rectangularCollision(r.sprite,new Boundary(new Position(d.position.x,d.position.y-w)))){p=!1;break}}r.sprite.moving=!0,r.sprite.image=((G=(D=r.sprite)==null?void 0:D.sprites)==null?void 0:G.front)||r.sprite.image,p&&a.forEach(l=>{l.position.y-=w})}if(keys.up.pressed&&lastKey==="ArrowUp"){for(let l=0;l<n.boundaries.length;l++){let d=n.boundaries[l];if(rectangularCollision(r.sprite,new Boundary(new Position(d.position.x,d.position.y+w)))){p=!1;break}}r.sprite.moving=!0,r.sprite.image=((X=(Q=r.sprite)==null?void 0:Q.sprites)==null?void 0:X.back)||r.sprite.image,p&&a.forEach(l=>{l.position.y+=w})}if(keys.left.pressed&&lastKey==="ArrowLeft"){for(let l=0;l<n.boundaries.length;l++){let d=n.boundaries[l];if(rectangularCollision(r.sprite,new Boundary(new Position(d.position.x+w,d.position.y)))){p=!1;break}}r.sprite.moving=!0,r.sprite.image=((t0=(Y=r.sprite)==null?void 0:Y.sprites)==null?void 0:t0.left)||r.sprite.image,p&&a.forEach(l=>{l.position.x+=w})}if(keys.right.pressed&&lastKey==="ArrowRight"){for(let l=0;l<n.boundaries.length;l++){let d=n.boundaries[l];if(rectangularCollision(r.sprite,new Boundary(new Position(d.position.x-w,d.position.y)))){p=!1;break}}r.sprite.moving=!0,r.sprite.image=((s0=(e0=r.sprite)==null?void 0:e0.sprites)==null?void 0:s0.right)||r.sprite.image,p&&a.forEach(l=>{l.position.x-=w})}}}function m(){n.randomMonster(i),setTimeout(()=>{h()},2e3)}function h(){var g,p;window.requestAnimationFrame(h),o.fillStyle="black",o.fillRect(0,0,i.width,i.height),battleSprite.draw(o,i),(g=n.currentMonster)==null||g.draw(o),(p=r.monsters.at(0))==null||p.draw(o)}u();function $(g){J[g?"unshift":"push"](()=>{i=g,s(0,i)})}return[i,$]}class d0 extends O{constructor(t){super(),P(this,t,V0,U0,S,{})}}C(d0,{},[],[],!0);class $0 extends O{constructor(t){super(),P(this,t,null,null,S,{})}}C($0,{},[],[],!0);class p0 extends O{constructor(t){super(),P(this,t,null,null,S,{})}}C(p0,{},[],[],!0);class m0 extends O{constructor(t){super(),P(this,t,null,null,S,{})}}C(m0,{},[],[],!0);class g0 extends O{constructor(t){super(),P(this,t,null,null,S,{})}}C(g0,{},[],[],!0);function W0(e){let t,s,i,o,r,n,a,f,u,m;return t=new d0({}),i=new $0({}),r=new p0({}),a=new m0({}),u=new g0({}),{c(){L(t.$$.fragment),s=T(),L(i.$$.fragment),o=T(),L(r.$$.fragment),n=T(),L(a.$$.fragment),f=T(),L(u.$$.fragment)},m(h,$){M(t,h,$),I(h,s,$),M(i,h,$),I(h,o,$),M(r,h,$),I(h,n,$),M(a,h,$),I(h,f,$),M(u,h,$),m=!0},p:_,i(h){m||(E(t.$$.fragment,h),E(i.$$.fragment,h),E(r.$$.fragment,h),E(a.$$.fragment,h),E(u.$$.fragment,h),m=!0)},o(h){j(t.$$.fragment,h),j(i.$$.fragment,h),j(r.$$.fragment,h),j(a.$$.fragment,h),j(u.$$.fragment,h),m=!1},d(h){h&&(b(s),b(o),b(n),b(f)),A(t,h),A(i,h),A(r,h),A(a,h),A(u,h)}}}class D0 extends O{constructor(t){super(),P(this,t,null,W0,S,{})}}customElements.define("open-mon",C(D0,{},[],[],!0));
