import{a as h}from"./animation-engine-ComTpICm.js";import{g as u}from"./gsap-DDlvirwQ.js";const R=""+new URL("caltrop-B7Xq7-yd.png",import.meta.url).href,M=""+new URL("poisoncaltrop-BeMreEgE.png",import.meta.url).href,O=""+new URL("web-BVRfnZd6.png",import.meta.url).href,z="data:image/png;base64,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",m={},C={normal:"impact",fire:"fire",water:"water",electric:"thunder",grass:"leaf",ice:"ice",fighting:"impact",poison:"poison",rock:"rock",ground:"rock",flying:"wind",psychic:"lightball",ghost:"shadowball",dragon:"fire",dark:"shadowball",fairy:"lightball",bug:"leaf",steel:"impact"};async function Z(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o[0]:o,i=h[r]??0,s=t.getTypeColor(r),n=C[r.toLowerCase()];await t.moveSpriteTo(e,a,{duration:.15,overshoot:25});const l=[t.showSpriteEffect("fist",a,{hueRotate:i,scale:1.2,tint:s,zIndex:t.getEffectZIndex(e.slot)}),t.showImpact(a,{intensity:10,color:s})];n&&n!=="impact"&&l.push(t.showSpriteEffect(n,a,{hueRotate:i,scale:1,tint:s,zIndex:t.getEffectZIndex(e.slot)-1})),await Promise.all(l)}async function P(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o[0]:o,i=h[r]??0,s=t.getTypeColor(r),n=C[r.toLowerCase()];await t.moveSpriteTo(e,a,{duration:.2,easing:"power3.in",overshoot:20,returnDuration:.35,returnEasing:"bounce.out"});const l=[t.showSpriteEffect("foot",a,{hueRotate:i,scale:1.3,tint:s,zIndex:t.getEffectZIndex(e.slot)}),t.showImpact(a,{intensity:12,color:s})];n&&n!=="impact"&&l.push(t.showSpriteEffect(n,a,{hueRotate:i,scale:1.1,tint:s,zIndex:t.getEffectZIndex(e.slot)-1})),await Promise.all(l)}async function B(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o[0]:o,i=h[r]??0,s=t.getTypeColor(r),n=C[r.toLowerCase()];await t.moveSpriteTo(e,a,{duration:.12,overshoot:35});const l=[t.showSpriteEffect("slash",a,{hueRotate:i,scale:1.5,tint:s,zIndex:t.getEffectZIndex(e.slot)}),t.flashSprite(a,s,100),t.shake(a.element,6,150)];n&&n!=="impact"&&l.push(t.showSpriteEffect(n,a,{hueRotate:i,scale:1.2,tint:s,zIndex:t.getEffectZIndex(e.slot)-1})),await Promise.all(l)}async function V(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o[0]:o,i=h[r]??0,s=t.getTypeColor(r),n=C[r.toLowerCase()];await t.moveSpriteTo(e,a,{duration:.1,overshoot:30}),await t.showSpriteEffect("claws",a,{hueRotate:i,scale:1.4,tint:s,zIndex:t.getEffectZIndex(e.slot)}),await t.wait(50);const l=[t.showSpriteEffect("slash",a,{hueRotate:i,scale:1.2,tint:s,zIndex:t.getEffectZIndex(e.slot)}),t.shake(a.element,8,200)];n&&n!=="impact"&&l.push(t.showSpriteEffect(n,a,{hueRotate:i,scale:1,tint:s,zIndex:t.getEffectZIndex(e.slot)-1})),await Promise.all(l)}async function D(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o[0]:o,i=h[r]??0,s=t.getTypeColor(r),n=C[r.toLowerCase()];await t.moveSpriteTo(e,a,{duration:.18,overshoot:15});const l=[t.showSpriteEffect("crunch",a,{hueRotate:i,scale:1.3,tint:s,zIndex:t.getEffectZIndex(e.slot)}),t.showImpact(a,{intensity:10,color:s})];n&&n!=="impact"&&l.push(t.showSpriteEffect(n,a,{hueRotate:i,scale:1,tint:s,zIndex:t.getEffectZIndex(e.slot)-1})),await Promise.all(l)}async function H(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o[0]:o,i=t.getTypeColor(r);await t.moveSpriteTo(e,a,{duration:.25,easing:"power4.in",overshoot:10,returnDuration:.4,returnEasing:"power2.out"}),await Promise.all([t.showSpriteEffect("impact",a,{scale:1.5,tint:i,zIndex:t.getEffectZIndex(e.slot)}),t.showImpact(a,{intensity:15,color:i}),t.screenShake(10,200)])}async function L(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o[0]:o,i=h[r]??0,s=t.getTypeColor(r);await t.moveSpriteTo(e,a,{duration:.15,overshoot:25}),await Promise.all([t.showSpriteEffect("slash",a,{hueRotate:i,scale:1.3,tint:s,zIndex:t.getEffectZIndex(e.slot)}),t.showImpact(a,{intensity:8,color:s})])}async function Y(t,c){const{attacker:e,defender:o}=c,r=Array.isArray(o)?o[0]:o,a=t.getTypeColor("water");await t.moveSpriteTo(e,r,{duration:.2,overshoot:20}),await Promise.all([t.showSpriteEffect("water",r,{scale:1.5,tint:a,zIndex:t.getEffectZIndex(e.slot)}),t.showImpact(r,{intensity:12,color:a})])}async function U(t,c){const{attacker:e,defender:o}=c,r=Array.isArray(o)?o[0]:o,a=t.getTypeColor("water"),i=h.water;await t.moveSpriteTo(e,r,{duration:.15,overshoot:25}),await Promise.all([t.showSpriteEffect("fist",r,{hueRotate:i,scale:1.2,tint:a,zIndex:t.getEffectZIndex(e.slot)}),t.showSpriteEffect("water",r,{scale:1.3,tint:a,zIndex:t.getEffectZIndex(e.slot)-1}),t.showImpact(r,{intensity:10,color:a})])}async function G(t,c){const{attacker:e,defender:o}=c,r=Array.isArray(o)?o[0]:o,a=t.getTypeColor("water");await t.moveSpriteTo(e,r,{duration:.18,overshoot:25,returnDuration:.35}),await Promise.all([t.showSpriteEffect("water",r,{scale:1.6,tint:a,zIndex:t.getEffectZIndex(e.slot)}),t.showSpriteEffect("slash",r,{hueRotate:h.water,scale:1.2,tint:a,zIndex:t.getEffectZIndex(e.slot)}),t.showImpact(r,{intensity:14,color:a})])}async function W(t,c){const{attacker:e,defender:o}=c,r=Array.isArray(o)?o[0]:o,a=t.getTypeColor("water");await t.moveSpriteTo(e,r,{duration:.12,overshoot:15,returnDuration:.25}),await Promise.all([t.showSpriteEffect("water",r,{scale:1.4,tint:a,zIndex:t.getEffectZIndex(e.slot)}),t.showImpact(r,{intensity:10,color:a}),t.flashSprite(r,a,100)])}async function q(t,c){const{attacker:e,defender:o}=c,r=Array.isArray(o)?o[0]:o,a=t.getTypeColor("water");await t.moveSpriteTo(e,r,{duration:.25,overshoot:10,returnDuration:.4}),await t.backgroundFlash(a,100),await Promise.all([t.showSpriteEffect("water",r,{scale:2,duration:400,tint:a,zIndex:t.getEffectZIndex(e.slot)}),t.showImpact(r,{intensity:18,color:a}),t.screenShake(12,250)])}async function Q(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o[0]:o,i=h[r]??0,s=t.getTypeColor(r);await t.screenShake(15,300),await Promise.all([t.showSpriteEffect("rock",a,{hueRotate:i,scale:1.8,tint:s,zIndex:t.getEffectZIndex(e.slot)}),t.showSpriteEffect("impact",a,{hueRotate:i,scale:1.5,tint:s,zIndex:t.getEffectZIndex(e.slot)-1}),t.screenShake(18,400),t.flashSprite(a,s,150)])}async function F(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o[0]:o,i=h[r]??0,s=t.getTypeColor(r),n=e.homePosition?.scale??1,l=e.element.getBoundingClientRect(),f=a.element.getBoundingClientRect(),d=f.left-l.left,w=f.top-l.top,p=Math.sqrt(d*d+w*w),y=Math.max(0,p-15),S=p>0?y/p:0,x=d*S,I=w*S;await new Promise(b=>{u.to(e.element,{y:-80,scale:n*.9,duration:.25,ease:"power2.out",onComplete:b})}),await t.wait(80),await new Promise(b=>{u.to(e.element,{x,y:I,scale:n,duration:.12,ease:"power4.in",onComplete:b})});const T=Promise.all([t.showSpriteEffect("wind",a,{hueRotate:i,scale:1.4,tint:s,zIndex:t.getEffectZIndex(e.slot)}),t.showImpact(a,{intensity:12,color:s}),t.screenShake(8,200)]),v=new Promise(b=>{u.to(e.element,{x:0,y:0,scale:n,duration:.3,ease:"power2.out",onComplete:b})});await Promise.all([T,v]),t.resetSpriteToHome(e)}const N=["mega-punch","fire-punch","ice-punch","thunder-punch","mach-punch","focus-punch","dynamic-punch","drain-punch","power-up-punch","sky-uppercut","bullet-punch","shadow-punch","meteor-mash","hammer-arm","sucker-punch","plasma-fists"],X=["mega-kick","jump-kick","rolling-kick","hi-jump-kick","low-kick","blaze-kick","stomp","double-kick","low-sweep","high-horsepower","pyro-ball"],j=["cut","slash","fury-cutter","night-slash","x-scissor","psycho-cut","leaf-blade","air-slash","razor-shell","sacred-sword","secret-sword","smart-strike","solar-blade","behemoth-blade","wicked-blow"],_=["scratch","shadow-claw","dragon-claw","metal-claw","crush-claw","fury-swipes","aerial-ace"],K=["bite","crunch","fire-fang","ice-fang","thunder-fang","poison-fang","hyper-fang","super-fang","psychic-fangs","fishious-rend","jaw-lock","clamp"],J=["tackle","body-slam","take-down","double-edge","headbutt","slam","quick-attack","extreme-speed","rollout","rapid-spin","facade","return","frustration","horn-attack","peck","drill-peck","wing-attack","brave-bird","head-smash","iron-head","zen-headbutt","skull-bash","wild-charge","volt-tackle","flare-blitz","giga-impact","last-resort","retaliate","head-charge","raging-bull","collision-course","lunge","steamroller","first-impression","pursuit","payback","feint-attack","thief","punishment","reversal","seismic-toss","wake-up-slap","flying-press","submission","circle-throw","vital-throw","storm-throw","astonish","lick","shadow-bone","ice-ball","avalanche","flail","endeavor","rock-climb","feint","chip-away","thrash","fake-out","smelling-salts","secret-power","heart-stamp"],$=["karate-chop","brick-break","cross-chop","dual-chop","throat-chop"],tt=["liquidation","waterfall","flip-turn"],et=["crabhammer","jet-punch"],ot=["aqua-tail"],at=["aqua-jet","aqua-step"],rt=["wave-crash","dive"],st=["sand-tomb","dig","stomping-tantrum","bone-club","bonemerang"],ct=["fly","sky-attack"];N.forEach(t=>{m[t]=Z});X.forEach(t=>{m[t]=P});j.forEach(t=>{m[t]=B});_.forEach(t=>{m[t]=V});K.forEach(t=>{m[t]=D});J.forEach(t=>{m[t]=H});$.forEach(t=>{m[t]=L});tt.forEach(t=>{m[t]=Y});et.forEach(t=>{m[t]=U});ot.forEach(t=>{m[t]=G});at.forEach(t=>{m[t]=W});rt.forEach(t=>{m[t]=q});st.forEach(t=>{m[t]=Q});ct.forEach(t=>{m[t]=F});function oe(t){Object.entries(m).forEach(([c,e])=>{t.registerMove(c,e)})}const A={},k={fire:"fire",water:"water",electric:"thunder",grass:"leaf",ice:"ice",psychic:"lightball",poison:"poison",rock:"rock",ghost:"shadowball",dragon:"fire",dark:"shadowball",fairy:"lightball",fighting:"impact",ground:"rock",flying:"wind",bug:"leaf",steel:"impact",normal:"impact"};async function it(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o[0]:o,i=h[r]??0,s=t.getTypeColor(r);await t.backgroundFlash(s,100);const n=k[r.toLowerCase()]??"impact";for(let l=0;l<3;l++)t.showSpriteEffect(n,a,{hueRotate:i,scale:1+l*.2,duration:150,tint:s,zIndex:t.getEffectZIndex(e.slot)}),await t.wait(50);await t.wait(100),await Promise.all([t.shake(a.element,10,200),t.flashSprite(a,s,150)])}async function nt(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o[0]:o,i=h[r]??0,s=k[r.toLowerCase()]??"impact",n=t.getTypeColor(r);await t.showSpriteEffect(s,e,{hueRotate:i,scale:.8,duration:100,tint:n,zIndex:t.getEffectZIndex(e.slot)});const l=document.createElement("div");l.style.cssText=`
		position: absolute;
		width: 40px;
		height: 40px;
		border-radius: 50%;
		background: radial-gradient(circle, ${n} 0%, transparent 70%);
		filter: hue-rotate(${i}deg) blur(2px);
		z-index: 100;
	`;const f=e.element.getBoundingClientRect(),d=a.element.getBoundingClientRect(),w=e.element.closest(".battle-scene"),p=w?.getBoundingClientRect()??{left:0,top:0};l.style.left=`${f.left-p.left+f.width/2}px`,l.style.top=`${f.top-p.top+f.height/2}px`,w?.appendChild(l),await new Promise(y=>{u.to(l,{left:d.left-p.left+d.width/2,top:d.top-p.top+d.height/2,duration:.3,ease:"power2.in",onComplete:()=>{l.remove(),y()}})}),await Promise.all([t.showSpriteEffect(s,a,{hueRotate:i,scale:1.2,tint:n,zIndex:t.getEffectZIndex(e.slot)}),t.showImpact(a,{intensity:8,color:n})])}async function lt(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o:[o],i=h[r]??0,s=k[r.toLowerCase()]??"impact",n=t.getTypeColor(r);await t.backgroundFlash(n,150);const l=a.map(async f=>{await t.showSpriteEffect(s,f,{hueRotate:i,scale:2,duration:400,tint:n,zIndex:t.getEffectZIndex(e.slot)}),await t.showImpact(f,{intensity:15,color:n})});await Promise.all([...l,t.screenShake(12,300)])}async function ft(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o[0]:o,i=h[r]??0,s=k[r.toLowerCase()]??"psychic",n=t.getTypeColor(r);for(let l=0;l<4;l++)t.showSpriteEffect(s,a,{hueRotate:i,scale:.8+l*.3,opacity:1-l*.2,duration:200,tint:n,zIndex:t.getEffectZIndex(e.slot)}),await t.wait(80);await Promise.all([t.shake(a.element,8,250),t.flashSprite(a,n,100)])}async function ht(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o[0]:o,i=h[r]??0,s=t.getTypeColor(r);await t.showSpriteEffect("psychic",a,{hueRotate:i,scale:1.2,tint:s,zIndex:t.getEffectZIndex(e.slot)}),await t.shake(a.element,6,150);for(let n=0;n<3;n++){const l=document.createElement("div");l.style.cssText=`
			position: absolute;
			width: 20px;
			height: 20px;
			border-radius: 50%;
			background: radial-gradient(circle, ${s} 0%, transparent 70%);
			z-index: 100;
		`;const f=a.element.getBoundingClientRect(),d=e.element.getBoundingClientRect(),w=a.element.closest(".battle-scene"),p=w?.getBoundingClientRect()??{left:0,top:0};l.style.left=`${f.left-p.left+f.width/2+(n-1)*20}px`,l.style.top=`${f.top-p.top+f.height/2}px`,w?.appendChild(l),u.to(l,{left:d.left-p.left+d.width/2,top:d.top-p.top+d.height/2,duration:.5,delay:n*.1,ease:"power2.inOut",onComplete:()=>l.remove()})}await t.wait(600),await t.flashSprite(e,"#66ff66",150)}async function pt(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o[0]:o,i=h[r]??0,s=t.getTypeColor(r);for(let n=0;n<3;n++)t.showSpriteEffect("wind",e,{hueRotate:i,scale:1+n*.5,opacity:1-n*.25,duration:200,tint:s,zIndex:t.getEffectZIndex(e.slot)}),await t.wait(100);await t.wait(50),await Promise.all([t.showSpriteEffect("wind",a,{hueRotate:i,scale:1.5,tint:s,zIndex:t.getEffectZIndex(e.slot)}),t.shake(a.element,10,250),t.flashSprite(a,s,100)])}async function dt(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o[0]:o,i=h[r]??0,s=k[r.toLowerCase()]??"fire",n=t.getTypeColor(r);await t.showSpriteEffect(s,e,{hueRotate:i,scale:.8,duration:150,tint:n,zIndex:t.getEffectZIndex(e.slot)}),await t.backgroundFlash(n,80);for(let l=0;l<4;l++)t.showSpriteEffect(s,a,{hueRotate:i,scale:1.2+l*.25,duration:180,tint:n,zIndex:t.getEffectZIndex(e.slot)}),await t.wait(40);await Promise.all([t.shake(a.element,12,300),t.flashSprite(a,n,150)])}async function ut(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o[0]:o,i=h[r]??0,s=k[r.toLowerCase()]??"leaf",n=t.getTypeColor(r);t.showSpriteEffect(s,e,{hueRotate:i,scale:.7,opacity:.8,duration:200,tint:n,zIndex:t.getEffectZIndex(e.slot)}),await t.wait(150);for(let l=0;l<3;l++)t.showSpriteEffect(s,a,{hueRotate:i,scale:.6+l*.2,opacity:.9-l*.2,duration:250,tint:n,zIndex:t.getEffectZIndex(e.slot)}),await t.wait(120);await t.flashSprite(a,n,100)}async function mt(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o[0]:o,i=h[r]??0,s=k[r.toLowerCase()]??"rock",n=t.getTypeColor(r);await t.showSpriteEffect(s,e,{hueRotate:i,scale:.6,duration:100,tint:n,zIndex:t.getEffectZIndex(e.slot)});const l=document.createElement("div");l.style.cssText=`
		position: absolute;
		width: 35px;
		height: 35px;
		border-radius: 50%;
		background: radial-gradient(circle, ${n} 0%, transparent 70%);
		filter: hue-rotate(${i}deg) blur(1px);
		z-index: 100;
	`;const f=e.element.getBoundingClientRect(),d=a.element.getBoundingClientRect(),w=e.element.closest(".battle-scene"),p=w?.getBoundingClientRect()??{left:0,top:0},y=f.left-p.left+f.width/2,S=f.top-p.top+f.height/2,x=d.left-p.left+d.width/2,I=d.top-p.top+d.height/2;l.style.left=`${y}px`,l.style.top=`${S}px`,w?.appendChild(l);const T=Math.min(S,I)-60;await new Promise(v=>{u.timeline({onComplete:()=>{l.remove(),v()}}).to(l,{left:(y+x)/2,top:T,duration:.2,ease:"power2.out"}).to(l,{left:x,top:I,duration:.15,ease:"power2.in"})}),await Promise.all([t.showSpriteEffect(s,a,{hueRotate:i,scale:1.3,tint:n,zIndex:t.getEffectZIndex(e.slot)}),t.showImpact(a,{intensity:10,color:n})])}const wt=["hyper-beam","solar-beam","ice-beam","aurora-beam","psybeam","bubble-beam","signal-beam","charge-beam","flash-cannon","dragon-pulse","dark-pulse","water-pulse","aura-sphere","focus-blast","energy-ball","shadow-ball","sludge-bomb","moonblast","dazzling-gleam","power-gem","tri-attack","techno-blast","judgment","doom-desire","origin-pulse","prismatic-laser","photon-geyser","meteor-beam","eternabeam","dragon-rage","fleur-cannon","earth-power","acid-spray","freezing-glare"],yt=["ember","flamethrower","fire-blast","water-gun","hydro-pump","thunderbolt","thunder","ice-shard","seed-bomb","sludge","acid","poison-jab","gunk-shot","rock-slide","stone-edge","ancient-power","muddy-water","surf","scald","brine","whirlpool","flame-burst","lava-plume","eruption","water-spout","draco-meteor","infestation","fairy-wind","mud-slap","mud-shot","icy-wind","wring-out","spit-up","trump-card","hidden-power","shell-side-arm","mirror-shot","powder-snow"],At=["explosion","self-destruct","mind-blown","misty-explosion","earthquake","magnitude","bulldoze","discharge","heat-wave","blizzard","hurricane","twister","ominous-wind","silver-wind","petal-blizzard","petal-dance","fiery-dance","shell-trap"],Et=["psychic","psyshock","stored-power","extrasensory","confusion","night-shade","hex","shadow-sneak","shadow-force","phantom-force","poltergeist","spirit-shackle","spectral-thief","mirror-coat","future-sight","psywave"],kt=["absorb","mega-drain","giga-drain","leech-life","draining-kiss","horn-leech","parabolic-charge","oblivion-wing","dream-eater"],gt=["snarl","disarming-voice","uproar","snore","echoed-voice","boomburst","eerie-spell","sparkling-aria"],bt=["fiery-wrath"],St=["electroweb"],Ct=["fling","mud-bomb","present","egg-bomb","rock-wrecker","diamond-storm"];wt.forEach(t=>{A[t]=it});yt.forEach(t=>{A[t]=nt});At.forEach(t=>{A[t]=lt});Et.forEach(t=>{A[t]=ft});kt.forEach(t=>{A[t]=ht});gt.forEach(t=>{A[t]=pt});bt.forEach(t=>{A[t]=dt});St.forEach(t=>{A[t]=ut});Ct.forEach(t=>{A[t]=mt});function ae(t){Object.entries(A).forEach(([c,e])=>{t.registerMove(c,e)})}const g={};async function xt(t,c){const{attacker:e,moveType:o}=c,r=h[o]??0,a=t.getTypeColor(o);await t.pulseScale(e,1.15,300);for(let i=0;i<3;i++)t.showSpriteEffect("buff",e,{hueRotate:r,scale:.8+i*.2,opacity:1-i*.3,duration:250,tint:a,zIndex:t.getEffectZIndex(e.slot)}),await t.wait(100);await t.flashSprite(e,a,150)}async function It(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o[0]:o,i=h[r]??0,s=t.getTypeColor(r);await t.showSpriteEffect("debuff",a,{hueRotate:i,scale:1.2,tint:s,zIndex:t.getEffectZIndex(e.slot)}),await new Promise(n=>{u.to(a.element,{filter:"brightness(0.7) saturate(0.8)",duration:.2,onComplete:()=>{u.to(a.element,{filter:"brightness(1) saturate(1)",duration:.3,onComplete:n})}})})}async function Tt(t,c){const{attacker:e}=c,o="#66ff88";for(let r=0;r<4;r++)t.showSpriteEffect("heal",e,{scale:.6+r*.15,opacity:1-r*.2,duration:200,tint:o,zIndex:t.getEffectZIndex(e.slot)}),await t.wait(80);await t.flashSprite(e,o,200),await t.pulseScale(e,1.08,250)}async function vt(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o[0]:o,i=h[r]??0,s=t.getTypeColor(r);await t.showSpriteEffect("psychic",a,{hueRotate:i,scale:1.3,tint:s,zIndex:t.getEffectZIndex(e.slot)}),await new Promise(n=>{u.timeline({onComplete:n}).to(a.element,{filter:`drop-shadow(0 0 8px ${s}) brightness(1.3)`,duration:.15}).to(a.element,{filter:"none",duration:.15}).to(a.element,{filter:`drop-shadow(0 0 8px ${s}) brightness(1.3)`,duration:.15}).to(a.element,{filter:"none",duration:.15})})}async function Rt(t,c){const{attacker:e}=c,o=document.createElement("div");o.style.cssText=`
		position: absolute;
		width: 120px;
		height: 120px;
		border-radius: 50%;
		border: 4px solid rgba(100, 200, 255, 0.8);
		background: radial-gradient(circle, rgba(100, 200, 255, 0.3) 0%, transparent 70%);
		z-index: 100;
		transform: scale(0);
	`;const r=e.element.getBoundingClientRect(),a=e.element.closest(".battle-scene"),i=a?.getBoundingClientRect()??{left:0,top:0};o.style.left=`${r.left-i.left+r.width/2-60}px`,o.style.top=`${r.top-i.top+r.height/2-60}px`,a?.appendChild(o),await new Promise(s=>{u.timeline({onComplete:s}).to(o,{scale:1,opacity:1,duration:.2,ease:"back.out"}).to(o,{opacity:.6,duration:.3}).to(o,{scale:1.2,opacity:0,duration:.3,onComplete:()=>o.remove()})})}async function Mt(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o[0]:o,i=h[r]??0,s=t.getTypeColor(r);await t.showSpriteEffect("leaf",e,{hueRotate:i,scale:.8,duration:150,tint:s,zIndex:t.getEffectZIndex(e.slot)});for(let n=0;n<2;n++)await t.showSpriteEffect("slash",a,{hueRotate:i,scale:1.2+n*.2,tint:s,zIndex:t.getEffectZIndex(e.slot)}),await t.wait(60);await Promise.all([t.shake(a.element,8,200),t.flashSprite(a,s,100)])}const Ot=["swords-dance","dragon-dance","calm-mind","bulk-up","nasty-plot","agility","rock-polish","shell-smash","quiver-dance","coil","hone-claws","work-up","curse","shift-gear","cotton-guard","iron-defense","acid-armor","barrier","amnesia","cosmic-power","defend-order","stockpile","double-team","autotomize","charge","focus-energy","meditate","sharpen","acupressure","geomancy","extreme-evoboost","switcheroo","tailwind","mirror-move","mud-sport","rototiller","copycat","camouflage","helping-hand","splash","psych-up","sleep-talk","bestow","pain-split","assist","metronome","recycle","follow-me","mimic","magic-room","role-play","ally-switch","power-trick","trick","speed-swap","teleport","gravity","trick-room","psycho-shift","heart-swap","aromatic-mist","haze"],zt=["growl","leer","tail-whip","string-shot","sand-attack","smokescreen","flash","kinesis","sweet-scent","scary-face","cotton-spore","fake-tears","metal-sound","screech","charm","feather-dance","captivate","memento","parting-shot","noble-roar","play-nice","baby-doll-eyes","tearful-look","tickle","venom-drench","quash","roar"],Zt=["recover","soft-boiled","milk-drink","slack-off","roost","moonlight","morning-sun","synthesis","wish","heal-order","shore-up","rest","aqua-ring","ingrain","leech-seed","strength-sap","life-dew","floral-healing","heal-pulse","pollen-puff","jungle-healing","aromatherapy","refresh","swallow","healing-wish"],Pt=["thunder-wave","stun-spore","glare","nuzzle","zap-cannon","will-o-wisp","toxic","poison-powder","poison-gas","sleep-powder","hypnosis","sing","lovely-kiss","grass-whistle","spore","yawn","dark-void","confuse-ray","supersonic","swagger","flatter","teeter-dance","attract","encore","taunt","torment","disable","spite","grudge","destiny-bond","perish-song","sweet-kiss","nightmare","spider-web","block","mean-look"],Bt=["protect","detect","endure","wide-guard","quick-guard","kings-shield","spiky-shield","baneful-bunker","obstruct","max-guard","crafty-shield","mat-block","light-screen","reflect","aurora-veil","safeguard","mist","substitute","magic-coat"],Vt=["branch-poke","bind","constrict","wrap"];Ot.forEach(t=>{g[t]=xt});zt.forEach(t=>{g[t]=It});Zt.forEach(t=>{g[t]=Tt});Pt.forEach(t=>{g[t]=vt});Bt.forEach(t=>{g[t]=Rt});Vt.forEach(t=>{g[t]=Mt});function re(t){Object.entries(g).forEach(([c,e])=>{t.registerMove(c,e)})}const E={};async function Dt(t,c){const{attacker:e,defender:o,moveType:r,hitCount:a}=c,i=Array.isArray(o)?o[0]:o,s=h[r]??0,n=t.getTypeColor(r),l=a??3;for(let f=0;f<l;f++)await t.moveSpriteTo(e,i,{duration:.1,overshoot:25}),await t.showSpriteEffect("impact",i,{hueRotate:s,scale:.8+f*.1,tint:n,zIndex:t.getEffectZIndex(e.slot)}),await t.shake(i.element,5,80),await t.wait(50)}async function Ht(t,c){const{attacker:e,defender:o,moveType:r}=c,a=Array.isArray(o)?o[0]:o,i=t.getTypeColor(r);await t.backgroundFlash("#ffffff",200),await t.moveSpriteTo(e,a,{duration:.3,easing:"power4.in",overshoot:5}),await Promise.all([t.showSpriteEffect("impact",a,{scale:2.5,duration:500,tint:i,zIndex:t.getEffectZIndex(e.slot)}),t.screenShake(20,500),t.flashSprite(a,i,300)]),await new Promise(s=>{u.to(a.element,{filter:"brightness(3) contrast(2)",duration:.2,onComplete:()=>{u.to(a.element,{filter:"none",duration:.3,onComplete:s})}})})}const Lt=["spikes","toxic-spikes","stealth-rock","sticky-web"],Yt={spikes:R,"stealth-rock":z,"toxic-spikes":M,"sticky-web":O};async function Ut(t,c){const{attacker:e,moveName:o}=c,r=o.toLowerCase(),a=Yt[r];if(!a)return;const i=document.querySelector(".battle-scene");if(!i)return;const s=i.getBoundingClientRect();let n,l;const f=e.slot.side==="player";if(e.element){const y=e.element.getBoundingClientRect();n=y.left-s.left+y.width/2,l=y.top-s.top+y.height/2}else n=f?s.width*.25:s.width*.75,l=s.height*.6;const d=f?s.width*.75:s.width*.25,w=s.height*.75,p=document.createElement("img");p.src=a,p.style.cssText=`
		position: absolute;
		left: ${n}px;
		top: ${l}px;
		width: 40px;
		height: 40px;
		pointer-events: none;
		z-index: 1000;
		transform: translate(-50%, -50%);
	`,i.appendChild(p),await new Promise(y=>{u.to(p,{left:d,top:w,duration:.4,ease:"power2.in",onComplete:()=>{p.remove(),y()}})}),await t.screenShake(3,150)}async function Gt(t,c){const{attacker:e,defender:o,moveType:r,moveName:a}=c,i=h[r]??0,s=t.getTypeColor(r),n=a.toLowerCase();if(Lt.includes(n)){await Ut(t,c);return}const f=o&&!Array.isArray(o)?o:e;await t.showSpriteEffect("rock",f,{hueRotate:i,scale:1.5,tint:s,zIndex:t.getEffectZIndex(f.slot)}),await t.backgroundFlash(s,150),await t.screenShake(5,200)}async function Wt(t,c){const{attacker:e}=c,o=e.homePosition?.scale??1;await new Promise(r=>{u.timeline({onComplete:r}).to(e.element,{filter:"brightness(3)",scale:o*.8,duration:.2}).to(e.element,{filter:"brightness(5)",scale:o*1.2,duration:.15}).to(e.element,{filter:"brightness(1)",scale:o,duration:.25})})}async function qt(t,c){const{moveName:e}=c,r={"rain-dance":"#4488cc","sunny-day":"#ffaa33",sandstorm:"#ccaa66",hail:"#aaddff",snowscape:"#cceeFF"}[e]??"#888888";await t.backgroundFlash(r,400);for(let a=0;a<5;a++)await t.wait(80),await t.backgroundFlash(r,100)}async function Qt(t,c){const{moveName:e}=c,r={"electric-terrain":"#ffee55","grassy-terrain":"#66cc66","psychic-terrain":"#ff88cc","misty-terrain":"#ffaaff"}[e]??"#888888";await t.backgroundFlash(r,300),await t.screenShake(3,200),await t.backgroundFlash(r,200)}async function Ft(t,c){const{attacker:e,moveName:o}=c,r=e.homePosition?.scale??1;["minimize"].includes(o)?await new Promise(i=>{u.timeline({onComplete:i}).to(e.element,{scale:r*.6,duration:.3,ease:"power2.in"}).to(e.element,{scale:r*.7,duration:.1}).to(e.element,{scale:r,duration:.2,ease:"power2.out"})}):(await t.pulseScale(e,r*1.25,400),await t.showSpriteEffect("buff",e,{scale:1.3,tint:"#ffcc00",zIndex:t.getEffectZIndex(e.slot)}))}const Nt=["growth","belly-drum","minimize"],Xt=["double-slap","comet-punch","fury-attack","pin-missile","spike-cannon","barrage","bone-rush","arm-thrust","bullet-seed","icicle-spear","rock-blast","water-shuriken","tail-slap","triple-kick","triple-axel","scale-shot","dual-wingbeat","surging-strikes","twineedle","gear-grind"],jt=["guillotine","horn-drill","fissure","sheer-cold"],_t=["spikes","toxic-spikes","stealth-rock","sticky-web","defog","court-change"],Kt=["transform","ditto"],Jt=["rain-dance","sunny-day","sandstorm","hail","snowscape"],$t=["electric-terrain","grassy-terrain","psychic-terrain","misty-terrain"];Xt.forEach(t=>{E[t]=Dt});jt.forEach(t=>{E[t]=Ht});_t.forEach(t=>{E[t]=Gt});Kt.forEach(t=>{E[t]=Wt});Jt.forEach(t=>{E[t]=qt});$t.forEach(t=>{E[t]=Qt});Nt.forEach(t=>{E[t]=Ft});function se(t){Object.entries(E).forEach(([c,e])=>{t.registerMove(c,e)})}export{oe as a,ae as b,R as c,re as d,se as e,M as p,z as r,O as w};
