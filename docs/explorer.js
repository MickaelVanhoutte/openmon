var os=Object.defineProperty;var as=(s,e,t)=>e in s?os(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var d=(s,e,t)=>(as(s,typeof e!="symbol"?e+"":e,t),t);function L(){}function Nt(s){return s()}function _t(){return Object.create(null)}function te(s){s.forEach(Nt)}function Ft(s){return typeof s=="function"}function ce(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let qe;function Ht(s,e){return s===e?!0:(qe||(qe=document.createElement("a")),qe.href=e,s===qe.href)}function ls(s){return Object.keys(s).length===0}function h(s,e){s.appendChild(e)}function de(s,e,t){const n=cs(s);if(!n.getElementById(e)){const i=m("style");i.id=e,i.textContent=t,ds(n,i)}}function cs(s){if(!s)return document;const e=s.getRootNode?s.getRootNode():s.ownerDocument;return e&&e.host?e:s.ownerDocument}function ds(s,e){return h(s.head||s,e),e.sheet}function C(s,e,t){s.insertBefore(e,t||null)}function A(s){s.parentNode&&s.parentNode.removeChild(s)}function us(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function m(s){return document.createElement(s)}function I(s){return document.createTextNode(s)}function q(){return I(" ")}function ps(){return I("")}function X(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function v(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function fs(s){return Array.from(s.childNodes)}function U(s,e){e=""+e,s.data!==e&&(s.data=e)}function ee(s,e,t,n){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,n?"important":"")}function $(s,e,t){s.classList.toggle(e,!!t)}function hs(s){const e={};return s.childNodes.forEach(t=>{e[t.slot||"default"]=!0}),e}let tt;function we(s){tt=s}const ve=[],j=[];let me=[];const Ue=[],gs=Promise.resolve();let Ge=!1;function bs(){Ge||(Ge=!0,gs.then(B))}function We(s){me.push(s)}function G(s){Ue.push(s)}const He=new Set;let he=0;function B(){if(he!==0)return;const s=tt;do{try{for(;he<ve.length;){const e=ve[he];he++,we(e),vs(e.$$)}}catch(e){throw ve.length=0,he=0,e}for(we(null),ve.length=0,he=0;j.length;)j.pop()();for(let e=0;e<me.length;e+=1){const t=me[e];He.has(t)||(He.add(t),t())}me.length=0}while(ve.length);for(;Ue.length;)Ue.pop()();Ge=!1,He.clear(),we(s)}function vs(s){if(s.fragment!==null){s.update(),te(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(We)}}function ms(s){const e=[],t=[];me.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),me=e}const Oe=new Set;let oe;function st(){oe={r:0,c:[],p:oe}}function nt(){oe.r||te(oe.c),oe=oe.p}function V(s,e){s&&s.i&&(Oe.delete(s),s.i(e))}function J(s,e,t,n){if(s&&s.o){if(Oe.has(s))return;Oe.add(s),oe.c.push(()=>{Oe.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}function kt(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function W(s,e,t){const n=s.$$.props[e];n!==void 0&&(s.$$.bound[n]=t,t(s.$$.ctx[n]))}function ye(s){s&&s.c()}function ae(s,e,t){const{fragment:n,after_update:i}=s.$$;n&&n.m(e,t),We(()=>{const r=s.$$.on_mount.map(Nt).filter(Ft);s.$$.on_destroy?s.$$.on_destroy.push(...r):te(r),s.$$.on_mount=[]}),i.forEach(We)}function le(s,e){const t=s.$$;t.fragment!==null&&(ms(t.after_update),te(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function ys(s,e){s.$$.dirty[0]===-1&&(ve.push(s),bs(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function ue(s,e,t,n,i,r,o=null,a=[-1]){const u=tt;we(s);const l=s.$$={fragment:null,ctx:[],props:r,update:L,not_equal:i,bound:_t(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:_t(),dirty:a,skip_bound:!1,root:e.target||u.$$.root};o&&o(l.root);let c=!1;if(l.ctx=t?t(s,e.props||{},(p,f,...w)=>{const g=w.length?w[0]:f;return l.ctx&&i(l.ctx[p],l.ctx[p]=g)&&(!l.skip_bound&&l.bound[p]&&l.bound[p](g),c&&ys(s,p)),f}):[],l.update(),c=!0,te(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){const p=fs(e.target);l.fragment&&l.fragment.l(p),p.forEach(A)}else l.fragment&&l.fragment.c();e.intro&&V(s.$$.fragment),ae(s,e.target,e.anchor),B()}we(u)}let Xt;typeof HTMLElement=="function"&&(Xt=class extends HTMLElement{constructor(e,t,n){super();d(this,"$$ctor");d(this,"$$s");d(this,"$$c");d(this,"$$cn",!1);d(this,"$$d",{});d(this,"$$r",!1);d(this,"$$p_d",{});d(this,"$$l",{});d(this,"$$l_u",new Map);this.$$ctor=e,this.$$s=t,n&&this.attachShadow({mode:"open"})}addEventListener(e,t,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){const i=this.$$c.$on(e,t);this.$$l_u.set(t,i)}super.addEventListener(e,t,n)}removeEventListener(e,t,n){if(super.removeEventListener(e,t,n),this.$$c){const i=this.$$l_u.get(t);i&&(i(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(o){return()=>{let a;return{c:function(){a=m("slot"),o!=="default"&&v(a,"name",o)},m:function(c,p){C(c,a,p)},d:function(c){c&&A(a)}}}};var e=t;if(await Promise.resolve(),!this.$$cn)return;const n={},i=hs(this);for(const o of this.$$s)o in i&&(n[o]=[t(o)]);for(const o of this.attributes){const a=this.$$g_p(o.name);a in this.$$d||(this.$$d[a]=Ie(a,o.value,this.$$p_d,"toProp"))}for(const o in this.$$p_d)!(o in this.$$d)&&this[o]!==void 0&&(this.$$d[o]=this[o],delete this[o]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:n,$$scope:{ctx:[]}}});const r=()=>{this.$$r=!0;for(const o in this.$$p_d)if(this.$$d[o]=this.$$c.$$.ctx[this.$$c.$$.props[o]],this.$$p_d[o].reflect){const a=Ie(o,this.$$d[o],this.$$p_d,"toAttribute");a==null?this.removeAttribute(this.$$p_d[o].attribute||o):this.setAttribute(this.$$p_d[o].attribute||o,a)}this.$$r=!1};this.$$c.$$.after_update.push(r),r();for(const o in this.$$l)for(const a of this.$$l[o]){const u=this.$$c.$on(o,a);this.$$l_u.set(a,u)}this.$$l={}}}attributeChangedCallback(e,t,n){var i;this.$$r||(e=this.$$g_p(e),this.$$d[e]=Ie(e,n,this.$$p_d,"toProp"),(i=this.$$c)==null||i.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e)||e}});function Ie(s,e,t,n){var r;const i=(r=t[s])==null?void 0:r.type;if(e=i==="Boolean"&&typeof e!="boolean"?e!=null:e,!n||!t[s])return e;if(n==="toAttribute")switch(i){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(i){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function pe(s,e,t,n,i,r){let o=class extends Xt{constructor(){super(s,t,i),this.$$p_d=e}static get observedAttributes(){return Object.keys(e).map(a=>(e[a].attribute||a).toLowerCase())}};return Object.keys(e).forEach(a=>{Object.defineProperty(o.prototype,a,{get(){return this.$$c&&a in this.$$c?this.$$c[a]:this.$$d[a]},set(u){var l;u=Ie(a,u,e),this.$$d[a]=u,(l=this.$$c)==null||l.$set({[a]:u})}})}),n.forEach(a=>{Object.defineProperty(o.prototype,a,{get(){var u;return(u=this.$$c)==null?void 0:u[a]}})}),r&&(o=r(o)),s.element=o,o}class fe{constructor(){d(this,"$$");d(this,"$$set")}$destroy(){le(this,1),this.$destroy=L}$on(e,t){if(!Ft(t))return L;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!ls(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ws="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ws);class N{constructor(e=0,t=0){d(this,"x");d(this,"y");this.x=e,this.y=t}}class _s{constructor(){d(this,"currentImage");d(this,"frameElapsed",0);d(this,"dimensions",{width:80,height:80});d(this,"spriteScale",4);d(this,"animateFrames",0);d(this,"goingDown",!0);d(this,"yOffset",0)}draw(e,t,n,i=!0,r=0,o=0,a=0){var u;if(t.sprites){this.updateScale(e.canvas.width,e.canvas.height);let l=t.gender!=="unknown"?t.sprites[t.gender][n]:t.sprites.male[n],c="frame";t.isShiny&&(c="shiny"),this.frameElapsed+r<100?c+="1":c+="2",this.frameElapsed+r>=200&&(this.frameElapsed=0);let p=l[c];if(!p)return;if(!this.currentImage||this.currentImage.src!==p){let f=new Image;f.src=p,f.onload=()=>{this.currentImage=f}}if(this.goingDown=this.animateFrames<=10,this.yOffset=this.goingDown?this.yOffset+1:this.yOffset-1,this.animateFrames++,this.animateFrames>=20&&(this.animateFrames=0),(u=this.currentImage)!=null&&u.complete){let f=this.getPosition(e,n,o,a);e.drawImage(this.currentImage,0,0,this.dimensions.width,this.dimensions.height,f.x,f.y+(i?this.yOffset:0),this.dimensions.width*this.spriteScale,this.dimensions.height*this.spriteScale),this.frameElapsed++}}}getPosition(e,t,n=0,i=0){let r=new N;return t==="front"?r=new N(e.canvas.width/4*3-this.dimensions.width*(this==null?void 0:this.spriteScale)/2+n,e.canvas.height/2-this.dimensions.height*(this==null?void 0:this.spriteScale)*1.2+i):r=new N(e.canvas.width/4-this.dimensions.width*this.spriteScale/2+n,e.canvas.height/4*3-this.dimensions.height*this.spriteScale*.75+i),r}updateScale(e,t){e<1100?this.spriteScale=2:this.spriteScale=4}}class ks{constructor(){d(this,"images",{});d(this,"battlefields",{default:"src/assets/battle/battle-default.png",grass:"src/assets/battle/battle-grass.png",water:"src/assets/battle/battle-water.png",rock:"src/assets/battle/battle-rock.png",rainy:"src/assets/battle/battle-rainy.png"});d(this,"dimensions",{width:240,height:112})}draw(e,t="default"){let n=this.images[t];n&&n.complete?this.drawImage(e,n):(n=new Image,n.src=this.battlefields[t],n.onload=()=>{this.images[t]=n,e.drawImage(n,0,0,e.canvas.width,e.canvas.height)})}drawImage(e,t){e.drawImage(t,0,0,this.dimensions.width,this.dimensions.height,0,0,e.canvas.width,e.canvas.height*.75)}}class xs{constructor(){d(this,"frames",{max:3,val:0,elapsed:0});d(this,"images",{})}draw(e,t,n,i,r,o,a,u){let l=this.images[a];l&&l.complete?this.drawImage(e,l,t,n,i,r,o,a,u):(l=new Image,l.src=a,l.onload=()=>{this.images[a]=l,this.drawImage(e,l,t,n,i,r,o,a,u)})}drawImage(e,t,n,i,r,o,a,u,l){let c=o*r,p=a*r,f=e.canvas.width/2-c/2,w=e.canvas.height/2-p/2;l?(this.frames.max>1&&(this.frames.elapsed+=1),this.frames.elapsed%2===0&&(this.frames.val+=1,this.frames.val>this.frames.max-1&&(this.frames.val=0))):this.frames.val=1,e.drawImage(t,this.frames.val*(t.width/this.frames.max),0,t.width/this.frames.max,t.height,f+n.x,w+n.y-10,t.width/this.frames.max*r,t.height*r)}}class Ut{constructor(e,t,n,i=[]){d(this,"name");d(this,"gender");d(this,"sprites");d(this,"monsters");d(this,"bag",[]);d(this,"lvl",1);d(this,"moving",!1);d(this,"direction","down");d(this,"positionOnScreen");d(this,"positionOnMap");d(this,"drawer");this.name=e,this.gender=t,this.sprites=n,this.monsters=i,this.positionOnMap=new N(0,0),this.positionOnScreen=new N(0,0),this.drawer=new xs}get sprite(){return this.sprites[this.direction]}draw(e,t,n,i,r){this.drawer.draw(e,this.positionOnScreen,t,n,i,r,this.sprite,this.moving)}updatePosition(e,t){this.positionOnMap.x=e.x+t.x,this.positionOnMap.y=e.y+t.y}}class Ms{constructor(e,t,n,i,r){d(this,"down");d(this,"up");d(this,"left");d(this,"right");d(this,"battle");d(this,"width",80);d(this,"height",80);this.down=e,this.up=t,this.left=n,this.right=i,this.battle=r}}class Ss{constructor(){d(this,"ready",!1);d(this,"chartById",new Map);fetch("/src/assets/data/final/xp-chart.json").then(e=>e.json()).then(e=>{e.forEach(t=>{this.chartById.has(t.growth_rate_id)||this.chartById.set(t.growth_rate_id,[]),this.chartById.get(t.growth_rate_id).push(new $s(t.level,t.experience))}),this.ready=!0})}howMuchINeed(e,t){if(!this.ready||e<1||e>100||!this.chartById.has(t))return console.error("ERROR",e,t),0;let n=this.chartById.get(t),i=n==null?void 0:n.find(r=>r.level===e);return(i==null?void 0:i.experience)||0}howMuchIGet(e,t,n,i=!1,r=!1){let o=t.baseXp,a=t.level,u=i?1.5:1,l=r?2*n:n;return Math.floor(o*a/7*u*(1/l)*1*1*1*1*1)}}class $s{constructor(e,t){d(this,"level");d(this,"experience");this.level=e,this.experience=t}}const xt=new Ss;class As{constructor(e,t,n,i,r,o,a,u,l,c,p){d(this,"name");d(this,"type");d(this,"category");d(this,"power");d(this,"accuracy");d(this,"pp");d(this,"priority");d(this,"effect");d(this,"effectChance");d(this,"description");d(this,"level");this.name=e,this.type=t,this.category=n,this.power=i,this.accuracy=r,this.pp=o,this.priority=a,this.effect=u,this.effectChance=l,this.description=c,this.level=p}}class Cs extends As{constructor(t,n,i,r,o,a,u,l,c,p,f){super(t,n,i,r,o,a,u,l,c,p,f);d(this,"currentPp");this.currentPp=a}}class Ne extends it{constructor(t,n,i){super(t.id,t.name,t.types,t.abilities,t.moves,t.stats,t.height,t.weight,t.description,t.isLegendary,t.captureRate,t.experienceGrowth,t.baseXp,t.percentageMale,t.evolution,t.sprites);d(this,"currentStats",new ie);d(this,"currentHp",1);d(this,"currentXp",0);d(this,"xpToNextLevel",0);d(this,"currentAbility","");d(this,"level",1);d(this,"evsToDistribute",0);d(this,"fainted",!1);d(this,"moves",[]);d(this,"ivs",new ie);d(this,"evs",new ie);d(this,"nature","");d(this,"gender");d(this,"heldItem",{});d(this,"isShiny",!1);d(this,"spriteDrawer");i?(this.currentAbility=t.abilities.includes(i.currentAbility)?i.currentAbility:t.abilities[Math.floor(Math.random()*t.abilities.length)],this.evs=i.evs,this.ivs=i.ivs,this.level=i.level,this.currentXp=i.currentXp,this.currentHp=i.currentHp,this.moves=i.moves,this.isShiny=i.isShiny,this.gender=i.gender,this.evsToDistribute=i.evsToDistribute,this.heldItem=i.heldItem,this.updateCurrentStats()):(this.currentAbility=this.abilities[Math.floor(Math.random()*this.abilities.length)],this.evs=new ie,this.ivs=new ie(Math.floor(Math.random()*32),Math.floor(Math.random()*32),Math.floor(Math.random()*32),Math.floor(Math.random()*32),Math.floor(Math.random()*32),Math.floor(Math.random()*32)),this.level=n||5,this.currentXp=0,this.updateCurrentStats(),this.currentHp=this.currentStats.hp,this.moves=this.selectLatestMoves(t),this.isShiny=Math.floor(Math.random()*2048)===0,this.gender=this.percentageMale?Math.random()*this.percentageMale<=this.percentageMale?"male":"female":"unknown"),this.spriteDrawer=new _s}get spriteScale(){return 1}get totalEvs(){return this.evs.attack+this.evs.defense+this.evs.specialAttack+this.evs.specialDefense+this.evs.speed+this.evs.hp}draw(t,n,i=0,r=0,o=0){this.spriteDrawer.draw(t,this,n,!0,i,r,o)}selectMove(t,n){let i=Math.floor(Math.random()*this.moves.length),r=this.moves[i];return t==="Easy"&&n&&((n==null?void 0:n.types.length)===2?this.moves.find(a=>a.type===n.types[0]&&a.power>0):this.moves.find(a=>(a.type===n.types[0]||a.type===n.types[1])&&a.power>0)),r}fromBaseStats(){return new ie(Math.floor((this.ivs.hp+this.stats.hp*2+this.evs.hp/4)*this.level/100+10+this.level),Math.floor((this.ivs.attack+this.stats.attack*2+this.evs.attack/4)*this.level/100+5),Math.floor((this.ivs.defense+this.stats.defense*2+this.evs.defense/4)*this.level/100+5),Math.floor((this.ivs.specialAttack+this.stats.specialAttack*2+this.evs.specialAttack/4)*this.level/100+5),Math.floor((this.ivs.specialDefense+this.stats.specialDefense*2+this.evs.specialDefense/4)*this.level/100+5),Math.floor((this.ivs.speed+this.stats.speed*2+this.evs.speed/4)*this.level/100+5))}howMuchXpWon(t,n=1,i=!1){return xt.howMuchIGet(this,t,n,i,!1)}addXp(t,n){if(this.evsToDistribute+=this.totalEvs+n<=255?n:this.totalEvs+n-255,this.level>=100)return;let i=0;if(this.xpToNextLevel<t){i=t-this.xpToNextLevel;const r=t-i;this.currentXp+=r}else this.currentXp+=t;this.currentXp>=this.xpToNextLevel&&this.levelUp(),i>0&&this.addXp(i,0)}addEvs(t){let n=this.totalEvs;this.evs.hp+=this.evs.hp+t.hp<=255&&n+t.hp<512?t.hp:0,this.evs.attack+=this.evs.attack+t.attack<=255&&n+t.attack<512?t.attack:0,this.evs.defense+=this.evs.defense+t.defense<=255&&n+t.defense<512?t.defense:0,this.evs.specialAttack+=this.evs.specialAttack+t.specialAttack<=255&&n+t.specialAttack<512?t.specialAttack:0,this.evs.specialDefense+=this.evs.specialDefense+t.specialDefense<=255&&n+t.specialDefense<512?t.specialDefense:0,this.evs.speed+=this.evs.speed+t.speed<=255&&n+t.speed<512?t.speed:0}levelUp(){if(this.level>=100)return;let t=this.currentStats.hp;this.level+=1,this.updateCurrentStats(),t=this.currentStats.hp-t,this.currentHp+=t,this.currentXp=0,this.xpToNextLevel=xt.howMuchINeed(this.level,this.experienceGrowth)}checkForNewMoves(){this.moves.filter(t=>t.level===this.level)}evolve(t,n){n.found&&n.result&&(Object.assign(this,new Ne(n.result,this.level,this)),this.checkForNewMoves())}updateCurrentStats(){this.currentStats=this.fromBaseStats()}selectLatestMoves(t){return t.moves.filter(n=>n.level<=this.level).slice(-4).map(n=>new Cs(n.name,n.type,n.category,n.power,n.accuracy,n.pp,n.priority,n.effect,n.effectChance,n.description,n.level))}}class qs{constructor(){d(this,"entries",[]);d(this,"ready",!1);d(this,"size",251)}importFromJson(e){var t;((t=this.entries)==null?void 0:t.length)===0&&(e.forEach(n=>{this.entries.push(new it(n.id,n.name,n.types,n.abilities,n.moves,n.stats,n.height,n.weight,n.description,n.isLegendary,n.captureRate,n.baseXp,n.experienceGrowth,n.percentageMale,n.evolution,n.sprites))}),this.entries.length===this.size&&(this.ready=!0))}findById(e){if(!this.ready||e===void 0||e===null||e<1||e>this.size)return new ge(new Re);let t=this.entries.find(n=>n.id===e);return t!=null&&t.id?new ge(t):new ge(new Re)}findByName(e){if(!this.ready||e===void 0||e===null||e==="")return new ge(new Re);let t=this.entries.find(n=>n.name.toLowerCase()===e.toLowerCase());return t!=null&&t.id?new ge(t):new ge(new Re)}}class ge{constructor(e){d(this,"result");d(this,"found",!1);this.result=e,this.found=e!==void 0}}class it{constructor(e,t,n,i,r,o,a,u,l,c,p,f,w,g,y,_){d(this,"id");d(this,"name");d(this,"types");d(this,"abilities");d(this,"moves");d(this,"stats");d(this,"height");d(this,"weight");d(this,"description");d(this,"isLegendary");d(this,"captureRate");d(this,"growthRateId");d(this,"baseXp");d(this,"experienceGrowth");d(this,"percentageMale");d(this,"evolution");d(this,"sprites");switch(this.id=e,this.name=t,this.types=n,this.abilities=i,this.moves=r,this.stats=o,this.height=a,this.weight=u,this.description=l,this.isLegendary=c,this.captureRate=p,this.experienceGrowth=f,this.baseXp=w,this.percentageMale=g,this.evolution=y,this.sprites=_,f){case 6e5:this.growthRateId=5;break;case 8e5:this.growthRateId=3;break;case 1e6:this.growthRateId=2;break;case 1059860:this.growthRateId=4;break;case 125e4:this.growthRateId=1;break;case 164e4:this.growthRateId=6;break;default:this.growthRateId=1;break}}instanciate(e){return new Ne(this,e)}}class Re extends it{constructor(){super(0,"Unknown",[],[],[],new ie,0,0,"Unknown",!1,0,0,0,0,[])}}class ie{constructor(e=0,t=0,n=0,i=0,r=0,o=0,a){d(this,"hp");d(this,"attack");d(this,"defense");d(this,"specialAttack");d(this,"specialDefense");d(this,"speed");d(this,"total");this.hp=e,this.attack=t,this.defense=n,this.specialAttack=i,this.specialDefense=r,this.speed=o,a?this.total=a:this.total=this.hp+this.attack+this.defense+this.specialAttack+this.specialDefense+this.speed}}function Rs(s){de(s,"svelte-1cbbcxy",'.menu.svelte-1cbbcxy.svelte-1cbbcxy{position:absolute;top:0;right:-20dvw;width:20dvw;font-size:36px;background-color:#FFFFFF;z-index:3;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:right 0.3s ease-in-out;border:3px solid #1e1e1e;border-radius:16px}.menu.svelte-1cbbcxy ul.svelte-1cbbcxy{box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;border-radius:12px;list-style:none;padding:12px 32px;margin:0;display:flex;flex-direction:column;height:100%;width:100%;align-items:center}.menu.svelte-1cbbcxy ul li.svelte-1cbbcxy{font-size:4rem;margin:1rem 0;text-align:center;cursor:pointer;flex-grow:1;width:100%;height:100%;min-height:60px;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li:hover .svelte-1cbbcxy:before{content:"";width:0;height:0;border-top:20px solid transparent;border-bottom:20px solid transparent;border-left:20px solid #262626;position:absolute;left:40px}.menu.svelte-1cbbcxy ul li button.svelte-1cbbcxy{background:none;border:none;font-size:inherit;font-family:inherit;cursor:inherit;outline:none;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li button .svelte-1cbbcxy:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%}.menu.open.svelte-1cbbcxy.svelte-1cbbcxy{opacity:1;pointer-events:all;right:0}')}function Es(s){let e;return{c(){e=m("div"),e.innerHTML='<ul class="svelte-1cbbcxy"><li class="svelte-1cbbcxy"><button tabindex="0" class="svelte-1cbbcxy">Pokedex</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Pokemon</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Bag</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Trainer</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Save</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Options</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Credits</button></li></ul>',v(e,"class","menu svelte-1cbbcxy"),$(e,"open",s[0])},m(t,n){C(t,e,n)},p(t,[n]){n&1&&$(e,"open",t[0])},i:L,o:L,d(t){t&&A(e)}}}function Ps(s,e,t){let{menuOpened:n}=e,{player:i}=e;return s.$$set=r=>{"menuOpened"in r&&t(0,n=r.menuOpened),"player"in r&&t(1,i=r.player)},[n,i]}class Gt extends fe{constructor(e){super(),ue(this,e,Ps,Es,ce,{menuOpened:0,player:1},Rs)}get menuOpened(){return this.$$.ctx[0]}set menuOpened(e){this.$$set({menuOpened:e}),B()}get player(){return this.$$.ctx[1]}set player(e){this.$$set({player:e}),B()}}pe(Gt,{menuOpened:{},player:{}},[],[],!0);function Os(s){de(s,"svelte-148x6yt",".ally-info.svelte-148x6yt.svelte-148x6yt{opacity:0;visibility:hidden;z-index:9;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;bottom:26dvh;right:-30dvw;transition:right 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly;font-size:46px}.ally-info.opened.svelte-148x6yt.svelte-148x6yt{opacity:1;visibility:visible;right:1dvw}.ally-info.svelte-148x6yt .name-lvl.svelte-148x6yt{display:flex;justify-content:space-between;align-items:center}.ally-info.svelte-148x6yt .status.svelte-148x6yt{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.ally-info.svelte-148x6yt .hp.svelte-148x6yt{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.ally-info.svelte-148x6yt .hp span.svelte-148x6yt{padding:0 0 0 12px;font-weight:bold}.ally-info.svelte-148x6yt .hp .progressbar-wrapper.svelte-148x6yt{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.ally-info.svelte-148x6yt .hp .progressbar-wrapper .progressbar.svelte-148x6yt{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px;transition:width 1s ease-in-out}.ally-info.svelte-148x6yt .hp .progressbar-wrapper .progressbar.warning.svelte-148x6yt{background:rgb(255, 241, 164);background:linear-gradient(0deg, rgb(255, 241, 164) 0%, rgb(255, 194, 16) 30%, rgb(255, 194, 16) 50%, rgb(255, 194, 16) 70%, rgb(255, 241, 164) 100%)}.ally-info.svelte-148x6yt .hp .progressbar-wrapper .progressbar.danger.svelte-148x6yt{background:rgb(244, 177, 159);background:linear-gradient(0deg, rgb(244, 177, 159) 0%, rgb(223, 85, 48) 30%, rgb(223, 85, 48) 50%, rgb(223, 85, 48) 70%, rgb(244, 177, 159) 100%)}@media screen and (max-width: 1100px){.ally-info.svelte-148x6yt.svelte-148x6yt{font-size:36px;border:8px solid #595b59;height:16dvh}.ally-info.svelte-148x6yt .hp.svelte-148x6yt{width:80%;height:18px}.ally-info.svelte-148x6yt .hp .progressbar-wrapper.svelte-148x6yt{height:14px}}")}function Is(s){let e,t,n,i=s[1].name+"",r,o,a,u,l=s[1].level+"",c,p,f,w,g,y,_,k,D,T=s[1].currentHp+"",z,x,b=s[1].currentStats.hp+"",S;return{c(){e=m("div"),t=m("div"),n=m("span"),r=I(i),o=q(),a=m("span"),u=I("Lv "),c=I(l),p=q(),f=m("div"),w=m("div"),g=m("span"),g.textContent="HP",y=q(),_=m("div"),k=m("div"),D=q(),z=I(T),x=I(" / "),S=I(b),v(n,"class","svelte-148x6yt"),v(a,"class","svelte-148x6yt"),v(t,"class","name-lvl svelte-148x6yt"),v(g,"class","svelte-148x6yt"),v(k,"class","progressbar svelte-148x6yt"),ee(k,"--width",s[2]+"%"),$(k,"warning",s[2]<=50),$(k,"danger",s[2]<15),v(_,"class","progressbar-wrapper svelte-148x6yt"),v(w,"class","hp svelte-148x6yt"),v(f,"class","status svelte-148x6yt"),v(e,"class","ally-info svelte-148x6yt"),$(e,"opened",s[0])},m(R,O){C(R,e,O),h(e,t),h(t,n),h(n,r),h(t,o),h(t,a),h(a,u),h(a,c),h(e,p),h(e,f),h(f,w),h(w,g),h(w,y),h(w,_),h(_,k),h(f,D),h(f,z),h(f,x),h(f,S)},p(R,[O]){O&2&&i!==(i=R[1].name+"")&&U(r,i),O&2&&l!==(l=R[1].level+"")&&U(c,l),O&4&&ee(k,"--width",R[2]+"%"),O&4&&$(k,"warning",R[2]<=50),O&4&&$(k,"danger",R[2]<15),O&2&&T!==(T=R[1].currentHp+"")&&U(z,T),O&2&&b!==(b=R[1].currentStats.hp+"")&&U(S,b),O&1&&$(e,"opened",R[0])},i:L,o:L,d(R){R&&A(e)}}}function Ds(s,e,t){let n,{opened:i}=e,{pokemon:r}=e;return console.log(r),s.$$set=o=>{"opened"in o&&t(0,i=o.opened),"pokemon"in o&&t(1,r=o.pokemon)},s.$$.update=()=>{s.$$.dirty&2&&t(2,n=Math.floor(r.currentHp*100/r.currentStats.hp))},[i,r,n]}class Wt extends fe{constructor(e){super(),ue(this,e,Ds,Is,ce,{opened:0,pokemon:1},Os)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),B()}get pokemon(){return this.$$.ctx[1]}set pokemon(e){this.$$set({pokemon:e}),B()}}pe(Wt,{opened:{},pokemon:{}},[],[],!0);const Le=new WeakMap;function Ts(s,e,t,n){return s.reverse().forEach(i=>{n=i(e,t,n)||n}),n}function js(s,e){return s.reverse().forEach(t=>{const n=t(e);n&&(e=n)}),e}function Ls(s,e,t,n){if(!Array.isArray(s)||s.length===0)throw new TypeError;if(t!==void 0)return Ts(s,e,t,n);if(typeof e=="function")return js(s,e)}function Vt(s,e){return Le.get(s)&&Le.get(s).get(e)}function Be(s,e,t){if(e===void 0)throw new TypeError;const n=Vt(e,t);return n&&n.get(s)}function Bs(s,e){const t=Le.get(s)||new Map;Le.set(s,t);const n=t.get(e)||new Map;return t.set(e,n),n}function Zt(s,e,t,n){if(n&&!["string","symbol"].includes(typeof n))throw new TypeError;(Vt(t,n)||Bs(t,n)).set(s,e)}function rt(s,e,t){return Be(s,e,t)?Be(s,e,t):Object.getPrototypeOf(e)?rt(s,Object.getPrototypeOf(e),t):void 0}function zs(s,e){return function(n,i){Zt(s,e,n,i)}}function Ns(s,e,t){return rt(s,e,t)}function Fs(s,e,t){return Be(s,e,t)}function Hs(s,e,t){return!!Be(s,e,t)}function Xs(s,e,t){return!!rt(s,e,t)}function Us(s,e,t,n){Zt(s,e,t,n)}const Gs={decorate:Ls,defineMetadata:Us,getMetadata:Ns,getOwnMetadata:Fs,hasMetadata:Xs,hasOwnMetadata:Hs,metadata:zs};Object.assign(Reflect,Gs);var Ve;(function(s){s[s.Transient=0]="Transient",s[s.Singleton=1]="Singleton",s[s.ResolutionScoped=2]="ResolutionScoped",s[s.ContainerScoped=3]="ContainerScoped"})(Ve||(Ve={}));const H=Ve;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ze=function(s,e){return Ze=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},Ze(s,e)};function ot(s,e){Ze(s,e);function t(){this.constructor=s}s.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Ws(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(t[n[i]]=s[n[i]]);return t}function Vs(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{l(n.next(c))}catch(p){o(p)}}function u(c){try{l(n.throw(c))}catch(p){o(p)}}function l(c){c.done?r(c.value):i(c.value).then(a,u)}l((n=n.apply(s,e||[])).next())})}function Zs(s,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,i,r,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(r=l[0]&2?i.return:l[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,l[1])).done)return r;switch(i=0,r&&(l=[l[0]&2,r.value]),l[0]){case 0:case 1:r=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!r||l[1]>r[0]&&l[1]<r[3])){t.label=l[1];break}if(l[0]===6&&t.label<r[1]){t.label=r[1],r=l;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(l);break}r[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(s,t)}catch(c){l=[6,c],i=0}finally{n=r=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Ee(s){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&s[e],n=0;if(t)return t.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&n>=s.length&&(s=void 0),{value:s&&s[n++],done:!s}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ze(s,e){var t=typeof Symbol=="function"&&s[Symbol.iterator];if(!t)return s;var n=t.call(s),i,r=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)r.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return r}function re(){for(var s=[],e=0;e<arguments.length;e++)s=s.concat(ze(arguments[e]));return s}var Ye="injectionTokens";function Ys(s){var e=Reflect.getMetadata("design:paramtypes",s)||[],t=Reflect.getOwnMetadata(Ye,s)||{};return Object.keys(t).forEach(function(n){e[+n]=t[n]}),e}function Js(s,e){return function(t,n,i){var r=Reflect.getOwnMetadata(Ye,t)||{};r[i]=e?{token:s,transform:e.transformToken,transformArgs:e.args||[]}:s,Reflect.defineMetadata(Ye,r,t)}}function Yt(s){return!!s.useClass}function Je(s){return!!s.useFactory}var Jt=function(){function s(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return s.prototype.createProxy=function(e){var t=this,n={},i=!1,r,o=function(){return i||(r=e(t.wrap()),i=!0),r};return new Proxy(n,this.createHandler(o))},s.prototype.createHandler=function(e){var t={},n=function(i){t[i]=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];r[0]=e();var a=Reflect[i];return a.apply(void 0,re(r))}};return this.reflectMethods.forEach(n),t},s}();function be(s){return typeof s=="string"||typeof s=="symbol"}function Ks(s){return typeof s=="object"&&"token"in s&&"multiple"in s}function Mt(s){return typeof s=="object"&&"token"in s&&"transform"in s}function Qs(s){return typeof s=="function"||s instanceof Jt}function De(s){return!!s.useToken}function Te(s){return s.useValue!=null}function en(s){return Yt(s)||Te(s)||De(s)||Je(s)}var at=function(){function s(){this._registryMap=new Map}return s.prototype.entries=function(){return this._registryMap.entries()},s.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},s.prototype.get=function(e){this.ensure(e);var t=this._registryMap.get(e);return t[t.length-1]||null},s.prototype.set=function(e,t){this.ensure(e),this._registryMap.get(e).push(t)},s.prototype.setAll=function(e,t){this._registryMap.set(e,t)},s.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},s.prototype.clear=function(){this._registryMap.clear()},s.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},s}(),tn=function(s){ot(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e}(at),St=function(){function s(){this.scopedResolutions=new Map}return s}();function sn(s,e){if(s===null)return"at position #"+e;var t=s.split(",")[e].trim();return'"'+t+'" at position #'+e}function nn(s,e,t){return t===void 0&&(t="    "),re([s],e.message.split(`
`).map(function(n){return t+n})).join(`
`)}function rn(s,e,t){var n=ze(s.toString().match(/constructor\(([\w, ]+)\)/)||[],2),i=n[1],r=i===void 0?null:i,o=sn(r,e);return nn("Cannot inject the dependency "+o+' of "'+s.name+'" constructor. Reason:',t)}function on(s){if(typeof s.dispose!="function")return!1;var e=s.dispose;return!(e.length>0)}var an=function(s){ot(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e}(at),ln=function(s){ot(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e}(at),cn=function(){function s(){this.preResolution=new an,this.postResolution=new ln}return s}(),Kt=new Map,dn=function(){function s(e){this.parent=e,this._registry=new tn,this.interceptors=new cn,this.disposed=!1,this.disposables=new Set}return s.prototype.register=function(e,t,n){n===void 0&&(n={lifecycle:H.Transient}),this.ensureNotDisposed();var i;if(en(t)?i=t:i={useClass:t},De(i))for(var r=[e],o=i;o!=null;){var a=o.useToken;if(r.includes(a))throw new Error("Token registration cycle detected! "+re(r,[a]).join(" -> "));r.push(a);var u=this._registry.get(a);u&&De(u.provider)?o=u.provider:o=null}if((n.lifecycle===H.Singleton||n.lifecycle==H.ContainerScoped||n.lifecycle==H.ResolutionScoped)&&(Te(i)||Je(i)))throw new Error('Cannot use lifecycle "'+H[n.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:i,options:n}),this},s.prototype.registerType=function(e,t){return this.ensureNotDisposed(),be(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})},s.prototype.registerInstance=function(e,t){return this.ensureNotDisposed(),this.register(e,{useValue:t})},s.prototype.registerSingleton=function(e,t){if(this.ensureNotDisposed(),be(e)){if(be(t))return this.register(e,{useToken:t},{lifecycle:H.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:H.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var n=e;return t&&!be(t)&&(n=t),this.register(e,{useClass:n},{lifecycle:H.Singleton})},s.prototype.resolve=function(e,t){t===void 0&&(t=new St),this.ensureNotDisposed();var n=this.getRegistration(e);if(!n&&be(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"Single"),n){var i=this.resolveRegistration(n,t);return this.executePostResolutionInterceptor(e,i,"Single"),i}if(Qs(e)){var i=this.construct(e,t);return this.executePostResolutionInterceptor(e,i,"Single"),i}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},s.prototype.executePreResolutionInterceptor=function(e,t){var n,i;if(this.interceptors.preResolution.has(e)){var r=[];try{for(var o=Ee(this.interceptors.preResolution.getAll(e)),a=o.next();!a.done;a=o.next()){var u=a.value;u.options.frequency!="Once"&&r.push(u),u.callback(e,t)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}this.interceptors.preResolution.setAll(e,r)}},s.prototype.executePostResolutionInterceptor=function(e,t,n){var i,r;if(this.interceptors.postResolution.has(e)){var o=[];try{for(var a=Ee(this.interceptors.postResolution.getAll(e)),u=a.next();!u.done;u=a.next()){var l=u.value;l.options.frequency!="Once"&&o.push(l),l.callback(e,t,n)}}catch(c){i={error:c}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}this.interceptors.postResolution.setAll(e,o)}},s.prototype.resolveRegistration=function(e,t){if(this.ensureNotDisposed(),e.options.lifecycle===H.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);var n=e.options.lifecycle===H.Singleton,i=e.options.lifecycle===H.ContainerScoped,r=n||i,o;return Te(e.provider)?o=e.provider.useValue:De(e.provider)?o=r?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t):Yt(e.provider)?o=r?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t):Je(e.provider)?o=e.provider.useFactory(this):o=this.construct(e.provider,t),e.options.lifecycle===H.ResolutionScoped&&t.scopedResolutions.set(e,o),o},s.prototype.resolveAll=function(e,t){var n=this;t===void 0&&(t=new St),this.ensureNotDisposed();var i=this.getAllRegistrations(e);if(!i&&be(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"All"),i){var r=i.map(function(a){return n.resolveRegistration(a,t)});return this.executePostResolutionInterceptor(e,r,"All"),r}var o=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,o,"All"),o},s.prototype.isRegistered=function(e,t){return t===void 0&&(t=!1),this.ensureNotDisposed(),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},s.prototype.reset=function(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},s.prototype.clearInstances=function(){var e,t;this.ensureNotDisposed();try{for(var n=Ee(this._registry.entries()),i=n.next();!i.done;i=n.next()){var r=ze(i.value,2),o=r[0],a=r[1];this._registry.setAll(o,a.filter(function(u){return!Te(u.provider)}).map(function(u){return u.instance=void 0,u}))}}catch(u){e={error:u}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},s.prototype.createChildContainer=function(){var e,t;this.ensureNotDisposed();var n=new s(this);try{for(var i=Ee(this._registry.entries()),r=i.next();!r.done;r=i.next()){var o=ze(r.value,2),a=o[0],u=o[1];u.some(function(l){var c=l.options;return c.lifecycle===H.ContainerScoped})&&n._registry.setAll(a,u.map(function(l){return l.options.lifecycle===H.ContainerScoped?{provider:l.provider,options:l.options}:l}))}}catch(l){e={error:l}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},s.prototype.beforeResolution=function(e,t,n){n===void 0&&(n={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:t,options:n})},s.prototype.afterResolution=function(e,t,n){n===void 0&&(n={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:t,options:n})},s.prototype.dispose=function(){return Vs(this,void 0,void 0,function(){var e;return Zs(this,function(t){switch(t.label){case 0:return this.disposed=!0,e=[],this.disposables.forEach(function(n){var i=n.dispose();i&&e.push(i)}),[4,Promise.all(e)];case 1:return t.sent(),[2]}})})},s.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},s.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},s.prototype.construct=function(e,t){var n=this;if(e instanceof Jt)return e.createProxy(function(r){return n.resolve(r,t)});var i=function(){var r=Kt.get(e);if(!r||r.length===0){if(e.length===0)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var o=r.map(n.resolveParams(t,e));return new(e.bind.apply(e,re([void 0],o)))}();return on(i)&&this.disposables.add(i),i},s.prototype.resolveParams=function(e,t){var n=this;return function(i,r){var o,a,u;try{return Ks(i)?Mt(i)?i.multiple?(o=n.resolve(i.transform)).transform.apply(o,re([n.resolveAll(i.token)],i.transformArgs)):(a=n.resolve(i.transform)).transform.apply(a,re([n.resolve(i.token,e)],i.transformArgs)):i.multiple?n.resolveAll(i.token):n.resolve(i.token,e):Mt(i)?(u=n.resolve(i.transform,e)).transform.apply(u,re([n.resolve(i.token,e)],i.transformArgs)):n.resolve(i,e)}catch(l){throw new Error(rn(t,r,l))}}},s.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},s}(),lt=new dn;function Fe(){return function(s){Kt.set(s,Ys(s))}}function un(s){return s===void 0&&(s=[]),function(e){return s.forEach(function(t){var n=t.token,i=t.options,r=Ws(t,["token","options"]);return lt.register(n,r,i)}),e}}function pn(){return function(s){Fe()(s),lt.registerSingleton(s)}}function fn(s){var e={token:s,multiple:!0};return Js(e)}if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);var Qt=Object.defineProperty,hn=Object.getOwnPropertyDescriptor,gn=(s,e,t)=>e in s?Qt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,ke=(s,e,t,n)=>{for(var i=n>1?void 0:n?hn(e,t):e,r=s.length-1,o;r>=0;r--)(o=s[r])&&(i=(n?o(e,t,i):o(i))||i);return n&&i&&Qt(e,t,i),i},bn=(s,e)=>(t,n)=>e(t,n,s),vn=(s,e,t)=>(gn(s,typeof e!="symbol"?e+"":e,t),t);let Ke=class{constructor(){d(this,"move_effect_id",1)}apply(s){console.log("RegularDamageEffect")}};Ke=ke([Fe()],Ke);let $t=class{constructor(){d(this,"move_effect_id",2)}apply(s){console.log("Sleep")}};$t=ke([Fe()],$t);let At=class{constructor(){d(this,"move_effect_id",3)}apply(s){console.log("Poison")}};At=ke([Fe()],At);let _e=class{};vn(_e,"token",Symbol("Effects"));_e=ke([un([{token:_e.token,useToken:Ke}])],_e);let Qe=class{constructor(s){this.moveEffects=s}apply(s,e,t){var n;(n=this.moveEffects.find(i=>i.move_effect_id===s.move_effect_id))!=null&&n.apply(e)||console.log("No effect found")}};Qe=ke([pn(),bn(0,fn(_e.token))],Qe);const mn=lt.resolve(Qe);class yn{constructor(e,t,n){d(this,"player");d(this,"playerCurrentMonster");d(this,"opponent");d(this,"opponentCurrentMonster");d(this,"isPlayerTurn");d(this,"turnStack");d(this,"escapeAttempts",0);d(this,"onClose",()=>{});d(this,"currentMessage","What will you do ?");d(this,"sleep",e=>new Promise(t=>setTimeout(t,e)));this.player=e,this.opponent=t,this.playerCurrentMonster=e.monsters[0],this.opponentCurrentMonster=this.wild?t:t.monsters[0],this.turnStack=[],this.isPlayerTurn=!0}get wild(){return this.opponent instanceof Ne}selectAction(e){var t;this.isPlayerTurn=!1,e instanceof je&&this.playerCurrentMonster.currentStats.speed>this.opponentCurrentMonster.currentStats.speed||e instanceof et||e instanceof Rt||e instanceof Et?(this.turnStack.push(e),this.selectOpponentAction()):(this.selectOpponentAction(),this.turnStack.push(e)),this.executeAction((t=this.turnStack)==null?void 0:t.shift())}executeAction(e){var t;console.log(this.turnStack),console.log("executing action",{action:e}),e?e instanceof je&&!e.initiator.fainted?this.attack(e):e instanceof et?this.runAway():e instanceof Rt||e instanceof Et||(e instanceof Y?this.currentMessage=e.description:e instanceof Ct?this.removeHP(e):e instanceof qt?mn.apply(e.move.effect,e.target==="opponent"?[this.opponentCurrentMonster]:[e.initiator],e.initiator):e instanceof Xe&&this.onClose()):this.endTurn(),(t=this.turnStack)!=null&&t.length||0>0?this.sleep(1e3).then(()=>{var n;return this.executeAction((n=this.turnStack)==null?void 0:n.shift())}):this.endTurn()}runAway(){if(this.wild){this.escapeAttempts++;const e=Math.random()*255;Math.floor(this.opponentCurrentMonster.currentStats.speed*128/this.playerCurrentMonster.currentStats.speed)+30*this.escapeAttempts*e>255?(this.turnStack=[],this.turnStack.push(new Xe(this.playerCurrentMonster)),this.turnStack.unshift(new Y("You ran away safely!",this.playerCurrentMonster))):this.turnStack.unshift(new Y("Failed to run away!",this.playerCurrentMonster))}else this.turnStack.unshift(new Y("You can't run away from a trainer battle!",this.playerCurrentMonster))}attack(e){const t=e.initiator,n=e.target==="opponent"?this.opponentCurrentMonster:this.playerCurrentMonster,i=[],r=this.accuracyApplies(e.move);if(console.log("attack",{attacker:t},{target:n},{success:r}),r){const o=this.calculateDamage(t,n,e.move);console.log({result:o}),i.push(new Y(t.name+" used "+e.move.name+"!",e.initiator)),o.immune?i.push(new Y("It doesn't affect "+n.name+"...",e.initiator)):o.notVeryEffective?i.push(new Y("It's not very effective...",e.initiator)):o.superEffective&&i.push(new Y("It's super effective!",e.initiator)),o.critical&&i.push(new Y("A critical hit!",e.initiator)),i.push(new Ct(o.damages,e.target,e.initiator)),!o.immune&&this.effectApplies(e.move)&&i.push(new qt(e.move,e.target,e.initiator))}else i.push(new Y("But it failed!",e.initiator));i&&i.reverse().forEach(o=>this.turnStack.unshift(o))}removeHP(e){const t=e.target==="opponent"?this.opponentCurrentMonster:this.playerCurrentMonster;t.currentHp-=e.damages,t.currentHp<=0&&(t.currentHp=0,t.fainted=!0,this.turnStack=[],this.turnStack.push(new Y(t.name+" fainted!",e.initiator)),(this.wild||this.opponent instanceof Ut&&this.opponent.monsters.every(n=>n.fainted))&&(this.turnStack.unshift(new Xe(e.initiator)),this.turnStack.unshift(new Y("You won the battle!",e.initiator))))}calculateDamage(e,t,n){let i=new wn;if(n.category!=="status"){const r=n.category==="physical"?e.currentStats.attack:e.currentStats.specialAttack,o=n.category==="physical"?t.currentStats.defense:t.currentStats.specialDefense,a=this.calculateTypeEffectiveness(n.type,t.types);i.superEffective=a>1,i.notVeryEffective=a<1,i.immune=a===0;const u=i.immune?0:this.calculateCritical();i.critical=u>1;const l=Math.random()*(1-.85)+.85,c=this.calculateStab(e,n),f=a*u*l*c*1;i.damages=Math.floor(((2*e.level/5+2)*n.power*r/o/50+2)*f)}else i.damages=0;return i}calculateTypeEffectiveness(e,t){return t.reduce((n,i)=>{const r=_n(e,i);return n*r},1)}calculateCritical(){return Math.random()<.0625?1.5:1}calculateStab(e,t){return e.types.includes(t.type)?1.5:1}selectOpponentAction(){const e=this.opponentCurrentMonster.selectMove("Easy");this.turnStack.push(new je(e,"ally",this.opponentCurrentMonster))}accuracyApplies(e){return e.accuracy===100||e.accuracy===0||!Number.isInteger(e.effectChance)||Math.random()*100<e.accuracy}effectApplies(e){return e.effect&&Number.isInteger(e.effectChance)&&Math.random()*100<e.effectChance}endTurn(){this.isPlayerTurn=!0,this.currentMessage=`What should ${this.playerCurrentMonster.name} do ?`}}class wn{constructor(){d(this,"superEffective",!1);d(this,"notVeryEffective",!1);d(this,"immune",!1);d(this,"critical",!1);d(this,"effectSuccess",!1);d(this,"effectApplied","");d(this,"damages",0)}}class Xe{constructor(e){d(this,"name");d(this,"description");d(this,"initiator");this.name="End Battle",this.description="End Battle",this.initiator=e}}class Ct{constructor(e,t,n){d(this,"name");d(this,"description");d(this,"damages");d(this,"target");d(this,"initiator");this.name="Remove HP",this.description="Remove HP",this.damages=e,this.target=t,this.initiator=n}}class qt{constructor(e,t,n){d(this,"name");d(this,"description");d(this,"move");d(this,"target");d(this,"initiator");this.name="Apply Effect",this.description="Apply Effect",this.move=e,this.target=t,this.initiator=n}}class Y{constructor(e,t){d(this,"name");d(this,"description");d(this,"initiator");this.name="Message",this.description=e,this.initiator=t}}class et{constructor(e){d(this,"description");d(this,"name");d(this,"initiator");this.name="Run Away",this.description="Run away from the battle",this.initiator=e}}class Rt{constructor(e,t){d(this,"description");d(this,"name");d(this,"targetIdx");d(this,"initiator");this.name="Change Pokemon",this.description="Change the current pokemon",this.targetIdx=e,this.initiator=t}}class je{constructor(e,t,n){d(this,"name");d(this,"description");d(this,"move");d(this,"target");d(this,"initiator");this.name=e.name,this.description=e.description,this.move=e,this.target=t,this.initiator=n}}class Et{constructor(e,t,n,i,r,o=0){d(this,"description");d(this,"name");d(this,"itemId");d(this,"targetType");d(this,"targetIdx");d(this,"initiator");this.name=e,this.description=t,this.itemId=n,this.targetType=i,this.targetIdx=o,this.initiator=r}}function _n(s,e){return kn[s.toLowerCase()][e.toLowerCase()]}const kn={normal:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:.5,ghost:0,dragon:1,dark:1,steel:.5},fire:{normal:1,fire:.5,water:.5,electric:1,grass:2,ice:2,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:2,rock:.5,ghost:1,dragon:.5,dark:1,steel:2},water:{normal:1,fire:2,water:.5,electric:1,grass:.5,ice:1,fighting:1,poison:1,ground:2,flying:1,psychic:1,bug:1,rock:2,ghost:1,dragon:.5,dark:1,steel:1},electric:{normal:1,fire:1,water:2,electric:.5,grass:.5,ice:1,fighting:1,poison:1,ground:0,flying:2,psychic:1,bug:1,rock:1,ghost:1,dragon:.5,dark:1,steel:1},grass:{normal:1,fire:.5,water:2,electric:1,grass:.5,ice:1,fighting:1,poison:.5,ground:2,flying:.5,psychic:1,bug:.5,rock:2,ghost:1,dragon:.5,dark:1,steel:.5},ice:{normal:1,fire:.5,water:.5,electric:1,grass:2,ice:.5,fighting:1,poison:1,ground:2,flying:2,psychic:1,bug:1,rock:1,ghost:1,dragon:2,dark:1,steel:.5},fighting:{normal:2,fire:1,water:1,electric:1,grass:1,ice:2,fighting:1,poison:.5,ground:1,flying:.5,psychic:.5,bug:.5,rock:2,ghost:0,dragon:1,dark:2,steel:2},poison:{normal:1,fire:1,water:1,electric:1,grass:2,ice:1,fighting:1,poison:.5,ground:.5,flying:1,psychic:1,bug:1,rock:.5,ghost:.5,dragon:1,dark:1,steel:0},ground:{normal:1,fire:2,water:1,electric:2,grass:.5,ice:1,fighting:1,poison:2,ground:1,flying:0,psychic:1,bug:.5,rock:2,ghost:1,dragon:1,dark:1,steel:2},flying:{normal:1,fire:1,water:1,electric:.5,grass:2,ice:1,fighting:2,poison:1,ground:1,flying:1,psychic:1,bug:2,rock:.5,ghost:1,dragon:1,dark:1,steel:.5},psychic:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:2,poison:2,ground:1,flying:1,psychic:.5,bug:1,rock:1,ghost:1,dragon:1,dark:0,steel:.5},bug:{normal:1,fire:.5,water:1,electric:1,grass:2,ice:1,fighting:.5,poison:.5,ground:1,flying:.5,psychic:2,bug:1,rock:1,ghost:.5,dragon:1,dark:2,steel:.5},rock:{normal:1,fire:2,water:1,electric:1,grass:1,ice:2,fighting:.5,poison:1,ground:.5,flying:2,psychic:1,bug:2,rock:1,ghost:1,dragon:1,dark:1,steel:.5},ghost:{normal:0,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:2,bug:1,rock:1,ghost:2,dragon:1,dark:.5,steel:.5},dragon:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:1,ghost:1,dragon:2,dark:1,steel:.5},dark:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:.5,poison:1,ground:1,flying:1,psychic:2,bug:1,rock:1,ghost:2,dragon:1,dark:.5,steel:.5},steel:{normal:1,fire:.5,water:.5,electric:.5,grass:1,ice:2,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:2,ghost:1,dragon:1,dark:1,steel:.5}};function xn(s){de(s,"svelte-b0lsc5",".action-bar.svelte-b0lsc5.svelte-b0lsc5{opacity:0;visibility:hidden;z-index:9;background-color:white;height:25dvh;width:100dvw;position:absolute;bottom:-25dvh;left:0;transition:bottom 0.5s ease-in-out;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;display:flex;font-size:64px}.action-bar.opened.svelte-b0lsc5.svelte-b0lsc5{opacity:1;visibility:visible;bottom:0}.action-bar.svelte-b0lsc5 .info.svelte-b0lsc5{width:50%;height:100%;display:flex;align-items:center;align-content:center;justify-content:space-around;position:relative}.action-bar.svelte-b0lsc5 .info ._inner.svelte-b0lsc5{position:absolute;left:17px;z-index:1;height:calc(100% - 55px);border:10px solid black;border-radius:10px;display:flex;align-items:center;justify-content:center;width:100%;text-transform:capitalize}.action-bar.svelte-b0lsc5 .info ._inner .move-desc.svelte-b0lsc5{text-transform:initial;font-size:46px;display:flex;flex-wrap:wrap;gap:16px;word-break:break-word;box-sizing:border-box;padding:0 20px}.action-bar.svelte-b0lsc5 .info ._inner .move-desc p.svelte-b0lsc5{flex:45%;margin:0}.action-bar.svelte-b0lsc5 .actions.svelte-b0lsc5,.action-bar.svelte-b0lsc5 .moves.svelte-b0lsc5{width:50%;height:100%;display:flex;background:#FFFFFF;border:14px solid #595b59;border-radius:8px;box-sizing:border-box;padding:12px;z-index:2;flex-wrap:wrap;gap:12px}.action-btn.svelte-b0lsc5.svelte-b0lsc5{background-color:var(--color);font-size:64px;color:white;border-radius:24px;border:6px solid #595b59;font-family:pokemon, serif;transition:color 0.3s ease-in-out, opacity 0.3s ease-in-out;flex:48%}.action-btn.svelte-b0lsc5.svelte-b0lsc5:hover,.action-btn.selected.svelte-b0lsc5.svelte-b0lsc5{cursor:pointer;opacity:0.96;color:#262626}.action-btn[disabled].svelte-b0lsc5.svelte-b0lsc5{opacity:0.5;cursor:not-allowed;pointer-events:none}@media screen and (max-width: 1100px){.action-bar.svelte-b0lsc5.svelte-b0lsc5{font-size:32px}.action-bar.svelte-b0lsc5 .actions.svelte-b0lsc5,.action-bar.svelte-b0lsc5 .moves.svelte-b0lsc5{padding:2px;gap:4px;border:8px solid #595b59}.action-bar.svelte-b0lsc5 .actions .action-btn.svelte-b0lsc5,.action-bar.svelte-b0lsc5 .moves .action-btn.svelte-b0lsc5{font-size:32px}.action-bar.svelte-b0lsc5 .info ._inner.svelte-b0lsc5{left:10px;height:calc(100% - 37px);border:8px solid black}.action-bar.svelte-b0lsc5 .info ._inner .move-desc.svelte-b0lsc5{font-size:32px}}")}function Pt(s,e,t){const n=s.slice();return n[11]=e[t],n[13]=t,n}function Mn(s){var R,O,F,se,xe,Me,Se,$e,Ae,Ce,M,K;let e,t,n=((O=(R=s[1])==null?void 0:R.playerCurrentMonster)==null?void 0:O.moves[s[3]].description)+"",i,r,o,a=((se=(F=s[1])==null?void 0:F.playerCurrentMonster)==null?void 0:se.moves[s[3]].currentPp)+"",u,l,c=((Me=(xe=s[1])==null?void 0:xe.playerCurrentMonster)==null?void 0:Me.moves[s[3]].pp)+"",p,f,w,g=(($e=(Se=s[1])==null?void 0:Se.playerCurrentMonster)==null?void 0:$e.moves[s[3]].category)+"",y,_,k,D=((Ce=(Ae=s[1])==null?void 0:Ae.playerCurrentMonster)==null?void 0:Ce.moves[s[3]].power)+"",T,z,x=((K=(M=s[1])==null?void 0:M.playerCurrentMonster)==null?void 0:K.moves[s[3]].accuracy)+"",b,S;return{c(){e=m("div"),t=m("p"),i=I(n),r=q(),o=m("p"),u=I(a),l=I(`
                        / `),p=I(c),f=q(),w=m("p"),y=I(g),_=q(),k=m("p"),T=I(D),z=I(`
                        | `),b=I(x),S=I(" %"),v(t,"class","svelte-b0lsc5"),v(o,"class","svelte-b0lsc5"),v(w,"class","svelte-b0lsc5"),v(k,"class","svelte-b0lsc5"),v(e,"class","move-desc svelte-b0lsc5")},m(E,Z){C(E,e,Z),h(e,t),h(t,i),h(e,r),h(e,o),h(o,u),h(o,l),h(o,p),h(e,f),h(e,w),h(w,y),h(e,_),h(e,k),h(k,T),h(k,z),h(k,b),h(k,S)},p(E,Z){var ct,dt,ut,pt,ft,ht,gt,bt,vt,mt,yt,wt;Z&10&&n!==(n=((dt=(ct=E[1])==null?void 0:ct.playerCurrentMonster)==null?void 0:dt.moves[E[3]].description)+"")&&U(i,n),Z&10&&a!==(a=((pt=(ut=E[1])==null?void 0:ut.playerCurrentMonster)==null?void 0:pt.moves[E[3]].currentPp)+"")&&U(u,a),Z&10&&c!==(c=((ht=(ft=E[1])==null?void 0:ft.playerCurrentMonster)==null?void 0:ht.moves[E[3]].pp)+"")&&U(p,c),Z&10&&g!==(g=((bt=(gt=E[1])==null?void 0:gt.playerCurrentMonster)==null?void 0:bt.moves[E[3]].category)+"")&&U(y,g),Z&10&&D!==(D=((mt=(vt=E[1])==null?void 0:vt.playerCurrentMonster)==null?void 0:mt.moves[E[3]].power)+"")&&U(T,D),Z&10&&x!==(x=((wt=(yt=E[1])==null?void 0:yt.playerCurrentMonster)==null?void 0:wt.moves[E[3]].accuracy)+"")&&U(b,x)},d(E){E&&A(e)}}}function Sn(s){var n,i;let e=((i=(n=s[1])==null?void 0:n.currentMessage)==null?void 0:i.toUpperCase())+"",t;return{c(){t=I(e)},m(r,o){C(r,t,o)},p(r,o){var a,u;o&2&&e!==(e=((u=(a=r[1])==null?void 0:a.currentMessage)==null?void 0:u.toUpperCase())+"")&&U(t,e)},d(r){r&&A(t)}}}function $n(s){let e,t,n,i,r,o,a,u,l,c,p,f,w,g;return{c(){e=m("div"),t=m("button"),n=I("FIGHT"),i=q(),r=m("button"),o=I("BAG"),a=q(),u=m("button"),l=I("POKEMONS"),c=q(),p=m("button"),f=I("RUN"),v(t,"class","action-btn svelte-b0lsc5"),ee(t,"--color","#dc5959"),t.disabled=s[5],$(t,"selected",s[4]===0),v(r,"class","action-btn svelte-b0lsc5"),ee(r,"--color","#eca859"),r.disabled=s[5],$(r,"selected",s[4]===1),v(u,"class","action-btn svelte-b0lsc5"),ee(u,"--color","#7EAF53"),u.disabled=s[5],$(u,"selected",s[4]===2),v(p,"class","action-btn svelte-b0lsc5"),ee(p,"--color","#599bdc"),p.disabled=s[5],$(p,"selected",s[4]===2),v(e,"class","actions svelte-b0lsc5")},m(y,_){C(y,e,_),h(e,t),h(t,n),h(e,i),h(e,r),h(r,o),h(e,a),h(e,u),h(u,l),h(e,c),h(e,p),h(p,f),w||(g=[X(t,"click",s[6]),X(p,"click",s[7])],w=!0)},p(y,_){_&32&&(t.disabled=y[5]),_&16&&$(t,"selected",y[4]===0),_&32&&(r.disabled=y[5]),_&16&&$(r,"selected",y[4]===1),_&32&&(u.disabled=y[5]),_&16&&$(u,"selected",y[4]===2),_&32&&(p.disabled=y[5]),_&16&&$(p,"selected",y[4]===2)},d(y){y&&A(e),w=!1,te(g)}}}function An(s){var i,r;let e,t=kt((r=(i=s[1])==null?void 0:i.playerCurrentMonster)==null?void 0:r.moves),n=[];for(let o=0;o<t.length;o+=1)n[o]=Ot(Pt(s,t,o));return{c(){e=m("div");for(let o=0;o<n.length;o+=1)n[o].c();v(e,"class","moves svelte-b0lsc5")},m(o,a){C(o,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null)},p(o,a){var u,l;if(a&298){t=kt((l=(u=o[1])==null?void 0:u.playerCurrentMonster)==null?void 0:l.moves);let c;for(c=0;c<t.length;c+=1){const p=Pt(o,t,c);n[c]?n[c].p(p,a):(n[c]=Ot(p),n[c].c(),n[c].m(e,null))}for(;c<n.length;c+=1)n[c].d(1);n.length=t.length}},d(o){o&&A(e),us(n,o)}}}function Ot(s){let e,t=s[11].name.toUpperCase()+"",n,i,r,o;function a(){return s[9](s[13])}function u(){return s[10](s[11])}return{c(){e=m("button"),n=I(t),i=q(),v(e,"class","action-btn svelte-b0lsc5"),ee(e,"--color","#dc5959"),e.disabled=s[5],$(e,"selected",s[3]===s[13])},m(l,c){C(l,e,c),h(e,n),h(e,i),r||(o=[X(e,"mouseover",a),X(e,"click",u)],r=!0)},p(l,c){s=l,c&2&&t!==(t=s[11].name.toUpperCase()+"")&&U(n,t),c&32&&(e.disabled=s[5]),c&8&&$(e,"selected",s[3]===s[13])},d(l){l&&A(e),r=!1,te(o)}}}function Cn(s){let e,t,n,i;function r(p,f){return p[2]?Mn:Sn}let o=r(s),a=o(s);function u(p,f){return p[2]?An:$n}let l=u(s),c=l(s);return{c(){e=m("div"),t=m("div"),n=m("div"),a.c(),i=q(),c.c(),v(n,"class","_inner svelte-b0lsc5"),v(t,"class","info svelte-b0lsc5"),v(e,"class","action-bar svelte-b0lsc5"),$(e,"opened",s[0])},m(p,f){C(p,e,f),h(e,t),h(t,n),a.m(n,null),h(e,i),c.m(e,null)},p(p,[f]){o===(o=r(p))&&a?a.p(p,f):(a.d(1),a=o(p),a&&(a.c(),a.m(n,null))),l===(l=u(p))&&c?c.p(p,f):(c.d(1),c=l(p),c&&(c.c(),c.m(e,null))),f&1&&$(e,"opened",p[0])},i:L,o:L,d(p){p&&A(e),a.d(),c.d()}}}function qn(s,e,t){let n,{opened:i}=e,{battleState:r}=e,o=!1,a=0,u=0;function l(){t(2,o=!o)}function c(){r.selectAction(new et(r.playerCurrentMonster))}function p(g){r.selectAction(new je(g,"opponent",r.playerCurrentMonster)),t(2,o=!1)}window.addEventListener("keydown",g=>{g.key==="ArrowUp"?o?t(3,a=a===0?r.playerCurrentMonster.moves.length-1:a-1):t(4,u=u===0?3:u-1):g.key==="ArrowDown"?o?t(3,a=a===r.playerCurrentMonster.moves.length-1?0:a+1):t(4,u=u===3?0:u+1):g.key==="Enter"&&(o?p(r.playerCurrentMonster.moves[a]):u===0?l():u===3&&c())});const f=g=>t(3,a=g),w=g=>p(g);return s.$$set=g=>{"opened"in g&&t(0,i=g.opened),"battleState"in g&&t(1,r=g.battleState)},s.$$.update=()=>{s.$$.dirty&2&&t(5,n=r&&!r.isPlayerTurn||!1)},[i,r,o,a,u,n,l,c,p,f,w]}class es extends fe{constructor(e){super(),ue(this,e,qn,Cn,ce,{opened:0,battleState:1},xn)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),B()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),B()}}pe(es,{opened:{},battleState:{}},[],[],!0);function Rn(s){de(s,"svelte-16bpp8u",".enemy-info.svelte-16bpp8u.svelte-16bpp8u{opacity:0;visibility:hidden;z-index:9;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;top:2dvh;left:-30dvw;transition:left 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly;font-size:46px}.enemy-info.opened.svelte-16bpp8u.svelte-16bpp8u{opacity:1;visibility:visible;left:1dvw}.enemy-info.svelte-16bpp8u .name-lvl.svelte-16bpp8u{display:flex;justify-content:space-between;align-items:center}.enemy-info.svelte-16bpp8u .status.svelte-16bpp8u{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.enemy-info.svelte-16bpp8u .hp.svelte-16bpp8u{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.enemy-info.svelte-16bpp8u .hp span.svelte-16bpp8u{padding:0 0 0 12px;font-weight:bold}.enemy-info.svelte-16bpp8u .hp .progressbar-wrapper.svelte-16bpp8u{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.enemy-info.svelte-16bpp8u .hp .progressbar-wrapper .progressbar.svelte-16bpp8u{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px;transition:width 1s ease-in-out, background 1s ease-in-out 1s}.enemy-info.svelte-16bpp8u .hp .progressbar-wrapper .progressbar.warning.svelte-16bpp8u{background:rgb(255, 241, 164);background:linear-gradient(0deg, rgb(255, 241, 164) 0%, rgb(255, 194, 16) 30%, rgb(255, 194, 16) 50%, rgb(255, 194, 16) 70%, rgb(255, 241, 164) 100%)}.enemy-info.svelte-16bpp8u .hp .progressbar-wrapper .progressbar.danger.svelte-16bpp8u{background:rgb(244, 177, 159);background:linear-gradient(0deg, rgb(244, 177, 159) 0%, rgb(223, 85, 48) 30%, rgb(223, 85, 48) 50%, rgb(223, 85, 48) 70%, rgb(244, 177, 159) 100%)}@media screen and (max-width: 1100px){.enemy-info.svelte-16bpp8u.svelte-16bpp8u{font-size:36px;border:8px solid #595b59}.enemy-info.svelte-16bpp8u .hp.svelte-16bpp8u{width:80%;height:18px}.enemy-info.svelte-16bpp8u .hp .progressbar-wrapper.svelte-16bpp8u{height:14px}}")}function En(s){var D,T,z,x;let e,t,n,i=((T=(D=s[1])==null?void 0:D.playerCurrentMonster)==null?void 0:T.name)+"",r,o,a,u,l=((x=(z=s[1])==null?void 0:z.playerCurrentMonster)==null?void 0:x.level)+"",c,p,f,w,g,y,_,k;return{c(){e=m("div"),t=m("div"),n=m("span"),r=I(i),o=q(),a=m("span"),u=I("Lv "),c=I(l),p=q(),f=m("div"),w=m("div"),g=m("span"),g.textContent="HP",y=q(),_=m("div"),k=m("div"),v(n,"class","svelte-16bpp8u"),v(a,"class","svelte-16bpp8u"),v(t,"class","name-lvl svelte-16bpp8u"),v(g,"class","svelte-16bpp8u"),v(k,"class","progressbar svelte-16bpp8u"),ee(k,"--width",s[2]+"%"),$(k,"warning",s[2]<=50),$(k,"danger",s[2]<15),v(_,"class","progressbar-wrapper svelte-16bpp8u"),v(w,"class","hp svelte-16bpp8u"),v(f,"class","status svelte-16bpp8u"),v(e,"class","enemy-info svelte-16bpp8u"),$(e,"opened",s[0])},m(b,S){C(b,e,S),h(e,t),h(t,n),h(n,r),h(t,o),h(t,a),h(a,u),h(a,c),h(e,p),h(e,f),h(f,w),h(w,g),h(w,y),h(w,_),h(_,k)},p(b,[S]){var R,O,F,se;S&2&&i!==(i=((O=(R=b[1])==null?void 0:R.playerCurrentMonster)==null?void 0:O.name)+"")&&U(r,i),S&2&&l!==(l=((se=(F=b[1])==null?void 0:F.playerCurrentMonster)==null?void 0:se.level)+"")&&U(c,l),S&4&&ee(k,"--width",b[2]+"%"),S&4&&$(k,"warning",b[2]<=50),S&4&&$(k,"danger",b[2]<15),S&1&&$(e,"opened",b[0])},i:L,o:L,d(b){b&&A(e)}}}function Pn(s,e,t){let n,{opened:i}=e,{battleState:r}=e;return s.$$set=o=>{"opened"in o&&t(0,i=o.opened),"battleState"in o&&t(1,r=o.battleState)},s.$$.update=()=>{var o,a,u;s.$$.dirty&2&&t(2,n=Math.floor(((o=r==null?void 0:r.playerCurrentMonster)==null?void 0:o.currentHp)*100/((u=(a=r==null?void 0:r.playerCurrentMonster)==null?void 0:a.currentStats)==null?void 0:u.hp)))},[i,r,n]}class ts extends fe{constructor(e){super(),ue(this,e,Pn,En,ce,{opened:0,battleState:1},Rn)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),B()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),B()}}pe(ts,{opened:{},battleState:{}},[],[],!0);function On(s){de(s,"svelte-hx8zpy",".battleStart.svelte-hx8zpy{opacity:0;visibility:hidden;background:#000000;height:100dvh;width:100dvw;position:absolute;top:0;left:0;transition:opacity 0.5s ease-in-out;z-index:2}.battleStart.animate.svelte-hx8zpy{visibility:visible;animation:svelte-hx8zpy-animate 2s ease-in-out}.battleStart.hide.svelte-hx8zpy{visibility:hidden;opacity:0}@keyframes svelte-hx8zpy-animate{0%{opacity:1}20%{opacity:0}40%{opacity:1}60%{opacity:0}80%{opacity:1}100%{opacity:0}}")}function It(s){let e,t,n,i,r,o,a,u,l,c,p,f;function w(b){s[3](b)}function g(b){s[4](b)}let y={};s[0]!==void 0&&(y.opened=s[0]),s[1]!==void 0&&(y.battleState=s[1]),e=new es({props:y}),j.push(()=>W(e,"opened",w)),j.push(()=>W(e,"battleState",g));function _(b){s[5](b)}function k(b){s[6](b)}let D={};s[0]!==void 0&&(D.opened=s[0]),s[1].playerCurrentMonster!==void 0&&(D.pokemon=s[1].playerCurrentMonster),r=new Wt({props:D}),j.push(()=>W(r,"opened",_)),j.push(()=>W(r,"pokemon",k));function T(b){s[7](b)}function z(b){s[8](b)}let x={};return s[0]!==void 0&&(x.opened=s[0]),s[1]!==void 0&&(x.battleState=s[1]),l=new ts({props:x}),j.push(()=>W(l,"opened",T)),j.push(()=>W(l,"battleState",z)),{c(){ye(e.$$.fragment),i=q(),ye(r.$$.fragment),u=q(),ye(l.$$.fragment)},m(b,S){ae(e,b,S),C(b,i,S),ae(r,b,S),C(b,u,S),ae(l,b,S),f=!0},p(b,S){const R={};!t&&S&1&&(t=!0,R.opened=b[0],G(()=>t=!1)),!n&&S&2&&(n=!0,R.battleState=b[1],G(()=>n=!1)),e.$set(R);const O={};!o&&S&1&&(o=!0,O.opened=b[0],G(()=>o=!1)),!a&&S&2&&(a=!0,O.pokemon=b[1].playerCurrentMonster,G(()=>a=!1)),r.$set(O);const F={};!c&&S&1&&(c=!0,F.opened=b[0],G(()=>c=!1)),!p&&S&2&&(p=!0,F.battleState=b[1],G(()=>p=!1)),l.$set(F)},i(b){f||(V(e.$$.fragment,b),V(r.$$.fragment,b),V(l.$$.fragment,b),f=!0)},o(b){J(e.$$.fragment,b),J(r.$$.fragment,b),J(l.$$.fragment,b),f=!1},d(b){b&&(A(i),A(u)),le(e,b),le(r,b),le(l,b)}}}function In(s){var r,o;let e,t,n,i=((r=s[1])==null?void 0:r.playerCurrentMonster)&&((o=s[1])==null?void 0:o.opponentCurrentMonster)&&It(s);return{c(){i&&i.c(),e=q(),t=m("div"),t.innerHTML="",v(t,"class","battleStart svelte-hx8zpy"),$(t,"hide",s[0]),$(t,"animate",s[2])},m(a,u){i&&i.m(a,u),C(a,e,u),C(a,t,u),n=!0},p(a,[u]){var l,c;(l=a[1])!=null&&l.playerCurrentMonster&&((c=a[1])!=null&&c.opponentCurrentMonster)?i?(i.p(a,u),u&2&&V(i,1)):(i=It(a),i.c(),V(i,1),i.m(e.parentNode,e)):i&&(st(),J(i,1,1,()=>{i=null}),nt()),(!n||u&1)&&$(t,"hide",a[0]),(!n||u&4)&&$(t,"animate",a[2])},i(a){n||(V(i),n=!0)},o(a){J(i),n=!1},d(a){a&&(A(e),A(t)),i&&i.d(a)}}}function Dn(s,e,t){let{opened:n}=e,{battleStart:i}=e,{battleState:r}=e;console.log("battle scene",{battleState:r});function o(f){n=f,t(0,n)}function a(f){r=f,t(1,r)}function u(f){n=f,t(0,n)}function l(f){s.$$.not_equal(r.playerCurrentMonster,f)&&(r.playerCurrentMonster=f,t(1,r))}function c(f){n=f,t(0,n)}function p(f){r=f,t(1,r)}return s.$$set=f=>{"opened"in f&&t(0,n=f.opened),"battleStart"in f&&t(2,i=f.battleStart),"battleState"in f&&t(1,r=f.battleState)},[n,r,i,o,a,u,l,c,p]}class ss extends fe{constructor(e){super(),ue(this,e,Dn,In,ce,{opened:0,battleStart:2,battleState:1},On)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),B()}get battleStart(){return this.$$.ctx[2]}set battleStart(e){this.$$set({battleStart:e}),B()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),B()}}pe(ss,{opened:{},battleStart:{},battleState:{}},[],[],!0);class Dt{constructor(e,t=16,n=16){d(this,"position");d(this,"width");d(this,"height");this.position=e,this.width=t,this.height=n}debug(e,t,n,i,r,o="red"){e.fillStyle=o,e.fillRect(i+this.position.x*16*n,r+this.position.y*16*n,this.width*n,this.height*n)}}const Tn=8,jn=806;class Ln{constructor(e,t,n,i,r,o,a,u=[1,100]){d(this,"background");d(this,"foreground");d(this,"width");d(this,"height");d(this,"collisions");d(this,"battleZones");d(this,"monsters");d(this,"levelRange",[1,100]);d(this,"playerInitialPosition",new N(11,11));d(this,"startingX",0);d(this,"startingY",0);this.background=e,this.foreground=t,this.width=n,this.height=i,this.collisions=this.initBoundaries(r),this.battleZones=this.initBattlesZones(o),this.monsters=a,this.levelRange=u}randomMonster(e){const t=this.monsters[Math.floor(Math.random()*this.monsters.length)],n=Math.floor(Math.random()*(this.levelRange[1]-this.levelRange[0]+1))+this.levelRange[0];return e.findById(t).result.instanciate(n)}initBattlesZones(e){const t=[];for(let i=0;i<e.length;i+=this.width)t.push(e.slice(i,this.width+i));const n=[];return t.forEach((i,r)=>{i.forEach((o,a)=>{if(o===Tn){const u=new Dt(new N(a,r));n.push(u)}})}),n}initBoundaries(e){const t=[];for(let i=0;i<e.length;i+=this.width)t.push(e.slice(i,this.width+i));const n=[];return t.forEach((i,r)=>{i.forEach((o,a)=>{if(o===jn){const u=new Dt(new N(a,r));n.push(u)}})}),n}drawBackground(e,t,n){let i=this.background.width*n,r=this.background.height*n,o=e.canvas.width/2-i/2,a=e.canvas.height/2-r/2;this.startingX=o+(0-t.x)*(16*n),this.startingY=a+(0-t.y)*(16*n),e.drawImage(this.background,0,0,this.background.width,this.background.height,this.startingX,this.startingY,this.background.width*n,this.background.height*n)}drawForeground(e,t){this.foreground!==null&&e.drawImage(this.foreground,t.x*16,t.y*16,this.foreground.width,this.foreground.height,0,0,this.foreground.width*3,this.foreground.height*3)}drawBoundaries(e,t,n){this.collisions.forEach(i=>{i.debug(e,t,n,this.startingX,this.startingY,"rgba(255, 0, 0, 0.5)")})}drawBattleZones(e,t,n){this.battleZones.forEach(i=>{i.debug(e,t,n,this.startingX,this.startingY,"rgba(0, 0, 255, 0.5)")})}hasBattleZoneAt(e){return this.battleZones.some(t=>t.position.x===e.x&&t.position.y===e.y)}hasBoundaryAt(e){return this.collisions.some(t=>t.position.x===e.x&&t.position.y===e.y)||e.x<0||e.y<0||e.x>this.width-1||e.y>this.height-1}}const ns=new Image;ns.src="src/assets/maps/test-map.png";const is=new Image;is.src="src/assets/maps/test-map-foreground.png";const Bn=[95],zn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,0,806,806,0,0,806,806,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,806,806,806,806,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,806,806,806,806,834,0,0,0,0,0,0,0,0,0],Nn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ne=new Ln(ns,is,20,20,zn,Nn,Bn,[3,6]),P={up:{pressed:!1},down:{pressed:!1},left:{pressed:!1},right:{pressed:!1}};let Q={key:""};function Tt(s){return e=>{switch(e.key){case"ArrowDown":P.down.pressed=!1;break;case"ArrowUp":P.up.pressed=!1;break;case"ArrowRight":P.right.pressed=!1;break;case"ArrowLeft":P.left.pressed=!1;break}s.moving=!1}}function jt(){return s=>{switch(s.key){case"ArrowDown":Q.key="ArrowDown",P.down.pressed=!0;break;case"ArrowUp":Q.key="ArrowUp",P.up.pressed=!0;break;case"ArrowRight":Q.key="ArrowRight",P.right.pressed=!0;break;case"ArrowLeft":Q.key="ArrowLeft",P.left.pressed=!0;break}}}function Fn(s){de(s,"svelte-1i2dl8q",'@media(max-width: 1100px){.set.svelte-1i2dl8q .d-pad.svelte-1i2dl8q{width:20dvw;height:20dvw}}.set.svelte-1i2dl8q.svelte-1i2dl8q{overflow:hidden;text-align:center;position:absolute;bottom:8dvh;left:8dvh;z-index:10}.set.svelte-1i2dl8q .d-pad.svelte-1i2dl8q{display:inline-block}.d-pad.svelte-1i2dl8q.svelte-1i2dl8q{position:relative;width:12dvw;height:12dvw;border-radius:48%;overflow:hidden;z-index:9}.d-pad.svelte-1i2dl8q.svelte-1i2dl8q:before{content:"";position:absolute;top:50%;left:50%;border-radius:5%;transform:translate(-50%, -50%);width:66.6%;height:66.6%}.d-pad.svelte-1i2dl8q.svelte-1i2dl8q:after{content:"";position:absolute;display:none;z-index:2;width:20%;height:20%;top:50%;left:50%;background:rgba(221, 221, 221, 0.5);border-radius:50%;transform:translate(-50%, -50%);transition:all 0.25s;cursor:pointer}.d-pad.svelte-1i2dl8q.svelte-1i2dl8q:hover:after{width:30%;height:30%}.d-pad.svelte-1i2dl8q span.svelte-1i2dl8q{display:block;position:absolute;-webkit-tap-highlight-color:rgba(255, 255, 255, 0);width:33.3%;height:43%;line-height:40%;color:#fff;background:rgba(221, 221, 221, 0.5);text-align:center}.d-pad.svelte-1i2dl8q span.svelte-1i2dl8q:hover{background:#eee}.d-pad.svelte-1i2dl8q span.svelte-1i2dl8q:before{content:"";position:absolute;width:0;height:0;border-radius:5px;border-style:solid;transition:all 0.25s}.d-pad.svelte-1i2dl8q span.svelte-1i2dl8q:after{content:"";position:absolute;width:102%;height:78%;background:#fff;border-radius:20%}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q,.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q{width:43%;height:33%}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:after,.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:after{width:78%;height:102%}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q{top:0;left:50%;transform:translate(-50%, 0);border-radius:17% 17% 50% 50%}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:hover{background:linear-gradient(0deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:after{left:0;top:0;transform:translate(-100%, 0);border-top-left-radius:50%;pointer-events:none}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:before{top:40%;left:50%;transform:translate(-50%, -50%);border-width:0 13px 19px 13px;border-color:transparent transparent #aaa transparent}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:active:before{border-bottom-color:#333}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:hover:before{top:35%}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q{bottom:0;left:50%;transform:translate(-50%, 0);border-radius:50% 50% 17% 17%}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:hover{background:linear-gradient(180deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:after{right:0;bottom:0;transform:translate(100%, 0);border-bottom-right-radius:50%;pointer-events:none}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:before{bottom:40%;left:50%;transform:translate(-50%, 50%);border-width:19px 13px 0px 13px;border-color:#aaa transparent transparent transparent}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:active:before{border-top-color:#333}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:hover:before{bottom:35%}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q{top:50%;left:0;transform:translate(0, -50%);border-radius:17% 50% 50% 17%}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:hover{background:linear-gradient(-90deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:after{left:0;bottom:0;transform:translate(0, 100%);border-bottom-left-radius:50%;pointer-events:none}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:before{left:40%;top:50%;transform:translate(-50%, -50%);border-width:13px 19px 13px 0;border-color:transparent #aaa transparent transparent}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:active:before{border-right-color:#333}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:hover:before{left:35%}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q{top:50%;right:0;transform:translate(0, -50%);border-radius:50% 17% 17% 50%}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:hover{background:linear-gradient(90deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:after{right:0;top:0;transform:translate(0, -100%);border-top-right-radius:50%;pointer-events:none}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:before{right:40%;top:50%;transform:translate(50%, -50%);border-width:13px 0 13px 19px;border-color:transparent transparent transparent #aaa}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:active:before{border-left-color:#333}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:hover:before{right:35%}.outline.svelte-1i2dl8q .d-pad.svelte-1i2dl8q{border-radius:0}.outline.svelte-1i2dl8q .d-pad span.svelte-1i2dl8q{border:1px solid rgba(0, 0, 0, 0.1)}.outline.svelte-1i2dl8q .d-pad span.svelte-1i2dl8q:after{display:none}.outline.svelte-1i2dl8q .d-pad span.up.svelte-1i2dl8q:hover{background:linear-gradient(0deg, #fff 0%, #efefef 50%)}.outline.svelte-1i2dl8q .d-pad span.right.svelte-1i2dl8q:hover{background:linear-gradient(90deg, #fff 0%, #efefef 50%)}.outline.svelte-1i2dl8q .d-pad span.down.svelte-1i2dl8q:hover{background:linear-gradient(180deg, #fff 0%, #efefef 50%)}.outline.svelte-1i2dl8q .d-pad span.left.svelte-1i2dl8q:hover{background:linear-gradient(-90deg, #fff 0%, #efefef 50%)}.outline.svelte-1i2dl8q .d-pad span.up.svelte-1i2dl8q:before{border-bottom-color:rgba(0, 0, 0, 0.1)}.outline.svelte-1i2dl8q .d-pad span.right.svelte-1i2dl8q:before{border-left-color:rgba(0, 0, 0, 0.1)}.outline.svelte-1i2dl8q .d-pad span.down.svelte-1i2dl8q:before{border-top-color:rgba(0, 0, 0, 0.1)}.outline.svelte-1i2dl8q .d-pad span.left.svelte-1i2dl8q:before{border-right-color:rgba(0, 0, 0, 0.1)}.buttons-a-b.svelte-1i2dl8q.svelte-1i2dl8q{position:absolute;bottom:8dvh;right:8dvh;z-index:10;display:flex;flex-direction:column;align-content:space-between;align-items:center}.buttons-a-b.svelte-1i2dl8q button.svelte-1i2dl8q{width:7dvw;height:7dvw;border-radius:50%;border:1px solid #fff;background:rgba(221, 221, 221, 0.5);color:#aaa;font-size:3.5rem;font-weight:bold;text-align:center;line-height:10dvw;cursor:pointer;transition:all 0.25s;display:flex;align-content:center;justify-content:center;align-items:center}.buttons-a-b.svelte-1i2dl8q button.svelte-1i2dl8q:hover{background:#eee}.buttons-a-b.svelte-1i2dl8q .button-a.svelte-1i2dl8q{position:relative;right:6dvw}')}function Hn(s){let e,t,n,i,r,o,a,u,l,c,p,f,w,g,y;return{c(){e=m("div"),t=m("nav"),n=m("span"),i=q(),r=m("span"),o=q(),a=m("span"),u=q(),l=m("span"),c=q(),p=m("div"),p.innerHTML='<button class="button-b svelte-1i2dl8q">B</button> <button class="button-a svelte-1i2dl8q">A</button>',f=q(),w=m("div"),w.innerHTML='<button class="button-start">start</button> <button class="button-select">select</button>',v(n,"class","up svelte-1i2dl8q"),v(r,"class","right svelte-1i2dl8q"),v(a,"class","down svelte-1i2dl8q"),v(l,"class","left svelte-1i2dl8q"),v(t,"class","d-pad svelte-1i2dl8q"),v(e,"class","set outline svelte-1i2dl8q"),v(p,"class","buttons-a-b svelte-1i2dl8q"),v(w,"class","buttons-start-select")},m(_,k){C(_,e,k),h(e,t),h(t,n),h(t,i),h(t,r),h(t,o),h(t,a),h(t,u),h(t,l),C(_,c,k),C(_,p,k),C(_,f,k),C(_,w,k),g||(y=[X(n,"pointerdown",s[6]("ArrowUp")),X(n,"pointerup",s[7]("ArrowUp")),X(r,"pointerdown",s[6]("ArrowRight")),X(r,"pointerup",s[7]("ArrowRight")),X(a,"pointerdown",s[6]("ArrowDown")),X(a,"pointerup",s[7]("ArrowDown")),X(l,"pointerdown",s[6]("ArrowLeft")),X(l,"pointerup",s[7]("ArrowLeft"))],g=!0)},p:L,i:L,o:L,d(_){_&&(A(e),A(c),A(p),A(f),A(w)),g=!1,te(y)}}}function Xn(s){let e,t,n,i,r;function o(c){s[10](c)}function a(c){s[11](c)}function u(c){s[12](c)}let l={};return s[1]!==void 0&&(l.opened=s[1]),s[4]!==void 0&&(l.battleState=s[4]),s[3]!==void 0&&(l.battleStart=s[3]),e=new ss({props:l}),j.push(()=>W(e,"opened",o)),j.push(()=>W(e,"battleState",a)),j.push(()=>W(e,"battleStart",u)),{c(){ye(e.$$.fragment)},m(c,p){ae(e,c,p),r=!0},p(c,p){const f={};!t&&p[0]&2&&(t=!0,f.opened=c[1],G(()=>t=!1)),!n&&p[0]&16&&(n=!0,f.battleState=c[4],G(()=>n=!1)),!i&&p[0]&8&&(i=!0,f.battleStart=c[3],G(()=>i=!1)),e.$set(f)},i(c){r||(V(e.$$.fragment,c),r=!0)},o(c){J(e.$$.fragment,c),r=!1},d(c){le(e,c)}}}function Un(s){let e,t,n,i,r,o,a;const u=[Xn,Hn],l=[];function c(g,y){return g[5].initiated?0:1}e=c(s),t=l[e]=u[e](s);function p(g){s[13](g)}function f(g){s[14](g)}let w={};return s[2]!==void 0&&(w.menuOpened=s[2]),s[0]!==void 0&&(w.player=s[0]),i=new Gt({props:w}),j.push(()=>W(i,"menuOpened",p)),j.push(()=>W(i,"player",f)),{c(){t.c(),n=q(),ye(i.$$.fragment)},m(g,y){l[e].m(g,y),C(g,n,y),ae(i,g,y),a=!0},p(g,y){let _=e;e=c(g),e===_?l[e].p(g,y):(st(),J(l[_],1,1,()=>{l[_]=null}),nt(),t=l[e],t?t.p(g,y):(t=l[e]=u[e](g),t.c()),V(t,1),t.m(n.parentNode,n));const k={};!r&&y[0]&4&&(r=!0,k.menuOpened=g[2],G(()=>r=!1)),!o&&y[0]&1&&(o=!0,k.player=g[0],G(()=>o=!1)),i.$set(k)},i(g){a||(V(t),V(i.$$.fragment,g),a=!0)},o(g){J(t),J(i.$$.fragment,g),a=!1},d(g){g&&A(n),l[e].d(g),le(i,g)}}}let Pe=3,Lt=0;function Gn(s,e,t){let{canvas:n}=e,{pokedex:i}=e,{character:r}=e,o=!1,a=!1,u=!1,l,c=ne,p=new ks;const f=n.getContext("2d");window.innerHeight>window.innerWidth?(n.width=window.innerWidth,n.height=window.innerWidth):(n.width=window.innerWidth,n.height=window.innerHeight);let w=16*Pe;r.positionOnMap=new N(ne.playerInitialPosition.x,ne.playerInitialPosition.y),r.positionOnScreen=new N(ne.playerInitialPosition.x*w,ne.playerInitialPosition.y*w);function g(){window.innerHeight>window.innerWidth?(t(8,n.width=window.innerWidth,n),t(8,n.height=window.innerWidth,n)):(t(8,n.width=window.innerWidth,n),t(8,n.height=window.innerHeight,n)),w=16*Pe,t(0,r.positionOnScreen=new N(ne.playerInitialPosition.x*w,ne.playerInitialPosition.y*w),r)}window.addEventListener("resize",()=>{g()}),window.addEventListener("orientationchange",()=>{g()});let y={initiated:!1},_={fps:12,then:Date.now(),fpsInterval:1e3/12,id:0},k={fps:12,then:Date.now(),fpsInterval:1e3/12,goDown:!0,id:0};const D=new N(0,0);function T(){_.id=window.requestAnimationFrame(T);let M=Date.now(),K=M-_.then;if(K>_.fpsInterval){_.then=M-K%_.fpsInterval,f.fillStyle="black",f.fillRect(0,0,n.width,n.height),c.drawBackground(f,D,Pe),r.draw(f,D,Pe,c.background.width,c.background.height);let E=!0;if(t(0,r.moving=!1,r),y.initiated)return;if(!a){if((P.down.pressed||P.up.pressed||P.left.pressed||P.right.pressed)&&c.hasBattleZoneAt(r.positionOnMap)&&Math.random()<.1){let Z=c.randomMonster(i);window.cancelAnimationFrame(_.id),x(Z)}P.down.pressed&&Q.key==="ArrowDown"&&(c.hasBoundaryAt(new N(r.positionOnMap.x,r.positionOnMap.y+1))&&(E=!1),t(0,r.moving=!0,r),t(0,r.direction="down",r),E&&D.y++),P.up.pressed&&Q.key==="ArrowUp"&&(c.hasBoundaryAt(new N(r.positionOnMap.x,r.positionOnMap.y-1))&&(E=!1),t(0,r.moving=!0,r),t(0,r.direction="up",r),E&&D.y--),P.left.pressed&&Q.key==="ArrowLeft"&&(c.hasBoundaryAt(new N(r.positionOnMap.x-1,r.positionOnMap.y))&&(E=!1),t(0,r.moving=!0,r),t(0,r.direction="left",r),E&&D.x--),P.right.pressed&&Q.key==="ArrowRight"&&(c.hasBoundaryAt(new N(r.positionOnMap.x+1,r.positionOnMap.y))&&(E=!1),t(0,r.moving=!0,r),t(0,r.direction="right",r),E&&D.x++),r.updatePosition(c.playerInitialPosition,D)}}}function z(){var E,Z;k.id=window.requestAnimationFrame(z);let M=Date.now(),K=M-k.then;if(K>k.fpsInterval){if(!y.initiated)return;k.then=M-K%k.fpsInterval,f.fillStyle="black",f.fillRect(0,0,n.width,n.height),p.draw(f,"default"),(E=l==null?void 0:l.opponentCurrentMonster)==null||E.draw(f,"front",50,0,Lt),(Z=l==null?void 0:l.playerCurrentMonster)==null||Z.draw(f,"back",0,0,Lt)}}function x(M){xe(),t(5,y.initiated=!0,y),t(5,y.startDate=new Date,y),t(4,l=new yn(r,M,n)),R(),t(4,l.onClose=()=>{b(k.id)},l),t(3,u=!0),setTimeout(()=>{t(3,u=!1),t(1,o=!0),z()},2e3)}function b(M){window.cancelAnimationFrame(M),t(5,y.initiated=!1,y),t(5,y.startDate=void 0,y),t(3,u=!1),t(1,o=!1),t(2,a=!1),T(),S()}function S(){window.addEventListener("keydown",jt()),window.addEventListener("keyup",Tt(r)),window.addEventListener("keydown",O)}function R(){window.removeEventListener("keydown",jt()),window.removeEventListener("keyup",Tt(r)),window.removeEventListener("keydown",O)}function O(M){M.key==="Escape"&&t(2,a=!a)}function F(M){return K=>{switch(K.preventDefault(),M){case"ArrowUp":P.up.pressed=!0;break;case"ArrowDown":P.down.pressed=!0;break;case"ArrowLeft":P.left.pressed=!0;break;case"ArrowRight":P.right.pressed=!0;break}Q.key=M}}function se(M){return K=>{switch(M){case"ArrowDown":P.down.pressed=!1;break;case"ArrowUp":P.up.pressed=!1;break;case"ArrowRight":P.right.pressed=!1;break;case"ArrowLeft":P.left.pressed=!1;break}}}function xe(){P.down.pressed=!1,P.up.pressed=!1,P.right.pressed=!1,P.left.pressed=!1,t(0,r.moving=!1,r)}S(),T();function Me(M){o=M,t(1,o)}function Se(M){l=M,t(4,l)}function $e(M){u=M,t(3,u)}function Ae(M){a=M,t(2,a)}function Ce(M){r=M,t(0,r)}return s.$$set=M=>{"canvas"in M&&t(8,n=M.canvas),"pokedex"in M&&t(9,i=M.pokedex),"character"in M&&t(0,r=M.character)},[r,o,a,u,l,y,F,se,n,i,Me,Se,$e,Ae,Ce]}class rs extends fe{constructor(e){super(),ue(this,e,Gn,Un,ce,{canvas:8,pokedex:9,character:0},Fn,[-1,-1])}get canvas(){return this.$$.ctx[8]}set canvas(e){this.$$set({canvas:e}),B()}get pokedex(){return this.$$.ctx[9]}set pokedex(e){this.$$set({pokedex:e}),B()}get character(){return this.$$.ctx[0]}set character(e){this.$$set({character:e}),B()}}pe(rs,{canvas:{},pokedex:{},character:{}},[],[],!0);function Wn(s){de(s,"svelte-1bs37g6",'#canvas-wrapper.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{width:100dvw;height:100dvh;overflow:hidden;position:absolute;top:0;left:0;-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0)}#canvas-wrapper.svelte-1bs37g6 canvas.svelte-1bs37g6.svelte-1bs37g6{position:absolute;top:0;left:0;width:100dvw;height:100dvh}.loading.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100vh}.loading.ready.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{opacity:0.2}.u-swing.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{animation:svelte-1bs37g6-swing 3000ms infinite}@keyframes svelte-1bs37g6-swing{20%{-webkit-transform:rotate(15deg);transform:rotate(15deg)}40%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg)}60%{-webkit-transform:rotate(5deg);transform:rotate(5deg)}80%{-webkit-transform:rotate(-5deg);transform:rotate(-5deg)}to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{width:120px;height:120px;border-radius:120px;border:solid 4.8px black;position:relative;background:linear-gradient(to bottom, #EEEEEE 0%, #FFFFFF 100%);margin:10px auto}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:before,.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:after{content:"";display:block}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6,.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:before,.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:after{transition:all 600ms cubic-bezier(0.67, 0.4, 0.36, 0.75)}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:before{width:120px;height:57.6px;border-bottom:solid 4.8px black;border-radius:60px 60px 0 0;background:linear-gradient(to bottom, #d10000 0%, #ff0000 50%)}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:after{content:"";width:24px;height:24px;background:linear-gradient(to bottom, #fff 0%, #ccc 100%);position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);border-radius:50%;box-shadow:0 0 0 2.4px black, 0 0 0 4.8px #ddd, 0 0 0 8.5714285714px black, 0 0 12px 7.0588235294px rgba(0, 0, 0, 0.4)}.buttons.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{display:flex;justify-content:center;align-items:center;flex-direction:column;gap:120px;position:absolute;left:calc(50dvw - 100px);top:calc(50dvh - 40px)}.buttons.svelte-1bs37g6 .letsgo.svelte-1bs37g6.svelte-1bs37g6{position:relative}.buttons.svelte-1bs37g6 .letsgo .pika.svelte-1bs37g6.svelte-1bs37g6{width:200px;height:200px;position:absolute;bottom:0;left:0;z-index:1}.buttons.svelte-1bs37g6 .letsgo .start-btn.svelte-1bs37g6.svelte-1bs37g6{width:200px;height:80px;border-radius:16px;position:relative;z-index:2;font-family:pokemon, serif;font-size:36px;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;cursor:pointer}.buttons.svelte-1bs37g6 .letsgo .start-btn.svelte-1bs37g6.svelte-1bs37g6:hover{color:#fff;box-shadow:inset #009688 0 0 0 5px;text-shadow:none;font-weight:bold;background:#009688}.buttons.svelte-1bs37g6 .letsgo .start-btn.svelte-1bs37g6:hover+.pika.svelte-1bs37g6{animation:svelte-1bs37g6-bounce 1s infinite}@keyframes svelte-1bs37g6-bounce{0%,20%,53%,80%,to{-webkit-animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-transform:translate3d(0, -30px, 0);transform:translate3d(0, -30px, 0)}40%,43%,70%{-webkit-animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06);animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06)}70%{-webkit-transform:translate3d(0, -15px, 0);transform:translate3d(0, -15px, 0)}90%{-webkit-transform:translate3d(0, -4px, 0);transform:translate3d(0, -4px, 0)}}#preview.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{display:flex;flex-wrap:wrap;justify-content:center}')}function Vn(s){let e,t,n,i=!s[3]&&Bt(s),r=s[3]&&zt(s);return{c(){e=m("div"),i&&i.c(),t=q(),r&&r.c(),n=ps(),v(e,"class","loading svelte-1bs37g6"),$(e,"ready",s[3])},m(o,a){C(o,e,a),i&&i.m(e,null),C(o,t,a),r&&r.m(o,a),C(o,n,a)},p(o,a){o[3]?i&&(i.d(1),i=null):i?i.p(o,a):(i=Bt(o),i.c(),i.m(e,null)),a&8&&$(e,"ready",o[3]),o[3]?r?r.p(o,a):(r=zt(o),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:L,o:L,d(o){o&&(A(e),A(t),A(n)),i&&i.d(),r&&r.d(o)}}}function Zn(s){let e,t,n,i,r;function o(c){s[10](c)}function a(c){s[11](c)}function u(c){s[12](c)}let l={};return s[6]!==void 0&&(l.pokedex=s[6]),s[0]!==void 0&&(l.canvas=s[0]),s[2]!==void 0&&(l.character=s[2]),e=new rs({props:l}),j.push(()=>W(e,"pokedex",o)),j.push(()=>W(e,"canvas",a)),j.push(()=>W(e,"character",u)),{c(){ye(e.$$.fragment)},m(c,p){ae(e,c,p),r=!0},p(c,p){const f={};!t&&p&64&&(t=!0,f.pokedex=c[6],G(()=>t=!1)),!n&&p&1&&(n=!0,f.canvas=c[0],G(()=>n=!1)),!i&&p&4&&(i=!0,f.character=c[2],G(()=>i=!1)),e.$set(f)},i(c){r||(V(e.$$.fragment,c),r=!0)},o(c){J(e.$$.fragment,c),r=!1},d(c){le(e,c)}}}function Bt(s){let e,t,n,i,r;return{c(){e=m("div"),t=q(),n=m("span"),n.textContent=`Gotta catch em all... ${s[8]}`,i=q(),r=m("div"),r.innerHTML="",v(e,"class","o-pokeball c-loader u-swing svelte-1bs37g6"),v(r,"id","preview"),v(r,"class","svelte-1bs37g6")},m(o,a){C(o,e,a),C(o,t,a),C(o,n,a),C(o,i,a),C(o,r,a),s[13](r)},p:L,d(o){o&&(A(e),A(t),A(n),A(i),A(r)),s[13](null)}}}function zt(s){let e,t,n,i,r,o,a,u,l,c=s[7]&&Yn(s);return{c(){e=m("div"),c&&c.c(),t=q(),n=m("div"),i=m("button"),i.textContent="New game!",r=q(),o=m("img"),v(i,"class","start-btn svelte-1bs37g6"),v(o,"class","pika svelte-1bs37g6"),v(o,"alt","pikachu"),Ht(o.src,a="src/assets/monsters/heartgold-soulsilver/25.png")||v(o,"src",a),v(n,"class","letsgo svelte-1bs37g6"),v(e,"class","buttons svelte-1bs37g6")},m(p,f){C(p,e,f),c&&c.m(e,null),h(e,t),h(e,n),h(n,i),h(n,r),h(n,o),u||(l=X(i,"click",s[15]),u=!0)},p(p,f){p[7]&&c.p(p,f)},d(p){p&&A(e),c&&c.d(),u=!1,l()}}}function Yn(s){let e,t,n,i,r,o,a;return{c(){e=m("div"),t=m("button"),t.textContent="Continue!",n=q(),i=m("img"),v(t,"class","start-btn svelte-1bs37g6"),v(i,"class","pika svelte-1bs37g6"),v(i,"alt","Evoli"),Ht(i.src,r="src/assets/monsters/heartgold-soulsilver/133.png")||v(i,"src",r),v(e,"class","letsgo svelte-1bs37g6")},m(u,l){C(u,e,l),h(e,t),h(e,n),h(e,i),o||(a=X(t,"click",s[14]),o=!0)},p:L,d(u){u&&A(e),o=!1,a()}}}function Jn(s){let e,t,n,i,r,o;const a=[Zn,Vn],u=[];function l(c,p){return c[3]&&c[4]?0:1}return t=l(s),n=u[t]=a[t](s),{c(){e=m("div"),n.c(),i=q(),r=m("canvas"),v(r,"class","svelte-1bs37g6"),v(e,"id","canvas-wrapper"),v(e,"class","svelte-1bs37g6")},m(c,p){C(c,e,p),u[t].m(e,null),h(e,i),h(e,r),s[16](r),s[17](e),o=!0},p(c,[p]){let f=t;t=l(c),t===f?u[t].p(c,p):(st(),J(u[f],1,1,()=>{u[f]=null}),nt(),n=u[t],n?n.p(c,p):(n=u[t]=a[t](c),n.c()),V(n,1),n.m(e,i))},i(c){o||(V(n),o=!0)},o(c){J(n),o=!1},d(c){c&&A(e),u[t].d(),s[16](null),s[17](null)}}}function Kn(s,e,t){let{canvas:n}=e,i,r,o=!1,a=!1,u,l,c;window.scrollTo(0,1);let p=new qs;fetch("src/assets/data/final/pokedex.json").then(x=>x.json()).then(x=>{var O,F;p.importFromJson(x);let b=5,S=Date.now();for(;!p.ready&&Date.now()-S<b*1e3;)console.log("loading dex...");p.ready||(console.error("Pokedex not ready after "+b+" seconds"),window.location.reload());let R=(F=(O=p.findById(1))==null?void 0:O.result)==null?void 0:F.instanciate(5);if(!R)throw new Error("Could not find pokemon with id 251");R.isShiny=!0,t(2,r=new Ut("Kaiser","MALE",new Ms("src/assets/characters/hero_male_front.png","src/assets/characters/hero_male_back.png","src/assets/characters/hero_male_left.png","src/assets/characters/hero_male_right.png","src/assets/characters/hero_male_back.png"),[R])),t(3,o=!0)});function f(){t(4,a=!0)}function w(x){p=x,t(6,p)}function g(x){n=x,t(0,n)}function y(x){r=x,t(2,r)}function _(x){j[x?"unshift":"push"](()=>{c=x,t(5,c)})}const k=()=>f(),D=()=>f();function T(x){j[x?"unshift":"push"](()=>{n=x,t(0,n)})}function z(x){j[x?"unshift":"push"](()=>{i=x,t(1,i)})}return s.$$set=x=>{"canvas"in x&&t(0,n=x.canvas)},[n,i,r,o,a,c,p,u,l,f,w,g,y,_,k,D,T,z]}class Qn extends fe{constructor(e){super(),ue(this,e,Kn,Jn,ce,{canvas:0},Wn)}get canvas(){return this.$$.ctx[0]}set canvas(e){this.$$set({canvas:e}),B()}}customElements.define("open-mon",pe(Qn,{canvas:{}},[],[],!0));
