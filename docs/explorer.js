var gt=Object.defineProperty;var bt=(s,e,t)=>e in s?gt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var d=(s,e,t)=>(bt(s,typeof e!="symbol"?e+"":e,t),t);function U(){}function tt(s){return s()}function Ue(){return Object.create(null)}function ne(s){s.forEach(tt)}function st(s){return typeof s=="function"}function le(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let $e;function nt(s,e){return s===e?!0:($e||($e=document.createElement("a")),$e.href=e,s===$e.href)}function vt(s){return Object.keys(s).length===0}function u(s,e){s.appendChild(e)}function de(s,e,t){const n=mt(s);if(!n.getElementById(e)){const r=w("style");r.id=e,r.textContent=t,wt(n,r)}}function mt(s){if(!s)return document;const e=s.getRootNode?s.getRootNode():s.ownerDocument;return e&&e.host?e:s.ownerDocument}function wt(s,e){return u(s.head||s,e),e.sheet}function B(s,e,t){s.insertBefore(e,t||null)}function H(s){s.parentNode&&s.parentNode.removeChild(s)}function yt(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function w(s){return document.createElement(s)}function A(s){return document.createTextNode(s)}function P(){return A(" ")}function kt(){return A("")}function Z(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function m(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function _t(s){return Array.from(s.childNodes)}function R(s,e){e=""+e,s.data!==e&&(s.data=e)}function se(s,e,t,n){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,n?"important":"")}function j(s,e,t){s.classList.toggle(e,!!t)}function xt(s){const e={};return s.childNodes.forEach(t=>{e[t.slot||"default"]=!0}),e}let ze;function we(s){ze=s}const ue=[],N=[];let ge=[];const Oe=[],St=Promise.resolve();let Ie=!1;function Mt(){Ie||(Ie=!0,St.then(z))}function He(s){ge.push(s)}function W(s){Oe.push(s)}const Pe=new Set;let pe=0;function z(){if(pe!==0)return;const s=ze;do{try{for(;pe<ue.length;){const e=ue[pe];pe++,we(e),$t(e.$$)}}catch(e){throw ue.length=0,pe=0,e}for(we(null),ue.length=0,pe=0;N.length;)N.pop()();for(let e=0;e<ge.length;e+=1){const t=ge[e];Pe.has(t)||(Pe.add(t),t())}ge.length=0}while(ue.length);for(;Oe.length;)Oe.pop()();Ie=!1,Pe.clear(),we(s)}function $t(s){if(s.fragment!==null){s.update(),ne(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(He)}}function jt(s){const e=[],t=[];ge.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),ge=e}const je=new Set;let ie;function Be(){ie={r:0,c:[],p:ie}}function De(){ie.r||ne(ie.c),ie=ie.p}function q(s,e){s&&s.i&&(je.delete(s),s.i(e))}function V(s,e,t,n){if(s&&s.o){if(je.has(s))return;je.add(s),ie.c.push(()=>{je.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}function Xe(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Y(s,e,t){const n=s.$$.props[e];n!==void 0&&(s.$$.bound[n]=t,t(s.$$.ctx[n]))}function be(s){s&&s.c()}function ae(s,e,t){const{fragment:n,after_update:r}=s.$$;n&&n.m(e,t),He(()=>{const a=s.$$.on_mount.map(tt).filter(st);s.$$.on_destroy?s.$$.on_destroy.push(...a):ne(a),s.$$.on_mount=[]}),r.forEach(He)}function oe(s,e){const t=s.$$;t.fragment!==null&&(jt(t.after_update),ne(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Ct(s,e){s.$$.dirty[0]===-1&&(ue.push(s),Mt(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function ce(s,e,t,n,r,a,i=null,o=[-1]){const c=ze;we(s);const h=s.$$={fragment:null,ctx:[],props:a,update:U,not_equal:r,bound:Ue(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Ue(),dirty:o,skip_bound:!1,root:e.target||c.$$.root};i&&i(h.root);let f=!1;if(h.ctx=t?t(s,e.props||{},(l,p,...g)=>{const v=g.length?g[0]:p;return h.ctx&&r(h.ctx[l],h.ctx[l]=v)&&(!h.skip_bound&&h.bound[l]&&h.bound[l](v),f&&Ct(s,l)),p}):[],h.update(),f=!0,ne(h.before_update),h.fragment=n?n(h.ctx):!1,e.target){if(e.hydrate){const l=_t(e.target);h.fragment&&h.fragment.l(l),l.forEach(H)}else h.fragment&&h.fragment.c();e.intro&&q(s.$$.fragment),ae(s,e.target,e.anchor),z()}we(c)}let rt;typeof HTMLElement=="function"&&(rt=class extends HTMLElement{constructor(e,t,n){super();d(this,"$$ctor");d(this,"$$s");d(this,"$$c");d(this,"$$cn",!1);d(this,"$$d",{});d(this,"$$r",!1);d(this,"$$p_d",{});d(this,"$$l",{});d(this,"$$l_u",new Map);this.$$ctor=e,this.$$s=t,n&&this.attachShadow({mode:"open"})}addEventListener(e,t,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){const r=this.$$c.$on(e,t);this.$$l_u.set(t,r)}super.addEventListener(e,t,n)}removeEventListener(e,t,n){if(super.removeEventListener(e,t,n),this.$$c){const r=this.$$l_u.get(t);r&&(r(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(i){return()=>{let o;return{c:function(){o=w("slot"),i!=="default"&&m(o,"name",i)},m:function(f,l){B(f,o,l)},d:function(f){f&&H(o)}}}};var e=t;if(await Promise.resolve(),!this.$$cn)return;const n={},r=xt(this);for(const i of this.$$s)i in r&&(n[i]=[t(i)]);for(const i of this.attributes){const o=this.$$g_p(i.name);o in this.$$d||(this.$$d[o]=Ce(o,i.value,this.$$p_d,"toProp"))}for(const i in this.$$p_d)!(i in this.$$d)&&this[i]!==void 0&&(this.$$d[i]=this[i],delete this[i]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:n,$$scope:{ctx:[]}}});const a=()=>{this.$$r=!0;for(const i in this.$$p_d)if(this.$$d[i]=this.$$c.$$.ctx[this.$$c.$$.props[i]],this.$$p_d[i].reflect){const o=Ce(i,this.$$d[i],this.$$p_d,"toAttribute");o==null?this.removeAttribute(this.$$p_d[i].attribute||i):this.setAttribute(this.$$p_d[i].attribute||i,o)}this.$$r=!1};this.$$c.$$.after_update.push(a),a();for(const i in this.$$l)for(const o of this.$$l[i]){const c=this.$$c.$on(i,o);this.$$l_u.set(o,c)}this.$$l={}}}attributeChangedCallback(e,t,n){var r;this.$$r||(e=this.$$g_p(e),this.$$d[e]=Ce(e,n,this.$$p_d,"toProp"),(r=this.$$c)==null||r.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e)||e}});function Ce(s,e,t,n){var a;const r=(a=t[s])==null?void 0:a.type;if(e=r==="Boolean"&&typeof e!="boolean"?e!=null:e,!n||!t[s])return e;if(n==="toAttribute")switch(r){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(r){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function fe(s,e,t,n,r,a){let i=class extends rt{constructor(){super(s,t,r),this.$$p_d=e}static get observedAttributes(){return Object.keys(e).map(o=>(e[o].attribute||o).toLowerCase())}};return Object.keys(e).forEach(o=>{Object.defineProperty(i.prototype,o,{get(){return this.$$c&&o in this.$$c?this.$$c[o]:this.$$d[o]},set(c){var h;c=Ce(o,c,e),this.$$d[o]=c,(h=this.$$c)==null||h.$set({[o]:c})}})}),n.forEach(o=>{Object.defineProperty(i.prototype,o,{get(){var c;return(c=this.$$c)==null?void 0:c[o]}})}),a&&(i=a(i)),s.element=i,i}class he{constructor(){d(this,"$$");d(this,"$$set")}$destroy(){oe(this,1),this.$destroy=U}$on(e,t){if(!st(t))return U;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const r=n.indexOf(t);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!vt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const At="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(At);class D{constructor(e,t){d(this,"x");d(this,"y");this.x=e,this.y=t}}class it{constructor(e,t,n,r=[]){d(this,"name");d(this,"gender");d(this,"sprites");d(this,"monsters");d(this,"bag",[]);d(this,"lvl",1);d(this,"moving",!1);d(this,"direction","down");d(this,"positionOnScreen");d(this,"positionOnMap");d(this,"frames");d(this,"spriteScale",1);this.name=e,this.gender=t,this.sprites=n,this.monsters=r,this.frames={max:3,val:0,elapsed:0},this.positionOnMap=new D(0,0),this.positionOnScreen=new D(0,0)}get sprite(){return this.sprites[this.direction]}draw(e,t,n,r,a){let i=this.sprite||this.sprites.down,o=r*n,c=a*n,h=e.canvas.width/2-o/2,f=e.canvas.height/2-c/2;this.moving?(this.frames.max>1&&(this.frames.elapsed+=1),this.frames.elapsed%2===0&&(this.frames.val+=1,this.frames.val>this.frames.max-1&&(this.frames.val=0))):this.frames.val=1,e.drawImage(i,this.frames.val*(i.width/this.frames.max),0,i.width/this.frames.max,i.height,h+this.positionOnScreen.x,f+this.positionOnScreen.y,i.width/this.frames.max*n,i.height*n)}updatePosition(e,t){this.positionOnMap.x=e.x+t.x,this.positionOnMap.y=e.y+t.y}}class Pt{constructor(e,t,n,r,a){d(this,"down");d(this,"up");d(this,"left");d(this,"right");d(this,"battle");d(this,"width",80);d(this,"height",80);this.down=e,this.up=t,this.left=n,this.right=r,this.battle=a}}const E={up:{pressed:!1},down:{pressed:!1},left:{pressed:!1},right:{pressed:!1}};let ee={key:""};function Ze(s){return e=>{switch(e.key){case"ArrowDown":E.down.pressed=!1;break;case"ArrowUp":E.up.pressed=!1;break;case"ArrowRight":E.right.pressed=!1;break;case"ArrowLeft":E.left.pressed=!1;break}s.moving=!1}}function qe(){return s=>{switch(s.key){case"ArrowDown":ee.key="ArrowDown",E.down.pressed=!0;break;case"ArrowUp":ee.key="ArrowUp",E.up.pressed=!0;break;case"ArrowRight":ee.key="ArrowRight",E.right.pressed=!0;break;case"ArrowLeft":ee.key="ArrowLeft",E.left.pressed=!0;break}}}class ve{constructor(e,t,n,r,a,i,o,c,h,f=new te(1,1,1,1,1,1),l=new te(0,0,0,0,0,0)){d(this,"id");d(this,"name");d(this,"types");d(this,"abilities");d(this,"baseStats");d(this,"ivs");d(this,"evs");d(this,"evolution");d(this,"currentStats",new te);d(this,"currentHp",1);d(this,"currentXp",0);d(this,"xpToNextLevel",0);d(this,"currentAbility");d(this,"level",5);d(this,"evsToDistribute",0);d(this,"fainted");d(this,"moves");d(this,"isShiny",!1);d(this,"sprites");d(this,"position");d(this,"currentImage");d(this,"currentImage2");d(this,"height",0);d(this,"spriteScale",1);d(this,"frames",{max:2,val:0,elapsed:0});this.id=e,this.name=t,this.types=n,this.abilities=r,this.baseStats=a,this.evolution=i,this.fainted=!1,this.ivs=f,this.evs=l,this.updateCurrentStats(),this.currentHp=this.currentStats.HP,this.currentAbility=c||this.abilities[0],this.moves=h||[],this.sprites=o,this.position=new D(0,0)}get totalEvs(){return this.evs.attack+this.evs.defense+this.evs.specialAttack+this.evs.specialDefense+this.evs.speed+this.evs.HP}selectMove(e,t){let n=Math.floor(Math.random()*this.moves.length),r=this.moves[n];return e==="Easy"&&t&&((t==null?void 0:t.types.length)===2?this.moves.find(i=>i.type===t.types[0]&&i.power>0):this.moves.find(i=>(i.type===t.types[0]||i.type===t.types[1])&&i.power>0)),r}levelUp(){let e=this.currentStats.HP;this.level+=1,console.log("from:",this.currentStats),this.updateCurrentStats(),console.log("to:",this.currentStats),e=this.currentStats.HP-e,this.currentHp+=e,this.currentXp=0,this.checkForNewMoves(),this.checkForEvolutions()}addXp(e,t){if(this.evsToDistribute+=this.totalEvs+t<=255?t:this.totalEvs+t-255,!(this.level>=100)){if(this.xpToNextLevel<e){const n=e-this.xpToNextLevel,r=e-n;this.currentXp+=r}else this.currentXp+=e;this.currentXp>=this.xpToNextLevel&&this.levelUp()}}draw(e,t="front"){var a;this.isShiny&&(t="shiny"),this.currentImage||(this.currentImage=new Image,this.currentImage.src=this.sprites[t]),this.currentImage2||(this.currentImage2=new Image,this.currentImage2.src=this.sprites.front2),this.frames.elapsed>=100&&(this.frames.elapsed=0);let n=t==="front"&&this.currentImage.complete&&((a=this.currentImage2)==null?void 0:a.complete)||t!=="front"&&this.currentImage.complete,r=t!=="front"?this.currentImage:this.frames.elapsed<100?this.currentImage:this.currentImage2;n&&(this.frames.elapsed++,e.drawImage(r,0,0,this.sprites.width,this.sprites.height,this.position.x,this.position.y,this.sprites.width*this.spriteScale*2.5,this.sprites.height*this.spriteScale*2.5))}checkForNewMoves(){}checkForEvolutions(){this.evolution&&this.level>=this.evolution.level&&this.evolve()}evolve(){this.id++;const t=(localStorage.getItem("pokedex")&&JSON.parse(localStorage.getItem("pokedex")||"[]")||[]).find(n=>n.id===this.id);t&&(Object.setPrototypeOf(t,ve.prototype),this.baseStats=t.baseStats,this.updateCurrentStats(),this.sprites=t.sprites,this.currentImage=void 0,this.currentImage2=void 0,this.spriteScale=t.spriteScale,this.height=t.height)}updateCurrentStats(){this.currentStats=this.fromBaseStats()}addEvs(e){if(e){let t=this.totalEvs;this.evs.HP+=this.evs.HP+e.HP<=255&&t+e.HP<512?e.HP:0,this.evs.attack+=this.evs.attack+e.attack<=255&&t+e.attack<512?e.attack:0,this.evs.defense+=this.evs.defense+e.defense<=255&&t+e.defense<512?e.defense:0,this.evs.specialAttack+=this.evs.specialAttack+e.specialAttack<=255&&t+e.specialAttack<512?e.specialAttack:0,this.evs.specialDefense+=this.evs.specialDefense+e.specialDefense<=255&&t+e.specialDefense<512?e.specialDefense:0,this.evs.speed+=this.evs.speed+e.speed<=255&&t+e.speed<512?e.speed:0}}fromBaseStats(){return new te(Math.floor((this.ivs.HP+this.baseStats.HP*2+this.evs.HP/4)*this.level/100+10+this.level),Math.floor((this.ivs.attack+this.baseStats.attack*2+this.evs.attack/4)*this.level/100+5),Math.floor((this.ivs.defense+this.baseStats.defense*2+this.evs.defense/4)*this.level/100+5),Math.floor((this.ivs.specialAttack+this.baseStats.specialAttack*2+this.evs.specialAttack/4)*this.level/100+5),Math.floor((this.ivs.specialDefense+this.baseStats.specialDefense*2+this.evs.specialDefense/4)*this.level/100+5),Math.floor((this.ivs.speed+this.baseStats.speed*2+this.evs.speed/4)*this.level/100+5))}}class te{constructor(e=0,t=0,n=0,r=0,a=0,i=0){d(this,"HP");d(this,"attack");d(this,"defense");d(this,"specialAttack");d(this,"specialDefense");d(this,"speed");this.HP=e,this.attack=t,this.defense=n,this.specialAttack=r,this.specialDefense=a,this.speed=i}}class Et{constructor(e,t,n,r){d(this,"front");d(this,"front2");d(this,"back");d(this,"shiny");d(this,"width",80);d(this,"height",80);this.front=e,this.front2=t,this.back=n,this.shiny=r}}class me{constructor(e,t,n,r,a,i,o,c,h,f){d(this,"name");d(this,"type");d(this,"category");d(this,"power");d(this,"accuracy");d(this,"pp");d(this,"currentPp");d(this,"priority");d(this,"effect");d(this,"effectChance");d(this,"description");this.name=e,this.type=t,this.category=n,this.power=r,this.accuracy=a,this.pp=i,this.currentPp=i,this.priority=o,this.effect=c,this.effectChance=h,this.description=f}}class Ot{constructor(e,t,n){d(this,"player");d(this,"playerCurrentMonster");d(this,"opponent");d(this,"opponentCurrentMonster");d(this,"isPlayerTurn");d(this,"turnStack");d(this,"initialOpponentPosition");d(this,"initialAllyPosition");d(this,"escapeAttempts",0);d(this,"onClose",()=>{});d(this,"currentMessage","What will you do ?");d(this,"sleep",e=>new Promise(t=>setTimeout(t,e)));var r,a;this.player=e,this.opponent=t,this.playerCurrentMonster=e.monsters[0],this.opponentCurrentMonster=this.wild?t:t.monsters[0],this.turnStack=[],this.initialOpponentPosition=new D(n.width/4*3-(t==null?void 0:t.sprites.width)*2.5*(t==null?void 0:t.spriteScale)/2,n.height/2-(t==null?void 0:t.sprites.height)*2.5*(t==null?void 0:t.spriteScale)-12*2.5),this.initialAllyPosition=new D(n.width/4-((r=this.playerCurrentMonster)==null?void 0:r.sprites.width)*2.5*this.playerCurrentMonster.spriteScale/2,n.height*.75-((a=this.playerCurrentMonster)==null?void 0:a.sprites.height)*2.5*this.playerCurrentMonster.spriteScale+15*2.5),this.playerCurrentMonster.position=this.initialAllyPosition,this.opponentCurrentMonster.position=this.initialOpponentPosition,this.isPlayerTurn=!0}get wild(){return this.opponent instanceof ve}selectAction(e){this.isPlayerTurn=!1,e instanceof Ae&&this.playerCurrentMonster.currentStats.speed>this.opponentCurrentMonster.currentStats.speed||e instanceof Le||e instanceof Ye||e instanceof Ve?(this.turnStack.push(e),this.selectOpponentAction()):(this.selectOpponentAction(),this.turnStack.push(e)),this.executeAction(this.turnStack.shift())}runAway(){if(this.wild){this.escapeAttempts++;const e=Math.random()*255;Math.floor(this.opponentCurrentMonster.currentStats.speed*128/this.playerCurrentMonster.currentStats.speed)+30*this.escapeAttempts*e>255?(this.turnStack=[],this.turnStack.push(new Ee(this.playerCurrentMonster)),this.turnStack.unshift(new K("You ran away safely!",this.playerCurrentMonster))):this.turnStack.unshift(new K("Failed to run away!",this.playerCurrentMonster))}else this.turnStack.unshift(new K("You can't run away from a trainer battle!",this.playerCurrentMonster))}attack(e){const t=e.initiator,n=e.target==="opponent"?this.opponentCurrentMonster:this.playerCurrentMonster,r=this.calculateDamage(t,n,e.move),a=[];a.push(new K(t.name+" used "+e.move.name+"!",e.initiator)),r.immune?a.push(new K("It doesn't affect "+n.name+"...",e.initiator)):r.notVeryEffective?a.push(new K("It's not very effective...",e.initiator)):r.superEffective&&a.push(new K("It's super effective!",e.initiator)),r.critical&&a.push(new K("A critical hit!",e.initiator)),a.push(new We(r.damages,e.target,e.initiator)),a.reverse().forEach(i=>this.turnStack.unshift(i))}calculateDamage(e,t,n){let r=new It;if(n.category!=="Status"){const a=n.category==="Physical"?e.currentStats.attack:e.currentStats.specialAttack,i=n.category==="Physical"?t.currentStats.defense:t.currentStats.specialDefense,o=this.calculateTypeEffectiveness(n.type,t.types);r.superEffective=o>1,r.notVeryEffective=o<1,r.immune=o===0;const c=r.immune?0:this.calculateCritical();r.critical=c>1;const h=Math.random()*(1-.85)+.85,f=this.calculateStab(e,n),p=o*c*h*f*1;r.damages=Math.floor(((2*e.level/5+2)*n.power*a/i/50+2)*p)}else r.damages=0;return r}calculateTypeEffectiveness(e,t){return t.reduce((n,r)=>{const a=zt(e,r);return n*a},1)}calculateCritical(){return Math.random()<.0625?1.5:1}calculateStab(e,t){return e.types.includes(t.type)?1.5:1}selectOpponentAction(){const e=this.opponentCurrentMonster.selectMove("Easy");this.turnStack.push(new Ae(e,"ally",this.opponentCurrentMonster))}executeAction(e){var t;e&&(e instanceof Ae&&!e.initiator.fainted?this.attack(e):e instanceof Le?this.runAway():e instanceof Ye||e instanceof Ve||(e instanceof K?this.currentMessage=e.description:e instanceof We?this.removeHP(e):e instanceof Ee&&this.onClose())),(t=this.turnStack)!=null&&t.length||0>0?this.sleep(1e3).then(()=>{var n;return this.executeAction((n=this.turnStack)==null?void 0:n.shift())}):this.isPlayerTurn=!0}removeHP(e){const t=e.target==="opponent"?this.opponentCurrentMonster:this.playerCurrentMonster;t.currentHp-=e.damages,t.currentHp<=0&&(t.currentHp=0,t.fainted=!0,this.turnStack=[],this.turnStack.push(new K(t.name+" fainted!",e.initiator)),(this.wild||this.opponent instanceof it&&this.opponent.monsters.every(n=>n.fainted))&&(this.turnStack.unshift(new Ee(e.initiator)),this.turnStack.unshift(new K("You won the battle!",e.initiator)),setTimeout(()=>{this.onClose()},1e3)))}}class It{constructor(){d(this,"superEffective",!1);d(this,"notVeryEffective",!1);d(this,"immune",!1);d(this,"critical",!1);d(this,"effectSuccess",!1);d(this,"effectApplied","");d(this,"damages",0)}}class Ee{constructor(e){d(this,"name");d(this,"description");d(this,"initiator");this.name="End Battle",this.description="End Battle",this.initiator=e}}class We{constructor(e,t,n){d(this,"name");d(this,"description");d(this,"damages");d(this,"target");d(this,"initiator");this.name="Remove HP",this.description="Remove HP",this.damages=e,this.target=t,this.initiator=n}}class K{constructor(e,t){d(this,"name");d(this,"description");d(this,"initiator");this.name="Message",this.description=e,this.initiator=t}}class Le{constructor(e){d(this,"description");d(this,"name");d(this,"initiator");this.name="Run Away",this.description="Run away from the battle",this.initiator=e}}class Ye{constructor(e,t){d(this,"description");d(this,"name");d(this,"targetIdx");d(this,"initiator");this.name="Change Pokemon",this.description="Change the current pokemon",this.targetIdx=e,this.initiator=t}}class Ae{constructor(e,t,n){d(this,"name");d(this,"description");d(this,"move");d(this,"target");d(this,"initiator");this.name=e.name,this.description=e.description,this.move=e,this.target=t,this.initiator=n}}class Ve{constructor(e,t,n,r,a,i=0){d(this,"description");d(this,"name");d(this,"itemId");d(this,"targetType");d(this,"targetIdx");d(this,"initiator");this.name=e,this.description=t,this.itemId=n,this.targetType=r,this.targetIdx=i,this.initiator=a}}class Ht{constructor(e,t){d(this,"position");d(this,"image");d(this,"width",0);d(this,"height",0);this.position=e,this.image=t,this.image.onload=()=>{this.width=this.image.width,this.height=this.image.height}}draw(e,t){e.drawImage(this.image,0,0,this.image.width,this.image.height,0,0,t.width,t.height*.75)}}const at=new Image;at.src="src/assets/battle/battle-grass.png";const Lt=new Ht(new D(0,0),at);function zt(s,e){return Bt[s.toLowerCase()][e.toLowerCase()]}const Bt={normal:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:.5,ghost:0,dragon:1,dark:1,steel:.5},fire:{normal:1,fire:.5,water:.5,electric:1,grass:2,ice:2,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:2,rock:.5,ghost:1,dragon:.5,dark:1,steel:2},water:{normal:1,fire:2,water:.5,electric:1,grass:.5,ice:1,fighting:1,poison:1,ground:2,flying:1,psychic:1,bug:1,rock:2,ghost:1,dragon:.5,dark:1,steel:1},electric:{normal:1,fire:1,water:2,electric:.5,grass:.5,ice:1,fighting:1,poison:1,ground:0,flying:2,psychic:1,bug:1,rock:1,ghost:1,dragon:.5,dark:1,steel:1},grass:{normal:1,fire:.5,water:2,electric:1,grass:.5,ice:1,fighting:1,poison:.5,ground:2,flying:.5,psychic:1,bug:.5,rock:2,ghost:1,dragon:.5,dark:1,steel:.5},ice:{normal:1,fire:.5,water:.5,electric:1,grass:2,ice:.5,fighting:1,poison:1,ground:2,flying:2,psychic:1,bug:1,rock:1,ghost:1,dragon:2,dark:1,steel:.5},fighting:{normal:2,fire:1,water:1,electric:1,grass:1,ice:2,fighting:1,poison:.5,ground:1,flying:.5,psychic:.5,bug:.5,rock:2,ghost:0,dragon:1,dark:2,steel:2},poison:{normal:1,fire:1,water:1,electric:1,grass:2,ice:1,fighting:1,poison:.5,ground:.5,flying:1,psychic:1,bug:1,rock:.5,ghost:.5,dragon:1,dark:1,steel:0},ground:{normal:1,fire:2,water:1,electric:2,grass:.5,ice:1,fighting:1,poison:2,ground:1,flying:0,psychic:1,bug:.5,rock:2,ghost:1,dragon:1,dark:1,steel:2},flying:{normal:1,fire:1,water:1,electric:.5,grass:2,ice:1,fighting:2,poison:1,ground:1,flying:1,psychic:1,bug:2,rock:.5,ghost:1,dragon:1,dark:1,steel:.5},psychic:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:2,poison:2,ground:1,flying:1,psychic:.5,bug:1,rock:1,ghost:1,dragon:1,dark:0,steel:.5},bug:{normal:1,fire:.5,water:1,electric:1,grass:2,ice:1,fighting:.5,poison:.5,ground:1,flying:.5,psychic:2,bug:1,rock:1,ghost:.5,dragon:1,dark:2,steel:.5},rock:{normal:1,fire:2,water:1,electric:1,grass:1,ice:2,fighting:.5,poison:1,ground:.5,flying:2,psychic:1,bug:2,rock:1,ghost:1,dragon:1,dark:1,steel:.5},ghost:{normal:0,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:2,bug:1,rock:1,ghost:2,dragon:1,dark:.5,steel:.5},dragon:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:1,ghost:1,dragon:2,dark:1,steel:.5},dark:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:.5,poison:1,ground:1,flying:1,psychic:2,bug:1,rock:1,ghost:2,dragon:1,dark:.5,steel:.5},steel:{normal:1,fire:.5,water:.5,electric:.5,grass:1,ice:2,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:2,ghost:1,dragon:1,dark:1,steel:.5}};function Dt(s){de(s,"svelte-1bd3csm",".ally-info.svelte-1bd3csm.svelte-1bd3csm{opacity:0;visibility:hidden;z-index:9;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;bottom:26dvh;right:-30dvw;transition:right 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly;font-size:46px}.ally-info.opened.svelte-1bd3csm.svelte-1bd3csm{opacity:1;visibility:visible;right:1dvw}.ally-info.svelte-1bd3csm .name-lvl.svelte-1bd3csm{display:flex;justify-content:space-between;align-items:center}.ally-info.svelte-1bd3csm .status.svelte-1bd3csm{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.ally-info.svelte-1bd3csm .hp.svelte-1bd3csm{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.ally-info.svelte-1bd3csm .hp span.svelte-1bd3csm{padding:0 0 0 12px;font-weight:bold}.ally-info.svelte-1bd3csm .hp .progressbar-wrapper.svelte-1bd3csm{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.ally-info.svelte-1bd3csm .hp .progressbar-wrapper .progressbar.svelte-1bd3csm{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px;transition:width 1s ease-in-out}.ally-info.svelte-1bd3csm .hp .progressbar-wrapper .progressbar.warning.svelte-1bd3csm{background:rgb(255, 241, 164);background:linear-gradient(0deg, rgb(255, 241, 164) 0%, rgb(255, 194, 16) 30%, rgb(255, 194, 16) 50%, rgb(255, 194, 16) 70%, rgb(255, 241, 164) 100%)}.ally-info.svelte-1bd3csm .hp .progressbar-wrapper .progressbar.danger.svelte-1bd3csm{background:rgb(244, 177, 159);background:linear-gradient(0deg, rgb(244, 177, 159) 0%, rgb(223, 85, 48) 30%, rgb(223, 85, 48) 50%, rgb(223, 85, 48) 70%, rgb(244, 177, 159) 100%)}@media screen and (max-width: 767px) and (orientation: portrait){.ally-info.svelte-1bd3csm.svelte-1bd3csm{bottom:30dvh;height:18dvw;width:30dvh;font-size:36px}.ally-info.svelte-1bd3csm .hp.svelte-1bd3csm{width:100%}}")}function Tt(s){let e,t,n,r=s[1].name+"",a,i,o,c,h=s[1].level+"",f,l,p,g,v,x,$,_,O,I=s[1].currentHp+"",T,y,b=s[1].currentStats.HP+"",C;return{c(){e=w("div"),t=w("div"),n=w("span"),a=A(r),i=P(),o=w("span"),c=A("Lv "),f=A(h),l=P(),p=w("div"),g=w("div"),v=w("span"),v.textContent="HP",x=P(),$=w("div"),_=w("div"),O=P(),T=A(I),y=A(" / "),C=A(b),m(n,"class","svelte-1bd3csm"),m(o,"class","svelte-1bd3csm"),m(t,"class","name-lvl svelte-1bd3csm"),m(v,"class","svelte-1bd3csm"),m(_,"class","progressbar svelte-1bd3csm"),se(_,"--width",s[2]+"%"),j(_,"warning",s[2]<=50),j(_,"danger",s[2]<15),m($,"class","progressbar-wrapper svelte-1bd3csm"),m(g,"class","hp svelte-1bd3csm"),m(p,"class","status svelte-1bd3csm"),m(e,"class","ally-info svelte-1bd3csm"),j(e,"opened",s[0])},m(S,M){B(S,e,M),u(e,t),u(t,n),u(n,a),u(t,i),u(t,o),u(o,c),u(o,f),u(e,l),u(e,p),u(p,g),u(g,v),u(g,x),u(g,$),u($,_),u(p,O),u(p,T),u(p,y),u(p,C)},p(S,[M]){M&2&&r!==(r=S[1].name+"")&&R(a,r),M&2&&h!==(h=S[1].level+"")&&R(f,h),M&4&&se(_,"--width",S[2]+"%"),M&4&&j(_,"warning",S[2]<=50),M&4&&j(_,"danger",S[2]<15),M&2&&I!==(I=S[1].currentHp+"")&&R(T,I),M&2&&b!==(b=S[1].currentStats.HP+"")&&R(C,b),M&1&&j(e,"opened",S[0])},i:U,o:U,d(S){S&&H(e)}}}function Ft(s,e,t){let n,{opened:r}=e,{monster:a}=e;return s.$$set=i=>{"opened"in i&&t(0,r=i.opened),"monster"in i&&t(1,a=i.monster)},s.$$.update=()=>{s.$$.dirty&2&&t(2,n=Math.floor(a.currentHp*100/a.currentStats.HP))},[r,a,n]}class ot extends he{constructor(e){super(),ce(this,e,Ft,Tt,le,{opened:0,monster:1},Dt)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),z()}get monster(){return this.$$.ctx[1]}set monster(e){this.$$set({monster:e}),z()}}fe(ot,{opened:{},monster:{}},[],[],!0);function Nt(s){de(s,"svelte-1fjod4r",".action-bar.svelte-1fjod4r.svelte-1fjod4r{opacity:0;visibility:hidden;z-index:9;background-color:white;height:25dvh;width:100dvw;position:absolute;bottom:-25dvh;left:0;transition:bottom 0.5s ease-in-out;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;display:flex;font-size:64px}.action-bar.opened.svelte-1fjod4r.svelte-1fjod4r{opacity:1;visibility:visible;bottom:0}.action-bar.svelte-1fjod4r .info.svelte-1fjod4r{width:50%;height:100%;display:flex;align-items:center;align-content:center;justify-content:space-around;position:relative}.action-bar.svelte-1fjod4r .info ._inner.svelte-1fjod4r{position:absolute;left:17px;z-index:1;height:calc(100% - 55px);border:10px solid black;border-radius:10px;display:flex;align-items:center;justify-content:center;width:100%;text-transform:capitalize}.action-bar.svelte-1fjod4r .info ._inner .move-desc.svelte-1fjod4r{text-transform:initial;font-size:46px;display:flex;flex-wrap:wrap;gap:16px;word-break:break-word;box-sizing:border-box;padding:0 20px}.action-bar.svelte-1fjod4r .info ._inner .move-desc p.svelte-1fjod4r{flex:45%;margin:0}.action-bar.svelte-1fjod4r .actions.svelte-1fjod4r,.action-bar.svelte-1fjod4r .moves.svelte-1fjod4r{width:50%;height:100%;display:flex;background:#FFFFFF;border:14px solid #595b59;border-radius:8px;box-sizing:border-box;padding:12px;z-index:2;flex-wrap:wrap;gap:12px}@media screen and (max-width: 767px) and (orientation: portrait){.action-bar.svelte-1fjod4r.svelte-1fjod4r{bottom:0;right:0;width:100dvh;height:33dvw;font-size:38px}.action-bar.svelte-1fjod4r .action-btn.svelte-1fjod4r{font-size:32px;flex:30%}.action-bar.svelte-1fjod4r .info ._inner .move-desc.svelte-1fjod4r{font-size:32px;gap:0}}.action-btn.svelte-1fjod4r.svelte-1fjod4r{background-color:var(--color);font-size:64px;color:white;border-radius:24px;border:6px solid #595b59;font-family:pokemon, serif;transition:color 0.3s ease-in-out, opacity 0.3s ease-in-out;flex:49%}.action-btn.svelte-1fjod4r.svelte-1fjod4r:hover,.action-btn.selected.svelte-1fjod4r.svelte-1fjod4r{cursor:pointer;opacity:0.96;color:#262626}.action-btn[disabled].svelte-1fjod4r.svelte-1fjod4r{opacity:0.5;cursor:not-allowed;pointer-events:none}@media(max-width: 1280px){.action-btn.svelte-1fjod4r.svelte-1fjod4r{font-size:48px;flex:30%}}")}function Ge(s,e,t){const n=s.slice();return n[11]=e[t],n[13]=t,n}function Rt(s){var S,M,L,G,ye,ke;let e,t,n=((S=s[1])==null?void 0:S.playerCurrentMonster.moves[s[3]].description)+"",r,a,i,o=((M=s[1])==null?void 0:M.playerCurrentMonster.moves[s[3]].currentPp)+"",c,h,f=((L=s[1])==null?void 0:L.playerCurrentMonster.moves[s[3]].pp)+"",l,p,g,v=((G=s[1])==null?void 0:G.playerCurrentMonster.moves[s[3]].category)+"",x,$,_,O=((ye=s[1])==null?void 0:ye.playerCurrentMonster.moves[s[3]].power)+"",I,T,y=((ke=s[1])==null?void 0:ke.playerCurrentMonster.moves[s[3]].accuracy)+"",b,C;return{c(){e=w("div"),t=w("p"),r=A(n),a=P(),i=w("p"),c=A(o),h=A(`
                        / `),l=A(f),p=P(),g=w("p"),x=A(v),$=P(),_=w("p"),I=A(O),T=A(`
                        | `),b=A(y),C=A(" %"),m(t,"class","svelte-1fjod4r"),m(i,"class","svelte-1fjod4r"),m(g,"class","svelte-1fjod4r"),m(_,"class","svelte-1fjod4r"),m(e,"class","move-desc svelte-1fjod4r")},m(F,Q){B(F,e,Q),u(e,t),u(t,r),u(e,a),u(e,i),u(i,c),u(i,h),u(i,l),u(e,p),u(e,g),u(g,x),u(e,$),u(e,_),u(_,I),u(_,T),u(_,b),u(_,C)},p(F,Q){var _e,xe,Se,k,J,X;Q&10&&n!==(n=((_e=F[1])==null?void 0:_e.playerCurrentMonster.moves[F[3]].description)+"")&&R(r,n),Q&10&&o!==(o=((xe=F[1])==null?void 0:xe.playerCurrentMonster.moves[F[3]].currentPp)+"")&&R(c,o),Q&10&&f!==(f=((Se=F[1])==null?void 0:Se.playerCurrentMonster.moves[F[3]].pp)+"")&&R(l,f),Q&10&&v!==(v=((k=F[1])==null?void 0:k.playerCurrentMonster.moves[F[3]].category)+"")&&R(x,v),Q&10&&O!==(O=((J=F[1])==null?void 0:J.playerCurrentMonster.moves[F[3]].power)+"")&&R(I,O),Q&10&&y!==(y=((X=F[1])==null?void 0:X.playerCurrentMonster.moves[F[3]].accuracy)+"")&&R(b,y)},d(F){F&&H(e)}}}function Ut(s){var n;let e=((n=s[1])==null?void 0:n.currentMessage.toUpperCase())+"",t;return{c(){t=A(e)},m(r,a){B(r,t,a)},p(r,a){var i;a&2&&e!==(e=((i=r[1])==null?void 0:i.currentMessage.toUpperCase())+"")&&R(t,e)},d(r){r&&H(t)}}}function Xt(s){let e,t,n,r,a,i,o,c,h,f,l,p,g,v;return{c(){e=w("div"),t=w("button"),n=A("FIGHT"),r=P(),a=w("button"),i=A("BAG"),o=P(),c=w("button"),h=A("POKEMONS"),f=P(),l=w("button"),p=A("RUN"),m(t,"class","action-btn svelte-1fjod4r"),se(t,"--color","#dc5959"),t.disabled=s[5],j(t,"selected",s[4]===0),m(a,"class","action-btn svelte-1fjod4r"),se(a,"--color","#eca859"),a.disabled=s[5],j(a,"selected",s[4]===1),m(c,"class","action-btn svelte-1fjod4r"),se(c,"--color","#7EAF53"),c.disabled=s[5],j(c,"selected",s[4]===2),m(l,"class","action-btn svelte-1fjod4r"),se(l,"--color","#599bdc"),l.disabled=s[5],j(l,"selected",s[4]===2),m(e,"class","actions svelte-1fjod4r")},m(x,$){B(x,e,$),u(e,t),u(t,n),u(e,r),u(e,a),u(a,i),u(e,o),u(e,c),u(c,h),u(e,f),u(e,l),u(l,p),g||(v=[Z(t,"click",s[6]),Z(l,"click",s[7])],g=!0)},p(x,$){$&32&&(t.disabled=x[5]),$&16&&j(t,"selected",x[4]===0),$&32&&(a.disabled=x[5]),$&16&&j(a,"selected",x[4]===1),$&32&&(c.disabled=x[5]),$&16&&j(c,"selected",x[4]===2),$&32&&(l.disabled=x[5]),$&16&&j(l,"selected",x[4]===2)},d(x){x&&H(e),g=!1,ne(v)}}}function Zt(s){let e,t=Xe(s[1].playerCurrentMonster.moves),n=[];for(let r=0;r<t.length;r+=1)n[r]=Je(Ge(s,t,r));return{c(){e=w("div");for(let r=0;r<n.length;r+=1)n[r].c();m(e,"class","moves svelte-1fjod4r")},m(r,a){B(r,e,a);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(r,a){if(a&298){t=Xe(r[1].playerCurrentMonster.moves);let i;for(i=0;i<t.length;i+=1){const o=Ge(r,t,i);n[i]?n[i].p(o,a):(n[i]=Je(o),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(r){r&&H(e),yt(n,r)}}}function Je(s){let e,t=s[11].name.toUpperCase()+"",n,r,a,i;function o(){return s[9](s[13])}function c(){return s[10](s[11])}return{c(){e=w("button"),n=A(t),r=P(),m(e,"class","action-btn svelte-1fjod4r"),se(e,"--color","#dc5959"),e.disabled=s[5],j(e,"selected",s[3]===s[13])},m(h,f){B(h,e,f),u(e,n),u(e,r),a||(i=[Z(e,"mouseover",o),Z(e,"click",c)],a=!0)},p(h,f){s=h,f&2&&t!==(t=s[11].name.toUpperCase()+"")&&R(n,t),f&32&&(e.disabled=s[5]),f&8&&j(e,"selected",s[3]===s[13])},d(h){h&&H(e),a=!1,ne(i)}}}function qt(s){let e,t,n,r;function a(l,p){return l[2]?Rt:Ut}let i=a(s),o=i(s);function c(l,p){return l[2]?Zt:Xt}let h=c(s),f=h(s);return{c(){e=w("div"),t=w("div"),n=w("div"),o.c(),r=P(),f.c(),m(n,"class","_inner svelte-1fjod4r"),m(t,"class","info svelte-1fjod4r"),m(e,"class","action-bar svelte-1fjod4r"),j(e,"opened",s[0])},m(l,p){B(l,e,p),u(e,t),u(t,n),o.m(n,null),u(e,r),f.m(e,null)},p(l,[p]){i===(i=a(l))&&o?o.p(l,p):(o.d(1),o=i(l),o&&(o.c(),o.m(n,null))),h===(h=c(l))&&f?f.p(l,p):(f.d(1),f=h(l),f&&(f.c(),f.m(e,null))),p&1&&j(e,"opened",l[0])},i:U,o:U,d(l){l&&H(e),o.d(),f.d()}}}function Wt(s,e,t){let n,{opened:r}=e,{battleState:a}=e,i=!1,o=0,c=0;function h(){t(2,i=!i)}function f(){console.log(a),a.selectAction(new Le(a.playerCurrentMonster))}function l(v){a.selectAction(new Ae(v,"opponent",a.playerCurrentMonster)),t(2,i=!1)}window.addEventListener("keydown",v=>{v.key==="ArrowUp"?i?t(3,o=o===0?a.playerCurrentMonster.moves.length-1:o-1):t(4,c=c===0?3:c-1):v.key==="ArrowDown"?i?t(3,o=o===a.playerCurrentMonster.moves.length-1?0:o+1):t(4,c=c===3?0:c+1):v.key==="Enter"&&(i?l(a.playerCurrentMonster.moves[o]):c===0?h():c===3&&f()),console.log(c,o)});const p=v=>t(3,o=v),g=v=>l(v);return s.$$set=v=>{"opened"in v&&t(0,r=v.opened),"battleState"in v&&t(1,a=v.battleState)},s.$$.update=()=>{s.$$.dirty&2&&t(5,n=a&&!a.isPlayerTurn||!1)},[r,a,i,o,c,n,h,f,l,p,g]}class lt extends he{constructor(e){super(),ce(this,e,Wt,qt,le,{opened:0,battleState:1},Nt)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),z()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),z()}}fe(lt,{opened:{},battleState:{}},[],[],!0);function Yt(s){de(s,"svelte-bt8afj",".enemy-info.svelte-bt8afj.svelte-bt8afj{opacity:0;visibility:hidden;z-index:9;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;top:2dvh;left:-30dvw;transition:left 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly;font-size:46px}.enemy-info.opened.svelte-bt8afj.svelte-bt8afj{opacity:1;visibility:visible;left:1dvw}.enemy-info.svelte-bt8afj .name-lvl.svelte-bt8afj{display:flex;justify-content:space-between;align-items:center}.enemy-info.svelte-bt8afj .status.svelte-bt8afj{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.enemy-info.svelte-bt8afj .hp.svelte-bt8afj{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.enemy-info.svelte-bt8afj .hp span.svelte-bt8afj{padding:0 0 0 12px;font-weight:bold}.enemy-info.svelte-bt8afj .hp .progressbar-wrapper.svelte-bt8afj{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.enemy-info.svelte-bt8afj .hp .progressbar-wrapper .progressbar.svelte-bt8afj{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px;transition:width 1s ease-in-out, background 1s ease-in-out 1s}.enemy-info.svelte-bt8afj .hp .progressbar-wrapper .progressbar.warning.svelte-bt8afj{background:rgb(255, 241, 164);background:linear-gradient(0deg, rgb(255, 241, 164) 0%, rgb(255, 194, 16) 30%, rgb(255, 194, 16) 50%, rgb(255, 194, 16) 70%, rgb(255, 241, 164) 100%)}.enemy-info.svelte-bt8afj .hp .progressbar-wrapper .progressbar.danger.svelte-bt8afj{background:rgb(244, 177, 159);background:linear-gradient(0deg, rgb(244, 177, 159) 0%, rgb(223, 85, 48) 30%, rgb(223, 85, 48) 50%, rgb(223, 85, 48) 70%, rgb(244, 177, 159) 100%)}@media screen and (max-width: 767px) and (orientation: portrait){.enemy-info.svelte-bt8afj.svelte-bt8afj{bottom:30dvh;height:15dvw;width:30dvh;font-size:36px}.enemy-info.svelte-bt8afj .hp.svelte-bt8afj{width:100%}}")}function Vt(s){let e,t,n,r=s[1].name+"",a,i,o,c,h=s[1].level+"",f,l,p,g,v,x,$,_,O,I=s[1].currentHp+"",T,y,b=s[1].currentStats.HP+"",C;return{c(){e=w("div"),t=w("div"),n=w("span"),a=A(r),i=P(),o=w("span"),c=A("Lv "),f=A(h),l=P(),p=w("div"),g=w("div"),v=w("span"),v.textContent="HP",x=P(),$=w("div"),_=w("div"),O=P(),T=A(I),y=A(" / "),C=A(b),m(n,"class","svelte-bt8afj"),m(o,"class","svelte-bt8afj"),m(t,"class","name-lvl svelte-bt8afj"),m(v,"class","svelte-bt8afj"),m(_,"class","progressbar svelte-bt8afj"),se(_,"--width",s[2]+"%"),j(_,"warning",s[2]<=50),j(_,"danger",s[2]<15),m($,"class","progressbar-wrapper svelte-bt8afj"),m(g,"class","hp svelte-bt8afj"),m(p,"class","status svelte-bt8afj"),m(e,"class","enemy-info svelte-bt8afj"),j(e,"opened",s[0])},m(S,M){B(S,e,M),u(e,t),u(t,n),u(n,a),u(t,i),u(t,o),u(o,c),u(o,f),u(e,l),u(e,p),u(p,g),u(g,v),u(g,x),u(g,$),u($,_),u(p,O),u(p,T),u(p,y),u(p,C)},p(S,[M]){M&2&&r!==(r=S[1].name+"")&&R(a,r),M&2&&h!==(h=S[1].level+"")&&R(f,h),M&4&&se(_,"--width",S[2]+"%"),M&4&&j(_,"warning",S[2]<=50),M&4&&j(_,"danger",S[2]<15),M&2&&I!==(I=S[1].currentHp+"")&&R(T,I),M&2&&b!==(b=S[1].currentStats.HP+"")&&R(C,b),M&1&&j(e,"opened",S[0])},i:U,o:U,d(S){S&&H(e)}}}function Gt(s,e,t){let n,{opened:r}=e,{monster:a}=e;return s.$$set=i=>{"opened"in i&&t(0,r=i.opened),"monster"in i&&t(1,a=i.monster)},s.$$.update=()=>{s.$$.dirty&2&&t(2,n=Math.floor(a.currentHp*100/a.currentStats.HP))},[r,a,n]}class dt extends he{constructor(e){super(),ce(this,e,Gt,Vt,le,{opened:0,monster:1},Yt)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),z()}get monster(){return this.$$.ctx[1]}set monster(e){this.$$set({monster:e}),z()}}fe(dt,{opened:{},monster:{}},[],[],!0);function Jt(s){de(s,"svelte-hx8zpy",".battleStart.svelte-hx8zpy{opacity:0;visibility:hidden;background:#000000;height:100dvh;width:100dvw;position:absolute;top:0;left:0;transition:opacity 0.5s ease-in-out;z-index:2}.battleStart.animate.svelte-hx8zpy{visibility:visible;animation:svelte-hx8zpy-animate 2s ease-in-out}.battleStart.hide.svelte-hx8zpy{visibility:hidden;opacity:0}@keyframes svelte-hx8zpy-animate{0%{opacity:1}20%{opacity:0}40%{opacity:1}60%{opacity:0}80%{opacity:1}100%{opacity:0}}")}function Ke(s){let e,t,n,r,a,i,o,c,h,f,l,p;function g(b){s[3](b)}function v(b){s[4](b)}let x={};s[0]!==void 0&&(x.opened=s[0]),s[1]!==void 0&&(x.battleState=s[1]),e=new lt({props:x}),N.push(()=>Y(e,"opened",g)),N.push(()=>Y(e,"battleState",v));function $(b){s[5](b)}function _(b){s[6](b)}let O={};s[0]!==void 0&&(O.opened=s[0]),s[1].playerCurrentMonster!==void 0&&(O.monster=s[1].playerCurrentMonster),a=new ot({props:O}),N.push(()=>Y(a,"opened",$)),N.push(()=>Y(a,"monster",_));function I(b){s[7](b)}function T(b){s[8](b)}let y={};return s[0]!==void 0&&(y.opened=s[0]),s[1].opponentCurrentMonster!==void 0&&(y.monster=s[1].opponentCurrentMonster),h=new dt({props:y}),N.push(()=>Y(h,"opened",I)),N.push(()=>Y(h,"monster",T)),{c(){be(e.$$.fragment),r=P(),be(a.$$.fragment),c=P(),be(h.$$.fragment)},m(b,C){ae(e,b,C),B(b,r,C),ae(a,b,C),B(b,c,C),ae(h,b,C),p=!0},p(b,C){const S={};!t&&C&1&&(t=!0,S.opened=b[0],W(()=>t=!1)),!n&&C&2&&(n=!0,S.battleState=b[1],W(()=>n=!1)),e.$set(S);const M={};!i&&C&1&&(i=!0,M.opened=b[0],W(()=>i=!1)),!o&&C&2&&(o=!0,M.monster=b[1].playerCurrentMonster,W(()=>o=!1)),a.$set(M);const L={};!f&&C&1&&(f=!0,L.opened=b[0],W(()=>f=!1)),!l&&C&2&&(l=!0,L.monster=b[1].opponentCurrentMonster,W(()=>l=!1)),h.$set(L)},i(b){p||(q(e.$$.fragment,b),q(a.$$.fragment,b),q(h.$$.fragment,b),p=!0)},o(b){V(e.$$.fragment,b),V(a.$$.fragment,b),V(h.$$.fragment,b),p=!1},d(b){b&&(H(r),H(c)),oe(e,b),oe(a,b),oe(h,b)}}}function Kt(s){let e,t,n,r=s[1]&&Ke(s);return{c(){r&&r.c(),e=P(),t=w("div"),t.innerHTML="",m(t,"class","battleStart svelte-hx8zpy"),j(t,"hide",s[0]),j(t,"animate",s[2])},m(a,i){r&&r.m(a,i),B(a,e,i),B(a,t,i),n=!0},p(a,[i]){a[1]?r?(r.p(a,i),i&2&&q(r,1)):(r=Ke(a),r.c(),q(r,1),r.m(e.parentNode,e)):r&&(Be(),V(r,1,1,()=>{r=null}),De()),(!n||i&1)&&j(t,"hide",a[0]),(!n||i&4)&&j(t,"animate",a[2])},i(a){n||(q(r),n=!0)},o(a){V(r),n=!1},d(a){a&&(H(e),H(t)),r&&r.d(a)}}}function Qt(s,e,t){let{opened:n}=e,{battleStart:r}=e,{battleState:a}=e;function i(p){n=p,t(0,n)}function o(p){a=p,t(1,a)}function c(p){n=p,t(0,n)}function h(p){s.$$.not_equal(a.playerCurrentMonster,p)&&(a.playerCurrentMonster=p,t(1,a))}function f(p){n=p,t(0,n)}function l(p){s.$$.not_equal(a.opponentCurrentMonster,p)&&(a.opponentCurrentMonster=p,t(1,a))}return s.$$set=p=>{"opened"in p&&t(0,n=p.opened),"battleStart"in p&&t(2,r=p.battleStart),"battleState"in p&&t(1,a=p.battleState)},[n,a,r,i,o,c,h,f,l]}class ct extends he{constructor(e){super(),ce(this,e,Qt,Kt,le,{opened:0,battleStart:2,battleState:1},Jt)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),z()}get battleStart(){return this.$$.ctx[2]}set battleStart(e){this.$$set({battleStart:e}),z()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),z()}}fe(ct,{opened:{},battleStart:{},battleState:{}},[],[],!0);function es(s){de(s,"svelte-1cbbcxy",'.menu.svelte-1cbbcxy.svelte-1cbbcxy{position:absolute;top:0;right:-20dvw;width:20dvw;font-size:36px;background-color:#FFFFFF;z-index:3;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:right 0.3s ease-in-out;border:3px solid #1e1e1e;border-radius:16px}.menu.svelte-1cbbcxy ul.svelte-1cbbcxy{box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;border-radius:12px;list-style:none;padding:12px 32px;margin:0;display:flex;flex-direction:column;height:100%;width:100%;align-items:center}.menu.svelte-1cbbcxy ul li.svelte-1cbbcxy{font-size:4rem;margin:1rem 0;text-align:center;cursor:pointer;flex-grow:1;width:100%;height:100%;min-height:60px;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li:hover .svelte-1cbbcxy:before{content:"";width:0;height:0;border-top:20px solid transparent;border-bottom:20px solid transparent;border-left:20px solid #262626;position:absolute;left:40px}.menu.svelte-1cbbcxy ul li button.svelte-1cbbcxy{background:none;border:none;font-size:inherit;font-family:inherit;cursor:inherit;outline:none;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li button .svelte-1cbbcxy:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%}.menu.open.svelte-1cbbcxy.svelte-1cbbcxy{opacity:1;pointer-events:all;right:0}')}function ts(s){let e;return{c(){e=w("div"),e.innerHTML='<ul class="svelte-1cbbcxy"><li class="svelte-1cbbcxy"><button tabindex="0" class="svelte-1cbbcxy">Pokedex</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Pokemon</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Bag</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Trainer</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Save</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Options</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Credits</button></li></ul>',m(e,"class","menu svelte-1cbbcxy"),j(e,"open",s[0])},m(t,n){B(t,e,n)},p(t,[n]){n&1&&j(e,"open",t[0])},i:U,o:U,d(t){t&&H(e)}}}function ss(s,e,t){let{menuOpened:n}=e,{player:r}=e;return s.$$set=a=>{"menuOpened"in a&&t(0,n=a.menuOpened),"player"in a&&t(1,r=a.player)},[n,r]}class ft extends he{constructor(e){super(),ce(this,e,ss,ts,le,{menuOpened:0,player:1},es)}get menuOpened(){return this.$$.ctx[0]}set menuOpened(e){this.$$set({menuOpened:e}),z()}get player(){return this.$$.ctx[1]}set player(e){this.$$set({player:e}),z()}}fe(ft,{menuOpened:{},player:{}},[],[],!0);class Qe{constructor(e,t=16,n=16){d(this,"position");d(this,"width");d(this,"height");this.position=e,this.width=t,this.height=n}debug(e,t,n,r,a,i="red"){e.fillStyle=i,e.fillRect(r+this.position.x*16*n,a+this.position.y*16*n,this.width*n,this.height*n)}}const ns=8,rs=806;class is{constructor(e,t,n,r,a,i,o){d(this,"background");d(this,"foreground");d(this,"width");d(this,"height");d(this,"collisions");d(this,"battleZones");d(this,"monsters");d(this,"playerInitialPosition",new D(11,11));d(this,"startingX",0);d(this,"startingY",0);this.background=e,this.foreground=t,this.width=n,this.height=r,this.collisions=this.initBoundaries(a),this.battleZones=this.initBattlesZones(i),this.monsters=o}randomMonster(){const e=this.monsters[Math.floor(Math.random()*this.monsters.length)],n=(localStorage.getItem("pokedex")&&JSON.parse(localStorage.getItem("pokedex")||"[]")||[]).find(r=>r.id===e);return Object.setPrototypeOf(n,ve.prototype),n}initBattlesZones(e){const t=[];for(let r=0;r<e.length;r+=this.width)t.push(e.slice(r,this.width+r));const n=[];return t.forEach((r,a)=>{r.forEach((i,o)=>{if(i===ns){const c=new Qe(new D(o,a));n.push(c)}})}),n}initBoundaries(e){const t=[];for(let r=0;r<e.length;r+=this.width)t.push(e.slice(r,this.width+r));const n=[];return t.forEach((r,a)=>{r.forEach((i,o)=>{if(i===rs){const c=new Qe(new D(o,a));n.push(c)}})}),n}drawBackground(e,t,n){let r=this.background.width*n,a=this.background.height*n,i=e.canvas.width/2-r/2,o=e.canvas.height/2-a/2;this.startingX=i+(0-t.x)*(16*n),this.startingY=o+(0-t.y)*(16*n),e.drawImage(this.background,0,0,this.background.width,this.background.height,this.startingX,this.startingY,this.background.width*n,this.background.height*n)}drawForeground(e,t){this.foreground!==null&&e.drawImage(this.foreground,t.x*16,t.y*16,this.foreground.width,this.foreground.height,0,0,this.foreground.width*3,this.foreground.height*3)}drawBoundaries(e,t,n){this.collisions.forEach(r=>{r.debug(e,t,n,this.startingX,this.startingY,"rgba(255, 0, 0, 0.5)")})}drawBattleZones(e,t,n){this.battleZones.forEach(r=>{r.debug(e,t,n,this.startingX,this.startingY,"rgba(0, 0, 255, 0.5)")})}hasBattleZoneAt(e){return this.battleZones.some(t=>t.position.x===e.x&&t.position.y===e.y)}hasBoundaryAt(e){return this.collisions.some(t=>t.position.x===e.x&&t.position.y===e.y)||e.x<0||e.y<0||e.x>this.width-1||e.y>this.height-1}}const ht=new Image;ht.src="src/assets/maps/test-map.png";const pt=new Image;pt.src="src/assets/maps/test-map-foreground.png";const as=[95],os=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,0,806,806,0,0,806,806,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,806,806,806,806,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,806,806,806,806,834,0,0,0,0,0,0,0,0,0],ls=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],re=new is(ht,pt,20,20,os,ls,as);function ds(s){de(s,"svelte-1hgnr1a",'.set.svelte-1hgnr1a.svelte-1hgnr1a{overflow:hidden;text-align:center;position:absolute;bottom:5dvh;left:5dvw;z-index:10}.set.svelte-1hgnr1a .d-pad.svelte-1hgnr1a{display:inline-block}.d-pad.svelte-1hgnr1a.svelte-1hgnr1a{position:relative;width:15dvw;height:15dvh;border-radius:48%;overflow:hidden}.d-pad.svelte-1hgnr1a.svelte-1hgnr1a:before{content:"";position:absolute;top:50%;left:50%;border-radius:5%;transform:translate(-50%, -50%);width:66.6%;height:66.6%}.d-pad.svelte-1hgnr1a.svelte-1hgnr1a:after{content:"";position:absolute;display:none;z-index:2;width:20%;height:20%;top:50%;left:50%;background:rgba(221, 221, 221, 0.5);border-radius:50%;transform:translate(-50%, -50%);transition:all 0.25s;cursor:pointer}.d-pad.svelte-1hgnr1a.svelte-1hgnr1a:hover:after{width:30%;height:30%}.d-pad.svelte-1hgnr1a span.svelte-1hgnr1a{display:block;position:absolute;-webkit-tap-highlight-color:rgba(255, 255, 255, 0);width:33.3%;height:43%;line-height:40%;color:#fff;background:rgba(221, 221, 221, 0.5);text-align:center}.d-pad.svelte-1hgnr1a span.svelte-1hgnr1a:hover{background:#eee}.d-pad.svelte-1hgnr1a span.svelte-1hgnr1a:before{content:"";position:absolute;width:0;height:0;border-radius:5px;border-style:solid;transition:all 0.25s}.d-pad.svelte-1hgnr1a span.svelte-1hgnr1a:after{content:"";position:absolute;width:102%;height:78%;background:#fff;border-radius:20%}.d-pad.svelte-1hgnr1a span.left.svelte-1hgnr1a,.d-pad.svelte-1hgnr1a span.right.svelte-1hgnr1a{width:43%;height:33%}.d-pad.svelte-1hgnr1a span.left.svelte-1hgnr1a:after,.d-pad.svelte-1hgnr1a span.right.svelte-1hgnr1a:after{width:78%;height:102%}.d-pad.svelte-1hgnr1a span.up.svelte-1hgnr1a{top:0;left:50%;transform:translate(-50%, 0);border-radius:17% 17% 50% 50%}.d-pad.svelte-1hgnr1a span.up.svelte-1hgnr1a:hover{background:linear-gradient(0deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1hgnr1a span.up.svelte-1hgnr1a:after{left:0;top:0;transform:translate(-100%, 0);border-top-left-radius:50%;pointer-events:none}.d-pad.svelte-1hgnr1a span.up.svelte-1hgnr1a:before{top:40%;left:50%;transform:translate(-50%, -50%);border-width:0 13px 19px 13px;border-color:transparent transparent #aaa transparent}.d-pad.svelte-1hgnr1a span.up.svelte-1hgnr1a:active:before{border-bottom-color:#333}.d-pad.svelte-1hgnr1a span.up.svelte-1hgnr1a:hover:before{top:35%}.d-pad.svelte-1hgnr1a span.down.svelte-1hgnr1a{bottom:0;left:50%;transform:translate(-50%, 0);border-radius:50% 50% 17% 17%}.d-pad.svelte-1hgnr1a span.down.svelte-1hgnr1a:hover{background:linear-gradient(180deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1hgnr1a span.down.svelte-1hgnr1a:after{right:0;bottom:0;transform:translate(100%, 0);border-bottom-right-radius:50%;pointer-events:none}.d-pad.svelte-1hgnr1a span.down.svelte-1hgnr1a:before{bottom:40%;left:50%;transform:translate(-50%, 50%);border-width:19px 13px 0px 13px;border-color:#aaa transparent transparent transparent}.d-pad.svelte-1hgnr1a span.down.svelte-1hgnr1a:active:before{border-top-color:#333}.d-pad.svelte-1hgnr1a span.down.svelte-1hgnr1a:hover:before{bottom:35%}.d-pad.svelte-1hgnr1a span.left.svelte-1hgnr1a{top:50%;left:0;transform:translate(0, -50%);border-radius:17% 50% 50% 17%}.d-pad.svelte-1hgnr1a span.left.svelte-1hgnr1a:hover{background:linear-gradient(-90deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1hgnr1a span.left.svelte-1hgnr1a:after{left:0;bottom:0;transform:translate(0, 100%);border-bottom-left-radius:50%;pointer-events:none}.d-pad.svelte-1hgnr1a span.left.svelte-1hgnr1a:before{left:40%;top:50%;transform:translate(-50%, -50%);border-width:13px 19px 13px 0;border-color:transparent #aaa transparent transparent}.d-pad.svelte-1hgnr1a span.left.svelte-1hgnr1a:active:before{border-right-color:#333}.d-pad.svelte-1hgnr1a span.left.svelte-1hgnr1a:hover:before{left:35%}.d-pad.svelte-1hgnr1a span.right.svelte-1hgnr1a{top:50%;right:0;transform:translate(0, -50%);border-radius:50% 17% 17% 50%}.d-pad.svelte-1hgnr1a span.right.svelte-1hgnr1a:hover{background:linear-gradient(90deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1hgnr1a span.right.svelte-1hgnr1a:after{right:0;top:0;transform:translate(0, -100%);border-top-right-radius:50%;pointer-events:none}.d-pad.svelte-1hgnr1a span.right.svelte-1hgnr1a:before{right:40%;top:50%;transform:translate(50%, -50%);border-width:13px 0 13px 19px;border-color:transparent transparent transparent #aaa}.d-pad.svelte-1hgnr1a span.right.svelte-1hgnr1a:active:before{border-left-color:#333}.d-pad.svelte-1hgnr1a span.right.svelte-1hgnr1a:hover:before{right:35%}.clear .d-pad.svelte-1hgnr1a span.svelte-1hgnr1a{border:1px solid #fff}.clear .d-pad.svelte-1hgnr1a span.svelte-1hgnr1a{background:none}.clear .d-pad.svelte-1hgnr1a span.svelte-1hgnr1a:after{display:none}.clear .d-pad.svelte-1hgnr1a span.up.svelte-1hgnr1a:hover{background:linear-gradient(0deg, #5f9837 0%, #6ea248 50%)}.clear .d-pad.svelte-1hgnr1a span.right.svelte-1hgnr1a:hover{background:linear-gradient(90deg, #5f9837 0%, #6ea248 50%)}.clear .d-pad.svelte-1hgnr1a span.down.svelte-1hgnr1a:hover{background:linear-gradient(180deg, #5f9837 0%, #6ea248 50%)}.clear .d-pad.svelte-1hgnr1a span.left.svelte-1hgnr1a:hover{background:linear-gradient(-90deg, #5f9837 0%, #6ea248 50%)}.clear .d-pad.svelte-1hgnr1a span.up.svelte-1hgnr1a:before{border-bottom-color:#fff}.clear .d-pad.svelte-1hgnr1a span.right.svelte-1hgnr1a:before{border-left-color:#fff}.clear .d-pad.svelte-1hgnr1a span.down.svelte-1hgnr1a:before{border-top-color:#fff}.clear .d-pad.svelte-1hgnr1a span.left.svelte-1hgnr1a:before{border-right-color:#fff}.clear .d-pad.svelte-1hgnr1a span.up.svelte-1hgnr1a:active:before{border-bottom-color:rgba(0, 0, 0, 0.6)}.clear .d-pad.svelte-1hgnr1a span.right.svelte-1hgnr1a:active:before{border-left-color:rgba(0, 0, 0, 0.6)}.clear .d-pad.svelte-1hgnr1a span.down.svelte-1hgnr1a:active:before{border-top-color:rgba(0, 0, 0, 0.6)}.clear .d-pad.svelte-1hgnr1a span.left.svelte-1hgnr1a:active:before{border-right-color:rgba(0, 0, 0, 0.6)}.outline.svelte-1hgnr1a .d-pad.svelte-1hgnr1a{border-radius:0}.outline.svelte-1hgnr1a .d-pad span.svelte-1hgnr1a{border:1px solid rgba(0, 0, 0, 0.1)}.outline.svelte-1hgnr1a .d-pad span.svelte-1hgnr1a:after{display:none}.outline.svelte-1hgnr1a .d-pad span.up.svelte-1hgnr1a:hover{background:linear-gradient(0deg, #fff 0%, #efefef 50%)}.outline.svelte-1hgnr1a .d-pad span.right.svelte-1hgnr1a:hover{background:linear-gradient(90deg, #fff 0%, #efefef 50%)}.outline.svelte-1hgnr1a .d-pad span.down.svelte-1hgnr1a:hover{background:linear-gradient(180deg, #fff 0%, #efefef 50%)}.outline.svelte-1hgnr1a .d-pad span.left.svelte-1hgnr1a:hover{background:linear-gradient(-90deg, #fff 0%, #efefef 50%)}.outline.svelte-1hgnr1a .d-pad span.up.svelte-1hgnr1a:before{border-bottom-color:rgba(0, 0, 0, 0.1)}.outline.svelte-1hgnr1a .d-pad span.right.svelte-1hgnr1a:before{border-left-color:rgba(0, 0, 0, 0.1)}.outline.svelte-1hgnr1a .d-pad span.down.svelte-1hgnr1a:before{border-top-color:rgba(0, 0, 0, 0.1)}.outline.svelte-1hgnr1a .d-pad span.left.svelte-1hgnr1a:before{border-right-color:rgba(0, 0, 0, 0.1)}.setbg.white .d-pad.svelte-1hgnr1a span.svelte-1hgnr1a{background:#fff}.setbg.white .d-pad.svelte-1hgnr1a span.svelte-1hgnr1a:after{border-radius:40%;background:#222}.setbg.white .d-pad.svelte-1hgnr1a span.up.svelte-1hgnr1a:hover{background:#fff}.setbg.white .d-pad.svelte-1hgnr1a span.right.svelte-1hgnr1a:hover{background:#fff}.setbg.white .d-pad.svelte-1hgnr1a span.down.svelte-1hgnr1a:hover{background:#fff}.setbg.white .d-pad.svelte-1hgnr1a span.left.svelte-1hgnr1a:hover{background:#fff}.setbg.white .d-pad.svelte-1hgnr1a span.up.svelte-1hgnr1a:before{border-bottom-color:#0074D9}.setbg.white .d-pad.svelte-1hgnr1a span.right.svelte-1hgnr1a:before{border-left-color:#FF851B}.setbg.white .d-pad.svelte-1hgnr1a span.down.svelte-1hgnr1a:before{border-top-color:#3D9970}.setbg.white .d-pad.svelte-1hgnr1a span.left.svelte-1hgnr1a:before{border-right-color:#FFDC00}.setbg.white .d-pad.svelte-1hgnr1a span.up.svelte-1hgnr1a:active:before{border-bottom-color:rgba(0, 0, 0, 0.6)}.setbg.white .d-pad.svelte-1hgnr1a span.right.svelte-1hgnr1a:active:before{border-left-color:rgba(0, 0, 0, 0.6)}.setbg.white .d-pad.svelte-1hgnr1a span.down.svelte-1hgnr1a:active:before{border-top-color:rgba(0, 0, 0, 0.6)}.setbg.white .d-pad.svelte-1hgnr1a span.left.svelte-1hgnr1a:active:before{border-right-color:rgba(0, 0, 0, 0.6)}')}function cs(s){let e,t,n,r,a,i,o,c,h,f,l;return{c(){e=w("div"),t=w("nav"),n=w("span"),r=P(),a=w("span"),i=P(),o=w("span"),c=P(),h=w("span"),m(n,"class","up svelte-1hgnr1a"),m(a,"class","right svelte-1hgnr1a"),m(o,"class","down svelte-1hgnr1a"),m(h,"class","left svelte-1hgnr1a"),m(t,"class","d-pad svelte-1hgnr1a"),m(e,"class","set outline svelte-1hgnr1a")},m(p,g){B(p,e,g),u(e,t),u(t,n),u(t,r),u(t,a),u(t,i),u(t,o),u(t,c),u(t,h),f||(l=[Z(n,"pointerdown",s[5]("ArrowUp")),Z(n,"pointerup",s[6]("ArrowUp")),Z(a,"pointerdown",s[5]("ArrowRight")),Z(a,"pointerup",s[6]("ArrowRight")),Z(o,"pointerdown",s[5]("ArrowDown")),Z(o,"pointerup",s[6]("ArrowDown")),Z(h,"pointerdown",s[5]("ArrowLeft")),Z(h,"pointerup",s[6]("ArrowLeft"))],f=!0)},p:U,i:U,o:U,d(p){p&&H(e),f=!1,ne(l)}}}function fs(s){let e,t,n,r,a;function i(f){s[9](f)}function o(f){s[10](f)}function c(f){s[11](f)}let h={};return s[0]!==void 0&&(h.opened=s[0]),s[4].battleState!==void 0&&(h.battleState=s[4].battleState),s[2]!==void 0&&(h.battleStart=s[2]),e=new ct({props:h}),N.push(()=>Y(e,"opened",i)),N.push(()=>Y(e,"battleState",o)),N.push(()=>Y(e,"battleStart",c)),{c(){be(e.$$.fragment)},m(f,l){ae(e,f,l),a=!0},p(f,l){const p={};!t&&l[0]&1&&(t=!0,p.opened=f[0],W(()=>t=!1)),!n&&l[0]&16&&(n=!0,p.battleState=f[4].battleState,W(()=>n=!1)),!r&&l[0]&4&&(r=!0,p.battleStart=f[2],W(()=>r=!1)),e.$set(p)},i(f){a||(q(e.$$.fragment,f),a=!0)},o(f){V(e.$$.fragment,f),a=!1},d(f){oe(e,f)}}}function hs(s){let e,t,n,r,a,i,o;const c=[fs,cs],h=[];function f(v,x){return v[4].initiated?0:1}e=f(s),t=h[e]=c[e](s);function l(v){s[12](v)}function p(v){s[13](v)}let g={};return s[1]!==void 0&&(g.menuOpened=s[1]),s[3]!==void 0&&(g.player=s[3]),r=new ft({props:g}),N.push(()=>Y(r,"menuOpened",l)),N.push(()=>Y(r,"player",p)),{c(){t.c(),n=P(),be(r.$$.fragment)},m(v,x){h[e].m(v,x),B(v,n,x),ae(r,v,x),o=!0},p(v,x){let $=e;e=f(v),e===$?h[e].p(v,x):(Be(),V(h[$],1,1,()=>{h[$]=null}),De(),t=h[e],t?t.p(v,x):(t=h[e]=c[e](v),t.c()),q(t,1),t.m(n.parentNode,n));const _={};!a&&x[0]&2&&(a=!0,_.menuOpened=v[1],W(()=>a=!1)),!i&&x[0]&8&&(i=!0,_.player=v[3],W(()=>i=!1)),r.$set(_)},i(v){o||(q(t),q(r.$$.fragment,v),o=!0)},o(v){V(t),V(r.$$.fragment,v),o=!1},d(v){v&&H(n),h[e].d(v),oe(r,v)}}}function ps(s,e,t){let{opened:n=!1}=e,{menuOpened:r=!1}=e,{battleStart:a=!1}=e,{currentMap:i=re}=e,{canvas:o}=e;const c=o.getContext("2d");o.width=window.innerWidth,o.height=window.innerHeight;let h=Math.min(4,Math.max(2,window.innerWidth/i.background.width)),f=16*h,{character:l}=e;l.positionOnMap=new D(re.playerInitialPosition.x,re.playerInitialPosition.y),l.positionOnScreen=new D(re.playerInitialPosition.x*f,re.playerInitialPosition.y*f);function p(){t(7,o.width=window.innerWidth,o),t(7,o.height=window.innerHeight,o),h=Math.min(4,Math.max(2,window.innerWidth/i.background.width)),console.log(h),f=16*h,t(3,l.positionOnScreen=new D(re.playerInitialPosition.x*f,re.playerInitialPosition.y*f),l)}window.addEventListener("resize",()=>{p()}),window.addEventListener("orientationchange",()=>{p()});let{battle:g={initiated:!1,frameElapsed:0}}=e,v=0,x=new D(0,0),$=new D(0,0),_={fps:12,then:Date.now(),fpsInterval:1e3/12,id:0},O={fps:12,then:Date.now(),fpsInterval:1e3/12,goDown:!0,id:0};const I=new D(0,0);function T(){_.id=window.requestAnimationFrame(T);let k=Date.now(),J=k-_.then;if(J>_.fpsInterval){_.then=k-J%_.fpsInterval,c.fillStyle="black",c.fillRect(0,0,o.width,o.height),i.drawBackground(c,I,h),l.draw(c,I,h,i.background.width,i.background.height);let X=!0;if(t(3,l.moving=!1,l),g.initiated)return;if(!r){if((E.down.pressed||E.up.pressed||E.left.pressed||E.right.pressed)&&i.hasBattleZoneAt(l.positionOnMap)&&Math.random()<.1){t(3,l.frames.val=0,l);let Me=i.randomMonster();window.cancelAnimationFrame(_.id),b(Me)}E.down.pressed&&ee.key==="ArrowDown"&&(i.hasBoundaryAt(new D(l.positionOnMap.x,l.positionOnMap.y+1))&&(X=!1),t(3,l.moving=!0,l),t(3,l.direction="down",l),X&&I.y++),E.up.pressed&&ee.key==="ArrowUp"&&(i.hasBoundaryAt(new D(l.positionOnMap.x,l.positionOnMap.y-1))&&(X=!1),t(3,l.moving=!0,l),t(3,l.direction="up",l),X&&I.y--),E.left.pressed&&ee.key==="ArrowLeft"&&(i.hasBoundaryAt(new D(l.positionOnMap.x-1,l.positionOnMap.y))&&(X=!1),t(3,l.moving=!0,l),t(3,l.direction="left",l),X&&I.x--),E.right.pressed&&ee.key==="ArrowRight"&&(i.hasBoundaryAt(new D(l.positionOnMap.x+1,l.positionOnMap.y))&&(X=!1),t(3,l.moving=!0,l),t(3,l.direction="right",l),X&&I.x++),l.updatePosition(i.playerInitialPosition,I)}}}function y(){var X,Me,Te,Fe,Ne,Re;O.id=window.requestAnimationFrame(y);let k=Date.now(),J=k-O.then;if(J>O.fpsInterval){if(!g.initiated)return;O.then=k-J%O.fpsInterval,t(4,g.frameElapsed++,g),c.fillStyle="black",c.fillRect(0,0,o.width,o.height),Lt.draw(c,o),(Me=(X=g.battleState)==null?void 0:X.opponentCurrentMonster)==null||Me.draw(c,"front"),(Fe=(Te=g.battleState)==null?void 0:Te.playerCurrentMonster)==null||Fe.draw(c,"back"),(Re=(Ne=g.battleState)==null?void 0:Ne.opponentCurrentMonster)!=null&&Re.position&&(O.goDown=g.frameElapsed<=10,O.goDown?v++:v--,t(4,g.battleState.opponentCurrentMonster.position.y=x.y-v,g),t(4,g.battleState.playerCurrentMonster.position.y=$.y+v,g),g.frameElapsed>20&&t(4,g.frameElapsed=0,g))}}function b(k){ke(),t(4,g.frameElapsed=0,g),t(4,g.initiated=!0,g),t(4,g.startDate=new Date,g),t(4,g.battleState=new Ot(l,k,o),g),x={...g.battleState.opponentCurrentMonster.position},$={...g.battleState.playerCurrentMonster.position},M(),t(4,g.battleState.onClose=()=>{C()},g),t(2,a=!0),setTimeout(()=>{t(2,a=!1),t(0,n=!0),y()},2e3)}function C(k){window.cancelAnimationFrame(O.id),t(4,g.battleState=void 0,g),t(4,g.initiated=!1,g),t(4,g.startDate=void 0,g),t(2,a=!1),t(0,n=!1),t(1,r=!1),T(),S()}function S(){window.addEventListener("keydown",qe()),window.addEventListener("keyup",Ze()),window.addEventListener("keydown",L)}function M(){window.removeEventListener("keydown",qe()),window.removeEventListener("keyup",Ze()),window.removeEventListener("keydown",L)}function L(k){k.key==="Escape"&&t(1,r=!r)}function G(k){return J=>{switch(J.preventDefault(),k){case"ArrowUp":E.up.pressed=!0;break;case"ArrowDown":E.down.pressed=!0;break;case"ArrowLeft":E.left.pressed=!0;break;case"ArrowRight":E.right.pressed=!0;break}ee.key=k}}function ye(k){return J=>{switch(k){case"ArrowDown":E.down.pressed=!1;break;case"ArrowUp":E.up.pressed=!1;break;case"ArrowRight":E.right.pressed=!1;break;case"ArrowLeft":E.left.pressed=!1;break}}}function ke(){E.down.pressed=!1,E.up.pressed=!1,E.right.pressed=!1,E.left.pressed=!1,t(3,l.moving=!1,l)}S(),T();function F(k){n=k,t(0,n)}function Q(k){s.$$.not_equal(g.battleState,k)&&(g.battleState=k,t(4,g))}function _e(k){a=k,t(2,a)}function xe(k){r=k,t(1,r)}function Se(k){l=k,t(3,l)}return s.$$set=k=>{"opened"in k&&t(0,n=k.opened),"menuOpened"in k&&t(1,r=k.menuOpened),"battleStart"in k&&t(2,a=k.battleStart),"currentMap"in k&&t(8,i=k.currentMap),"canvas"in k&&t(7,o=k.canvas),"character"in k&&t(3,l=k.character),"battle"in k&&t(4,g=k.battle)},[n,r,a,l,g,G,ye,o,i,F,Q,_e,xe,Se]}class ut extends he{constructor(e){super(),ce(this,e,ps,hs,le,{opened:0,menuOpened:1,battleStart:2,currentMap:8,canvas:7,character:3,battle:4},ds,[-1,-1])}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),z()}get menuOpened(){return this.$$.ctx[1]}set menuOpened(e){this.$$set({menuOpened:e}),z()}get battleStart(){return this.$$.ctx[2]}set battleStart(e){this.$$set({battleStart:e}),z()}get currentMap(){return this.$$.ctx[8]}set currentMap(e){this.$$set({currentMap:e}),z()}get canvas(){return this.$$.ctx[7]}set canvas(e){this.$$set({canvas:e}),z()}get character(){return this.$$.ctx[3]}set character(e){this.$$set({character:e}),z()}get battle(){return this.$$.ctx[4]}set battle(e){this.$$set({battle:e}),z()}}fe(ut,{opened:{type:"Boolean"},menuOpened:{type:"Boolean"},battleStart:{type:"Boolean"},currentMap:{},canvas:{},character:{},battle:{}},[],[],!0);function us(s){de(s,"svelte-10715fv",'#canvas-wrapper.svelte-10715fv.svelte-10715fv.svelte-10715fv{width:100dvw;height:100dvh;overflow:hidden;position:absolute;top:0;left:0;-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0)}#canvas-wrapper.svelte-10715fv canvas.svelte-10715fv.svelte-10715fv{position:absolute;top:0;left:0;width:100dvw;height:100dvh}@media screen and (max-width: 767px) and (orientation: portrait){#canvas-wrapper.svelte-10715fv.svelte-10715fv.svelte-10715fv{-webkit-transform:rotate(-89.99deg);-moz-transform:rotate(-89.99deg);-o-transform:rotate(-89.99deg);-ms-transform:rotate(-89.99deg);transform:rotate(-89.99deg);transform-origin:left top;width:100dvh;height:100dvw;overflow:hidden;position:absolute;top:100%;right:0}#canvas-wrapper.svelte-10715fv canvas.svelte-10715fv.svelte-10715fv{position:absolute;top:0;right:0;width:100dvh;height:100dvw}}.loading.svelte-10715fv.svelte-10715fv.svelte-10715fv{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100vh}.loading.ready.svelte-10715fv.svelte-10715fv.svelte-10715fv{opacity:0.2}.u-swing.svelte-10715fv.svelte-10715fv.svelte-10715fv{animation:svelte-10715fv-swing 3000ms infinite}@keyframes svelte-10715fv-swing{20%{-webkit-transform:rotate(15deg);transform:rotate(15deg)}40%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg)}60%{-webkit-transform:rotate(5deg);transform:rotate(5deg)}80%{-webkit-transform:rotate(-5deg);transform:rotate(-5deg)}to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}.o-pokeball.svelte-10715fv.svelte-10715fv.svelte-10715fv{width:120px;height:120px;border-radius:120px;border:solid 4.8px black;position:relative;background:linear-gradient(to bottom, #EEEEEE 0%, #FFFFFF 100%);margin:10px auto}.o-pokeball.svelte-10715fv.svelte-10715fv.svelte-10715fv:before,.o-pokeball.svelte-10715fv.svelte-10715fv.svelte-10715fv:after{content:"";display:block}.o-pokeball.svelte-10715fv.svelte-10715fv.svelte-10715fv,.o-pokeball.svelte-10715fv.svelte-10715fv.svelte-10715fv:before,.o-pokeball.svelte-10715fv.svelte-10715fv.svelte-10715fv:after{transition:all 600ms cubic-bezier(0.67, 0.4, 0.36, 0.75)}.o-pokeball.svelte-10715fv.svelte-10715fv.svelte-10715fv:before{width:120px;height:57.6px;border-bottom:solid 4.8px black;border-radius:60px 60px 0 0;background:linear-gradient(to bottom, #d10000 0%, #ff0000 50%)}.o-pokeball.svelte-10715fv.svelte-10715fv.svelte-10715fv:after{content:"";width:24px;height:24px;background:linear-gradient(to bottom, #fff 0%, #ccc 100%);position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);border-radius:50%;box-shadow:0 0 0 2.4px black, 0 0 0 4.8px #ddd, 0 0 0 8.5714285714px black, 0 0 12px 7.0588235294px rgba(0, 0, 0, 0.4)}.buttons.svelte-10715fv.svelte-10715fv.svelte-10715fv{display:flex;justify-content:center;align-items:center;flex-direction:column;gap:120px;position:absolute;left:calc(50dvw - 100px);top:calc(50dvh - 40px)}.buttons.svelte-10715fv .letsgo.svelte-10715fv.svelte-10715fv{position:relative}.buttons.svelte-10715fv .letsgo .pika.svelte-10715fv.svelte-10715fv{width:200px;height:200px;position:absolute;bottom:0;left:0;z-index:1}.buttons.svelte-10715fv .letsgo .start-btn.svelte-10715fv.svelte-10715fv{width:200px;height:80px;border-radius:16px;position:relative;z-index:2;font-family:pokemon, serif;font-size:36px;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;cursor:pointer}.buttons.svelte-10715fv .letsgo .start-btn.svelte-10715fv.svelte-10715fv:hover{color:#fff;box-shadow:inset #009688 0 0 0 5px;text-shadow:none;font-weight:bold;background:#009688}.buttons.svelte-10715fv .letsgo .start-btn.svelte-10715fv:hover+.pika.svelte-10715fv{animation:svelte-10715fv-bounce 1s infinite}@keyframes svelte-10715fv-bounce{0%,20%,53%,80%,to{-webkit-animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-transform:translate3d(0, -30px, 0);transform:translate3d(0, -30px, 0)}40%,43%,70%{-webkit-animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06);animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06)}70%{-webkit-transform:translate3d(0, -15px, 0);transform:translate3d(0, -15px, 0)}90%{-webkit-transform:translate3d(0, -4px, 0);transform:translate3d(0, -4px, 0)}}#preview.svelte-10715fv.svelte-10715fv.svelte-10715fv{display:flex;flex-wrap:wrap;justify-content:center}')}function gs(s){let e,t,n,r,a,i,o,c,h,f,l=s[1]&&et(s);return{c(){e=w("div"),t=w("div"),n=P(),r=w("span"),a=A("Gotta catch em all... "),i=A(s[5]),o=P(),c=w("div"),c.innerHTML="",h=P(),l&&l.c(),f=kt(),m(t,"class","o-pokeball c-loader u-swing svelte-10715fv"),m(c,"id","preview"),m(c,"class","svelte-10715fv"),m(e,"class","loading svelte-10715fv"),j(e,"ready",s[1])},m(p,g){B(p,e,g),u(e,t),u(e,n),u(e,r),u(r,a),u(r,i),u(e,o),u(e,c),s[11](c),B(p,h,g),l&&l.m(p,g),B(p,f,g)},p(p,g){g&32&&R(i,p[5]),g&2&&j(e,"ready",p[1]),p[1]?l?l.p(p,g):(l=et(p),l.c(),l.m(f.parentNode,f)):l&&(l.d(1),l=null)},i:U,o:U,d(p){p&&(H(e),H(h),H(f)),s[11](null),l&&l.d(p)}}}function bs(s){let e,t,n,r;function a(c){s[9](c)}function i(c){s[10](c)}let o={};return s[0]!==void 0&&(o.canvas=s[0]),s[3]!==void 0&&(o.character=s[3]),e=new ut({props:o}),N.push(()=>Y(e,"canvas",a)),N.push(()=>Y(e,"character",i)),{c(){be(e.$$.fragment)},m(c,h){ae(e,c,h),r=!0},p(c,h){const f={};!t&&h&1&&(t=!0,f.canvas=c[0],W(()=>t=!1)),!n&&h&8&&(n=!0,f.character=c[3],W(()=>n=!1)),e.$set(f)},i(c){r||(q(e.$$.fragment,c),r=!0)},o(c){V(e.$$.fragment,c),r=!1},d(c){oe(e,c)}}}function et(s){let e,t,n,r,a,i,o,c,h,f=s[7]&&vs(s);return{c(){e=w("div"),f&&f.c(),t=P(),n=w("div"),r=w("button"),r.textContent="New game!",a=P(),i=w("img"),m(r,"class","start-btn svelte-10715fv"),m(i,"class","pika svelte-10715fv"),m(i,"alt","pikachu"),nt(i.src,o="src/assets/monsters/heartgold-soulsilver/25.png")||m(i,"src",o),m(n,"class","letsgo svelte-10715fv"),m(e,"class","buttons svelte-10715fv")},m(l,p){B(l,e,p),f&&f.m(e,null),u(e,t),u(e,n),u(n,r),u(n,a),u(n,i),c||(h=Z(r,"click",s[13]),c=!0)},p(l,p){l[7]&&f.p(l,p)},d(l){l&&H(e),f&&f.d(),c=!1,h()}}}function vs(s){let e,t,n,r,a,i,o;return{c(){e=w("div"),t=w("button"),t.textContent="Continue!",n=P(),r=w("img"),m(t,"class","start-btn svelte-10715fv"),m(r,"class","pika svelte-10715fv"),m(r,"alt","Evoli"),nt(r.src,a="src/assets/monsters/heartgold-soulsilver/133.png")||m(r,"src",a),m(e,"class","letsgo svelte-10715fv")},m(c,h){B(c,e,h),u(e,t),u(e,n),u(e,r),i||(o=Z(t,"click",s[12]),i=!0)},p:U,d(c){c&&H(e),i=!1,o()}}}function ms(s){let e,t,n,r,a,i;const o=[bs,gs],c=[];function h(f,l){return f[1]&&f[4]?0:1}return t=h(s),n=c[t]=o[t](s),{c(){e=w("div"),n.c(),r=P(),a=w("canvas"),m(a,"class","svelte-10715fv"),m(e,"id","canvas-wrapper"),m(e,"class","svelte-10715fv")},m(f,l){B(f,e,l),c[t].m(e,null),u(e,r),u(e,a),s[14](a),s[15](e),i=!0},p(f,[l]){let p=t;t=h(f),t===p?c[t].p(f,l):(Be(),V(c[p],1,1,()=>{c[p]=null}),De(),n=c[t],n?n.p(f,l):(n=c[t]=o[t](f),n.c()),q(n,1),n.m(e,r))},i(f){i||(q(n),i=!0)},o(f){V(n),i=!1},d(f){f&&H(e),c[t].d(),s[14](null),s[15](null)}}}function ws(s,e,t){let{canvas:n}=e,r,a,{ready:i=!1}=e,o=[],c=!1,h,f,l;o.length>0&&a?(o.forEach(y=>{setTimeout(()=>{const b=new Image;b.src=`src/assets/monsters/heartgold-soulsilver/${y.id}.png`,l.appendChild(b)},100)}),i=!0):fetch("src/assets/data/pokedex-gen1.json").then(y=>y.json()).then(y=>{y.forEach(b=>{t(5,f=b.name.english);let C=`src/assets/monsters/heartgold-soulsilver/${b.id}.png`,S=`src/assets/monsters/heartgold-soulsilver/frame2/${b.id}.png`,M=`src/assets/monsters/heartgold-soulsilver/back/${b.id}.png`,L=`src/assets/monsters/heartgold-soulsilver/shiny/${b.id}.png`;setTimeout(()=>{const G=new ve(b.id,b.name.english,b.type,b.profile.ability,new te(b.base.HP,b.base.Attack,b.base.Defense,b.base["Sp. Attack"],b.base["Sp. Defense"],b.base.Speed),b.evolution,new Et(C,S,M,L),void 0,[new me("Tackle","Normal","Physical",40,100,35,0,"",0,"Basic hit")],new te(10,10,10,10,10,10),new te(0,0,0,10,0,0));G.height=Number.parseFloat(b.profile.height.replace(" m",""))*100,G.spriteScale=Math.max(1.2,Math.min(G.height/100,2)),o.push(G),o.length===y.length&&(t(5,f="Ready!"),localStorage.setItem("pokedex",JSON.stringify(o)),p())},100)})});function p(){let y=new Image;y.src="src/assets/sprites/hero_male_front.png";let b=new Image;b.src="src/assets/sprites/hero_male_back.png";let C=new Image;C.src="src/assets/sprites/hero_male_left.png";let S=new Image;S.src="src/assets/sprites/hero_male_right.png";let M=new Image;M.src="src/assets/sprites/hero_male_back.png",Promise.all(Array.from([y,b,C,S,M].filter(L=>!L.complete)).map(L=>new Promise(G=>{L.onload=L.onerror=G}))).then(()=>{let L={...o.at(70),ivs:new te(31,31,31,31,31,31),evs:new te(120,0,0,255,0,135),moves:[new me("Tackle","Normal","Physical",40,100,35,0,"",0,"Basic hit"),new me("Growl","Normal","Status",0,100,40,0,"",0,"Lowers the target's Attack by one stage."),new me("Tail Whip","Normal","Status",0,100,30,0,"",0,"Lowers the target's Defense by one stage."),new me("Vine whip","Grass","Physical",40,100,30,0,"",0,"Strong hit with vines.")]};Object.setPrototypeOf(L,ve.prototype),L.updateCurrentStats(),L.currentHp=L.currentStats.HP,t(3,a=new it("Kaiser","MALE",new Pt(y,b,C,S,M),[L])),t(1,i=!0)})}function g(){t(4,c=!0)}function v(y){n=y,t(0,n)}function x(y){a=y,t(3,a)}function $(y){N[y?"unshift":"push"](()=>{l=y,t(6,l)})}const _=()=>g(),O=()=>g();function I(y){N[y?"unshift":"push"](()=>{n=y,t(0,n)})}function T(y){N[y?"unshift":"push"](()=>{r=y,t(2,r)})}return s.$$set=y=>{"canvas"in y&&t(0,n=y.canvas),"ready"in y&&t(1,i=y.ready)},[n,i,r,a,c,f,l,h,g,v,x,$,_,O,I,T]}class ys extends he{constructor(e){super(),ce(this,e,ws,ms,le,{canvas:0,ready:1},us)}get canvas(){return this.$$.ctx[0]}set canvas(e){this.$$set({canvas:e}),z()}get ready(){return this.$$.ctx[1]}set ready(e){this.$$set({ready:e}),z()}}customElements.define("open-mon",fe(ys,{canvas:{},ready:{type:"Boolean"}},[],[],!0));
