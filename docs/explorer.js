var yt=Object.defineProperty;var kt=(s,e,t)=>e in s?yt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var a=(s,e,t)=>(kt(s,typeof e!="symbol"?e+"":e,t),t);function F(){}function lt(s){return s()}function We(){return Object.create(null)}function ie(s){s.forEach(lt)}function ot(s){return typeof s=="function"}function de(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let Me;function at(s,e){return s===e?!0:(Me||(Me=document.createElement("a")),Me.href=e,s===Me.href)}function _t(s){return Object.keys(s).length===0}function g(s,e){s.appendChild(e)}function he(s,e,t){const i=xt(s);if(!i.getElementById(e)){const n=w("style");n.id=e,n.textContent=t,St(i,n)}}function xt(s){if(!s)return document;const e=s.getRootNode?s.getRootNode():s.ownerDocument;return e&&e.host?e:s.ownerDocument}function St(s,e){return g(s.head||s,e),e.sheet}function C(s,e,t){s.insertBefore(e,t||null)}function q(s){s.parentNode&&s.parentNode.removeChild(s)}function Mt(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function w(s){return document.createElement(s)}function z(s){return document.createTextNode(s)}function A(){return z(" ")}function qt(){return z("")}function N(s,e,t,i){return s.addEventListener(e,t,i),()=>s.removeEventListener(e,t,i)}function m(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function Ct(s){return Array.from(s.childNodes)}function X(s,e){e=""+e,s.data!==e&&(s.data=e)}function se(s,e,t,i){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,i?"important":"")}function M(s,e,t){s.classList.toggle(e,!!t)}function At(s){const e={};return s.childNodes.forEach(t=>{e[t.slot||"default"]=!0}),e}let Re;function ye(s){Re=s}const ve=[],D=[];let me=[];const ze=[],$t=Promise.resolve();let Le=!1;function Et(){Le||(Le=!0,$t.then(L))}function Be(s){me.push(s)}function U(s){ze.push(s)}const Pe=new Set;let ge=0;function L(){if(ge!==0)return;const s=Re;do{try{for(;ge<ve.length;){const e=ve[ge];ge++,ye(e),It(e.$$)}}catch(e){throw ve.length=0,ge=0,e}for(ye(null),ve.length=0,ge=0;D.length;)D.pop()();for(let e=0;e<me.length;e+=1){const t=me[e];Pe.has(t)||(Pe.add(t),t())}me.length=0}while(ve.length);for(;ze.length;)ze.pop()();Le=!1,Pe.clear(),ye(s)}function It(s){if(s.fragment!==null){s.update(),ie(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(Be)}}function Pt(s){const e=[],t=[];me.forEach(i=>s.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),me=e}const Ae=new Set;let oe;function Fe(){oe={r:0,c:[],p:oe}}function Te(){oe.r||ie(oe.c),oe=oe.p}function Z(s,e){s&&s.i&&(Ae.delete(s),s.i(e))}function K(s,e,t,i){if(s&&s.o){if(Ae.has(s))return;Ae.add(s),oe.c.push(()=>{Ae.delete(s),i&&(t&&s.d(1),i())}),s.o(e)}else i&&i()}function Ze(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function W(s,e,t){const i=s.$$.props[e];i!==void 0&&(s.$$.bound[i]=t,t(s.$$.ctx[i]))}function we(s){s&&s.c()}function ae(s,e,t){const{fragment:i,after_update:n}=s.$$;i&&i.m(e,t),Be(()=>{const r=s.$$.on_mount.map(lt).filter(ot);s.$$.on_destroy?s.$$.on_destroy.push(...r):ie(r),s.$$.on_mount=[]}),n.forEach(Be)}function ce(s,e){const t=s.$$;t.fragment!==null&&(Pt(t.after_update),ie(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Ot(s,e){s.$$.dirty[0]===-1&&(ve.push(s),Et(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function pe(s,e,t,i,n,r,l=null,o=[-1]){const h=Re;ye(s);const p=s.$$={fragment:null,ctx:[],props:r,update:F,not_equal:n,bound:We(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(h?h.$$.context:[])),callbacks:We(),dirty:o,skip_bound:!1,root:e.target||h.$$.root};l&&l(p.root);let d=!1;if(p.ctx=t?t(s,e.props||{},(c,u,...f)=>{const b=f.length?f[0]:u;return p.ctx&&n(p.ctx[c],p.ctx[c]=b)&&(!p.skip_bound&&p.bound[c]&&p.bound[c](b),d&&Ot(s,c)),u}):[],p.update(),d=!0,ie(p.before_update),p.fragment=i?i(p.ctx):!1,e.target){if(e.hydrate){const c=Ct(e.target);p.fragment&&p.fragment.l(c),c.forEach(q)}else p.fragment&&p.fragment.c();e.intro&&Z(s.$$.fragment),ae(s,e.target,e.anchor),L()}ye(h)}let ct;typeof HTMLElement=="function"&&(ct=class extends HTMLElement{constructor(e,t,i){super();a(this,"$$ctor");a(this,"$$s");a(this,"$$c");a(this,"$$cn",!1);a(this,"$$d",{});a(this,"$$r",!1);a(this,"$$p_d",{});a(this,"$$l",{});a(this,"$$l_u",new Map);this.$$ctor=e,this.$$s=t,i&&this.attachShadow({mode:"open"})}addEventListener(e,t,i){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){const n=this.$$c.$on(e,t);this.$$l_u.set(t,n)}super.addEventListener(e,t,i)}removeEventListener(e,t,i){if(super.removeEventListener(e,t,i),this.$$c){const n=this.$$l_u.get(t);n&&(n(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(l){return()=>{let o;return{c:function(){o=w("slot"),l!=="default"&&m(o,"name",l)},m:function(d,c){C(d,o,c)},d:function(d){d&&q(o)}}}};var e=t;if(await Promise.resolve(),!this.$$cn)return;const i={},n=At(this);for(const l of this.$$s)l in n&&(i[l]=[t(l)]);for(const l of this.attributes){const o=this.$$g_p(l.name);o in this.$$d||(this.$$d[o]=$e(o,l.value,this.$$p_d,"toProp"))}for(const l in this.$$p_d)!(l in this.$$d)&&this[l]!==void 0&&(this.$$d[l]=this[l],delete this[l]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:i,$$scope:{ctx:[]}}});const r=()=>{this.$$r=!0;for(const l in this.$$p_d)if(this.$$d[l]=this.$$c.$$.ctx[this.$$c.$$.props[l]],this.$$p_d[l].reflect){const o=$e(l,this.$$d[l],this.$$p_d,"toAttribute");o==null?this.removeAttribute(this.$$p_d[l].attribute||l):this.setAttribute(this.$$p_d[l].attribute||l,o)}this.$$r=!1};this.$$c.$$.after_update.push(r),r();for(const l in this.$$l)for(const o of this.$$l[l]){const h=this.$$c.$on(l,o);this.$$l_u.set(o,h)}this.$$l={}}}attributeChangedCallback(e,t,i){var n;this.$$r||(e=this.$$g_p(e),this.$$d[e]=$e(e,i,this.$$p_d,"toProp"),(n=this.$$c)==null||n.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e)||e}});function $e(s,e,t,i){var r;const n=(r=t[s])==null?void 0:r.type;if(e=n==="Boolean"&&typeof e!="boolean"?e!=null:e,!i||!t[s])return e;if(i==="toAttribute")switch(n){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(n){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function ue(s,e,t,i,n,r){let l=class extends ct{constructor(){super(s,t,n),this.$$p_d=e}static get observedAttributes(){return Object.keys(e).map(o=>(e[o].attribute||o).toLowerCase())}};return Object.keys(e).forEach(o=>{Object.defineProperty(l.prototype,o,{get(){return this.$$c&&o in this.$$c?this.$$c[o]:this.$$d[o]},set(h){var p;h=$e(o,h,e),this.$$d[o]=h,(p=this.$$c)==null||p.$set({[o]:h})}})}),i.forEach(o=>{Object.defineProperty(l.prototype,o,{get(){var h;return(h=this.$$c)==null?void 0:h[o]}})}),r&&(l=r(l)),s.element=l,l}class fe{constructor(){a(this,"$$");a(this,"$$set")}$destroy(){ce(this,1),this.$destroy=F}$on(e,t){if(!ot(t))return F;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const n=i.indexOf(t);n!==-1&&i.splice(n,1)}}$set(e){this.$$set&&!_t(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const zt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(zt);class O{constructor(e=0,t=0){a(this,"x");a(this,"y");this.x=e,this.y=t}}class dt{constructor(e,t,i,n=[]){a(this,"name");a(this,"gender");a(this,"sprites");a(this,"monsters");a(this,"bag",[]);a(this,"lvl",1);a(this,"moving",!1);a(this,"direction","down");a(this,"positionOnScreen");a(this,"positionOnMap");a(this,"frames");a(this,"spriteScale",1);this.name=e,this.gender=t,this.sprites=i,this.monsters=n,this.frames={max:3,val:0,elapsed:0},this.positionOnMap=new O(0,0),this.positionOnScreen=new O(0,0)}get sprite(){return this.sprites[this.direction]}draw(e,t,i,n,r){let l=this.sprite||this.sprites.down,o=n*i,h=r*i,p=e.canvas.width/2-o/2,d=e.canvas.height/2-h/2;this.moving?(this.frames.max>1&&(this.frames.elapsed+=1),this.frames.elapsed%2===0&&(this.frames.val+=1,this.frames.val>this.frames.max-1&&(this.frames.val=0))):this.frames.val=1,e.drawImage(l,this.frames.val*(l.width/this.frames.max),0,l.width/this.frames.max,l.height,p+this.positionOnScreen.x,d+this.positionOnScreen.y-10,l.width/this.frames.max*i,l.height*i)}updatePosition(e,t){this.positionOnMap.x=e.x+t.x,this.positionOnMap.y=e.y+t.y}}class Lt{constructor(e,t,i,n,r){a(this,"down");a(this,"up");a(this,"left");a(this,"right");a(this,"battle");a(this,"width",80);a(this,"height",80);this.down=e,this.up=t,this.left=i,this.right=n,this.battle=r}}const P={up:{pressed:!1},down:{pressed:!1},left:{pressed:!1},right:{pressed:!1}};let te={key:""};function Ge(s){return e=>{switch(e.key){case"ArrowDown":P.down.pressed=!1;break;case"ArrowUp":P.up.pressed=!1;break;case"ArrowRight":P.right.pressed=!1;break;case"ArrowLeft":P.left.pressed=!1;break}s.moving=!1}}function Ye(){return s=>{switch(s.key){case"ArrowDown":te.key="ArrowDown",P.down.pressed=!0;break;case"ArrowUp":te.key="ArrowUp",P.up.pressed=!0;break;case"ArrowRight":te.key="ArrowRight",P.right.pressed=!0;break;case"ArrowLeft":te.key="ArrowLeft",P.left.pressed=!0;break}}}class Bt{constructor(){a(this,"entries",[]);a(this,"ready",!1);a(this,"size",251)}importFromJson(e){var t;((t=this.entries)==null?void 0:t.length)===0&&(e.forEach(i=>{this.entries.push(new He(i.id,i.name,i.types,i.abilities,i.moves,i.stats,i.height,i.weight,i.description,i.isLegendary,i.captureRate,i.baseXp,i.experienceGrowth,i.percentageMale,i.evolution,i.sprites))}),this.entries.length===this.size&&(this.ready=!0))}findById(e){if(!this.ready||e===void 0||e===null||e<1||e>this.size)return new be(new qe);let t=this.entries.find(i=>i.id===e);return t!=null&&t.id?new be(t):new be(new qe)}findByName(e){if(!this.ready||e===void 0||e===null||e==="")return new be(new qe);let t=this.entries.find(i=>i.name.toLowerCase()===e.toLowerCase());return t!=null&&t.id?new be(t):new be(new qe)}}class be{constructor(e){a(this,"result");a(this,"found",!1);this.result=e,this.found=e!==void 0}}class He{constructor(e,t,i,n,r,l,o,h,p,d,c,u,f,b,k,x){a(this,"id");a(this,"name");a(this,"types");a(this,"abilities");a(this,"moves");a(this,"stats");a(this,"height");a(this,"weight");a(this,"description");a(this,"isLegendary");a(this,"captureRate");a(this,"growthRateId");a(this,"baseXp");a(this,"experienceGrowth");a(this,"percentageMale");a(this,"evolution");a(this,"sprites");switch(this.id=e,this.name=t,this.types=i,this.abilities=n,this.moves=r,this.stats=l,this.height=o,this.weight=h,this.description=p,this.isLegendary=d,this.captureRate=c,this.experienceGrowth=u,this.baseXp=f,this.percentageMale=b,this.evolution=k,this.sprites=x,u){case 6e5:this.growthRateId=5;break;case 8e5:this.growthRateId=3;break;case 1e6:this.growthRateId=2;break;case 1059860:this.growthRateId=4;break;case 125e4:this.growthRateId=1;break;case 164e4:this.growthRateId=6;break;default:this.growthRateId=1;break}}instanciate(e){return new Ie(this,e)}}class qe extends He{constructor(){super(0,"Unknown",[],[],[],new le,0,0,"Unknown",!1,0,0,0,0,[])}}class Dt{constructor(e,t,i,n,r,l,o,h,p,d,c){a(this,"name");a(this,"type");a(this,"category");a(this,"power");a(this,"accuracy");a(this,"pp");a(this,"priority");a(this,"effect");a(this,"effectChance");a(this,"description");a(this,"level");this.name=e,this.type=t,this.category=i,this.power=n,this.accuracy=r,this.pp=l,this.priority=o,this.effect=h,this.effectChance=p,this.description=d,this.level=c}}class le{constructor(e=0,t=0,i=0,n=0,r=0,l=0,o){a(this,"hp");a(this,"attack");a(this,"defense");a(this,"specialAttack");a(this,"specialDefense");a(this,"speed");a(this,"total");this.hp=e,this.attack=t,this.defense=i,this.specialAttack=n,this.specialDefense=r,this.speed=l,o?this.total=o:this.total=this.hp+this.attack+this.defense+this.specialAttack+this.specialDefense+this.speed}}class Rt{constructor(){a(this,"ready",!1);a(this,"chartById",new Map);fetch("/src/assets/data/final/xp-chart.json").then(e=>e.json()).then(e=>{e.forEach(t=>{this.chartById.has(t.growth_rate_id)||this.chartById.set(t.growth_rate_id,[]),this.chartById.get(t.growth_rate_id).push(new Ft(t.level,t.experience))}),this.ready=!0})}howMuchINeed(e,t){if(!this.ready||e<1||e>100||!this.chartById.has(t))return console.error("ERROR",e,t),0;let i=this.chartById.get(t),n=i==null?void 0:i.find(r=>r.level===e);return(n==null?void 0:n.experience)||0}howMuchIGet(e,t,i,n=!1,r=!1){let l=t.baseXp,o=t.level,h=n?1.5:1,p=r?2*i:i;return Math.floor(l*o/7*h*(1/p)*1*1*1*1*1)}}class Ft{constructor(e,t){a(this,"level");a(this,"experience");this.level=e,this.experience=t}}const Ke=new Rt;class Tt extends Dt{constructor(t,i,n,r,l,o,h,p,d,c,u){super(t,i,n,r,l,o,h,p,d,c,u);a(this,"currentPp");this.currentPp=o}}class Ie extends He{constructor(t,i,n){super(t.id,t.name,t.types,t.abilities,t.moves,t.stats,t.height,t.weight,t.description,t.isLegendary,t.captureRate,t.experienceGrowth,t.baseXp,t.percentageMale,t.evolution,t.sprites);a(this,"currentStats",new le);a(this,"currentHp",1);a(this,"currentXp",0);a(this,"xpToNextLevel",0);a(this,"currentAbility","");a(this,"level",1);a(this,"evsToDistribute",0);a(this,"fainted",!1);a(this,"moves",[]);a(this,"ivs",new le);a(this,"evs",new le);a(this,"nature","");a(this,"gender");a(this,"heldItem",{});a(this,"isShiny",!1);a(this,"spriteDrawer");a(this,"position",new O(0,0));n?(this.currentAbility=t.abilities.includes(n.currentAbility)?n.currentAbility:t.abilities[Math.floor(Math.random()*t.abilities.length)],this.evs=n.evs,this.ivs=n.ivs,this.level=n.level,this.currentXp=n.currentXp,this.currentHp=n.currentHp,this.moves=n.moves,this.isShiny=n.isShiny,this.gender=n.gender,this.evsToDistribute=n.evsToDistribute,this.heldItem=n.heldItem,this.updateCurrentStats()):(this.currentAbility=this.abilities[Math.floor(Math.random()*this.abilities.length)],this.evs=new le,this.ivs=new le(Math.floor(Math.random()*32),Math.floor(Math.random()*32),Math.floor(Math.random()*32),Math.floor(Math.random()*32),Math.floor(Math.random()*32),Math.floor(Math.random()*32)),this.level=i||5,this.currentXp=0,this.updateCurrentStats(),this.currentHp=this.currentStats.hp,this.moves=this.selectLatestMoves(t),this.isShiny=Math.floor(Math.random()*2048)===0,this.gender=this.percentageMale?Math.random()*this.percentageMale<=this.percentageMale?"male":"female":"unknown"),this.spriteDrawer=new Ht}get spriteScale(){return 1}get totalEvs(){return this.evs.attack+this.evs.defense+this.evs.specialAttack+this.evs.specialDefense+this.evs.speed+this.evs.hp}draw(t,i,n=0,r=0,l=0){this.spriteDrawer.draw(t,this,i,n,r,l)}selectMove(t,i){let n=Math.floor(Math.random()*this.moves.length),r=this.moves[n];return t==="Easy"&&i&&((i==null?void 0:i.types.length)===2?this.moves.find(o=>o.type===i.types[0]&&o.power>0):this.moves.find(o=>(o.type===i.types[0]||o.type===i.types[1])&&o.power>0)),r}fromBaseStats(){return new le(Math.floor((this.ivs.hp+this.stats.hp*2+this.evs.hp/4)*this.level/100+10+this.level),Math.floor((this.ivs.attack+this.stats.attack*2+this.evs.attack/4)*this.level/100+5),Math.floor((this.ivs.defense+this.stats.defense*2+this.evs.defense/4)*this.level/100+5),Math.floor((this.ivs.specialAttack+this.stats.specialAttack*2+this.evs.specialAttack/4)*this.level/100+5),Math.floor((this.ivs.specialDefense+this.stats.specialDefense*2+this.evs.specialDefense/4)*this.level/100+5),Math.floor((this.ivs.speed+this.stats.speed*2+this.evs.speed/4)*this.level/100+5))}howMuchXpWon(t,i=1,n=!1){return Ke.howMuchIGet(this,t,i,n,!1)}addXp(t,i){if(this.evsToDistribute+=this.totalEvs+i<=255?i:this.totalEvs+i-255,this.level>=100)return;let n=0;if(this.xpToNextLevel<t){n=t-this.xpToNextLevel;const r=t-n;this.currentXp+=r}else this.currentXp+=t;this.currentXp>=this.xpToNextLevel&&this.levelUp(),n>0&&this.addXp(n,0)}addEvs(t){let i=this.totalEvs;this.evs.hp+=this.evs.hp+t.hp<=255&&i+t.hp<512?t.hp:0,this.evs.attack+=this.evs.attack+t.attack<=255&&i+t.attack<512?t.attack:0,this.evs.defense+=this.evs.defense+t.defense<=255&&i+t.defense<512?t.defense:0,this.evs.specialAttack+=this.evs.specialAttack+t.specialAttack<=255&&i+t.specialAttack<512?t.specialAttack:0,this.evs.specialDefense+=this.evs.specialDefense+t.specialDefense<=255&&i+t.specialDefense<512?t.specialDefense:0,this.evs.speed+=this.evs.speed+t.speed<=255&&i+t.speed<512?t.speed:0}levelUp(){if(this.level>=100)return;let t=this.currentStats.hp;this.level+=1,this.updateCurrentStats(),t=this.currentStats.hp-t,this.currentHp+=t,this.currentXp=0,this.xpToNextLevel=Ke.howMuchINeed(this.level,this.experienceGrowth)}checkForNewMoves(){this.moves.filter(t=>t.level===this.level)}evolve(t,i){i.found&&i.result&&(Object.assign(this,new Ie(i.result,this.level,this)),this.checkForNewMoves())}updateCurrentStats(){this.currentStats=this.fromBaseStats()}selectLatestMoves(t){return t.moves.filter(i=>i.level<=this.level).slice(-4).map(i=>new Tt(i.name,i.type,i.category,i.power,i.accuracy,i.pp,i.priority,i.effect,i.effectChance,i.description,i.level))}}class Ht{constructor(){a(this,"currentImage");a(this,"frameElapsed",0);a(this,"spriteSize",80);a(this,"spriteScale",1.5)}draw(e,t,i,n=0,r=0,l=0){var o;if(t.sprites){let h=t.gender!=="unknown"?t.sprites[t.gender][i]:t.sprites.male[i],p="frame";t.isShiny&&(p="shiny"),this.frameElapsed+n<100?p+="1":p+="2",console.log(t.sprites,t.gender,p,h[p]),this.frameElapsed+n>=200&&(this.frameElapsed=0);let d=h[p];if(!this.currentImage||this.currentImage.src!==d){let c=new Image;c.src=d,c.onload=()=>{this.currentImage=c}}if((o=this.currentImage)!=null&&o.complete){let c=this.getPosition(e,i,r,l);e.drawImage(this.currentImage,0,0,this.spriteSize,this.spriteSize,c.x,c.y,this.spriteSize*this.spriteScale*2.5,this.spriteSize*this.spriteScale*2.5),this.frameElapsed++}}}getPosition(e,t,i=0,n=0){let r=new O;return e.canvas.width<1100?t==="front"?r=new O(e.canvas.width/4*3-this.spriteSize*2*(this==null?void 0:this.spriteScale)/2+i,e.canvas.height/3.5*2-this.spriteSize*2*(this==null?void 0:this.spriteScale)-16*2+n):r=new O(e.canvas.width/4-this.spriteSize*2*this.spriteScale/2+i,e.canvas.height*.75-this.spriteSize*2*this.spriteScale+16*2+n):t==="front"?r=new O(e.canvas.width/4*3-this.spriteSize*2.5*(this==null?void 0:this.spriteScale)/2+i,e.canvas.height/2-this.spriteSize*2.5*(this==null?void 0:this.spriteScale)-12*2.5+n):r=new O(e.canvas.width/4-this.spriteSize*2.5*this.spriteScale/2+i,e.canvas.height*.75-this.spriteSize*2.5*this.spriteScale+15*2.5+n),r}}class jt{constructor(e,t,i){a(this,"player");a(this,"playerCurrentMonster");a(this,"opponent");a(this,"opponentCurrentMonster");a(this,"isPlayerTurn");a(this,"turnStack");a(this,"initialOpponentPosition");a(this,"initialAllyPosition");a(this,"escapeAttempts",0);a(this,"onClose",()=>{});a(this,"currentMessage","What will you do ?");a(this,"sleep",e=>new Promise(t=>setTimeout(t,e)));this.player=e,this.opponent=t,this.playerCurrentMonster=e.monsters[0],this.opponentCurrentMonster=this.wild?t:t.monsters[0],this.turnStack=[],window.innerWidth<1100?(this.initialOpponentPosition=new O(i.width/4*3-80*2*(t==null?void 0:t.spriteScale)/2,i.height/3.5*2-80*2*(t==null?void 0:t.spriteScale)-16*2),this.initialAllyPosition=new O(i.width/4-80*2*this.playerCurrentMonster.spriteScale/2,i.height*.75-80*2*this.playerCurrentMonster.spriteScale+16*2)):(this.initialOpponentPosition=new O(i.width/4*3-80*2.5*(t==null?void 0:t.spriteScale)/2,i.height/2-80*2.5*(t==null?void 0:t.spriteScale)-12*2.5),this.initialAllyPosition=new O(i.width/4-80*2.5*this.playerCurrentMonster.spriteScale/2,i.height*.75-80*2.5*this.playerCurrentMonster.spriteScale+15*2.5)),this.playerCurrentMonster.position=this.initialAllyPosition,this.opponentCurrentMonster.position=this.initialOpponentPosition,this.isPlayerTurn=!0}get wild(){return this.opponent instanceof Ie}selectAction(e){this.isPlayerTurn=!1,e instanceof Ee&&this.playerCurrentMonster.currentStats.speed>this.opponentCurrentMonster.currentStats.speed||e instanceof De||e instanceof Je||e instanceof Qe?(this.turnStack.push(e),this.selectOpponentAction()):(this.selectOpponentAction(),this.turnStack.push(e)),this.executeAction(this.turnStack.shift())}runAway(){if(this.wild){this.escapeAttempts++;const e=Math.random()*255;Math.floor(this.opponentCurrentMonster.currentStats.speed*128/this.playerCurrentMonster.currentStats.speed)+30*this.escapeAttempts*e>255?(this.turnStack=[],this.turnStack.push(new Oe(this.playerCurrentMonster)),this.turnStack.unshift(new J("You ran away safely!",this.playerCurrentMonster))):this.turnStack.unshift(new J("Failed to run away!",this.playerCurrentMonster))}else this.turnStack.unshift(new J("You can't run away from a trainer battle!",this.playerCurrentMonster))}attack(e){const t=e.initiator,i=e.target==="opponent"?this.opponentCurrentMonster:this.playerCurrentMonster,n=this.calculateDamage(t,i,e.move),r=[];r.push(new J(t.name+" used "+e.move.name+"!",e.initiator)),n.immune?r.push(new J("It doesn't affect "+i.name+"...",e.initiator)):n.notVeryEffective?r.push(new J("It's not very effective...",e.initiator)):n.superEffective&&r.push(new J("It's super effective!",e.initiator)),n.critical&&r.push(new J("A critical hit!",e.initiator)),r.push(new Ve(n.damages,e.target,e.initiator)),r.reverse().forEach(l=>this.turnStack.unshift(l))}calculateDamage(e,t,i){let n=new Nt;if(i.category!=="status"){const r=i.category==="physical"?e.currentStats.attack:e.currentStats.specialAttack,l=i.category==="physical"?t.currentStats.defense:t.currentStats.specialDefense,o=this.calculateTypeEffectiveness(i.type,t.types);n.superEffective=o>1,n.notVeryEffective=o<1,n.immune=o===0;const h=n.immune?0:this.calculateCritical();n.critical=h>1;const p=Math.random()*(1-.85)+.85,d=this.calculateStab(e,i),u=o*h*p*d*1;n.damages=Math.floor(((2*e.level/5+2)*i.power*r/l/50+2)*u)}else n.damages=0;return n}calculateTypeEffectiveness(e,t){return t.reduce((i,n)=>{const r=Wt(e,n);return i*r},1)}calculateCritical(){return Math.random()<.0625?1.5:1}calculateStab(e,t){return e.types.includes(t.type)?1.5:1}selectOpponentAction(){const e=this.opponentCurrentMonster.selectMove("Easy");this.turnStack.push(new Ee(e,"ally",this.opponentCurrentMonster))}executeAction(e){var t;e&&(e instanceof Ee&&!e.initiator.fainted?this.attack(e):e instanceof De?this.runAway():e instanceof Je||e instanceof Qe||(e instanceof J?this.currentMessage=e.description:e instanceof Ve?this.removeHP(e):e instanceof Oe&&this.onClose())),(t=this.turnStack)!=null&&t.length||0>0?this.sleep(1e3).then(()=>{var i;return this.executeAction((i=this.turnStack)==null?void 0:i.shift())}):this.isPlayerTurn=!0}removeHP(e){const t=e.target==="opponent"?this.opponentCurrentMonster:this.playerCurrentMonster;t.currentHp-=e.damages,t.currentHp<=0&&(t.currentHp=0,t.fainted=!0,this.turnStack=[],this.turnStack.push(new J(t.name+" fainted!",e.initiator)),(this.wild||this.opponent instanceof dt&&this.opponent.monsters.every(i=>i.fainted))&&(this.turnStack.unshift(new Oe(e.initiator)),this.turnStack.unshift(new J("You won the battle!",e.initiator)),setTimeout(()=>{this.onClose()},1e3)))}}class Nt{constructor(){a(this,"superEffective",!1);a(this,"notVeryEffective",!1);a(this,"immune",!1);a(this,"critical",!1);a(this,"effectSuccess",!1);a(this,"effectApplied","");a(this,"damages",0)}}class Oe{constructor(e){a(this,"name");a(this,"description");a(this,"initiator");this.name="End Battle",this.description="End Battle",this.initiator=e}}class Ve{constructor(e,t,i){a(this,"name");a(this,"description");a(this,"damages");a(this,"target");a(this,"initiator");this.name="Remove HP",this.description="Remove HP",this.damages=e,this.target=t,this.initiator=i}}class J{constructor(e,t){a(this,"name");a(this,"description");a(this,"initiator");this.name="Message",this.description=e,this.initiator=t}}class De{constructor(e){a(this,"description");a(this,"name");a(this,"initiator");this.name="Run Away",this.description="Run away from the battle",this.initiator=e}}class Je{constructor(e,t){a(this,"description");a(this,"name");a(this,"targetIdx");a(this,"initiator");this.name="Change Pokemon",this.description="Change the current pokemon",this.targetIdx=e,this.initiator=t}}class Ee{constructor(e,t,i){a(this,"name");a(this,"description");a(this,"move");a(this,"target");a(this,"initiator");this.name=e.name,this.description=e.description,this.move=e,this.target=t,this.initiator=i}}class Qe{constructor(e,t,i,n,r,l=0){a(this,"description");a(this,"name");a(this,"itemId");a(this,"targetType");a(this,"targetIdx");a(this,"initiator");this.name=e,this.description=t,this.itemId=i,this.targetType=n,this.targetIdx=l,this.initiator=r}}class Xt{constructor(e,t){a(this,"position");a(this,"image");a(this,"width",0);a(this,"height",0);this.position=e,this.image=t,this.image.onload=()=>{this.width=this.image.width,this.height=this.image.height}}draw(e,t){e.drawImage(this.image,0,0,this.image.width,this.image.height,0,0,t.width,t.height*.75)}}const ht=new Image;ht.src="src/assets/battle/battle-grass.png";const Ut=new Xt(new O(0,0),ht);function Wt(s,e){return Zt[s.toLowerCase()][e.toLowerCase()]}const Zt={normal:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:.5,ghost:0,dragon:1,dark:1,steel:.5},fire:{normal:1,fire:.5,water:.5,electric:1,grass:2,ice:2,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:2,rock:.5,ghost:1,dragon:.5,dark:1,steel:2},water:{normal:1,fire:2,water:.5,electric:1,grass:.5,ice:1,fighting:1,poison:1,ground:2,flying:1,psychic:1,bug:1,rock:2,ghost:1,dragon:.5,dark:1,steel:1},electric:{normal:1,fire:1,water:2,electric:.5,grass:.5,ice:1,fighting:1,poison:1,ground:0,flying:2,psychic:1,bug:1,rock:1,ghost:1,dragon:.5,dark:1,steel:1},grass:{normal:1,fire:.5,water:2,electric:1,grass:.5,ice:1,fighting:1,poison:.5,ground:2,flying:.5,psychic:1,bug:.5,rock:2,ghost:1,dragon:.5,dark:1,steel:.5},ice:{normal:1,fire:.5,water:.5,electric:1,grass:2,ice:.5,fighting:1,poison:1,ground:2,flying:2,psychic:1,bug:1,rock:1,ghost:1,dragon:2,dark:1,steel:.5},fighting:{normal:2,fire:1,water:1,electric:1,grass:1,ice:2,fighting:1,poison:.5,ground:1,flying:.5,psychic:.5,bug:.5,rock:2,ghost:0,dragon:1,dark:2,steel:2},poison:{normal:1,fire:1,water:1,electric:1,grass:2,ice:1,fighting:1,poison:.5,ground:.5,flying:1,psychic:1,bug:1,rock:.5,ghost:.5,dragon:1,dark:1,steel:0},ground:{normal:1,fire:2,water:1,electric:2,grass:.5,ice:1,fighting:1,poison:2,ground:1,flying:0,psychic:1,bug:.5,rock:2,ghost:1,dragon:1,dark:1,steel:2},flying:{normal:1,fire:1,water:1,electric:.5,grass:2,ice:1,fighting:2,poison:1,ground:1,flying:1,psychic:1,bug:2,rock:.5,ghost:1,dragon:1,dark:1,steel:.5},psychic:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:2,poison:2,ground:1,flying:1,psychic:.5,bug:1,rock:1,ghost:1,dragon:1,dark:0,steel:.5},bug:{normal:1,fire:.5,water:1,electric:1,grass:2,ice:1,fighting:.5,poison:.5,ground:1,flying:.5,psychic:2,bug:1,rock:1,ghost:.5,dragon:1,dark:2,steel:.5},rock:{normal:1,fire:2,water:1,electric:1,grass:1,ice:2,fighting:.5,poison:1,ground:.5,flying:2,psychic:1,bug:2,rock:1,ghost:1,dragon:1,dark:1,steel:.5},ghost:{normal:0,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:2,bug:1,rock:1,ghost:2,dragon:1,dark:.5,steel:.5},dragon:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:1,ghost:1,dragon:2,dark:1,steel:.5},dark:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:.5,poison:1,ground:1,flying:1,psychic:2,bug:1,rock:1,ghost:2,dragon:1,dark:.5,steel:.5},steel:{normal:1,fire:.5,water:.5,electric:.5,grass:1,ice:2,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:2,ghost:1,dragon:1,dark:1,steel:.5}};function Gt(s){he(s,"svelte-68hs54",".ally-info.svelte-68hs54.svelte-68hs54{opacity:0;visibility:hidden;z-index:9;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;bottom:26dvh;right:-30dvw;transition:right 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly;font-size:46px}.ally-info.opened.svelte-68hs54.svelte-68hs54{opacity:1;visibility:visible;right:1dvw}.ally-info.svelte-68hs54 .name-lvl.svelte-68hs54{display:flex;justify-content:space-between;align-items:center}.ally-info.svelte-68hs54 .status.svelte-68hs54{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.ally-info.svelte-68hs54 .hp.svelte-68hs54{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.ally-info.svelte-68hs54 .hp span.svelte-68hs54{padding:0 0 0 12px;font-weight:bold}.ally-info.svelte-68hs54 .hp .progressbar-wrapper.svelte-68hs54{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.ally-info.svelte-68hs54 .hp .progressbar-wrapper .progressbar.svelte-68hs54{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px;transition:width 1s ease-in-out}.ally-info.svelte-68hs54 .hp .progressbar-wrapper .progressbar.warning.svelte-68hs54{background:rgb(255, 241, 164);background:linear-gradient(0deg, rgb(255, 241, 164) 0%, rgb(255, 194, 16) 30%, rgb(255, 194, 16) 50%, rgb(255, 194, 16) 70%, rgb(255, 241, 164) 100%)}.ally-info.svelte-68hs54 .hp .progressbar-wrapper .progressbar.danger.svelte-68hs54{background:rgb(244, 177, 159);background:linear-gradient(0deg, rgb(244, 177, 159) 0%, rgb(223, 85, 48) 30%, rgb(223, 85, 48) 50%, rgb(223, 85, 48) 70%, rgb(244, 177, 159) 100%)}@media screen and (max-width: 1100px){.ally-info.svelte-68hs54.svelte-68hs54{font-size:36px;border:8px solid #595b59;height:16dvh}.ally-info.svelte-68hs54 .hp.svelte-68hs54{width:80%;height:18px}.ally-info.svelte-68hs54 .hp .progressbar-wrapper.svelte-68hs54{height:14px}}")}function Yt(s){let e,t,i,n=s[1].name+"",r,l,o,h,p=s[1].level+"",d,c,u,f,b,k,x,y,S,$=s[1].currentHp+"",H,T,v=s[1].currentStats.hp+"",E;return{c(){e=w("div"),t=w("div"),i=w("span"),r=z(n),l=A(),o=w("span"),h=z("Lv "),d=z(p),c=A(),u=w("div"),f=w("div"),b=w("span"),b.textContent="HP",k=A(),x=w("div"),y=w("div"),S=A(),H=z($),T=z(" / "),E=z(v),m(i,"class","svelte-68hs54"),m(o,"class","svelte-68hs54"),m(t,"class","name-lvl svelte-68hs54"),m(b,"class","svelte-68hs54"),m(y,"class","progressbar svelte-68hs54"),se(y,"--width",s[2]+"%"),M(y,"warning",s[2]<=50),M(y,"danger",s[2]<15),m(x,"class","progressbar-wrapper svelte-68hs54"),m(f,"class","hp svelte-68hs54"),m(u,"class","status svelte-68hs54"),m(e,"class","ally-info svelte-68hs54"),M(e,"opened",s[0])},m(I,B){C(I,e,B),g(e,t),g(t,i),g(i,r),g(t,l),g(t,o),g(o,h),g(o,d),g(e,c),g(e,u),g(u,f),g(f,b),g(f,k),g(f,x),g(x,y),g(u,S),g(u,H),g(u,T),g(u,E)},p(I,[B]){B&2&&n!==(n=I[1].name+"")&&X(r,n),B&2&&p!==(p=I[1].level+"")&&X(d,p),B&4&&se(y,"--width",I[2]+"%"),B&4&&M(y,"warning",I[2]<=50),B&4&&M(y,"danger",I[2]<15),B&2&&$!==($=I[1].currentHp+"")&&X(H,$),B&2&&v!==(v=I[1].currentStats.hp+"")&&X(E,v),B&1&&M(e,"opened",I[0])},i:F,o:F,d(I){I&&q(e)}}}function Kt(s,e,t){let i,{opened:n}=e,{monster:r}=e;return s.$$set=l=>{"opened"in l&&t(0,n=l.opened),"monster"in l&&t(1,r=l.monster)},s.$$.update=()=>{s.$$.dirty&2&&t(2,i=Math.floor(r.currentHp*100/r.currentStats.hp))},[n,r,i]}class pt extends fe{constructor(e){super(),pe(this,e,Kt,Yt,de,{opened:0,monster:1},Gt)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),L()}get monster(){return this.$$.ctx[1]}set monster(e){this.$$set({monster:e}),L()}}ue(pt,{opened:{},monster:{}},[],[],!0);function Vt(s){he(s,"svelte-b0lsc5",".action-bar.svelte-b0lsc5.svelte-b0lsc5{opacity:0;visibility:hidden;z-index:9;background-color:white;height:25dvh;width:100dvw;position:absolute;bottom:-25dvh;left:0;transition:bottom 0.5s ease-in-out;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;display:flex;font-size:64px}.action-bar.opened.svelte-b0lsc5.svelte-b0lsc5{opacity:1;visibility:visible;bottom:0}.action-bar.svelte-b0lsc5 .info.svelte-b0lsc5{width:50%;height:100%;display:flex;align-items:center;align-content:center;justify-content:space-around;position:relative}.action-bar.svelte-b0lsc5 .info ._inner.svelte-b0lsc5{position:absolute;left:17px;z-index:1;height:calc(100% - 55px);border:10px solid black;border-radius:10px;display:flex;align-items:center;justify-content:center;width:100%;text-transform:capitalize}.action-bar.svelte-b0lsc5 .info ._inner .move-desc.svelte-b0lsc5{text-transform:initial;font-size:46px;display:flex;flex-wrap:wrap;gap:16px;word-break:break-word;box-sizing:border-box;padding:0 20px}.action-bar.svelte-b0lsc5 .info ._inner .move-desc p.svelte-b0lsc5{flex:45%;margin:0}.action-bar.svelte-b0lsc5 .actions.svelte-b0lsc5,.action-bar.svelte-b0lsc5 .moves.svelte-b0lsc5{width:50%;height:100%;display:flex;background:#FFFFFF;border:14px solid #595b59;border-radius:8px;box-sizing:border-box;padding:12px;z-index:2;flex-wrap:wrap;gap:12px}.action-btn.svelte-b0lsc5.svelte-b0lsc5{background-color:var(--color);font-size:64px;color:white;border-radius:24px;border:6px solid #595b59;font-family:pokemon, serif;transition:color 0.3s ease-in-out, opacity 0.3s ease-in-out;flex:48%}.action-btn.svelte-b0lsc5.svelte-b0lsc5:hover,.action-btn.selected.svelte-b0lsc5.svelte-b0lsc5{cursor:pointer;opacity:0.96;color:#262626}.action-btn[disabled].svelte-b0lsc5.svelte-b0lsc5{opacity:0.5;cursor:not-allowed;pointer-events:none}@media screen and (max-width: 1100px){.action-bar.svelte-b0lsc5.svelte-b0lsc5{font-size:32px}.action-bar.svelte-b0lsc5 .actions.svelte-b0lsc5,.action-bar.svelte-b0lsc5 .moves.svelte-b0lsc5{padding:2px;gap:4px;border:8px solid #595b59}.action-bar.svelte-b0lsc5 .actions .action-btn.svelte-b0lsc5,.action-bar.svelte-b0lsc5 .moves .action-btn.svelte-b0lsc5{font-size:32px}.action-bar.svelte-b0lsc5 .info ._inner.svelte-b0lsc5{left:10px;height:calc(100% - 37px);border:8px solid black}.action-bar.svelte-b0lsc5 .info ._inner .move-desc.svelte-b0lsc5{font-size:32px}}")}function et(s,e,t){const i=s.slice();return i[11]=e[t],i[13]=t,i}function Jt(s){var I,B,G,Y,ee,ne;let e,t,i=((I=s[1])==null?void 0:I.playerCurrentMonster.moves[s[3]].description)+"",n,r,l,o=((B=s[1])==null?void 0:B.playerCurrentMonster.moves[s[3]].currentPp)+"",h,p,d=((G=s[1])==null?void 0:G.playerCurrentMonster.moves[s[3]].pp)+"",c,u,f,b=((Y=s[1])==null?void 0:Y.playerCurrentMonster.moves[s[3]].category)+"",k,x,y,S=((ee=s[1])==null?void 0:ee.playerCurrentMonster.moves[s[3]].power)+"",$,H,T=((ne=s[1])==null?void 0:ne.playerCurrentMonster.moves[s[3]].accuracy)+"",v,E;return{c(){e=w("div"),t=w("p"),n=z(i),r=A(),l=w("p"),h=z(o),p=z(`
                        / `),c=z(d),u=A(),f=w("p"),k=z(b),x=A(),y=w("p"),$=z(S),H=z(`
                        | `),v=z(T),E=z(" %"),m(t,"class","svelte-b0lsc5"),m(l,"class","svelte-b0lsc5"),m(f,"class","svelte-b0lsc5"),m(y,"class","svelte-b0lsc5"),m(e,"class","move-desc svelte-b0lsc5")},m(R,Q){C(R,e,Q),g(e,t),g(t,n),g(e,r),g(e,l),g(l,h),g(l,p),g(l,c),g(e,u),g(e,f),g(f,k),g(e,x),g(e,y),g(y,$),g(y,H),g(y,v),g(y,E)},p(R,Q){var ke,_e,xe,_,V,j;Q&10&&i!==(i=((ke=R[1])==null?void 0:ke.playerCurrentMonster.moves[R[3]].description)+"")&&X(n,i),Q&10&&o!==(o=((_e=R[1])==null?void 0:_e.playerCurrentMonster.moves[R[3]].currentPp)+"")&&X(h,o),Q&10&&d!==(d=((xe=R[1])==null?void 0:xe.playerCurrentMonster.moves[R[3]].pp)+"")&&X(c,d),Q&10&&b!==(b=((_=R[1])==null?void 0:_.playerCurrentMonster.moves[R[3]].category)+"")&&X(k,b),Q&10&&S!==(S=((V=R[1])==null?void 0:V.playerCurrentMonster.moves[R[3]].power)+"")&&X($,S),Q&10&&T!==(T=((j=R[1])==null?void 0:j.playerCurrentMonster.moves[R[3]].accuracy)+"")&&X(v,T)},d(R){R&&q(e)}}}function Qt(s){var i;let e=((i=s[1])==null?void 0:i.currentMessage.toUpperCase())+"",t;return{c(){t=z(e)},m(n,r){C(n,t,r)},p(n,r){var l;r&2&&e!==(e=((l=n[1])==null?void 0:l.currentMessage.toUpperCase())+"")&&X(t,e)},d(n){n&&q(t)}}}function es(s){let e,t,i,n,r,l,o,h,p,d,c,u,f,b;return{c(){e=w("div"),t=w("button"),i=z("FIGHT"),n=A(),r=w("button"),l=z("BAG"),o=A(),h=w("button"),p=z("POKEMONS"),d=A(),c=w("button"),u=z("RUN"),m(t,"class","action-btn svelte-b0lsc5"),se(t,"--color","#dc5959"),t.disabled=s[5],M(t,"selected",s[4]===0),m(r,"class","action-btn svelte-b0lsc5"),se(r,"--color","#eca859"),r.disabled=s[5],M(r,"selected",s[4]===1),m(h,"class","action-btn svelte-b0lsc5"),se(h,"--color","#7EAF53"),h.disabled=s[5],M(h,"selected",s[4]===2),m(c,"class","action-btn svelte-b0lsc5"),se(c,"--color","#599bdc"),c.disabled=s[5],M(c,"selected",s[4]===2),m(e,"class","actions svelte-b0lsc5")},m(k,x){C(k,e,x),g(e,t),g(t,i),g(e,n),g(e,r),g(r,l),g(e,o),g(e,h),g(h,p),g(e,d),g(e,c),g(c,u),f||(b=[N(t,"click",s[6]),N(c,"click",s[7])],f=!0)},p(k,x){x&32&&(t.disabled=k[5]),x&16&&M(t,"selected",k[4]===0),x&32&&(r.disabled=k[5]),x&16&&M(r,"selected",k[4]===1),x&32&&(h.disabled=k[5]),x&16&&M(h,"selected",k[4]===2),x&32&&(c.disabled=k[5]),x&16&&M(c,"selected",k[4]===2)},d(k){k&&q(e),f=!1,ie(b)}}}function ts(s){let e,t=Ze(s[1].playerCurrentMonster.moves),i=[];for(let n=0;n<t.length;n+=1)i[n]=tt(et(s,t,n));return{c(){e=w("div");for(let n=0;n<i.length;n+=1)i[n].c();m(e,"class","moves svelte-b0lsc5")},m(n,r){C(n,e,r);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(e,null)},p(n,r){if(r&298){t=Ze(n[1].playerCurrentMonster.moves);let l;for(l=0;l<t.length;l+=1){const o=et(n,t,l);i[l]?i[l].p(o,r):(i[l]=tt(o),i[l].c(),i[l].m(e,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=t.length}},d(n){n&&q(e),Mt(i,n)}}}function tt(s){let e,t=s[11].name.toUpperCase()+"",i,n,r,l;function o(){return s[9](s[13])}function h(){return s[10](s[11])}return{c(){e=w("button"),i=z(t),n=A(),m(e,"class","action-btn svelte-b0lsc5"),se(e,"--color","#dc5959"),e.disabled=s[5],M(e,"selected",s[3]===s[13])},m(p,d){C(p,e,d),g(e,i),g(e,n),r||(l=[N(e,"mouseover",o),N(e,"click",h)],r=!0)},p(p,d){s=p,d&2&&t!==(t=s[11].name.toUpperCase()+"")&&X(i,t),d&32&&(e.disabled=s[5]),d&8&&M(e,"selected",s[3]===s[13])},d(p){p&&q(e),r=!1,ie(l)}}}function ss(s){let e,t,i,n;function r(c,u){return c[2]?Jt:Qt}let l=r(s),o=l(s);function h(c,u){return c[2]?ts:es}let p=h(s),d=p(s);return{c(){e=w("div"),t=w("div"),i=w("div"),o.c(),n=A(),d.c(),m(i,"class","_inner svelte-b0lsc5"),m(t,"class","info svelte-b0lsc5"),m(e,"class","action-bar svelte-b0lsc5"),M(e,"opened",s[0])},m(c,u){C(c,e,u),g(e,t),g(t,i),o.m(i,null),g(e,n),d.m(e,null)},p(c,[u]){l===(l=r(c))&&o?o.p(c,u):(o.d(1),o=l(c),o&&(o.c(),o.m(i,null))),p===(p=h(c))&&d?d.p(c,u):(d.d(1),d=p(c),d&&(d.c(),d.m(e,null))),u&1&&M(e,"opened",c[0])},i:F,o:F,d(c){c&&q(e),o.d(),d.d()}}}function is(s,e,t){let i,{opened:n}=e,{battleState:r}=e,l=!1,o=0,h=0;console.log(r);function p(){t(2,l=!l)}function d(){r.selectAction(new De(r.playerCurrentMonster))}function c(b){r.selectAction(new Ee(b,"opponent",r.playerCurrentMonster)),t(2,l=!1)}window.addEventListener("keydown",b=>{b.key==="ArrowUp"?l?t(3,o=o===0?r.playerCurrentMonster.moves.length-1:o-1):t(4,h=h===0?3:h-1):b.key==="ArrowDown"?l?t(3,o=o===r.playerCurrentMonster.moves.length-1?0:o+1):t(4,h=h===3?0:h+1):b.key==="Enter"&&(l?c(r.playerCurrentMonster.moves[o]):h===0?p():h===3&&d())});const u=b=>t(3,o=b),f=b=>c(b);return s.$$set=b=>{"opened"in b&&t(0,n=b.opened),"battleState"in b&&t(1,r=b.battleState)},s.$$.update=()=>{s.$$.dirty&2&&t(5,i=r&&!r.isPlayerTurn||!1)},[n,r,l,o,h,i,p,d,c,u,f]}class ut extends fe{constructor(e){super(),pe(this,e,is,ss,de,{opened:0,battleState:1},Vt)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),L()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),L()}}ue(ut,{opened:{},battleState:{}},[],[],!0);function ns(s){he(s,"svelte-1xvkx5g",".enemy-info.svelte-1xvkx5g.svelte-1xvkx5g{opacity:0;visibility:hidden;z-index:9;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;top:2dvh;left:-30dvw;transition:left 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly;font-size:46px}.enemy-info.opened.svelte-1xvkx5g.svelte-1xvkx5g{opacity:1;visibility:visible;left:1dvw}.enemy-info.svelte-1xvkx5g .name-lvl.svelte-1xvkx5g{display:flex;justify-content:space-between;align-items:center}.enemy-info.svelte-1xvkx5g .status.svelte-1xvkx5g{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.enemy-info.svelte-1xvkx5g .hp.svelte-1xvkx5g{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.enemy-info.svelte-1xvkx5g .hp span.svelte-1xvkx5g{padding:0 0 0 12px;font-weight:bold}.enemy-info.svelte-1xvkx5g .hp .progressbar-wrapper.svelte-1xvkx5g{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.enemy-info.svelte-1xvkx5g .hp .progressbar-wrapper .progressbar.svelte-1xvkx5g{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px;transition:width 1s ease-in-out, background 1s ease-in-out 1s}.enemy-info.svelte-1xvkx5g .hp .progressbar-wrapper .progressbar.warning.svelte-1xvkx5g{background:rgb(255, 241, 164);background:linear-gradient(0deg, rgb(255, 241, 164) 0%, rgb(255, 194, 16) 30%, rgb(255, 194, 16) 50%, rgb(255, 194, 16) 70%, rgb(255, 241, 164) 100%)}.enemy-info.svelte-1xvkx5g .hp .progressbar-wrapper .progressbar.danger.svelte-1xvkx5g{background:rgb(244, 177, 159);background:linear-gradient(0deg, rgb(244, 177, 159) 0%, rgb(223, 85, 48) 30%, rgb(223, 85, 48) 50%, rgb(223, 85, 48) 70%, rgb(244, 177, 159) 100%)}@media screen and (max-width: 1100px){.enemy-info.svelte-1xvkx5g.svelte-1xvkx5g{font-size:36px;border:8px solid #595b59}.enemy-info.svelte-1xvkx5g .hp.svelte-1xvkx5g{width:80%;height:18px}.enemy-info.svelte-1xvkx5g .hp .progressbar-wrapper.svelte-1xvkx5g{height:14px}}")}function rs(s){let e,t,i,n=s[1].name+"",r,l,o,h,p=s[1].level+"",d,c,u,f,b,k,x,y;return{c(){e=w("div"),t=w("div"),i=w("span"),r=z(n),l=A(),o=w("span"),h=z("Lv "),d=z(p),c=A(),u=w("div"),f=w("div"),b=w("span"),b.textContent="HP",k=A(),x=w("div"),y=w("div"),m(i,"class","svelte-1xvkx5g"),m(o,"class","svelte-1xvkx5g"),m(t,"class","name-lvl svelte-1xvkx5g"),m(b,"class","svelte-1xvkx5g"),m(y,"class","progressbar svelte-1xvkx5g"),se(y,"--width",s[2]+"%"),M(y,"warning",s[2]<=50),M(y,"danger",s[2]<15),m(x,"class","progressbar-wrapper svelte-1xvkx5g"),m(f,"class","hp svelte-1xvkx5g"),m(u,"class","status svelte-1xvkx5g"),m(e,"class","enemy-info svelte-1xvkx5g"),M(e,"opened",s[0])},m(S,$){C(S,e,$),g(e,t),g(t,i),g(i,r),g(t,l),g(t,o),g(o,h),g(o,d),g(e,c),g(e,u),g(u,f),g(f,b),g(f,k),g(f,x),g(x,y)},p(S,[$]){$&2&&n!==(n=S[1].name+"")&&X(r,n),$&2&&p!==(p=S[1].level+"")&&X(d,p),$&4&&se(y,"--width",S[2]+"%"),$&4&&M(y,"warning",S[2]<=50),$&4&&M(y,"danger",S[2]<15),$&1&&M(e,"opened",S[0])},i:F,o:F,d(S){S&&q(e)}}}function ls(s,e,t){let i,{opened:n}=e,{monster:r}=e;return s.$$set=l=>{"opened"in l&&t(0,n=l.opened),"monster"in l&&t(1,r=l.monster)},s.$$.update=()=>{s.$$.dirty&2&&t(2,i=Math.floor(r.currentHp*100/r.currentStats.hp))},[n,r,i]}class ft extends fe{constructor(e){super(),pe(this,e,ls,rs,de,{opened:0,monster:1},ns)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),L()}get monster(){return this.$$.ctx[1]}set monster(e){this.$$set({monster:e}),L()}}ue(ft,{opened:{},monster:{}},[],[],!0);function os(s){he(s,"svelte-18qu5ee",".battleStart.svelte-18qu5ee{opacity:0;visibility:hidden;background:#000000;height:100dvh;width:100dvw;position:absolute;top:0;left:0;transition:opacity 0.5s ease-in-out;z-index:2}.battleStart.animate.svelte-18qu5ee{visibility:visible;animation:svelte-18qu5ee-animate 2s ease-in-out}.battleStart.hide.svelte-18qu5ee{visibility:hidden;opacity:0}@keyframes svelte-18qu5ee-animate{0%{opacity:1}20%{opacity:0}40%{opacity:1}60%{opacity:0}80%{opacity:1}100%{opacity:0}}")}function st(s){let e,t,i,n,r,l,o,h,p,d,c,u;function f(v){s[3](v)}function b(v){s[4](v)}let k={};s[0]!==void 0&&(k.opened=s[0]),s[1]!==void 0&&(k.battleState=s[1]),e=new ut({props:k}),D.push(()=>W(e,"opened",f)),D.push(()=>W(e,"battleState",b));function x(v){s[5](v)}function y(v){s[6](v)}let S={};s[0]!==void 0&&(S.opened=s[0]),s[1].playerCurrentMonster!==void 0&&(S.monster=s[1].playerCurrentMonster),r=new pt({props:S}),D.push(()=>W(r,"opened",x)),D.push(()=>W(r,"monster",y));function $(v){s[7](v)}function H(v){s[8](v)}let T={};return s[0]!==void 0&&(T.opened=s[0]),s[1].opponentCurrentMonster!==void 0&&(T.monster=s[1].opponentCurrentMonster),p=new ft({props:T}),D.push(()=>W(p,"opened",$)),D.push(()=>W(p,"monster",H)),{c(){we(e.$$.fragment),n=A(),we(r.$$.fragment),h=A(),we(p.$$.fragment)},m(v,E){ae(e,v,E),C(v,n,E),ae(r,v,E),C(v,h,E),ae(p,v,E),u=!0},p(v,E){const I={};!t&&E&1&&(t=!0,I.opened=v[0],U(()=>t=!1)),!i&&E&2&&(i=!0,I.battleState=v[1],U(()=>i=!1)),e.$set(I);const B={};!l&&E&1&&(l=!0,B.opened=v[0],U(()=>l=!1)),!o&&E&2&&(o=!0,B.monster=v[1].playerCurrentMonster,U(()=>o=!1)),r.$set(B);const G={};!d&&E&1&&(d=!0,G.opened=v[0],U(()=>d=!1)),!c&&E&2&&(c=!0,G.monster=v[1].opponentCurrentMonster,U(()=>c=!1)),p.$set(G)},i(v){u||(Z(e.$$.fragment,v),Z(r.$$.fragment,v),Z(p.$$.fragment,v),u=!0)},o(v){K(e.$$.fragment,v),K(r.$$.fragment,v),K(p.$$.fragment,v),u=!1},d(v){v&&(q(n),q(h)),ce(e,v),ce(r,v),ce(p,v)}}}function as(s){let e,t,i,n=s[1]&&st(s);return{c(){n&&n.c(),e=A(),t=w("div"),t.innerHTML="",m(t,"class","battleStart svelte-18qu5ee"),M(t,"hide",s[0]),M(t,"animate",s[2])},m(r,l){n&&n.m(r,l),C(r,e,l),C(r,t,l),i=!0},p(r,[l]){r[1]?n?(n.p(r,l),l&2&&Z(n,1)):(n=st(r),n.c(),Z(n,1),n.m(e.parentNode,e)):n&&(Fe(),K(n,1,1,()=>{n=null}),Te()),(!i||l&1)&&M(t,"hide",r[0]),(!i||l&4)&&M(t,"animate",r[2])},i(r){i||(Z(n),i=!0)},o(r){K(n),i=!1},d(r){r&&(q(e),q(t)),n&&n.d(r)}}}function cs(s,e,t){let{opened:i}=e,{battleStart:n}=e,{battleState:r}=e;function l(u){i=u,t(0,i)}function o(u){r=u,t(1,r)}function h(u){i=u,t(0,i)}function p(u){s.$$.not_equal(r.playerCurrentMonster,u)&&(r.playerCurrentMonster=u,t(1,r))}function d(u){i=u,t(0,i)}function c(u){s.$$.not_equal(r.opponentCurrentMonster,u)&&(r.opponentCurrentMonster=u,t(1,r))}return s.$$set=u=>{"opened"in u&&t(0,i=u.opened),"battleStart"in u&&t(2,n=u.battleStart),"battleState"in u&&t(1,r=u.battleState)},[i,r,n,l,o,h,p,d,c]}class gt extends fe{constructor(e){super(),pe(this,e,cs,as,de,{opened:0,battleStart:2,battleState:1},os)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),L()}get battleStart(){return this.$$.ctx[2]}set battleStart(e){this.$$set({battleStart:e}),L()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),L()}}ue(gt,{opened:{},battleStart:{},battleState:{}},[],[],!0);function ds(s){he(s,"svelte-1cbbcxy",'.menu.svelte-1cbbcxy.svelte-1cbbcxy{position:absolute;top:0;right:-20dvw;width:20dvw;font-size:36px;background-color:#FFFFFF;z-index:3;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:right 0.3s ease-in-out;border:3px solid #1e1e1e;border-radius:16px}.menu.svelte-1cbbcxy ul.svelte-1cbbcxy{box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;border-radius:12px;list-style:none;padding:12px 32px;margin:0;display:flex;flex-direction:column;height:100%;width:100%;align-items:center}.menu.svelte-1cbbcxy ul li.svelte-1cbbcxy{font-size:4rem;margin:1rem 0;text-align:center;cursor:pointer;flex-grow:1;width:100%;height:100%;min-height:60px;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li:hover .svelte-1cbbcxy:before{content:"";width:0;height:0;border-top:20px solid transparent;border-bottom:20px solid transparent;border-left:20px solid #262626;position:absolute;left:40px}.menu.svelte-1cbbcxy ul li button.svelte-1cbbcxy{background:none;border:none;font-size:inherit;font-family:inherit;cursor:inherit;outline:none;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li button .svelte-1cbbcxy:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%}.menu.open.svelte-1cbbcxy.svelte-1cbbcxy{opacity:1;pointer-events:all;right:0}')}function hs(s){let e;return{c(){e=w("div"),e.innerHTML='<ul class="svelte-1cbbcxy"><li class="svelte-1cbbcxy"><button tabindex="0" class="svelte-1cbbcxy">Pokedex</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Pokemon</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Bag</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Trainer</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Save</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Options</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Credits</button></li></ul>',m(e,"class","menu svelte-1cbbcxy"),M(e,"open",s[0])},m(t,i){C(t,e,i)},p(t,[i]){i&1&&M(e,"open",t[0])},i:F,o:F,d(t){t&&q(e)}}}function ps(s,e,t){let{menuOpened:i}=e,{player:n}=e;return s.$$set=r=>{"menuOpened"in r&&t(0,i=r.menuOpened),"player"in r&&t(1,n=r.player)},[i,n]}class bt extends fe{constructor(e){super(),pe(this,e,ps,hs,de,{menuOpened:0,player:1},ds)}get menuOpened(){return this.$$.ctx[0]}set menuOpened(e){this.$$set({menuOpened:e}),L()}get player(){return this.$$.ctx[1]}set player(e){this.$$set({player:e}),L()}}ue(bt,{menuOpened:{},player:{}},[],[],!0);class it{constructor(e,t=16,i=16){a(this,"position");a(this,"width");a(this,"height");this.position=e,this.width=t,this.height=i}debug(e,t,i,n,r,l="red"){e.fillStyle=l,e.fillRect(n+this.position.x*16*i,r+this.position.y*16*i,this.width*i,this.height*i)}}const us=8,fs=806;class gs{constructor(e,t,i,n,r,l,o,h=[1,100]){a(this,"background");a(this,"foreground");a(this,"width");a(this,"height");a(this,"collisions");a(this,"battleZones");a(this,"monsters");a(this,"levelRange",[1,100]);a(this,"playerInitialPosition",new O(11,11));a(this,"startingX",0);a(this,"startingY",0);this.background=e,this.foreground=t,this.width=i,this.height=n,this.collisions=this.initBoundaries(r),this.battleZones=this.initBattlesZones(l),this.monsters=o,this.levelRange=h}randomMonster(e){const t=this.monsters[Math.floor(Math.random()*this.monsters.length)],i=Math.floor(Math.random()*(this.levelRange[1]-this.levelRange[0]+1))+this.levelRange[0];return e.findById(t).result.instanciate(i)}initBattlesZones(e){const t=[];for(let n=0;n<e.length;n+=this.width)t.push(e.slice(n,this.width+n));const i=[];return t.forEach((n,r)=>{n.forEach((l,o)=>{if(l===us){const h=new it(new O(o,r));i.push(h)}})}),i}initBoundaries(e){const t=[];for(let n=0;n<e.length;n+=this.width)t.push(e.slice(n,this.width+n));const i=[];return t.forEach((n,r)=>{n.forEach((l,o)=>{if(l===fs){const h=new it(new O(o,r));i.push(h)}})}),i}drawBackground(e,t,i){let n=this.background.width*i,r=this.background.height*i,l=e.canvas.width/2-n/2,o=e.canvas.height/2-r/2;this.startingX=l+(0-t.x)*(16*i),this.startingY=o+(0-t.y)*(16*i),e.drawImage(this.background,0,0,this.background.width,this.background.height,this.startingX,this.startingY,this.background.width*i,this.background.height*i)}drawForeground(e,t){this.foreground!==null&&e.drawImage(this.foreground,t.x*16,t.y*16,this.foreground.width,this.foreground.height,0,0,this.foreground.width*3,this.foreground.height*3)}drawBoundaries(e,t,i){this.collisions.forEach(n=>{n.debug(e,t,i,this.startingX,this.startingY,"rgba(255, 0, 0, 0.5)")})}drawBattleZones(e,t,i){this.battleZones.forEach(n=>{n.debug(e,t,i,this.startingX,this.startingY,"rgba(0, 0, 255, 0.5)")})}hasBattleZoneAt(e){return this.battleZones.some(t=>t.position.x===e.x&&t.position.y===e.y)}hasBoundaryAt(e){return this.collisions.some(t=>t.position.x===e.x&&t.position.y===e.y)||e.x<0||e.y<0||e.x>this.width-1||e.y>this.height-1}}const vt=new Image;vt.src="src/assets/maps/test-map.png";const mt=new Image;mt.src="src/assets/maps/test-map-foreground.png";const bs=[95],vs=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,0,806,806,0,0,806,806,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,806,806,806,806,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,806,806,806,806,834,0,0,0,0,0,0,0,0,0],ms=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],re=new gs(vt,mt,20,20,vs,ms,bs,[3,6]);function ws(s){he(s,"svelte-1i2dl8q",'@media(max-width: 1100px){.set.svelte-1i2dl8q .d-pad.svelte-1i2dl8q{width:20dvw;height:20dvw}}.set.svelte-1i2dl8q.svelte-1i2dl8q{overflow:hidden;text-align:center;position:absolute;bottom:8dvh;left:8dvh;z-index:10}.set.svelte-1i2dl8q .d-pad.svelte-1i2dl8q{display:inline-block}.d-pad.svelte-1i2dl8q.svelte-1i2dl8q{position:relative;width:12dvw;height:12dvw;border-radius:48%;overflow:hidden;z-index:9}.d-pad.svelte-1i2dl8q.svelte-1i2dl8q:before{content:"";position:absolute;top:50%;left:50%;border-radius:5%;transform:translate(-50%, -50%);width:66.6%;height:66.6%}.d-pad.svelte-1i2dl8q.svelte-1i2dl8q:after{content:"";position:absolute;display:none;z-index:2;width:20%;height:20%;top:50%;left:50%;background:rgba(221, 221, 221, 0.5);border-radius:50%;transform:translate(-50%, -50%);transition:all 0.25s;cursor:pointer}.d-pad.svelte-1i2dl8q.svelte-1i2dl8q:hover:after{width:30%;height:30%}.d-pad.svelte-1i2dl8q span.svelte-1i2dl8q{display:block;position:absolute;-webkit-tap-highlight-color:rgba(255, 255, 255, 0);width:33.3%;height:43%;line-height:40%;color:#fff;background:rgba(221, 221, 221, 0.5);text-align:center}.d-pad.svelte-1i2dl8q span.svelte-1i2dl8q:hover{background:#eee}.d-pad.svelte-1i2dl8q span.svelte-1i2dl8q:before{content:"";position:absolute;width:0;height:0;border-radius:5px;border-style:solid;transition:all 0.25s}.d-pad.svelte-1i2dl8q span.svelte-1i2dl8q:after{content:"";position:absolute;width:102%;height:78%;background:#fff;border-radius:20%}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q,.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q{width:43%;height:33%}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:after,.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:after{width:78%;height:102%}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q{top:0;left:50%;transform:translate(-50%, 0);border-radius:17% 17% 50% 50%}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:hover{background:linear-gradient(0deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:after{left:0;top:0;transform:translate(-100%, 0);border-top-left-radius:50%;pointer-events:none}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:before{top:40%;left:50%;transform:translate(-50%, -50%);border-width:0 13px 19px 13px;border-color:transparent transparent #aaa transparent}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:active:before{border-bottom-color:#333}.d-pad.svelte-1i2dl8q span.up.svelte-1i2dl8q:hover:before{top:35%}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q{bottom:0;left:50%;transform:translate(-50%, 0);border-radius:50% 50% 17% 17%}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:hover{background:linear-gradient(180deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:after{right:0;bottom:0;transform:translate(100%, 0);border-bottom-right-radius:50%;pointer-events:none}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:before{bottom:40%;left:50%;transform:translate(-50%, 50%);border-width:19px 13px 0px 13px;border-color:#aaa transparent transparent transparent}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:active:before{border-top-color:#333}.d-pad.svelte-1i2dl8q span.down.svelte-1i2dl8q:hover:before{bottom:35%}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q{top:50%;left:0;transform:translate(0, -50%);border-radius:17% 50% 50% 17%}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:hover{background:linear-gradient(-90deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:after{left:0;bottom:0;transform:translate(0, 100%);border-bottom-left-radius:50%;pointer-events:none}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:before{left:40%;top:50%;transform:translate(-50%, -50%);border-width:13px 19px 13px 0;border-color:transparent #aaa transparent transparent}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:active:before{border-right-color:#333}.d-pad.svelte-1i2dl8q span.left.svelte-1i2dl8q:hover:before{left:35%}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q{top:50%;right:0;transform:translate(0, -50%);border-radius:50% 17% 17% 50%}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:hover{background:linear-gradient(90deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:after{right:0;top:0;transform:translate(0, -100%);border-top-right-radius:50%;pointer-events:none}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:before{right:40%;top:50%;transform:translate(50%, -50%);border-width:13px 0 13px 19px;border-color:transparent transparent transparent #aaa}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:active:before{border-left-color:#333}.d-pad.svelte-1i2dl8q span.right.svelte-1i2dl8q:hover:before{right:35%}.outline.svelte-1i2dl8q .d-pad.svelte-1i2dl8q{border-radius:0}.outline.svelte-1i2dl8q .d-pad span.svelte-1i2dl8q{border:1px solid rgba(0, 0, 0, 0.1)}.outline.svelte-1i2dl8q .d-pad span.svelte-1i2dl8q:after{display:none}.outline.svelte-1i2dl8q .d-pad span.up.svelte-1i2dl8q:hover{background:linear-gradient(0deg, #fff 0%, #efefef 50%)}.outline.svelte-1i2dl8q .d-pad span.right.svelte-1i2dl8q:hover{background:linear-gradient(90deg, #fff 0%, #efefef 50%)}.outline.svelte-1i2dl8q .d-pad span.down.svelte-1i2dl8q:hover{background:linear-gradient(180deg, #fff 0%, #efefef 50%)}.outline.svelte-1i2dl8q .d-pad span.left.svelte-1i2dl8q:hover{background:linear-gradient(-90deg, #fff 0%, #efefef 50%)}.outline.svelte-1i2dl8q .d-pad span.up.svelte-1i2dl8q:before{border-bottom-color:rgba(0, 0, 0, 0.1)}.outline.svelte-1i2dl8q .d-pad span.right.svelte-1i2dl8q:before{border-left-color:rgba(0, 0, 0, 0.1)}.outline.svelte-1i2dl8q .d-pad span.down.svelte-1i2dl8q:before{border-top-color:rgba(0, 0, 0, 0.1)}.outline.svelte-1i2dl8q .d-pad span.left.svelte-1i2dl8q:before{border-right-color:rgba(0, 0, 0, 0.1)}.buttons-a-b.svelte-1i2dl8q.svelte-1i2dl8q{position:absolute;bottom:8dvh;right:8dvh;z-index:10;display:flex;flex-direction:column;align-content:space-between;align-items:center}.buttons-a-b.svelte-1i2dl8q button.svelte-1i2dl8q{width:7dvw;height:7dvw;border-radius:50%;border:1px solid #fff;background:rgba(221, 221, 221, 0.5);color:#aaa;font-size:3.5rem;font-weight:bold;text-align:center;line-height:10dvw;cursor:pointer;transition:all 0.25s;display:flex;align-content:center;justify-content:center;align-items:center}.buttons-a-b.svelte-1i2dl8q button.svelte-1i2dl8q:hover{background:#eee}.buttons-a-b.svelte-1i2dl8q .button-a.svelte-1i2dl8q{position:relative;right:6dvw}')}function ys(s){let e,t,i,n,r,l,o,h,p,d,c,u,f,b,k;return{c(){e=w("div"),t=w("nav"),i=w("span"),n=A(),r=w("span"),l=A(),o=w("span"),h=A(),p=w("span"),d=A(),c=w("div"),c.innerHTML='<button class="button-b svelte-1i2dl8q">B</button> <button class="button-a svelte-1i2dl8q">A</button>',u=A(),f=w("div"),f.innerHTML='<button class="button-start">start</button> <button class="button-select">select</button>',m(i,"class","up svelte-1i2dl8q"),m(r,"class","right svelte-1i2dl8q"),m(o,"class","down svelte-1i2dl8q"),m(p,"class","left svelte-1i2dl8q"),m(t,"class","d-pad svelte-1i2dl8q"),m(e,"class","set outline svelte-1i2dl8q"),m(c,"class","buttons-a-b svelte-1i2dl8q"),m(f,"class","buttons-start-select")},m(x,y){C(x,e,y),g(e,t),g(t,i),g(t,n),g(t,r),g(t,l),g(t,o),g(t,h),g(t,p),C(x,d,y),C(x,c,y),C(x,u,y),C(x,f,y),b||(k=[N(i,"pointerdown",s[5]("ArrowUp")),N(i,"pointerup",s[6]("ArrowUp")),N(r,"pointerdown",s[5]("ArrowRight")),N(r,"pointerup",s[6]("ArrowRight")),N(o,"pointerdown",s[5]("ArrowDown")),N(o,"pointerup",s[6]("ArrowDown")),N(p,"pointerdown",s[5]("ArrowLeft")),N(p,"pointerup",s[6]("ArrowLeft"))],b=!0)},p:F,i:F,o:F,d(x){x&&(q(e),q(d),q(c),q(u),q(f)),b=!1,ie(k)}}}function ks(s){let e,t,i,n,r;function l(d){s[10](d)}function o(d){s[11](d)}function h(d){s[12](d)}let p={};return s[0]!==void 0&&(p.opened=s[0]),s[4].battleState!==void 0&&(p.battleState=s[4].battleState),s[2]!==void 0&&(p.battleStart=s[2]),e=new gt({props:p}),D.push(()=>W(e,"opened",l)),D.push(()=>W(e,"battleState",o)),D.push(()=>W(e,"battleStart",h)),{c(){we(e.$$.fragment)},m(d,c){ae(e,d,c),r=!0},p(d,c){const u={};!t&&c[0]&1&&(t=!0,u.opened=d[0],U(()=>t=!1)),!i&&c[0]&16&&(i=!0,u.battleState=d[4].battleState,U(()=>i=!1)),!n&&c[0]&4&&(n=!0,u.battleStart=d[2],U(()=>n=!1)),e.$set(u)},i(d){r||(Z(e.$$.fragment,d),r=!0)},o(d){K(e.$$.fragment,d),r=!1},d(d){ce(e,d)}}}function _s(s){let e,t,i,n,r,l,o;const h=[ks,ys],p=[];function d(b,k){return b[4].initiated?0:1}e=d(s),t=p[e]=h[e](s);function c(b){s[13](b)}function u(b){s[14](b)}let f={};return s[1]!==void 0&&(f.menuOpened=s[1]),s[3]!==void 0&&(f.player=s[3]),n=new bt({props:f}),D.push(()=>W(n,"menuOpened",c)),D.push(()=>W(n,"player",u)),{c(){t.c(),i=A(),we(n.$$.fragment)},m(b,k){p[e].m(b,k),C(b,i,k),ae(n,b,k),o=!0},p(b,k){let x=e;e=d(b),e===x?p[e].p(b,k):(Fe(),K(p[x],1,1,()=>{p[x]=null}),Te(),t=p[e],t?t.p(b,k):(t=p[e]=h[e](b),t.c()),Z(t,1),t.m(i.parentNode,i));const y={};!r&&k[0]&2&&(r=!0,y.menuOpened=b[1],U(()=>r=!1)),!l&&k[0]&8&&(l=!0,y.player=b[3],U(()=>l=!1)),n.$set(y)},i(b){o||(Z(t),Z(n.$$.fragment,b),o=!0)},o(b){K(t),K(n.$$.fragment,b),o=!1},d(b){b&&q(i),p[e].d(b),ce(n,b)}}}let Ce=3;function xs(s,e,t){let{opened:i=!1}=e,{menuOpened:n=!1}=e,{battleStart:r=!1}=e,{pokedex:l}=e,{currentMap:o=re}=e,{canvas:h}=e;const p=h.getContext("2d");window.innerHeight>window.innerWidth?(h.width=window.innerWidth,h.height=window.innerWidth):(h.width=window.innerWidth,h.height=window.innerHeight);let d=16*Ce,{character:c}=e;c.positionOnMap=new O(re.playerInitialPosition.x,re.playerInitialPosition.y),c.positionOnScreen=new O(re.playerInitialPosition.x*d,re.playerInitialPosition.y*d);function u(){window.innerHeight>window.innerWidth?(t(7,h.width=window.innerWidth,h),t(7,h.height=window.innerWidth,h)):(t(7,h.width=window.innerWidth,h),t(7,h.height=window.innerHeight,h)),d=16*Ce,t(3,c.positionOnScreen=new O(re.playerInitialPosition.x*d,re.playerInitialPosition.y*d),c)}window.addEventListener("resize",()=>{u()}),window.addEventListener("orientationchange",()=>{u()});let{battle:f={initiated:!1,frameElapsed:0}}=e,b=0,k=new O(0,0),x=new O(0,0),y={fps:12,then:Date.now(),fpsInterval:1e3/12,id:0},S={fps:12,then:Date.now(),fpsInterval:1e3/12,goDown:!0,id:0};const $=new O(0,0);function H(){y.id=window.requestAnimationFrame(H);let _=Date.now(),V=_-y.then;if(V>y.fpsInterval){y.then=_-V%y.fpsInterval,p.fillStyle="black",p.fillRect(0,0,h.width,h.height),o.drawBackground(p,$,Ce),c.draw(p,$,Ce,o.background.width,o.background.height);let j=!0;if(t(3,c.moving=!1,c),f.initiated)return;if(!n){if((P.down.pressed||P.up.pressed||P.left.pressed||P.right.pressed)&&o.hasBattleZoneAt(c.positionOnMap)&&Math.random()<.1){t(3,c.frames.val=0,c);let Se=o.randomMonster(l);window.cancelAnimationFrame(y.id),v(Se)}P.down.pressed&&te.key==="ArrowDown"&&(o.hasBoundaryAt(new O(c.positionOnMap.x,c.positionOnMap.y+1))&&(j=!1),t(3,c.moving=!0,c),t(3,c.direction="down",c),j&&$.y++),P.up.pressed&&te.key==="ArrowUp"&&(o.hasBoundaryAt(new O(c.positionOnMap.x,c.positionOnMap.y-1))&&(j=!1),t(3,c.moving=!0,c),t(3,c.direction="up",c),j&&$.y--),P.left.pressed&&te.key==="ArrowLeft"&&(o.hasBoundaryAt(new O(c.positionOnMap.x-1,c.positionOnMap.y))&&(j=!1),t(3,c.moving=!0,c),t(3,c.direction="left",c),j&&$.x--),P.right.pressed&&te.key==="ArrowRight"&&(o.hasBoundaryAt(new O(c.positionOnMap.x+1,c.positionOnMap.y))&&(j=!1),t(3,c.moving=!0,c),t(3,c.direction="right",c),j&&$.x++),c.updatePosition(o.playerInitialPosition,$)}}}function T(){var j,Se,je,Ne,Xe,Ue;S.id=window.requestAnimationFrame(T);let _=Date.now(),V=_-S.then;if(V>S.fpsInterval){if(!f.initiated)return;S.then=_-V%S.fpsInterval,t(4,f.frameElapsed++,f),p.fillStyle="black",p.fillRect(0,0,h.width,h.height),Ut.draw(p,h),(Se=(j=f.battleState)==null?void 0:j.opponentCurrentMonster)==null||Se.draw(p,"front",50,0,b),(Ne=(je=f.battleState)==null?void 0:je.playerCurrentMonster)==null||Ne.draw(p,"back",0,0,b),(Ue=(Xe=f.battleState)==null?void 0:Xe.opponentCurrentMonster)!=null&&Ue.position&&(S.goDown=f.frameElapsed<=10,S.goDown?b++:b--,t(4,f.battleState.opponentCurrentMonster.position.y=k.y-b,f),t(4,f.battleState.playerCurrentMonster.position.y=x.y+b,f),f.frameElapsed>20&&t(4,f.frameElapsed=0,f))}}function v(_){ne(),t(4,f.frameElapsed=0,f),t(4,f.initiated=!0,f),t(4,f.startDate=new Date,f),t(4,f.battleState=new jt(c,_,h),f),k={...f.battleState.opponentCurrentMonster.position},x={...f.battleState.playerCurrentMonster.position},B(),t(4,f.battleState.onClose=()=>{E()},f),t(2,r=!0),setTimeout(()=>{t(2,r=!1),t(0,i=!0),T()},2e3)}function E(_){window.cancelAnimationFrame(S.id),t(4,f.battleState=void 0,f),t(4,f.initiated=!1,f),t(4,f.startDate=void 0,f),t(2,r=!1),t(0,i=!1),t(1,n=!1),H(),I()}function I(){window.addEventListener("keydown",Ye()),window.addEventListener("keyup",Ge(c)),window.addEventListener("keydown",G)}function B(){window.removeEventListener("keydown",Ye()),window.removeEventListener("keyup",Ge(c)),window.removeEventListener("keydown",G)}function G(_){_.key==="Escape"&&t(1,n=!n)}function Y(_){return V=>{switch(V.preventDefault(),_){case"ArrowUp":P.up.pressed=!0;break;case"ArrowDown":P.down.pressed=!0;break;case"ArrowLeft":P.left.pressed=!0;break;case"ArrowRight":P.right.pressed=!0;break}te.key=_}}function ee(_){return V=>{switch(_){case"ArrowDown":P.down.pressed=!1;break;case"ArrowUp":P.up.pressed=!1;break;case"ArrowRight":P.right.pressed=!1;break;case"ArrowLeft":P.left.pressed=!1;break}}}function ne(){P.down.pressed=!1,P.up.pressed=!1,P.right.pressed=!1,P.left.pressed=!1,t(3,c.moving=!1,c)}I(),H();function R(_){i=_,t(0,i)}function Q(_){s.$$.not_equal(f.battleState,_)&&(f.battleState=_,t(4,f))}function ke(_){r=_,t(2,r)}function _e(_){n=_,t(1,n)}function xe(_){c=_,t(3,c)}return s.$$set=_=>{"opened"in _&&t(0,i=_.opened),"menuOpened"in _&&t(1,n=_.menuOpened),"battleStart"in _&&t(2,r=_.battleStart),"pokedex"in _&&t(8,l=_.pokedex),"currentMap"in _&&t(9,o=_.currentMap),"canvas"in _&&t(7,h=_.canvas),"character"in _&&t(3,c=_.character),"battle"in _&&t(4,f=_.battle)},[i,n,r,c,f,Y,ee,h,l,o,R,Q,ke,_e,xe]}class wt extends fe{constructor(e){super(),pe(this,e,xs,_s,de,{opened:0,menuOpened:1,battleStart:2,pokedex:8,currentMap:9,canvas:7,character:3,battle:4},ws,[-1,-1])}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),L()}get menuOpened(){return this.$$.ctx[1]}set menuOpened(e){this.$$set({menuOpened:e}),L()}get battleStart(){return this.$$.ctx[2]}set battleStart(e){this.$$set({battleStart:e}),L()}get pokedex(){return this.$$.ctx[8]}set pokedex(e){this.$$set({pokedex:e}),L()}get currentMap(){return this.$$.ctx[9]}set currentMap(e){this.$$set({currentMap:e}),L()}get canvas(){return this.$$.ctx[7]}set canvas(e){this.$$set({canvas:e}),L()}get character(){return this.$$.ctx[3]}set character(e){this.$$set({character:e}),L()}get battle(){return this.$$.ctx[4]}set battle(e){this.$$set({battle:e}),L()}}ue(wt,{opened:{type:"Boolean"},menuOpened:{type:"Boolean"},battleStart:{type:"Boolean"},pokedex:{},currentMap:{},canvas:{},character:{},battle:{}},[],[],!0);function Ss(s){he(s,"svelte-1bs37g6",'#canvas-wrapper.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{width:100dvw;height:100dvh;overflow:hidden;position:absolute;top:0;left:0;-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0)}#canvas-wrapper.svelte-1bs37g6 canvas.svelte-1bs37g6.svelte-1bs37g6{position:absolute;top:0;left:0;width:100dvw;height:100dvh}.loading.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100vh}.loading.ready.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{opacity:0.2}.u-swing.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{animation:svelte-1bs37g6-swing 3000ms infinite}@keyframes svelte-1bs37g6-swing{20%{-webkit-transform:rotate(15deg);transform:rotate(15deg)}40%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg)}60%{-webkit-transform:rotate(5deg);transform:rotate(5deg)}80%{-webkit-transform:rotate(-5deg);transform:rotate(-5deg)}to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{width:120px;height:120px;border-radius:120px;border:solid 4.8px black;position:relative;background:linear-gradient(to bottom, #EEEEEE 0%, #FFFFFF 100%);margin:10px auto}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:before,.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:after{content:"";display:block}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6,.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:before,.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:after{transition:all 600ms cubic-bezier(0.67, 0.4, 0.36, 0.75)}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:before{width:120px;height:57.6px;border-bottom:solid 4.8px black;border-radius:60px 60px 0 0;background:linear-gradient(to bottom, #d10000 0%, #ff0000 50%)}.o-pokeball.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6:after{content:"";width:24px;height:24px;background:linear-gradient(to bottom, #fff 0%, #ccc 100%);position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);border-radius:50%;box-shadow:0 0 0 2.4px black, 0 0 0 4.8px #ddd, 0 0 0 8.5714285714px black, 0 0 12px 7.0588235294px rgba(0, 0, 0, 0.4)}.buttons.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{display:flex;justify-content:center;align-items:center;flex-direction:column;gap:120px;position:absolute;left:calc(50dvw - 100px);top:calc(50dvh - 40px)}.buttons.svelte-1bs37g6 .letsgo.svelte-1bs37g6.svelte-1bs37g6{position:relative}.buttons.svelte-1bs37g6 .letsgo .pika.svelte-1bs37g6.svelte-1bs37g6{width:200px;height:200px;position:absolute;bottom:0;left:0;z-index:1}.buttons.svelte-1bs37g6 .letsgo .start-btn.svelte-1bs37g6.svelte-1bs37g6{width:200px;height:80px;border-radius:16px;position:relative;z-index:2;font-family:pokemon, serif;font-size:36px;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;cursor:pointer}.buttons.svelte-1bs37g6 .letsgo .start-btn.svelte-1bs37g6.svelte-1bs37g6:hover{color:#fff;box-shadow:inset #009688 0 0 0 5px;text-shadow:none;font-weight:bold;background:#009688}.buttons.svelte-1bs37g6 .letsgo .start-btn.svelte-1bs37g6:hover+.pika.svelte-1bs37g6{animation:svelte-1bs37g6-bounce 1s infinite}@keyframes svelte-1bs37g6-bounce{0%,20%,53%,80%,to{-webkit-animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-transform:translate3d(0, -30px, 0);transform:translate3d(0, -30px, 0)}40%,43%,70%{-webkit-animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06);animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06)}70%{-webkit-transform:translate3d(0, -15px, 0);transform:translate3d(0, -15px, 0)}90%{-webkit-transform:translate3d(0, -4px, 0);transform:translate3d(0, -4px, 0)}}#preview.svelte-1bs37g6.svelte-1bs37g6.svelte-1bs37g6{display:flex;flex-wrap:wrap;justify-content:center}')}function Ms(s){let e,t,i,n=!s[1]&&nt(s),r=s[1]&&rt(s);return{c(){e=w("div"),n&&n.c(),t=A(),r&&r.c(),i=qt(),m(e,"class","loading svelte-1bs37g6"),M(e,"ready",s[1])},m(l,o){C(l,e,o),n&&n.m(e,null),C(l,t,o),r&&r.m(l,o),C(l,i,o)},p(l,o){l[1]?n&&(n.d(1),n=null):n?n.p(l,o):(n=nt(l),n.c(),n.m(e,null)),o&2&&M(e,"ready",l[1]),l[1]?r?r.p(l,o):(r=rt(l),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},i:F,o:F,d(l){l&&(q(e),q(t),q(i)),n&&n.d(),r&&r.d(l)}}}function qs(s){let e,t,i,n,r;function l(d){s[10](d)}function o(d){s[11](d)}function h(d){s[12](d)}let p={};return s[2]!==void 0&&(p.pokedex=s[2]),s[0]!==void 0&&(p.canvas=s[0]),s[4]!==void 0&&(p.character=s[4]),e=new wt({props:p}),D.push(()=>W(e,"pokedex",l)),D.push(()=>W(e,"canvas",o)),D.push(()=>W(e,"character",h)),{c(){we(e.$$.fragment)},m(d,c){ae(e,d,c),r=!0},p(d,c){const u={};!t&&c&4&&(t=!0,u.pokedex=d[2],U(()=>t=!1)),!i&&c&1&&(i=!0,u.canvas=d[0],U(()=>i=!1)),!n&&c&16&&(n=!0,u.character=d[4],U(()=>n=!1)),e.$set(u)},i(d){r||(Z(e.$$.fragment,d),r=!0)},o(d){K(e.$$.fragment,d),r=!1},d(d){ce(e,d)}}}function nt(s){let e,t,i,n,r;return{c(){e=w("div"),t=A(),i=w("span"),i.textContent=`Gotta catch em all... ${s[8]}`,n=A(),r=w("div"),r.innerHTML="",m(e,"class","o-pokeball c-loader u-swing svelte-1bs37g6"),m(r,"id","preview"),m(r,"class","svelte-1bs37g6")},m(l,o){C(l,e,o),C(l,t,o),C(l,i,o),C(l,n,o),C(l,r,o),s[13](r)},p:F,d(l){l&&(q(e),q(t),q(i),q(n),q(r)),s[13](null)}}}function rt(s){let e,t,i,n,r,l,o,h,p,d=s[7]&&Cs(s);return{c(){e=w("div"),d&&d.c(),t=A(),i=w("div"),n=w("button"),n.textContent="New game!",r=A(),l=w("img"),m(n,"class","start-btn svelte-1bs37g6"),m(l,"class","pika svelte-1bs37g6"),m(l,"alt","pikachu"),at(l.src,o="src/assets/monsters/heartgold-soulsilver/25.png")||m(l,"src",o),m(i,"class","letsgo svelte-1bs37g6"),m(e,"class","buttons svelte-1bs37g6")},m(c,u){C(c,e,u),d&&d.m(e,null),g(e,t),g(e,i),g(i,n),g(i,r),g(i,l),h||(p=N(n,"click",s[15]),h=!0)},p(c,u){c[7]&&d.p(c,u)},d(c){c&&q(e),d&&d.d(),h=!1,p()}}}function Cs(s){let e,t,i,n,r,l,o;return{c(){e=w("div"),t=w("button"),t.textContent="Continue!",i=A(),n=w("img"),m(t,"class","start-btn svelte-1bs37g6"),m(n,"class","pika svelte-1bs37g6"),m(n,"alt","Evoli"),at(n.src,r="src/assets/monsters/heartgold-soulsilver/133.png")||m(n,"src",r),m(e,"class","letsgo svelte-1bs37g6")},m(h,p){C(h,e,p),g(e,t),g(e,i),g(e,n),l||(o=N(t,"click",s[14]),l=!0)},p:F,d(h){h&&q(e),l=!1,o()}}}function As(s){let e,t,i,n,r,l;const o=[qs,Ms],h=[];function p(d,c){return d[1]&&d[5]?0:1}return t=p(s),i=h[t]=o[t](s),{c(){e=w("div"),i.c(),n=A(),r=w("canvas"),m(r,"class","svelte-1bs37g6"),m(e,"id","canvas-wrapper"),m(e,"class","svelte-1bs37g6")},m(d,c){C(d,e,c),h[t].m(e,null),g(e,n),g(e,r),s[16](r),s[17](e),l=!0},p(d,[c]){let u=t;t=p(d),t===u?h[t].p(d,c):(Fe(),K(h[u],1,1,()=>{h[u]=null}),Te(),i=h[t],i?i.p(d,c):(i=h[t]=o[t](d),i.c()),Z(i,1),i.m(e,n))},i(d){l||(Z(i),l=!0)},o(d){K(i),l=!1},d(d){d&&q(e),h[t].d(),s[16](null),s[17](null)}}}function $s(){let s=window.document,e=s.documentElement,t=e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen,i=s.exitFullscreen||s.mozCancelFullScreen||s.webkitExitFullscreen||s.msExitFullscreen;!s.fullscreenElement&&!s.mozFullScreenElement&&!s.webkitFullscreenElement&&!s.msFullscreenElement?t.call(e):i.call(s)}function Es(s,e,t){let{canvas:i}=e,n,r,{ready:l=!1}=e,o=!1,h,p,d,{pokedex:c=new Bt}=e;fetch("src/assets/data/final/pokedex.json").then(v=>v.json()).then(v=>{c.importFromJson(v);let E=5,I=Date.now();for(;!c.ready&&Date.now()-I<E*1e3;)console.log("loading dex...");c.ready||(console.error("Pokedex not ready after "+E+" seconds"),window.location.reload()),u()});function u(){let v=new Image;v.src="src/assets/sprites/hero_male_front.png";let E=new Image;E.src="src/assets/sprites/hero_male_back.png";let I=new Image;I.src="src/assets/sprites/hero_male_left.png";let B=new Image;B.src="src/assets/sprites/hero_male_right.png";let G=new Image;G.src="src/assets/sprites/hero_male_back.png",Promise.all(Array.from([v,E,I,B,G].filter(Y=>!Y.complete)).map(Y=>new Promise(ee=>{Y.onload=Y.onerror=ee}))).then(()=>{var ee,ne;let Y=(ne=(ee=c.findById(251))==null?void 0:ee.result)==null?void 0:ne.instanciate(5);if(!Y)throw new Error("Could not find pokemon with id 251");Y.isShiny=!0,t(4,r=new dt("Kaiser","MALE",new Lt(v,E,I,B,G),[Y])),t(1,l=!0)})}function f(){$s(),t(5,o=!0)}function b(v){c=v,t(2,c)}function k(v){i=v,t(0,i)}function x(v){r=v,t(4,r)}function y(v){D[v?"unshift":"push"](()=>{d=v,t(6,d)})}const S=()=>f(),$=()=>f();function H(v){D[v?"unshift":"push"](()=>{i=v,t(0,i)})}function T(v){D[v?"unshift":"push"](()=>{n=v,t(3,n)})}return s.$$set=v=>{"canvas"in v&&t(0,i=v.canvas),"ready"in v&&t(1,l=v.ready),"pokedex"in v&&t(2,c=v.pokedex)},[i,l,c,n,r,o,d,h,p,f,b,k,x,y,S,$,H,T]}class Is extends fe{constructor(e){super(),pe(this,e,Es,As,de,{canvas:0,ready:1,pokedex:2},Ss)}get canvas(){return this.$$.ctx[0]}set canvas(e){this.$$set({canvas:e}),L()}get ready(){return this.$$.ctx[1]}set ready(e){this.$$set({ready:e}),L()}get pokedex(){return this.$$.ctx[2]}set pokedex(e){this.$$set({pokedex:e}),L()}}customElements.define("open-mon",ue(Is,{canvas:{},ready:{type:"Boolean"},pokedex:{}},[],[],!0));
