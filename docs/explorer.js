var ut=Object.defineProperty;var ft=(s,e,t)=>e in s?ut(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var d=(s,e,t)=>(ft(s,typeof e!="symbol"?e+"":e,t),t);function z(){}function We(s){return s()}function Te(){return Object.create(null)}function te(s){s.forEach(We)}function Ye(s){return typeof s=="function"}function oe(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let xe;function Qe(s,e){return s===e?!0:(xe||(xe=document.createElement("a")),xe.href=e,s===xe.href)}function pt(s){return Object.keys(s).length===0}function h(s,e){s.appendChild(e)}function ae(s,e,t){const n=ht(s);if(!n.getElementById(e)){const r=m("style");r.id=e,r.textContent=t,bt(n,r)}}function ht(s){if(!s)return document;const e=s.getRootNode?s.getRootNode():s.ownerDocument;return e&&e.host?e:s.ownerDocument}function bt(s,e){return h(s.head||s,e),e.sheet}function H(s,e,t){s.insertBefore(e,t||null)}function O(s){s.parentNode&&s.parentNode.removeChild(s)}function vt(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function m(s){return document.createElement(s)}function A(s){return document.createTextNode(s)}function E(){return A(" ")}function gt(){return A("")}function U(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function v(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function mt(s){return Array.from(s.childNodes)}function F(s,e){e=""+e,s.data!==e&&(s.data=e)}function Q(s,e,t,n){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,n?"important":"")}function C(s,e,t){s.classList.toggle(e,!!t)}function kt(s){const e={};return s.childNodes.forEach(t=>{e[t.slot||"default"]=!0}),e}let He;function ye(s){He=s}const fe=[],N=[];let pe=[];const Ee=[],yt=Promise.resolve();let Ie=!1;function wt(){Ie||(Ie=!0,yt.then(L))}function Oe(s){pe.push(s)}function V(s){Ee.push(s)}const Ce=new Set;let ue=0;function L(){if(ue!==0)return;const s=He;do{try{for(;ue<fe.length;){const e=fe[ue];ue++,ye(e),_t(e.$$)}}catch(e){throw fe.length=0,ue=0,e}for(ye(null),fe.length=0,ue=0;N.length;)N.pop()();for(let e=0;e<pe.length;e+=1){const t=pe[e];Ce.has(t)||(Ce.add(t),t())}pe.length=0}while(fe.length);for(;Ee.length;)Ee.pop()();Ie=!1,Ce.clear(),ye(s)}function _t(s){if(s.fragment!==null){s.update(),te(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(Oe)}}function jt(s){const e=[],t=[];pe.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),pe=e}const Se=new Set;let ne;function Le(){ne={r:0,c:[],p:ne}}function De(){ne.r||te(ne.c),ne=ne.p}function Z(s,e){s&&s.i&&(Se.delete(s),s.i(e))}function G(s,e,t,n){if(s&&s.o){if(Se.has(s))return;Se.add(s),ne.c.push(()=>{Se.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}function Fe(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function X(s,e,t){const n=s.$$.props[e];n!==void 0&&(s.$$.bound[n]=t,t(s.$$.ctx[n]))}function he(s){s&&s.c()}function re(s,e,t){const{fragment:n,after_update:r}=s.$$;n&&n.m(e,t),Oe(()=>{const o=s.$$.on_mount.map(We).filter(Ye);s.$$.on_destroy?s.$$.on_destroy.push(...o):te(o),s.$$.on_mount=[]}),r.forEach(Oe)}function ie(s,e){const t=s.$$;t.fragment!==null&&(jt(t.after_update),te(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function xt(s,e){s.$$.dirty[0]===-1&&(fe.push(s),wt(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function le(s,e,t,n,r,o,i=null,l=[-1]){const u=He;ye(s);const a=s.$$={fragment:null,ctx:[],props:o,update:z,not_equal:r,bound:Te(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Te(),dirty:l,skip_bound:!1,root:e.target||u.$$.root};i&&i(a.root);let c=!1;if(a.ctx=t?t(s,e.props||{},(f,p,...y)=>{const b=y.length?y[0]:p;return a.ctx&&r(a.ctx[f],a.ctx[f]=b)&&(!a.skip_bound&&a.bound[f]&&a.bound[f](b),c&&xt(s,f)),p}):[],a.update(),c=!0,te(a.before_update),a.fragment=n?n(a.ctx):!1,e.target){if(e.hydrate){const f=mt(e.target);a.fragment&&a.fragment.l(f),f.forEach(O)}else a.fragment&&a.fragment.c();e.intro&&Z(s.$$.fragment),re(s,e.target,e.anchor),L()}ye(u)}let et;typeof HTMLElement=="function"&&(et=class extends HTMLElement{constructor(e,t,n){super();d(this,"$$ctor");d(this,"$$s");d(this,"$$c");d(this,"$$cn",!1);d(this,"$$d",{});d(this,"$$r",!1);d(this,"$$p_d",{});d(this,"$$l",{});d(this,"$$l_u",new Map);this.$$ctor=e,this.$$s=t,n&&this.attachShadow({mode:"open"})}addEventListener(e,t,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){const r=this.$$c.$on(e,t);this.$$l_u.set(t,r)}super.addEventListener(e,t,n)}removeEventListener(e,t,n){if(super.removeEventListener(e,t,n),this.$$c){const r=this.$$l_u.get(t);r&&(r(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(i){return()=>{let l;return{c:function(){l=m("slot"),i!=="default"&&v(l,"name",i)},m:function(c,f){H(c,l,f)},d:function(c){c&&O(l)}}}};var e=t;if(await Promise.resolve(),!this.$$cn)return;const n={},r=kt(this);for(const i of this.$$s)i in r&&(n[i]=[t(i)]);for(const i of this.attributes){const l=this.$$g_p(i.name);l in this.$$d||(this.$$d[l]=$e(l,i.value,this.$$p_d,"toProp"))}for(const i in this.$$p_d)!(i in this.$$d)&&this[i]!==void 0&&(this.$$d[i]=this[i],delete this[i]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:n,$$scope:{ctx:[]}}});const o=()=>{this.$$r=!0;for(const i in this.$$p_d)if(this.$$d[i]=this.$$c.$$.ctx[this.$$c.$$.props[i]],this.$$p_d[i].reflect){const l=$e(i,this.$$d[i],this.$$p_d,"toAttribute");l==null?this.removeAttribute(this.$$p_d[i].attribute||i):this.setAttribute(this.$$p_d[i].attribute||i,l)}this.$$r=!1};this.$$c.$$.after_update.push(o),o();for(const i in this.$$l)for(const l of this.$$l[i]){const u=this.$$c.$on(i,l);this.$$l_u.set(l,u)}this.$$l={}}}attributeChangedCallback(e,t,n){var r;this.$$r||(e=this.$$g_p(e),this.$$d[e]=$e(e,n,this.$$p_d,"toProp"),(r=this.$$c)==null||r.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e)||e}});function $e(s,e,t,n){var o;const r=(o=t[s])==null?void 0:o.type;if(e=r==="Boolean"&&typeof e!="boolean"?e!=null:e,!n||!t[s])return e;if(n==="toAttribute")switch(r){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(r){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function ce(s,e,t,n,r,o){let i=class extends et{constructor(){super(s,t,r),this.$$p_d=e}static get observedAttributes(){return Object.keys(e).map(l=>(e[l].attribute||l).toLowerCase())}};return Object.keys(e).forEach(l=>{Object.defineProperty(i.prototype,l,{get(){return this.$$c&&l in this.$$c?this.$$c[l]:this.$$d[l]},set(u){var a;u=$e(l,u,e),this.$$d[l]=u,(a=this.$$c)==null||a.$set({[l]:u})}})}),n.forEach(l=>{Object.defineProperty(i.prototype,l,{get(){var u;return(u=this.$$c)==null?void 0:u[l]}})}),o&&(i=o(i)),s.element=i,i}class de{constructor(){d(this,"$$");d(this,"$$set")}$destroy(){ie(this,1),this.$destroy=z}$on(e,t){if(!Ye(t))return z;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const r=n.indexOf(t);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!pt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const St="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(St);class T{constructor(e,t){d(this,"x");d(this,"y");this.x=e,this.y=t}}class tt{constructor(e,t,n,r=[]){d(this,"name");d(this,"gender");d(this,"sprites");d(this,"monsters");d(this,"bag",[]);d(this,"lvl",1);d(this,"moving",!1);d(this,"direction","down");d(this,"position");d(this,"frames");d(this,"spriteScale",1);this.name=e,this.gender=t,this.sprites=n,this.monsters=r,this.frames={max:3,val:0,elapsed:0},this.position=new T(0,0)}get sprite(){return this.sprites[this.direction]}draw(e){let t=this.sprite||this.sprites.down;e.drawImage(t,this.frames.val*(t.width/this.frames.max),0,t.width/this.frames.max,t.height,this.position.x,this.position.y,t.width/this.frames.max*3,t.height*3),this.moving&&(this.frames.max>1&&(this.frames.elapsed+=1),this.frames.elapsed%2===0&&(this.frames.val+=1,this.frames.val>this.frames.max-1&&(this.frames.val=0)))}}class $t{constructor(e,t,n,r,o){d(this,"down");d(this,"up");d(this,"left");d(this,"right");d(this,"battle");d(this,"width",80);d(this,"height",80);this.down=e,this.up=t,this.left=n,this.right=r,this.battle=o}}const I={up:{pressed:!1},down:{pressed:!1},left:{pressed:!1},right:{pressed:!1}};let W={key:""};function Ne(){return s=>{switch(s.key){case"ArrowDown":I.down.pressed=!1;break;case"ArrowUp":I.up.pressed=!1;break;case"ArrowRight":I.right.pressed=!1;break;case"ArrowLeft":I.left.pressed=!1;break}}}function ze(){return s=>{switch(s.key){case"ArrowDown":W.key="ArrowDown",I.down.pressed=!0;break;case"ArrowUp":W.key="ArrowUp",I.up.pressed=!0;break;case"ArrowRight":W.key="ArrowRight",I.right.pressed=!0;break;case"ArrowLeft":W.key="ArrowLeft",I.left.pressed=!0;break}}}class be{constructor(e,t,n,r,o,i,l,u,a,c=new Y(1,1,1,1,1,1),f=new Y(0,0,0,0,0,0)){d(this,"id");d(this,"name");d(this,"types");d(this,"abilities");d(this,"baseStats");d(this,"ivs");d(this,"evs");d(this,"evolution");d(this,"currentStats",new Y);d(this,"currentHp",1);d(this,"currentXp",0);d(this,"xpToNextLevel",0);d(this,"currentAbility");d(this,"level",5);d(this,"evsToDistribute",0);d(this,"fainted");d(this,"moves");d(this,"isShiny",!1);d(this,"sprites");d(this,"position");d(this,"currentImage");d(this,"currentImage2");d(this,"height",0);d(this,"spriteScale",1);d(this,"frames",{max:2,val:0,elapsed:0});this.id=e,this.name=t,this.types=n,this.abilities=r,this.baseStats=o,this.evolution=i,this.fainted=!1,this.ivs=c,this.evs=f,this.updateCurrentStats(),this.currentHp=this.currentStats.HP,this.currentAbility=u||this.abilities[0],this.moves=a||[],this.sprites=l,this.position=new T(0,0)}get totalEvs(){return this.evs.attack+this.evs.defense+this.evs.specialAttack+this.evs.specialDefense+this.evs.speed+this.evs.HP}selectMove(e,t){let n=Math.floor(Math.random()*this.moves.length),r=this.moves[n];return e==="Easy"&&t&&((t==null?void 0:t.types.length)===2?this.moves.find(i=>i.type===t.types[0]&&i.power>0):this.moves.find(i=>(i.type===t.types[0]||i.type===t.types[1])&&i.power>0)),r}levelUp(){let e=this.currentStats.HP;this.level+=1,console.log("from:",this.currentStats),this.updateCurrentStats(),console.log("to:",this.currentStats),e=this.currentStats.HP-e,this.currentHp+=e,this.currentXp=0,this.checkForNewMoves(),this.checkForEvolutions()}addXp(e,t){if(this.evsToDistribute+=this.totalEvs+t<=255?t:this.totalEvs+t-255,!(this.level>=100)){if(this.xpToNextLevel<e){const n=e-this.xpToNextLevel,r=e-n;this.currentXp+=r}else this.currentXp+=e;this.currentXp>=this.xpToNextLevel&&this.levelUp()}}draw(e,t="front"){var o;this.isShiny&&(t="shiny"),this.currentImage||(this.currentImage=new Image,this.currentImage.src=this.sprites[t]),this.currentImage2||(this.currentImage2=new Image,this.currentImage2.src=this.sprites.front2),this.frames.elapsed>=100&&(this.frames.elapsed=0);let n=t==="front"&&this.currentImage.complete&&((o=this.currentImage2)==null?void 0:o.complete)||t!=="front"&&this.currentImage.complete,r=t!=="front"?this.currentImage:this.frames.elapsed<100?this.currentImage:this.currentImage2;n&&(this.frames.elapsed++,e.drawImage(r,0,0,this.sprites.width,this.sprites.height,this.position.x,this.position.y,this.sprites.width*this.spriteScale*2.5,this.sprites.height*this.spriteScale*2.5))}checkForNewMoves(){}checkForEvolutions(){this.evolution&&this.level>=this.evolution.level&&this.evolve()}evolve(){this.id++;const t=(localStorage.getItem("pokedex")&&JSON.parse(localStorage.getItem("pokedex")||"[]")||[]).find(n=>n.id===this.id);t&&(Object.setPrototypeOf(t,be.prototype),this.baseStats=t.baseStats,this.updateCurrentStats(),this.sprites=t.sprites,this.currentImage=void 0,this.currentImage2=void 0,this.spriteScale=t.spriteScale,this.height=t.height)}updateCurrentStats(){this.currentStats=this.fromBaseStats()}addEvs(e){if(e){let t=this.totalEvs;this.evs.HP+=this.evs.HP+e.HP<=255&&t+e.HP<512?e.HP:0,this.evs.attack+=this.evs.attack+e.attack<=255&&t+e.attack<512?e.attack:0,this.evs.defense+=this.evs.defense+e.defense<=255&&t+e.defense<512?e.defense:0,this.evs.specialAttack+=this.evs.specialAttack+e.specialAttack<=255&&t+e.specialAttack<512?e.specialAttack:0,this.evs.specialDefense+=this.evs.specialDefense+e.specialDefense<=255&&t+e.specialDefense<512?e.specialDefense:0,this.evs.speed+=this.evs.speed+e.speed<=255&&t+e.speed<512?e.speed:0}}fromBaseStats(){return new Y(Math.floor((this.ivs.HP+this.baseStats.HP*2+this.evs.HP/4)*this.level/100+10+this.level),Math.floor((this.ivs.attack+this.baseStats.attack*2+this.evs.attack/4)*this.level/100+5),Math.floor((this.ivs.defense+this.baseStats.defense*2+this.evs.defense/4)*this.level/100+5),Math.floor((this.ivs.specialAttack+this.baseStats.specialAttack*2+this.evs.specialAttack/4)*this.level/100+5),Math.floor((this.ivs.specialDefense+this.baseStats.specialDefense*2+this.evs.specialDefense/4)*this.level/100+5),Math.floor((this.ivs.speed+this.baseStats.speed*2+this.evs.speed/4)*this.level/100+5))}}class Y{constructor(e=0,t=0,n=0,r=0,o=0,i=0){d(this,"HP");d(this,"attack");d(this,"defense");d(this,"specialAttack");d(this,"specialDefense");d(this,"speed");this.HP=e,this.attack=t,this.defense=n,this.specialAttack=r,this.specialDefense=o,this.speed=i}}class Mt{constructor(e,t,n,r){d(this,"front");d(this,"front2");d(this,"back");d(this,"shiny");d(this,"width",80);d(this,"height",80);this.front=e,this.front2=t,this.back=n,this.shiny=r}}class ke{constructor(e,t,n,r,o,i,l,u,a,c){d(this,"name");d(this,"type");d(this,"category");d(this,"power");d(this,"accuracy");d(this,"pp");d(this,"currentPp");d(this,"priority");d(this,"effect");d(this,"effectChance");d(this,"description");this.name=e,this.type=t,this.category=n,this.power=r,this.accuracy=o,this.pp=i,this.currentPp=i,this.priority=l,this.effect=u,this.effectChance=a,this.description=c}}class Ct{constructor(e,t,n){d(this,"player");d(this,"playerCurrentMonster");d(this,"opponent");d(this,"opponentCurrentMonster");d(this,"isPlayerTurn");d(this,"turnStack");d(this,"initialOpponentPosition");d(this,"initialAllyPosition");d(this,"escapeAttempts",0);d(this,"onClose",()=>{});d(this,"currentMessage","What will you do ?");d(this,"sleep",e=>new Promise(t=>setTimeout(t,e)));var r,o;this.player=e,this.opponent=t,this.playerCurrentMonster=e.monsters[0],this.opponentCurrentMonster=this.wild?t:t.monsters[0],this.turnStack=[],this.initialOpponentPosition=new T(n.width/4*3-(t==null?void 0:t.sprites.width)*2.5*(t==null?void 0:t.spriteScale)/2,n.height/2-(t==null?void 0:t.sprites.height)*2.5*(t==null?void 0:t.spriteScale)-12*2.5),this.initialAllyPosition=new T(n.width/4-((r=this.playerCurrentMonster)==null?void 0:r.sprites.width)*2.5*this.playerCurrentMonster.spriteScale/2,n.height*.75-((o=this.playerCurrentMonster)==null?void 0:o.sprites.height)*2.5*this.playerCurrentMonster.spriteScale+15*2.5),this.playerCurrentMonster.position=this.initialAllyPosition,this.opponentCurrentMonster.position=this.initialOpponentPosition,this.isPlayerTurn=!0}get wild(){return this.opponent instanceof be}selectAction(e){this.isPlayerTurn=!1,e instanceof Me&&this.playerCurrentMonster.currentStats.speed>this.opponentCurrentMonster.currentStats.speed||e instanceof qe||e instanceof Ue||e instanceof Ze?(this.turnStack.push(e),this.selectOpponentAction()):(this.selectOpponentAction(),this.turnStack.push(e)),this.executeAction(this.turnStack.shift())}runAway(){if(this.wild){this.escapeAttempts++;const e=Math.random()*255;Math.floor(this.opponentCurrentMonster.currentStats.speed*128/this.playerCurrentMonster.currentStats.speed)+30*this.escapeAttempts*e>255?(this.turnStack=[],this.turnStack.push(new Ae(this.playerCurrentMonster)),this.turnStack.unshift(new K("You ran away safely!",this.playerCurrentMonster))):this.turnStack.unshift(new K("Failed to run away!",this.playerCurrentMonster))}else this.turnStack.unshift(new K("You can't run away from a trainer battle!",this.playerCurrentMonster))}attack(e){const t=e.initiator,n=e.target==="opponent"?this.opponentCurrentMonster:this.playerCurrentMonster,r=this.calculateDamage(t,n,e.move),o=[];o.push(new K(t.name+" used "+e.move.name+"!",e.initiator)),r.immune?o.push(new K("It doesn't affect "+n.name+"...",e.initiator)):r.notVeryEffective?o.push(new K("It's not very effective...",e.initiator)):r.superEffective&&o.push(new K("It's super effective!",e.initiator)),r.critical&&o.push(new K("A critical hit!",e.initiator)),o.push(new Re(r.damages,e.target,e.initiator)),o.reverse().forEach(i=>this.turnStack.unshift(i))}calculateDamage(e,t,n){let r=new At;if(n.category!=="Status"){const o=n.category==="Physical"?e.currentStats.attack:e.currentStats.specialAttack,i=n.category==="Physical"?t.currentStats.defense:t.currentStats.specialDefense,l=this.calculateTypeEffectiveness(n.type,t.types);r.superEffective=l>1,r.notVeryEffective=l<1,r.immune=l===0;const u=r.immune?0:this.calculateCritical();r.critical=u>1;const a=Math.random()*(1-.85)+.85,c=this.calculateStab(e,n),p=l*u*a*c*1;r.damages=Math.floor(((2*e.level/5+2)*n.power*o/i/50+2)*p)}else r.damages=0;return r}calculateTypeEffectiveness(e,t){return t.reduce((n,r)=>{const o=It(e,r);return n*o},1)}calculateCritical(){return Math.random()<.0625?1.5:1}calculateStab(e,t){return e.types.includes(t.type)?1.5:1}selectOpponentAction(){const e=this.opponentCurrentMonster.selectMove("Easy");this.turnStack.push(new Me(e,"ally",this.opponentCurrentMonster))}executeAction(e){var t;e&&(e instanceof Me&&!e.initiator.fainted?this.attack(e):e instanceof qe?this.runAway():e instanceof Ue||e instanceof Ze||(e instanceof K?this.currentMessage=e.description:e instanceof Re?this.removeHP(e):e instanceof Ae&&this.onClose())),(t=this.turnStack)!=null&&t.length||0>0?this.sleep(1e3).then(()=>{var n;return this.executeAction((n=this.turnStack)==null?void 0:n.shift())}):this.isPlayerTurn=!0}removeHP(e){const t=e.target==="opponent"?this.opponentCurrentMonster:this.playerCurrentMonster;t.currentHp-=e.damages,t.currentHp<=0&&(t.currentHp=0,t.fainted=!0,this.turnStack=[],this.turnStack.push(new K(t.name+" fainted!",e.initiator)),(this.wild||this.opponent instanceof tt&&this.opponent.monsters.every(n=>n.fainted))&&(this.turnStack.unshift(new Ae(e.initiator)),this.turnStack.unshift(new K("You won the battle!",e.initiator)),setTimeout(()=>{this.onClose()},1e3)))}}class At{constructor(){d(this,"superEffective",!1);d(this,"notVeryEffective",!1);d(this,"immune",!1);d(this,"critical",!1);d(this,"effectSuccess",!1);d(this,"effectApplied","");d(this,"damages",0)}}class Ae{constructor(e){d(this,"name");d(this,"description");d(this,"initiator");this.name="End Battle",this.description="End Battle",this.initiator=e}}class Re{constructor(e,t,n){d(this,"name");d(this,"description");d(this,"damages");d(this,"target");d(this,"initiator");this.name="Remove HP",this.description="Remove HP",this.damages=e,this.target=t,this.initiator=n}}class K{constructor(e,t){d(this,"name");d(this,"description");d(this,"initiator");this.name="Message",this.description=e,this.initiator=t}}class qe{constructor(e){d(this,"description");d(this,"name");d(this,"initiator");this.name="Run Away",this.description="Run away from the battle",this.initiator=e}}class Ue{constructor(e,t){d(this,"description");d(this,"name");d(this,"targetIdx");d(this,"initiator");this.name="Change Pokemon",this.description="Change the current pokemon",this.targetIdx=e,this.initiator=t}}class Me{constructor(e,t,n){d(this,"name");d(this,"description");d(this,"move");d(this,"target");d(this,"initiator");this.name=e.name,this.description=e.description,this.move=e,this.target=t,this.initiator=n}}class Ze{constructor(e,t,n,r,o,i=0){d(this,"description");d(this,"name");d(this,"itemId");d(this,"targetType");d(this,"targetIdx");d(this,"initiator");this.name=e,this.description=t,this.itemId=n,this.targetType=r,this.targetIdx=i,this.initiator=o}}class Pt{constructor(e,t){d(this,"position");d(this,"image");d(this,"width",0);d(this,"height",0);this.position=e,this.image=t,this.image.onload=()=>{this.width=this.image.width,this.height=this.image.height}}draw(e,t){e.drawImage(this.image,0,0,this.image.width,this.image.height,0,0,t.width,t.height*.75)}}const st=new Image;st.src="src/assets/battle/battle-grass.png";const Et=new Pt(new T(0,0),st);function It(s,e){return Ot[s.toLowerCase()][e.toLowerCase()]}const Ot={normal:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:.5,ghost:0,dragon:1,dark:1,steel:.5},fire:{normal:1,fire:.5,water:.5,electric:1,grass:2,ice:2,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:2,rock:.5,ghost:1,dragon:.5,dark:1,steel:2},water:{normal:1,fire:2,water:.5,electric:1,grass:.5,ice:1,fighting:1,poison:1,ground:2,flying:1,psychic:1,bug:1,rock:2,ghost:1,dragon:.5,dark:1,steel:1},electric:{normal:1,fire:1,water:2,electric:.5,grass:.5,ice:1,fighting:1,poison:1,ground:0,flying:2,psychic:1,bug:1,rock:1,ghost:1,dragon:.5,dark:1,steel:1},grass:{normal:1,fire:.5,water:2,electric:1,grass:.5,ice:1,fighting:1,poison:.5,ground:2,flying:.5,psychic:1,bug:.5,rock:2,ghost:1,dragon:.5,dark:1,steel:.5},ice:{normal:1,fire:.5,water:.5,electric:1,grass:2,ice:.5,fighting:1,poison:1,ground:2,flying:2,psychic:1,bug:1,rock:1,ghost:1,dragon:2,dark:1,steel:.5},fighting:{normal:2,fire:1,water:1,electric:1,grass:1,ice:2,fighting:1,poison:.5,ground:1,flying:.5,psychic:.5,bug:.5,rock:2,ghost:0,dragon:1,dark:2,steel:2},poison:{normal:1,fire:1,water:1,electric:1,grass:2,ice:1,fighting:1,poison:.5,ground:.5,flying:1,psychic:1,bug:1,rock:.5,ghost:.5,dragon:1,dark:1,steel:0},ground:{normal:1,fire:2,water:1,electric:2,grass:.5,ice:1,fighting:1,poison:2,ground:1,flying:0,psychic:1,bug:.5,rock:2,ghost:1,dragon:1,dark:1,steel:2},flying:{normal:1,fire:1,water:1,electric:.5,grass:2,ice:1,fighting:2,poison:1,ground:1,flying:1,psychic:1,bug:2,rock:.5,ghost:1,dragon:1,dark:1,steel:.5},psychic:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:2,poison:2,ground:1,flying:1,psychic:.5,bug:1,rock:1,ghost:1,dragon:1,dark:0,steel:.5},bug:{normal:1,fire:.5,water:1,electric:1,grass:2,ice:1,fighting:.5,poison:.5,ground:1,flying:.5,psychic:2,bug:1,rock:1,ghost:.5,dragon:1,dark:2,steel:.5},rock:{normal:1,fire:2,water:1,electric:1,grass:1,ice:2,fighting:.5,poison:1,ground:.5,flying:2,psychic:1,bug:2,rock:1,ghost:1,dragon:1,dark:1,steel:.5},ghost:{normal:0,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:2,bug:1,rock:1,ghost:2,dragon:1,dark:.5,steel:.5},dragon:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:1,ghost:1,dragon:2,dark:1,steel:.5},dark:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:.5,poison:1,ground:1,flying:1,psychic:2,bug:1,rock:1,ghost:2,dragon:1,dark:.5,steel:.5},steel:{normal:1,fire:.5,water:.5,electric:.5,grass:1,ice:2,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:2,ghost:1,dragon:1,dark:1,steel:.5}};function qt(s){ae(s,"svelte-ohpkam",".ally-info.svelte-ohpkam.svelte-ohpkam{opacity:0;visibility:hidden;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;bottom:26dvh;right:-30dvw;transition:right 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly}.ally-info.opened.svelte-ohpkam.svelte-ohpkam{opacity:1;visibility:visible;right:1dvw}.ally-info.svelte-ohpkam .name-lvl.svelte-ohpkam{display:flex;justify-content:space-between;align-items:center;font-size:46px}.ally-info.svelte-ohpkam .status.svelte-ohpkam{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.ally-info.svelte-ohpkam .hp.svelte-ohpkam{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.ally-info.svelte-ohpkam .hp span.svelte-ohpkam{padding:0 0 0 12px;font-weight:bold}.ally-info.svelte-ohpkam .hp .progressbar-wrapper.svelte-ohpkam{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.ally-info.svelte-ohpkam .hp .progressbar-wrapper .progressbar.svelte-ohpkam{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px;transition:width 1s ease-in-out}.ally-info.svelte-ohpkam .hp .progressbar-wrapper .progressbar.warning.svelte-ohpkam{background:rgb(255, 241, 164);background:linear-gradient(0deg, rgb(255, 241, 164) 0%, rgb(255, 194, 16) 30%, rgb(255, 194, 16) 50%, rgb(255, 194, 16) 70%, rgb(255, 241, 164) 100%)}.ally-info.svelte-ohpkam .hp .progressbar-wrapper .progressbar.danger.svelte-ohpkam{background:rgb(244, 177, 159);background:linear-gradient(0deg, rgb(244, 177, 159) 0%, rgb(223, 85, 48) 30%, rgb(223, 85, 48) 50%, rgb(223, 85, 48) 70%, rgb(244, 177, 159) 100%)}")}function Ht(s){let e,t,n,r=s[1].name+"",o,i,l,u,a=s[1].level+"",c,f,p,y,b,w,M,S,_,j=s[1].currentHp+"",D,q,g=s[1].currentStats.HP+"",$;return{c(){e=m("div"),t=m("div"),n=m("span"),o=A(r),i=E(),l=m("span"),u=A("Lv "),c=A(a),f=E(),p=m("div"),y=m("div"),b=m("span"),b.textContent="HP",w=E(),M=m("div"),S=m("div"),_=E(),D=A(j),q=A(" / "),$=A(g),v(n,"class","svelte-ohpkam"),v(l,"class","svelte-ohpkam"),v(t,"class","name-lvl svelte-ohpkam"),v(b,"class","svelte-ohpkam"),v(S,"class","progressbar svelte-ohpkam"),Q(S,"--width",s[2]+"%"),C(S,"warning",s[2]<=50),C(S,"danger",s[2]<15),v(M,"class","progressbar-wrapper svelte-ohpkam"),v(y,"class","hp svelte-ohpkam"),v(p,"class","status svelte-ohpkam"),v(e,"class","ally-info svelte-ohpkam"),C(e,"opened",s[0])},m(x,P){H(x,e,P),h(e,t),h(t,n),h(n,o),h(t,i),h(t,l),h(l,u),h(l,c),h(e,f),h(e,p),h(p,y),h(y,b),h(y,w),h(y,M),h(M,S),h(p,_),h(p,D),h(p,q),h(p,$)},p(x,[P]){P&2&&r!==(r=x[1].name+"")&&F(o,r),P&2&&a!==(a=x[1].level+"")&&F(c,a),P&4&&Q(S,"--width",x[2]+"%"),P&4&&C(S,"warning",x[2]<=50),P&4&&C(S,"danger",x[2]<15),P&2&&j!==(j=x[1].currentHp+"")&&F(D,j),P&2&&g!==(g=x[1].currentStats.HP+"")&&F($,g),P&1&&C(e,"opened",x[0])},i:z,o:z,d(x){x&&O(e)}}}function Lt(s,e,t){let n,{opened:r}=e,{monster:o}=e;return s.$$set=i=>{"opened"in i&&t(0,r=i.opened),"monster"in i&&t(1,o=i.monster)},s.$$.update=()=>{s.$$.dirty&2&&t(2,n=Math.floor(o.currentHp*100/o.currentStats.HP))},[r,o,n]}class nt extends de{constructor(e){super(),le(this,e,Lt,Ht,oe,{opened:0,monster:1},qt)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),L()}get monster(){return this.$$.ctx[1]}set monster(e){this.$$set({monster:e}),L()}}ce(nt,{opened:{},monster:{}},[],[],!0);function Dt(s){ae(s,"svelte-1xq73kd",".action-bar.svelte-1xq73kd.svelte-1xq73kd{opacity:0;visibility:hidden;background-color:white;height:25dvh;width:100dvw;position:absolute;bottom:-25dvh;left:0;transition:bottom 0.5s ease-in-out;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;display:flex}.action-bar.opened.svelte-1xq73kd.svelte-1xq73kd{opacity:1;visibility:visible;bottom:0}.action-bar.svelte-1xq73kd .info.svelte-1xq73kd{width:50%;height:100%;font-size:64px;display:flex;align-items:center;align-content:center;justify-content:space-around;position:relative}.action-bar.svelte-1xq73kd .info ._inner.svelte-1xq73kd{position:absolute;left:17px;z-index:1;height:calc(100% - 55px);border:10px solid black;border-radius:10px;display:flex;align-items:center;justify-content:center;width:100%;text-transform:capitalize}.action-bar.svelte-1xq73kd .info ._inner .move-desc.svelte-1xq73kd{text-transform:initial;font-size:46px;display:flex;flex-wrap:wrap;gap:16px}.action-bar.svelte-1xq73kd .info ._inner .move-desc p.svelte-1xq73kd{flex:45%;margin:0}.action-bar.svelte-1xq73kd .actions.svelte-1xq73kd,.action-bar.svelte-1xq73kd .moves.svelte-1xq73kd{width:50%;height:100%;display:flex;background:#FFFFFF;border:14px solid #595b59;border-radius:8px;box-sizing:border-box;padding:12px;z-index:2;flex-wrap:wrap;gap:12px}.action-btn.svelte-1xq73kd.svelte-1xq73kd{background-color:var(--color);font-size:64px;color:white;border-radius:24px;border:6px solid #595b59;font-family:pokemon, serif;transition:color 0.3s ease-in-out, opacity 0.3s ease-in-out;flex:49%}.action-btn.svelte-1xq73kd.svelte-1xq73kd:hover,.action-btn.selected.svelte-1xq73kd.svelte-1xq73kd{cursor:pointer;opacity:0.96;color:#262626}.action-btn[disabled].svelte-1xq73kd.svelte-1xq73kd{opacity:0.5;cursor:not-allowed;pointer-events:none}@media(max-width: 1280px){.action-btn.svelte-1xq73kd.svelte-1xq73kd{font-size:48px;flex:30%}}")}function Ve(s,e,t){const n=s.slice();return n[11]=e[t],n[13]=t,n}function Bt(s){var x,P,ee,we,_e,je;let e,t,n=((x=s[1])==null?void 0:x.playerCurrentMonster.moves[s[3]].description)+"",r,o,i,l=((P=s[1])==null?void 0:P.playerCurrentMonster.moves[s[3]].currentPp)+"",u,a,c=((ee=s[1])==null?void 0:ee.playerCurrentMonster.moves[s[3]].pp)+"",f,p,y,b=((we=s[1])==null?void 0:we.playerCurrentMonster.moves[s[3]].category)+"",w,M,S,_=((_e=s[1])==null?void 0:_e.playerCurrentMonster.moves[s[3]].power)+"",j,D,q=((je=s[1])==null?void 0:je.playerCurrentMonster.moves[s[3]].accuracy)+"",g,$;return{c(){e=m("div"),t=m("p"),r=A(n),o=E(),i=m("p"),u=A(l),a=A(`
                        / `),f=A(c),p=E(),y=m("p"),w=A(b),M=E(),S=m("p"),j=A(_),D=A(`
                        | `),g=A(q),$=A(" %"),v(t,"class","svelte-1xq73kd"),v(i,"class","svelte-1xq73kd"),v(y,"class","svelte-1xq73kd"),v(S,"class","svelte-1xq73kd"),v(e,"class","move-desc svelte-1xq73kd")},m(B,k){H(B,e,k),h(e,t),h(t,r),h(e,o),h(e,i),h(i,u),h(i,a),h(i,f),h(e,p),h(e,y),h(y,w),h(e,M),h(e,S),h(S,j),h(S,D),h(S,g),h(S,$)},p(B,k){var J,R,se,ve,ge,me;k&10&&n!==(n=((J=B[1])==null?void 0:J.playerCurrentMonster.moves[B[3]].description)+"")&&F(r,n),k&10&&l!==(l=((R=B[1])==null?void 0:R.playerCurrentMonster.moves[B[3]].currentPp)+"")&&F(u,l),k&10&&c!==(c=((se=B[1])==null?void 0:se.playerCurrentMonster.moves[B[3]].pp)+"")&&F(f,c),k&10&&b!==(b=((ve=B[1])==null?void 0:ve.playerCurrentMonster.moves[B[3]].category)+"")&&F(w,b),k&10&&_!==(_=((ge=B[1])==null?void 0:ge.playerCurrentMonster.moves[B[3]].power)+"")&&F(j,_),k&10&&q!==(q=((me=B[1])==null?void 0:me.playerCurrentMonster.moves[B[3]].accuracy)+"")&&F(g,q)},d(B){B&&O(e)}}}function Tt(s){var n;let e=((n=s[1])==null?void 0:n.currentMessage.toUpperCase())+"",t;return{c(){t=A(e)},m(r,o){H(r,t,o)},p(r,o){var i;o&2&&e!==(e=((i=r[1])==null?void 0:i.currentMessage.toUpperCase())+"")&&F(t,e)},d(r){r&&O(t)}}}function Ft(s){let e,t,n,r,o,i,l,u,a,c,f,p,y,b;return{c(){e=m("div"),t=m("button"),n=A("FIGHT"),r=E(),o=m("button"),i=A("BAG"),l=E(),u=m("button"),a=A("POKEMONS"),c=E(),f=m("button"),p=A("RUN"),v(t,"class","action-btn svelte-1xq73kd"),Q(t,"--color","#dc5959"),t.disabled=s[5],C(t,"selected",s[4]===0),v(o,"class","action-btn svelte-1xq73kd"),Q(o,"--color","#eca859"),o.disabled=s[5],C(o,"selected",s[4]===1),v(u,"class","action-btn svelte-1xq73kd"),Q(u,"--color","#7EAF53"),u.disabled=s[5],C(u,"selected",s[4]===2),v(f,"class","action-btn svelte-1xq73kd"),Q(f,"--color","#599bdc"),f.disabled=s[5],C(f,"selected",s[4]===2),v(e,"class","actions svelte-1xq73kd")},m(w,M){H(w,e,M),h(e,t),h(t,n),h(e,r),h(e,o),h(o,i),h(e,l),h(e,u),h(u,a),h(e,c),h(e,f),h(f,p),y||(b=[U(t,"click",s[6]),U(f,"click",s[7])],y=!0)},p(w,M){M&32&&(t.disabled=w[5]),M&16&&C(t,"selected",w[4]===0),M&32&&(o.disabled=w[5]),M&16&&C(o,"selected",w[4]===1),M&32&&(u.disabled=w[5]),M&16&&C(u,"selected",w[4]===2),M&32&&(f.disabled=w[5]),M&16&&C(f,"selected",w[4]===2)},d(w){w&&O(e),y=!1,te(b)}}}function Nt(s){let e,t=Fe(s[1].playerCurrentMonster.moves),n=[];for(let r=0;r<t.length;r+=1)n[r]=Xe(Ve(s,t,r));return{c(){e=m("div");for(let r=0;r<n.length;r+=1)n[r].c();v(e,"class","moves svelte-1xq73kd")},m(r,o){H(r,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(r,o){if(o&298){t=Fe(r[1].playerCurrentMonster.moves);let i;for(i=0;i<t.length;i+=1){const l=Ve(r,t,i);n[i]?n[i].p(l,o):(n[i]=Xe(l),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(r){r&&O(e),vt(n,r)}}}function Xe(s){let e,t=s[11].name.toUpperCase()+"",n,r,o,i;function l(){return s[9](s[13])}function u(){return s[10](s[11])}return{c(){e=m("button"),n=A(t),r=E(),v(e,"class","action-btn svelte-1xq73kd"),Q(e,"--color","#dc5959"),e.disabled=s[5],C(e,"selected",s[3]===s[13])},m(a,c){H(a,e,c),h(e,n),h(e,r),o||(i=[U(e,"mouseover",l),U(e,"click",u)],o=!0)},p(a,c){s=a,c&2&&t!==(t=s[11].name.toUpperCase()+"")&&F(n,t),c&32&&(e.disabled=s[5]),c&8&&C(e,"selected",s[3]===s[13])},d(a){a&&O(e),o=!1,te(i)}}}function zt(s){let e,t,n,r;function o(f,p){return f[2]?Bt:Tt}let i=o(s),l=i(s);function u(f,p){return f[2]?Nt:Ft}let a=u(s),c=a(s);return{c(){e=m("div"),t=m("div"),n=m("div"),l.c(),r=E(),c.c(),v(n,"class","_inner svelte-1xq73kd"),v(t,"class","info svelte-1xq73kd"),v(e,"class","action-bar svelte-1xq73kd"),C(e,"opened",s[0])},m(f,p){H(f,e,p),h(e,t),h(t,n),l.m(n,null),h(e,r),c.m(e,null)},p(f,[p]){i===(i=o(f))&&l?l.p(f,p):(l.d(1),l=i(f),l&&(l.c(),l.m(n,null))),a===(a=u(f))&&c?c.p(f,p):(c.d(1),c=a(f),c&&(c.c(),c.m(e,null))),p&1&&C(e,"opened",f[0])},i:z,o:z,d(f){f&&O(e),l.d(),c.d()}}}function Rt(s,e,t){let n,{opened:r}=e,{battleState:o}=e,i=!1,l=0,u=0;function a(){t(2,i=!i)}function c(){console.log(o),o.selectAction(new qe(o.playerCurrentMonster))}function f(b){o.selectAction(new Me(b,"opponent",o.playerCurrentMonster)),t(2,i=!1)}window.addEventListener("keydown",b=>{b.key==="ArrowUp"?i?t(3,l=l===0?o.playerCurrentMonster.moves.length-1:l-1):t(4,u=u===0?3:u-1):b.key==="ArrowDown"?i?t(3,l=l===o.playerCurrentMonster.moves.length-1?0:l+1):t(4,u=u===3?0:u+1):b.key==="Enter"&&(i?f(o.playerCurrentMonster.moves[l]):u===0?a():u===3&&c()),console.log(u,l)});const p=b=>t(3,l=b),y=b=>f(b);return s.$$set=b=>{"opened"in b&&t(0,r=b.opened),"battleState"in b&&t(1,o=b.battleState)},s.$$.update=()=>{s.$$.dirty&2&&t(5,n=o&&!o.isPlayerTurn||!1)},[r,o,i,l,u,n,a,c,f,p,y]}class rt extends de{constructor(e){super(),le(this,e,Rt,zt,oe,{opened:0,battleState:1},Dt)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),L()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),L()}}ce(rt,{opened:{},battleState:{}},[],[],!0);function Ut(s){ae(s,"svelte-1w4nukc",".enemy-info.svelte-1w4nukc.svelte-1w4nukc{opacity:0;visibility:hidden;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;top:2dvh;left:-30dvw;transition:left 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly}.enemy-info.opened.svelte-1w4nukc.svelte-1w4nukc{opacity:1;visibility:visible;left:1dvw}.enemy-info.svelte-1w4nukc .name-lvl.svelte-1w4nukc{display:flex;justify-content:space-between;align-items:center;font-size:46px}.enemy-info.svelte-1w4nukc .status.svelte-1w4nukc{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.enemy-info.svelte-1w4nukc .hp.svelte-1w4nukc{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.enemy-info.svelte-1w4nukc .hp span.svelte-1w4nukc{padding:0 0 0 12px;font-weight:bold}.enemy-info.svelte-1w4nukc .hp .progressbar-wrapper.svelte-1w4nukc{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.enemy-info.svelte-1w4nukc .hp .progressbar-wrapper .progressbar.svelte-1w4nukc{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px;transition:width 1s ease-in-out, background 1s ease-in-out 1s}.enemy-info.svelte-1w4nukc .hp .progressbar-wrapper .progressbar.warning.svelte-1w4nukc{background:rgb(255, 241, 164);background:linear-gradient(0deg, rgb(255, 241, 164) 0%, rgb(255, 194, 16) 30%, rgb(255, 194, 16) 50%, rgb(255, 194, 16) 70%, rgb(255, 241, 164) 100%)}.enemy-info.svelte-1w4nukc .hp .progressbar-wrapper .progressbar.danger.svelte-1w4nukc{background:rgb(244, 177, 159);background:linear-gradient(0deg, rgb(244, 177, 159) 0%, rgb(223, 85, 48) 30%, rgb(223, 85, 48) 50%, rgb(223, 85, 48) 70%, rgb(244, 177, 159) 100%)}")}function Zt(s){let e,t,n,r=s[1].name+"",o,i,l,u,a=s[1].level+"",c,f,p,y,b,w,M,S,_,j=s[1].currentHp+"",D,q,g=s[1].currentStats.HP+"",$;return{c(){e=m("div"),t=m("div"),n=m("span"),o=A(r),i=E(),l=m("span"),u=A("Lv "),c=A(a),f=E(),p=m("div"),y=m("div"),b=m("span"),b.textContent="HP",w=E(),M=m("div"),S=m("div"),_=E(),D=A(j),q=A(" / "),$=A(g),v(n,"class","svelte-1w4nukc"),v(l,"class","svelte-1w4nukc"),v(t,"class","name-lvl svelte-1w4nukc"),v(b,"class","svelte-1w4nukc"),v(S,"class","progressbar svelte-1w4nukc"),Q(S,"--width",s[2]+"%"),C(S,"warning",s[2]<=50),C(S,"danger",s[2]<15),v(M,"class","progressbar-wrapper svelte-1w4nukc"),v(y,"class","hp svelte-1w4nukc"),v(p,"class","status svelte-1w4nukc"),v(e,"class","enemy-info svelte-1w4nukc"),C(e,"opened",s[0])},m(x,P){H(x,e,P),h(e,t),h(t,n),h(n,o),h(t,i),h(t,l),h(l,u),h(l,c),h(e,f),h(e,p),h(p,y),h(y,b),h(y,w),h(y,M),h(M,S),h(p,_),h(p,D),h(p,q),h(p,$)},p(x,[P]){P&2&&r!==(r=x[1].name+"")&&F(o,r),P&2&&a!==(a=x[1].level+"")&&F(c,a),P&4&&Q(S,"--width",x[2]+"%"),P&4&&C(S,"warning",x[2]<=50),P&4&&C(S,"danger",x[2]<15),P&2&&j!==(j=x[1].currentHp+"")&&F(D,j),P&2&&g!==(g=x[1].currentStats.HP+"")&&F($,g),P&1&&C(e,"opened",x[0])},i:z,o:z,d(x){x&&O(e)}}}function Vt(s,e,t){let n,{opened:r}=e,{monster:o}=e;return s.$$set=i=>{"opened"in i&&t(0,r=i.opened),"monster"in i&&t(1,o=i.monster)},s.$$.update=()=>{s.$$.dirty&2&&t(2,n=Math.floor(o.currentHp*100/o.currentStats.HP))},[r,o,n]}class it extends de{constructor(e){super(),le(this,e,Vt,Zt,oe,{opened:0,monster:1},Ut)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),L()}get monster(){return this.$$.ctx[1]}set monster(e){this.$$set({monster:e}),L()}}ce(it,{opened:{},monster:{}},[],[],!0);function Xt(s){ae(s,"svelte-hx8zpy",".battleStart.svelte-hx8zpy{opacity:0;visibility:hidden;background:#000000;height:100dvh;width:100dvw;position:absolute;top:0;left:0;transition:opacity 0.5s ease-in-out;z-index:2}.battleStart.animate.svelte-hx8zpy{visibility:visible;animation:svelte-hx8zpy-animate 2s ease-in-out}.battleStart.hide.svelte-hx8zpy{visibility:hidden;opacity:0}@keyframes svelte-hx8zpy-animate{0%{opacity:1}20%{opacity:0}40%{opacity:1}60%{opacity:0}80%{opacity:1}100%{opacity:0}}")}function Ge(s){let e,t,n,r,o,i,l,u,a,c,f,p;function y(g){s[3](g)}function b(g){s[4](g)}let w={};s[0]!==void 0&&(w.opened=s[0]),s[1]!==void 0&&(w.battleState=s[1]),e=new rt({props:w}),N.push(()=>X(e,"opened",y)),N.push(()=>X(e,"battleState",b));function M(g){s[5](g)}function S(g){s[6](g)}let _={};s[0]!==void 0&&(_.opened=s[0]),s[1].playerCurrentMonster!==void 0&&(_.monster=s[1].playerCurrentMonster),o=new nt({props:_}),N.push(()=>X(o,"opened",M)),N.push(()=>X(o,"monster",S));function j(g){s[7](g)}function D(g){s[8](g)}let q={};return s[0]!==void 0&&(q.opened=s[0]),s[1].opponentCurrentMonster!==void 0&&(q.monster=s[1].opponentCurrentMonster),a=new it({props:q}),N.push(()=>X(a,"opened",j)),N.push(()=>X(a,"monster",D)),{c(){he(e.$$.fragment),r=E(),he(o.$$.fragment),u=E(),he(a.$$.fragment)},m(g,$){re(e,g,$),H(g,r,$),re(o,g,$),H(g,u,$),re(a,g,$),p=!0},p(g,$){const x={};!t&&$&1&&(t=!0,x.opened=g[0],V(()=>t=!1)),!n&&$&2&&(n=!0,x.battleState=g[1],V(()=>n=!1)),e.$set(x);const P={};!i&&$&1&&(i=!0,P.opened=g[0],V(()=>i=!1)),!l&&$&2&&(l=!0,P.monster=g[1].playerCurrentMonster,V(()=>l=!1)),o.$set(P);const ee={};!c&&$&1&&(c=!0,ee.opened=g[0],V(()=>c=!1)),!f&&$&2&&(f=!0,ee.monster=g[1].opponentCurrentMonster,V(()=>f=!1)),a.$set(ee)},i(g){p||(Z(e.$$.fragment,g),Z(o.$$.fragment,g),Z(a.$$.fragment,g),p=!0)},o(g){G(e.$$.fragment,g),G(o.$$.fragment,g),G(a.$$.fragment,g),p=!1},d(g){g&&(O(r),O(u)),ie(e,g),ie(o,g),ie(a,g)}}}function Gt(s){let e,t,n,r=s[1]&&Ge(s);return{c(){r&&r.c(),e=E(),t=m("div"),t.innerHTML="",v(t,"class","battleStart svelte-hx8zpy"),C(t,"hide",s[0]),C(t,"animate",s[2])},m(o,i){r&&r.m(o,i),H(o,e,i),H(o,t,i),n=!0},p(o,[i]){o[1]?r?(r.p(o,i),i&2&&Z(r,1)):(r=Ge(o),r.c(),Z(r,1),r.m(e.parentNode,e)):r&&(Le(),G(r,1,1,()=>{r=null}),De()),(!n||i&1)&&C(t,"hide",o[0]),(!n||i&4)&&C(t,"animate",o[2])},i(o){n||(Z(r),n=!0)},o(o){G(r),n=!1},d(o){o&&(O(e),O(t)),r&&r.d(o)}}}function Jt(s,e,t){let{opened:n}=e,{battleStart:r}=e,{battleState:o}=e;function i(p){n=p,t(0,n)}function l(p){o=p,t(1,o)}function u(p){n=p,t(0,n)}function a(p){s.$$.not_equal(o.playerCurrentMonster,p)&&(o.playerCurrentMonster=p,t(1,o))}function c(p){n=p,t(0,n)}function f(p){s.$$.not_equal(o.opponentCurrentMonster,p)&&(o.opponentCurrentMonster=p,t(1,o))}return s.$$set=p=>{"opened"in p&&t(0,n=p.opened),"battleStart"in p&&t(2,r=p.battleStart),"battleState"in p&&t(1,o=p.battleState)},[n,o,r,i,l,u,a,c,f]}class ot extends de{constructor(e){super(),le(this,e,Jt,Gt,oe,{opened:0,battleStart:2,battleState:1},Xt)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),L()}get battleStart(){return this.$$.ctx[2]}set battleStart(e){this.$$set({battleStart:e}),L()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),L()}}ce(ot,{opened:{},battleStart:{},battleState:{}},[],[],!0);function Kt(s){ae(s,"svelte-1cbbcxy",'.menu.svelte-1cbbcxy.svelte-1cbbcxy{position:absolute;top:0;right:-20dvw;width:20dvw;font-size:36px;background-color:#FFFFFF;z-index:3;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:right 0.3s ease-in-out;border:3px solid #1e1e1e;border-radius:16px}.menu.svelte-1cbbcxy ul.svelte-1cbbcxy{box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;border-radius:12px;list-style:none;padding:12px 32px;margin:0;display:flex;flex-direction:column;height:100%;width:100%;align-items:center}.menu.svelte-1cbbcxy ul li.svelte-1cbbcxy{font-size:4rem;margin:1rem 0;text-align:center;cursor:pointer;flex-grow:1;width:100%;height:100%;min-height:60px;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li:hover .svelte-1cbbcxy:before{content:"";width:0;height:0;border-top:20px solid transparent;border-bottom:20px solid transparent;border-left:20px solid #262626;position:absolute;left:40px}.menu.svelte-1cbbcxy ul li button.svelte-1cbbcxy{background:none;border:none;font-size:inherit;font-family:inherit;cursor:inherit;outline:none;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li button .svelte-1cbbcxy:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%}.menu.open.svelte-1cbbcxy.svelte-1cbbcxy{opacity:1;pointer-events:all;right:0}')}function Wt(s){let e;return{c(){e=m("div"),e.innerHTML='<ul class="svelte-1cbbcxy"><li class="svelte-1cbbcxy"><button tabindex="0" class="svelte-1cbbcxy">Pokedex</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Pokemon</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Bag</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Trainer</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Save</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Options</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Credits</button></li></ul>',v(e,"class","menu svelte-1cbbcxy"),C(e,"open",s[0])},m(t,n){H(t,e,n)},p(t,[n]){n&1&&C(e,"open",t[0])},i:z,o:z,d(t){t&&O(e)}}}function Yt(s,e,t){let{menuOpened:n}=e,{player:r}=e;return s.$$set=o=>{"menuOpened"in o&&t(0,n=o.menuOpened),"player"in o&&t(1,r=o.player)},[n,r]}class at extends de{constructor(e){super(),le(this,e,Yt,Wt,oe,{menuOpened:0,player:1},Kt)}get menuOpened(){return this.$$.ctx[0]}set menuOpened(e){this.$$set({menuOpened:e}),L()}get player(){return this.$$.ctx[1]}set player(e){this.$$set({player:e}),L()}}ce(at,{menuOpened:{},player:{}},[],[],!0);class Je{constructor(e,t=16*3,n=16*3){d(this,"position");d(this,"width");d(this,"height");this.position=e,this.width=t,this.height=n}debug(e,t,n="red"){e.fillStyle=n,e.fillRect((this.position.x+t.x)*this.width,(this.position.y+t.y)*this.height,this.width,this.height)}}const Qt=8,es=806;class ts{constructor(e,t,n,r,o,i,l){d(this,"background");d(this,"foreground");d(this,"width");d(this,"height");d(this,"collisions");d(this,"battleZones");d(this,"monsters");d(this,"playerInitialPosition",new T(11,11));d(this,"playerPosition",new T(11,11));this.background=e,this.foreground=t,this.width=n,this.height=r,this.collisions=this.initBoundaries(o),console.log(this.collisions),this.battleZones=this.initBattlesZones(i),this.monsters=l}randomMonster(){const e=this.monsters[Math.floor(Math.random()*this.monsters.length)],n=(localStorage.getItem("pokedex")&&JSON.parse(localStorage.getItem("pokedex")||"[]")||[]).find(r=>r.id===e);return Object.setPrototypeOf(n,be.prototype),n}initBattlesZones(e){const t=[];for(let r=0;r<e.length;r+=this.width)t.push(e.slice(r,this.width+r));const n=[];return t.forEach((r,o)=>{r.forEach((i,l)=>{if(i===Qt){const u=new Je(new T(l,o));n.push(u)}})}),n}initBoundaries(e){const t=[];for(let r=0;r<e.length;r+=this.width)t.push(e.slice(r,this.width+r));const n=[];return t.forEach((r,o)=>{r.forEach((i,l)=>{if(i===es){const u=new Je(new T(l,o));n.push(u)}})}),n}drawBackground(e,t){e.drawImage(this.background,t.x*16,t.y*16,this.background.width,this.background.height,0,0,this.background.width*3,this.background.height*3)}drawForeground(e,t){this.foreground!==null&&e.drawImage(this.foreground,t.x*16,t.y*16,this.foreground.width,this.foreground.height,0,0,this.foreground.width*3,this.foreground.height*3)}drawBoundaries(e,t){this.collisions.forEach(n=>{n.debug(e,t)})}drawBattleZones(e,t){this.battleZones.forEach(n=>{n.debug(e,t,"blue")})}hasBattleZoneAt(e){return this.battleZones.some(t=>t.position.x===e.x&&t.position.y===e.y)}hasBoundaryAt(e){return this.collisions.some(t=>t.position.x===e.x&&t.position.y===e.y)||e.x<0||e.y<0||e.x>this.width-1||e.y>this.height-1}updatePlayerPosition(e){this.playerPosition.x=this.playerInitialPosition.x+e.x,this.playerPosition.y=this.playerInitialPosition.y+e.y}}const lt=new Image;lt.src="src/assets/maps/test-map.png";const ct=new Image;ct.src="src/assets/maps/test-map-foreground.png";const ss=[95],ns=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,0,806,806,0,0,806,806,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,806,806,806,806,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,806,806,806,806,834,0,0,0,0,0,0,0,0,0],rs=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Pe=new ts(lt,ct,20,20,ns,rs,ss);function is(s){ae(s,"svelte-kmv6nj",'.set.svelte-kmv6nj.svelte-kmv6nj{overflow:hidden;padding:30px;text-align:center;position:absolute;bottom:5dvh;left:5dvw}.set.svelte-kmv6nj .d-pad.svelte-kmv6nj{margin-right:40px}.set.svelte-kmv6nj .d-pad.svelte-kmv6nj{display:inline-block}.d-pad.svelte-kmv6nj.svelte-kmv6nj{position:relative;width:200px;height:200px;border-radius:48%;overflow:hidden}.d-pad.svelte-kmv6nj.svelte-kmv6nj:before{content:"";position:absolute;top:50%;left:50%;border-radius:5%;transform:translate(-50%, -50%);width:66.6%;height:66.6%}.d-pad.svelte-kmv6nj.svelte-kmv6nj:after{content:"";position:absolute;display:none;z-index:2;width:20%;height:20%;top:50%;left:50%;background:rgba(221, 221, 221, 0.5);border-radius:50%;transform:translate(-50%, -50%);transition:all 0.25s;cursor:pointer}.d-pad.svelte-kmv6nj.svelte-kmv6nj:hover:after{width:30%;height:30%}.d-pad.svelte-kmv6nj a.svelte-kmv6nj{display:block;position:absolute;-webkit-tap-highlight-color:rgba(255, 255, 255, 0);width:33.3%;height:43%;line-height:40%;color:#fff;background:rgba(221, 221, 221, 0.5);text-align:center}.d-pad.svelte-kmv6nj a.svelte-kmv6nj:hover{background:#eee}.d-pad.svelte-kmv6nj a.svelte-kmv6nj:before{content:"";position:absolute;width:0;height:0;border-radius:5px;border-style:solid;transition:all 0.25s}.d-pad.svelte-kmv6nj a.svelte-kmv6nj:after{content:"";position:absolute;width:102%;height:78%;background:#fff;border-radius:20%}.d-pad.svelte-kmv6nj a.left.svelte-kmv6nj,.d-pad.svelte-kmv6nj a.right.svelte-kmv6nj{width:43%;height:33%}.d-pad.svelte-kmv6nj a.left.svelte-kmv6nj:after,.d-pad.svelte-kmv6nj a.right.svelte-kmv6nj:after{width:78%;height:102%}.d-pad.svelte-kmv6nj a.up.svelte-kmv6nj{top:0;left:50%;transform:translate(-50%, 0);border-radius:17% 17% 50% 50%}.d-pad.svelte-kmv6nj a.up.svelte-kmv6nj:hover{background:linear-gradient(0deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-kmv6nj a.up.svelte-kmv6nj:after{left:0;top:0;transform:translate(-100%, 0);border-top-left-radius:50%;pointer-events:none}.d-pad.svelte-kmv6nj a.up.svelte-kmv6nj:before{top:40%;left:50%;transform:translate(-50%, -50%);border-width:0 13px 19px 13px;border-color:transparent transparent #aaa transparent}.d-pad.svelte-kmv6nj a.up.svelte-kmv6nj:active:before{border-bottom-color:#333}.d-pad.svelte-kmv6nj a.up.svelte-kmv6nj:hover:before{top:35%}.d-pad.svelte-kmv6nj a.down.svelte-kmv6nj{bottom:0;left:50%;transform:translate(-50%, 0);border-radius:50% 50% 17% 17%}.d-pad.svelte-kmv6nj a.down.svelte-kmv6nj:hover{background:linear-gradient(180deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-kmv6nj a.down.svelte-kmv6nj:after{right:0;bottom:0;transform:translate(100%, 0);border-bottom-right-radius:50%;pointer-events:none}.d-pad.svelte-kmv6nj a.down.svelte-kmv6nj:before{bottom:40%;left:50%;transform:translate(-50%, 50%);border-width:19px 13px 0px 13px;border-color:#aaa transparent transparent transparent}.d-pad.svelte-kmv6nj a.down.svelte-kmv6nj:active:before{border-top-color:#333}.d-pad.svelte-kmv6nj a.down.svelte-kmv6nj:hover:before{bottom:35%}.d-pad.svelte-kmv6nj a.left.svelte-kmv6nj{top:50%;left:0;transform:translate(0, -50%);border-radius:17% 50% 50% 17%}.d-pad.svelte-kmv6nj a.left.svelte-kmv6nj:hover{background:linear-gradient(-90deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-kmv6nj a.left.svelte-kmv6nj:after{left:0;bottom:0;transform:translate(0, 100%);border-bottom-left-radius:50%;pointer-events:none}.d-pad.svelte-kmv6nj a.left.svelte-kmv6nj:before{left:40%;top:50%;transform:translate(-50%, -50%);border-width:13px 19px 13px 0;border-color:transparent #aaa transparent transparent}.d-pad.svelte-kmv6nj a.left.svelte-kmv6nj:active:before{border-right-color:#333}.d-pad.svelte-kmv6nj a.left.svelte-kmv6nj:hover:before{left:35%}.d-pad.svelte-kmv6nj a.right.svelte-kmv6nj{top:50%;right:0;transform:translate(0, -50%);border-radius:50% 17% 17% 50%}.d-pad.svelte-kmv6nj a.right.svelte-kmv6nj:hover{background:linear-gradient(90deg, rgba(221, 221, 221, 0.5) 0%, #eee 50%)}.d-pad.svelte-kmv6nj a.right.svelte-kmv6nj:after{right:0;top:0;transform:translate(0, -100%);border-top-right-radius:50%;pointer-events:none}.d-pad.svelte-kmv6nj a.right.svelte-kmv6nj:before{right:40%;top:50%;transform:translate(50%, -50%);border-width:13px 0 13px 19px;border-color:transparent transparent transparent #aaa}.d-pad.svelte-kmv6nj a.right.svelte-kmv6nj:active:before{border-left-color:#333}.d-pad.svelte-kmv6nj a.right.svelte-kmv6nj:hover:before{right:35%}.clear .d-pad.svelte-kmv6nj a.svelte-kmv6nj{border:1px solid #fff}.clear .d-pad.svelte-kmv6nj a.svelte-kmv6nj{background:none}.clear .d-pad.svelte-kmv6nj a.svelte-kmv6nj:after{display:none}.clear .d-pad.svelte-kmv6nj a.up.svelte-kmv6nj:hover{background:linear-gradient(0deg, #5f9837 0%, #6ea248 50%)}.clear .d-pad.svelte-kmv6nj a.right.svelte-kmv6nj:hover{background:linear-gradient(90deg, #5f9837 0%, #6ea248 50%)}.clear .d-pad.svelte-kmv6nj a.down.svelte-kmv6nj:hover{background:linear-gradient(180deg, #5f9837 0%, #6ea248 50%)}.clear .d-pad.svelte-kmv6nj a.left.svelte-kmv6nj:hover{background:linear-gradient(-90deg, #5f9837 0%, #6ea248 50%)}.clear .d-pad.svelte-kmv6nj a.up.svelte-kmv6nj:before{border-bottom-color:#fff}.clear .d-pad.svelte-kmv6nj a.right.svelte-kmv6nj:before{border-left-color:#fff}.clear .d-pad.svelte-kmv6nj a.down.svelte-kmv6nj:before{border-top-color:#fff}.clear .d-pad.svelte-kmv6nj a.left.svelte-kmv6nj:before{border-right-color:#fff}.clear .d-pad.svelte-kmv6nj a.up.svelte-kmv6nj:active:before{border-bottom-color:rgba(0, 0, 0, 0.6)}.clear .d-pad.svelte-kmv6nj a.right.svelte-kmv6nj:active:before{border-left-color:rgba(0, 0, 0, 0.6)}.clear .d-pad.svelte-kmv6nj a.down.svelte-kmv6nj:active:before{border-top-color:rgba(0, 0, 0, 0.6)}.clear .d-pad.svelte-kmv6nj a.left.svelte-kmv6nj:active:before{border-right-color:rgba(0, 0, 0, 0.6)}.outline.svelte-kmv6nj .d-pad.svelte-kmv6nj{border-radius:0}.outline.svelte-kmv6nj .d-pad a.svelte-kmv6nj{border:1px solid rgba(0, 0, 0, 0.1)}.outline.svelte-kmv6nj .d-pad a.svelte-kmv6nj:after{display:none}.outline.svelte-kmv6nj .d-pad a.up.svelte-kmv6nj:hover{background:linear-gradient(0deg, #fff 0%, #efefef 50%)}.outline.svelte-kmv6nj .d-pad a.right.svelte-kmv6nj:hover{background:linear-gradient(90deg, #fff 0%, #efefef 50%)}.outline.svelte-kmv6nj .d-pad a.down.svelte-kmv6nj:hover{background:linear-gradient(180deg, #fff 0%, #efefef 50%)}.outline.svelte-kmv6nj .d-pad a.left.svelte-kmv6nj:hover{background:linear-gradient(-90deg, #fff 0%, #efefef 50%)}.outline.svelte-kmv6nj .d-pad a.up.svelte-kmv6nj:before{border-bottom-color:rgba(0, 0, 0, 0.1)}.outline.svelte-kmv6nj .d-pad a.right.svelte-kmv6nj:before{border-left-color:rgba(0, 0, 0, 0.1)}.outline.svelte-kmv6nj .d-pad a.down.svelte-kmv6nj:before{border-top-color:rgba(0, 0, 0, 0.1)}.outline.svelte-kmv6nj .d-pad a.left.svelte-kmv6nj:before{border-right-color:rgba(0, 0, 0, 0.1)}.outline.svelte-kmv6nj .o-pad a.svelte-kmv6nj{border-color:rgba(0, 0, 0, 0.1)}.outline.svelte-kmv6nj .o-pad a.svelte-kmv6nj{background:#fff}.outline.svelte-kmv6nj .o-pad a.up.svelte-kmv6nj:after{border-bottom-color:rgba(0, 0, 0, 0.1)}.outline.svelte-kmv6nj .o-pad a.right.svelte-kmv6nj:after{border-left-color:rgba(0, 0, 0, 0.1)}.outline.svelte-kmv6nj .o-pad a.down.svelte-kmv6nj:after{border-top-color:rgba(0, 0, 0, 0.1)}.outline.svelte-kmv6nj .o-pad a.left.svelte-kmv6nj:after{border-right-color:rgba(0, 0, 0, 0.1)}.blue .d-pad.svelte-kmv6nj a.svelte-kmv6nj{background:#1843ca}.blue .d-pad.svelte-kmv6nj a.svelte-kmv6nj:after{border-radius:10%}.blue .d-pad.svelte-kmv6nj a.up.svelte-kmv6nj:hover{background:linear-gradient(0deg, #1843ca 0%, #143cb9 50%)}.blue .d-pad.svelte-kmv6nj a.right.svelte-kmv6nj:hover{background:linear-gradient(90deg, #1843ca 0%, #143cb9 50%)}.blue .d-pad.svelte-kmv6nj a.down.svelte-kmv6nj:hover{background:linear-gradient(180deg, #1843ca 0%, #143cb9 50%)}.blue .d-pad.svelte-kmv6nj a.left.svelte-kmv6nj:hover{background:linear-gradient(-90deg, #1843ca 0%, #143cb9 50%)}.blue .d-pad.svelte-kmv6nj a.up.svelte-kmv6nj:before{border-bottom-color:#ccc}.blue .d-pad.svelte-kmv6nj a.right.svelte-kmv6nj:before{border-left-color:#ccc}.blue .d-pad.svelte-kmv6nj a.down.svelte-kmv6nj:before{border-top-color:#ccc}.blue .d-pad.svelte-kmv6nj a.left.svelte-kmv6nj:before{border-right-color:#ccc}.blue .d-pad.svelte-kmv6nj a.up.svelte-kmv6nj:active:before{border-bottom-color:rgb(255, 255, 255)}.blue .d-pad.svelte-kmv6nj a.right.svelte-kmv6nj:active:before{border-left-color:rgb(255, 255, 255)}.blue .d-pad.svelte-kmv6nj a.down.svelte-kmv6nj:active:before{border-top-color:rgb(255, 255, 255)}.blue .d-pad.svelte-kmv6nj a.left.svelte-kmv6nj:active:before{border-right-color:rgb(255, 255, 255)}.setbg.white .d-pad.svelte-kmv6nj a.svelte-kmv6nj{background:#fff}.setbg.white .d-pad.svelte-kmv6nj a.svelte-kmv6nj:after{border-radius:40%;background:#222}.setbg.white .d-pad.svelte-kmv6nj a.up.svelte-kmv6nj:hover{background:#fff}.setbg.white .d-pad.svelte-kmv6nj a.right.svelte-kmv6nj:hover{background:#fff}.setbg.white .d-pad.svelte-kmv6nj a.down.svelte-kmv6nj:hover{background:#fff}.setbg.white .d-pad.svelte-kmv6nj a.left.svelte-kmv6nj:hover{background:#fff}.setbg.white .d-pad.svelte-kmv6nj a.up.svelte-kmv6nj:before{border-bottom-color:#0074D9}.setbg.white .d-pad.svelte-kmv6nj a.right.svelte-kmv6nj:before{border-left-color:#FF851B}.setbg.white .d-pad.svelte-kmv6nj a.down.svelte-kmv6nj:before{border-top-color:#3D9970}.setbg.white .d-pad.svelte-kmv6nj a.left.svelte-kmv6nj:before{border-right-color:#FFDC00}.setbg.white .d-pad.svelte-kmv6nj a.up.svelte-kmv6nj:active:before{border-bottom-color:rgba(0, 0, 0, 0.6)}.setbg.white .d-pad.svelte-kmv6nj a.right.svelte-kmv6nj:active:before{border-left-color:rgba(0, 0, 0, 0.6)}.setbg.white .d-pad.svelte-kmv6nj a.down.svelte-kmv6nj:active:before{border-top-color:rgba(0, 0, 0, 0.6)}.setbg.white .d-pad.svelte-kmv6nj a.left.svelte-kmv6nj:active:before{border-right-color:rgba(0, 0, 0, 0.6)}.wire .d-pad.svelte-kmv6nj a.svelte-kmv6nj,.wire .d-pad.svelte-kmv6nj a.svelte-kmv6nj:after{background:none;border:1px solid #93b4ff}.wire .d-pad.svelte-kmv6nj a.svelte-kmv6nj:after{border:1px dashed #93b4ff}.wire .d-pad.svelte-kmv6nj a.up.svelte-kmv6nj:before{border-bottom-color:#93b4ff}.wire .d-pad.svelte-kmv6nj a.right.svelte-kmv6nj:before{border-left-color:#93b4ff}.wire .d-pad.svelte-kmv6nj a.down.svelte-kmv6nj:before{border-top-color:#93b4ff}.wire .d-pad.svelte-kmv6nj a.left.svelte-kmv6nj:before{border-right-color:#93b4ff}.wire .d-pad.svelte-kmv6nj a.svelte-kmv6nj:hover{background:none}')}function os(s){let e,t,n,r,o,i,l,u,a,c,f;return{c(){e=m("div"),t=m("nav"),n=m("a"),r=E(),o=m("a"),i=E(),l=m("a"),u=E(),a=m("a"),v(n,"class","up svelte-kmv6nj"),v(n,"href","#"),v(o,"class","right svelte-kmv6nj"),v(o,"href","#"),v(l,"class","down svelte-kmv6nj"),v(l,"href","#"),v(a,"class","left svelte-kmv6nj"),v(a,"href","#"),v(t,"class","d-pad svelte-kmv6nj"),v(e,"class","set outline svelte-kmv6nj")},m(p,y){H(p,e,y),h(e,t),h(t,n),h(t,r),h(t,o),h(t,i),h(t,l),h(t,u),h(t,a),c||(f=[U(n,"pointerdown",s[5]("ArrowUp")),U(n,"pointerup",s[6]("ArrowUp")),U(o,"pointerdown",s[5]("ArrowRight")),U(o,"pointerup",s[6]("ArrowRight")),U(l,"pointerdown",s[5]("ArrowDown")),U(l,"pointerup",s[6]("ArrowDown")),U(a,"pointerdown",s[5]("ArrowLeft")),U(a,"pointerup",s[6]("ArrowLeft"))],c=!0)},p:z,i:z,o:z,d(p){p&&O(e),c=!1,te(f)}}}function as(s){let e,t,n,r,o;function i(c){s[9](c)}function l(c){s[10](c)}function u(c){s[11](c)}let a={};return s[0]!==void 0&&(a.opened=s[0]),s[4].battleState!==void 0&&(a.battleState=s[4].battleState),s[2]!==void 0&&(a.battleStart=s[2]),e=new ot({props:a}),N.push(()=>X(e,"opened",i)),N.push(()=>X(e,"battleState",l)),N.push(()=>X(e,"battleStart",u)),{c(){he(e.$$.fragment)},m(c,f){re(e,c,f),o=!0},p(c,f){const p={};!t&&f&1&&(t=!0,p.opened=c[0],V(()=>t=!1)),!n&&f&16&&(n=!0,p.battleState=c[4].battleState,V(()=>n=!1)),!r&&f&4&&(r=!0,p.battleStart=c[2],V(()=>r=!1)),e.$set(p)},i(c){o||(Z(e.$$.fragment,c),o=!0)},o(c){G(e.$$.fragment,c),o=!1},d(c){ie(e,c)}}}function ls(s){let e,t,n,r,o,i,l;const u=[as,os],a=[];function c(b,w){return b[4].initiated?0:1}e=c(s),t=a[e]=u[e](s);function f(b){s[12](b)}function p(b){s[13](b)}let y={};return s[1]!==void 0&&(y.menuOpened=s[1]),s[3]!==void 0&&(y.player=s[3]),r=new at({props:y}),N.push(()=>X(r,"menuOpened",f)),N.push(()=>X(r,"player",p)),{c(){t.c(),n=E(),he(r.$$.fragment)},m(b,w){a[e].m(b,w),H(b,n,w),re(r,b,w),l=!0},p(b,[w]){let M=e;e=c(b),e===M?a[e].p(b,w):(Le(),G(a[M],1,1,()=>{a[M]=null}),De(),t=a[e],t?t.p(b,w):(t=a[e]=u[e](b),t.c()),Z(t,1),t.m(n.parentNode,n));const S={};!o&&w&2&&(o=!0,S.menuOpened=b[1],V(()=>o=!1)),!i&&w&8&&(i=!0,S.player=b[3],V(()=>i=!1)),r.$set(S)},i(b){l||(Z(t),Z(r.$$.fragment,b),l=!0)},o(b){G(t),G(r.$$.fragment,b),l=!1},d(b){b&&O(n),a[e].d(b),ie(r,b)}}}function cs(s,e,t){let{opened:n=!1}=e,{menuOpened:r=!1}=e,{battleStart:o=!1}=e,{currentMap:i=Pe}=e,{canvas:l}=e;const u=l.getContext("2d");l.width=window.innerWidth,l.height=window.innerHeight;let{character:a}=e;a.position=new T(Pe.playerPosition.x*48,Pe.playerPosition.y*48);let{battle:c={initiated:!1,frameElapsed:0}}=e,f=0,p=new T(0,0),y=new T(0,0),b={fps:12,then:Date.now(),fpsInterval:1e3/12,id:0},w={fps:12,then:Date.now(),fpsInterval:1e3/12,goDown:!0,id:0};const M=new T(0,0);function S(){b.id=window.requestAnimationFrame(S);let k=Date.now(),J=k-b.then;if(J>b.fpsInterval){b.then=k-J%b.fpsInterval,u.fillStyle="black",u.fillRect(0,0,l.width,l.height),i.drawBackground(u,M),a.draw(u);let R=!0;if(t(3,a.moving=!1,a),c.initiated)return;if(!r){if((I.down.pressed||I.up.pressed||I.left.pressed||I.right.pressed)&&i.hasBattleZoneAt(i.playerPosition)&&Math.random()<.1){let se=i.randomMonster();window.cancelAnimationFrame(b.id),j(se)}I.down.pressed&&W.key==="ArrowDown"&&(i.hasBoundaryAt(new T(i.playerPosition.x,i.playerPosition.y+1))&&(R=!1),t(3,a.moving=!0,a),t(3,a.direction="down",a),R&&M.y++),I.up.pressed&&W.key==="ArrowUp"&&(i.hasBoundaryAt(new T(i.playerPosition.x,i.playerPosition.y-1))&&(R=!1),t(3,a.moving=!0,a),t(3,a.direction="up",a),R&&M.y--),I.left.pressed&&W.key==="ArrowLeft"&&(i.hasBoundaryAt(new T(i.playerPosition.x-1,i.playerPosition.y))&&(R=!1),t(3,a.moving=!0,a),t(3,a.direction="left",a),R&&M.x--),I.right.pressed&&W.key==="ArrowRight"&&(i.hasBoundaryAt(new T(i.playerPosition.x+1,i.playerPosition.y))&&(R=!1),t(3,a.moving=!0,a),t(3,a.direction="right",a),R&&M.x++),i.updatePlayerPosition(M)}}}function _(){var R,se,ve,ge,me,Be;w.id=window.requestAnimationFrame(_),console.log("start battle loop");let k=Date.now(),J=k-w.then;if(J>w.fpsInterval){if(!c.initiated)return;w.then=k-J%w.fpsInterval,t(4,c.frameElapsed++,c),u.fillStyle="black",u.fillRect(0,0,l.width,l.height),Et.draw(u,l),(se=(R=c.battleState)==null?void 0:R.opponentCurrentMonster)==null||se.draw(u,"front"),(ge=(ve=c.battleState)==null?void 0:ve.playerCurrentMonster)==null||ge.draw(u,"back"),(Be=(me=c.battleState)==null?void 0:me.opponentCurrentMonster)!=null&&Be.position&&(w.goDown=c.frameElapsed<=10,w.goDown?f++:f--,t(4,c.battleState.opponentCurrentMonster.position.y=p.y-f,c),t(4,c.battleState.playerCurrentMonster.position.y=y.y+f,c),c.frameElapsed>20&&t(4,c.frameElapsed=0,c))}}function j(k){t(4,c.frameElapsed=0,c),t(4,c.initiated=!0,c),t(4,c.startDate=new Date,c),t(4,c.battleState=new Ct(a,k,l),c),p={...c.battleState.opponentCurrentMonster.position},y={...c.battleState.playerCurrentMonster.position},g(),t(4,c.battleState.onClose=()=>{D()},c),t(2,o=!0),setTimeout(()=>{t(2,o=!1),t(0,n=!0),_()},2e3)}function D(k){window.cancelAnimationFrame(w.id),t(4,c.battleState=void 0,c),t(4,c.initiated=!1,c),t(4,c.startDate=void 0,c),t(2,o=!1),t(0,n=!1),t(1,r=!1),S(),q()}function q(){window.addEventListener("keydown",ze()),window.addEventListener("keyup",Ne()),window.addEventListener("keydown",$)}function g(){window.removeEventListener("keydown",ze()),window.removeEventListener("keyup",Ne()),window.removeEventListener("keydown",$)}function $(k){k.key==="Escape"&&t(1,r=!r)}function x(k){return J=>{switch(J.preventDefault(),k){case"ArrowUp":I.up.pressed=!0;break;case"ArrowDown":I.down.pressed=!0;break;case"ArrowLeft":I.left.pressed=!0;break;case"ArrowRight":I.right.pressed=!0;break}W.key=k}}function P(k){return J=>{switch(k){case"ArrowDown":I.down.pressed=!1;break;case"ArrowUp":I.up.pressed=!1;break;case"ArrowRight":I.right.pressed=!1;break;case"ArrowLeft":I.left.pressed=!1;break}}}q(),S();function ee(k){n=k,t(0,n)}function we(k){s.$$.not_equal(c.battleState,k)&&(c.battleState=k,t(4,c))}function _e(k){o=k,t(2,o)}function je(k){r=k,t(1,r)}function B(k){a=k,t(3,a)}return s.$$set=k=>{"opened"in k&&t(0,n=k.opened),"menuOpened"in k&&t(1,r=k.menuOpened),"battleStart"in k&&t(2,o=k.battleStart),"currentMap"in k&&t(8,i=k.currentMap),"canvas"in k&&t(7,l=k.canvas),"character"in k&&t(3,a=k.character),"battle"in k&&t(4,c=k.battle)},[n,r,o,a,c,x,P,l,i,ee,we,_e,je,B]}class dt extends de{constructor(e){super(),le(this,e,cs,ls,oe,{opened:0,menuOpened:1,battleStart:2,currentMap:8,canvas:7,character:3,battle:4},is)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),L()}get menuOpened(){return this.$$.ctx[1]}set menuOpened(e){this.$$set({menuOpened:e}),L()}get battleStart(){return this.$$.ctx[2]}set battleStart(e){this.$$set({battleStart:e}),L()}get currentMap(){return this.$$.ctx[8]}set currentMap(e){this.$$set({currentMap:e}),L()}get canvas(){return this.$$.ctx[7]}set canvas(e){this.$$set({canvas:e}),L()}get character(){return this.$$.ctx[3]}set character(e){this.$$set({character:e}),L()}get battle(){return this.$$.ctx[4]}set battle(e){this.$$set({battle:e}),L()}}ce(dt,{opened:{type:"Boolean"},menuOpened:{type:"Boolean"},battleStart:{type:"Boolean"},currentMap:{},canvas:{},character:{},battle:{}},[],[],!0);function ds(s){ae(s,"svelte-1ryb1u7",'.loading.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100dvh}.loading.ready.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7{opacity:0.2}.u-swing.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7{animation:svelte-1ryb1u7-swing 3000ms infinite}@keyframes svelte-1ryb1u7-swing{20%{-webkit-transform:rotate(15deg);transform:rotate(15deg)}40%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg)}60%{-webkit-transform:rotate(5deg);transform:rotate(5deg)}80%{-webkit-transform:rotate(-5deg);transform:rotate(-5deg)}to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7{width:120px;height:120px;border-radius:120px;border:solid 4.8px black;position:relative;background:linear-gradient(to bottom, #EEEEEE 0%, #FFFFFF 100%);margin:10px auto}.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7:before,.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7:after{content:"";display:block}.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7,.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7:before,.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7:after{transition:all 600ms cubic-bezier(0.67, 0.4, 0.36, 0.75)}.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7:before{width:120px;height:57.6px;border-bottom:solid 4.8px black;border-radius:60px 60px 0 0;background:linear-gradient(to bottom, #d10000 0%, #ff0000 50%)}.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7:after{content:"";width:24px;height:24px;background:linear-gradient(to bottom, #fff 0%, #ccc 100%);position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);border-radius:50%;box-shadow:0 0 0 2.4px black, 0 0 0 4.8px #ddd, 0 0 0 8.5714285714px black, 0 0 12px 7.0588235294px rgba(0, 0, 0, 0.4)}.buttons.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7{display:flex;justify-content:center;align-items:center;flex-direction:column;gap:120px;position:absolute;left:calc(50dvw - 100px);top:calc(50dvh - 40px)}.buttons.svelte-1ryb1u7 .letsgo.svelte-1ryb1u7.svelte-1ryb1u7{position:relative}.buttons.svelte-1ryb1u7 .letsgo .pika.svelte-1ryb1u7.svelte-1ryb1u7{width:200px;height:200px;position:absolute;bottom:0;left:0;z-index:1}.buttons.svelte-1ryb1u7 .letsgo .start-btn.svelte-1ryb1u7.svelte-1ryb1u7{width:200px;height:80px;border-radius:16px;position:relative;z-index:2;font-family:pokemon, serif;font-size:36px;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;cursor:pointer}.buttons.svelte-1ryb1u7 .letsgo .start-btn.svelte-1ryb1u7.svelte-1ryb1u7:hover{color:#fff;box-shadow:inset #009688 0 0 0 5px;text-shadow:none;font-weight:bold;background:#009688}.buttons.svelte-1ryb1u7 .letsgo .start-btn.svelte-1ryb1u7:hover+.pika.svelte-1ryb1u7{animation:svelte-1ryb1u7-bounce 1s infinite}@keyframes svelte-1ryb1u7-bounce{0%,20%,53%,80%,to{-webkit-animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-transform:translate3d(0, -30px, 0);transform:translate3d(0, -30px, 0)}40%,43%,70%{-webkit-animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06);animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06)}70%{-webkit-transform:translate3d(0, -15px, 0);transform:translate3d(0, -15px, 0)}90%{-webkit-transform:translate3d(0, -4px, 0);transform:translate3d(0, -4px, 0)}}#preview.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7{display:flex;flex-wrap:wrap;justify-content:center}')}function us(s){let e,t,n,r,o,i,l,u,a,c,f=s[1]&&Ke(s);return{c(){e=m("div"),t=m("div"),n=E(),r=m("span"),o=A("Gotta catch em all... "),i=A(s[4]),l=E(),u=m("div"),u.innerHTML="",a=E(),f&&f.c(),c=gt(),v(t,"class","o-pokeball c-loader u-swing svelte-1ryb1u7"),v(u,"id","preview"),v(u,"class","svelte-1ryb1u7"),v(e,"class","loading svelte-1ryb1u7"),C(e,"ready",s[1])},m(p,y){H(p,e,y),h(e,t),h(e,n),h(e,r),h(r,o),h(r,i),h(e,l),h(e,u),s[9](u),H(p,a,y),f&&f.m(p,y),H(p,c,y)},p(p,y){y&16&&F(i,p[4]),y&2&&C(e,"ready",p[1]),p[1]?f?f.p(p,y):(f=Ke(p),f.c(),f.m(c.parentNode,c)):f&&(f.d(1),f=null)},i:z,o:z,d(p){p&&(O(e),O(a),O(c)),s[9](null),f&&f.d(p)}}}function fs(s){let e,t,n,r;function o(u){s[7](u)}function i(u){s[8](u)}let l={};return s[0]!==void 0&&(l.canvas=s[0]),s[2]!==void 0&&(l.character=s[2]),e=new dt({props:l}),N.push(()=>X(e,"canvas",o)),N.push(()=>X(e,"character",i)),{c(){he(e.$$.fragment)},m(u,a){re(e,u,a),r=!0},p(u,a){const c={};!t&&a&1&&(t=!0,c.canvas=u[0],V(()=>t=!1)),!n&&a&4&&(n=!0,c.character=u[2],V(()=>n=!1)),e.$set(c)},i(u){r||(Z(e.$$.fragment,u),r=!0)},o(u){G(e.$$.fragment,u),r=!1},d(u){ie(e,u)}}}function Ke(s){let e,t,n,r,o,i,l,u,a,c=s[6]&&ps(s);return{c(){e=m("div"),c&&c.c(),t=E(),n=m("div"),r=m("button"),r.textContent="New game!",o=E(),i=m("img"),v(r,"class","start-btn svelte-1ryb1u7"),v(i,"class","pika svelte-1ryb1u7"),v(i,"alt","pikachu"),Qe(i.src,l="src/assets/monsters/heartgold-soulsilver/25.png")||v(i,"src",l),v(n,"class","letsgo svelte-1ryb1u7"),v(e,"class","buttons svelte-1ryb1u7")},m(f,p){H(f,e,p),c&&c.m(e,null),h(e,t),h(e,n),h(n,r),h(n,o),h(n,i),u||(a=U(r,"click",s[11]),u=!0)},p(f,p){f[6]&&c.p(f,p)},d(f){f&&O(e),c&&c.d(),u=!1,a()}}}function ps(s){let e,t,n,r,o,i,l;return{c(){e=m("div"),t=m("button"),t.textContent="Continue!",n=E(),r=m("img"),v(t,"class","start-btn svelte-1ryb1u7"),v(r,"class","pika svelte-1ryb1u7"),v(r,"alt","Evoli"),Qe(r.src,o="src/assets/monsters/heartgold-soulsilver/133.png")||v(r,"src",o),v(e,"class","letsgo svelte-1ryb1u7")},m(u,a){H(u,e,a),h(e,t),h(e,n),h(e,r),i||(l=U(t,"click",s[10]),i=!0)},p:z,d(u){u&&O(e),i=!1,l()}}}function hs(s){let e,t,n,r,o;const i=[fs,us],l=[];function u(a,c){return a[1]&&a[3]?0:1}return e=u(s),t=l[e]=i[e](s),{c(){t.c(),n=E(),r=m("canvas")},m(a,c){l[e].m(a,c),H(a,n,c),H(a,r,c),s[12](r),o=!0},p(a,[c]){let f=e;e=u(a),e===f?l[e].p(a,c):(Le(),G(l[f],1,1,()=>{l[f]=null}),De(),t=l[e],t?t.p(a,c):(t=l[e]=i[e](a),t.c()),Z(t,1),t.m(n.parentNode,n))},i(a){o||(Z(t),o=!0)},o(a){G(t),o=!1},d(a){a&&(O(n),O(r)),l[e].d(a),s[12](null)}}}function bs(s,e,t){let{canvas:n}=e,r,{ready:o=!1}=e,i=[],l=!1,u,a,c;i.length>0&&r?(i.forEach(_=>{setTimeout(()=>{const j=new Image;j.src=`src/assets/monsters/heartgold-soulsilver/${_.id}.png`,c.appendChild(j)},100)}),o=!0):fetch("src/assets/data/pokedex-gen1.json").then(_=>_.json()).then(_=>{_.forEach(j=>{t(4,a=j.name.english);let D=`src/assets/monsters/heartgold-soulsilver/${j.id}.png`,q=`src/assets/monsters/heartgold-soulsilver/frame2/${j.id}.png`,g=`src/assets/monsters/heartgold-soulsilver/back/${j.id}.png`,$=`src/assets/monsters/heartgold-soulsilver/shiny/${j.id}.png`;setTimeout(()=>{const x=new be(j.id,j.name.english,j.type,j.profile.ability,new Y(j.base.HP,j.base.Attack,j.base.Defense,j.base["Sp. Attack"],j.base["Sp. Defense"],j.base.Speed),j.evolution,new Mt(D,q,g,$),void 0,[new ke("Tackle","Normal","Physical",40,100,35,0,"",0,"Basic hit")],new Y(10,10,10,10,10,10),new Y(0,0,0,10,0,0));x.height=Number.parseFloat(j.profile.height.replace(" m",""))*100,x.spriteScale=Math.max(1.2,Math.min(x.height/100,2)),i.push(x),i.length===_.length&&(t(4,a="Ready!"),localStorage.setItem("pokedex",JSON.stringify(i)),f())},100)})});function f(){let _=new Image;_.src="src/assets/sprites/hero_male_front.png";let j=new Image;j.src="src/assets/sprites/hero_male_back.png";let D=new Image;D.src="src/assets/sprites/hero_male_left.png";let q=new Image;q.src="src/assets/sprites/hero_male_right.png";let g=new Image;g.src="src/assets/sprites/hero_male_back.png",Promise.all(Array.from([_,j,D,q,g].filter($=>!$.complete)).map($=>new Promise(x=>{$.onload=$.onerror=x}))).then(()=>{let $={...i.at(70),ivs:new Y(31,31,31,31,31,31),evs:new Y(120,0,0,255,0,135),moves:[new ke("Tackle","Normal","Physical",40,100,35,0,"",0,"Basic hit"),new ke("Growl","Normal","Status",0,100,40,0,"",0,"Lowers the target's Attack by one stage."),new ke("Tail Whip","Normal","Status",0,100,30,0,"",0,"Lowers the target's Defense by one stage."),new ke("Vine whip","Grass","Physical",40,100,30,0,"",0,"Strong hit with vines.")]};Object.setPrototypeOf($,be.prototype),$.updateCurrentStats(),$.currentHp=$.currentStats.HP,t(2,r=new tt("Kaiser","MALE",new $t(_,j,D,q,g),[$])),t(1,o=!0)})}function p(_){n=_,t(0,n)}function y(_){r=_,t(2,r)}function b(_){N[_?"unshift":"push"](()=>{c=_,t(5,c)})}const w=()=>t(3,l=!0),M=()=>t(3,l=!0);function S(_){N[_?"unshift":"push"](()=>{n=_,t(0,n)})}return s.$$set=_=>{"canvas"in _&&t(0,n=_.canvas),"ready"in _&&t(1,o=_.ready)},[n,o,r,l,a,c,u,p,y,b,w,M,S]}class vs extends de{constructor(e){super(),le(this,e,bs,hs,oe,{canvas:0,ready:1},ds)}get canvas(){return this.$$.ctx[0]}set canvas(e){this.$$set({canvas:e}),L()}get ready(){return this.$$.ctx[1]}set ready(e){this.$$set({ready:e}),L()}}customElements.define("open-mon",ce(vs,{canvas:{},ready:{type:"Boolean"}},[],[],!0));
