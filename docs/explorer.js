var dt=Object.defineProperty;var ft=(s,e,t)=>e in s?dt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var l=(s,e,t)=>(ft(s,typeof e!="symbol"?e+"":e,t),t);function U(){}function We(s){return s()}function De(){return Object.create(null)}function ne(s){s.forEach(We)}function Ye(s){return typeof s=="function"}function ie(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let xe;function Qe(s,e){return s===e?!0:(xe||(xe=document.createElement("a")),xe.href=e,s===xe.href)}function ht(s){return Object.keys(s).length===0}function p(s,e){s.appendChild(e)}function pe(s,e,t){const n=pt(s);if(!n.getElementById(e)){const i=m("style");i.id=e,i.textContent=t,gt(n,i)}}function pt(s){if(!s)return document;const e=s.getRootNode?s.getRootNode():s.ownerDocument;return e&&e.host?e:s.ownerDocument}function gt(s,e){return p(s.head||s,e),e.sheet}function B(s,e,t){s.insertBefore(e,t||null)}function q(s){s.parentNode&&s.parentNode.removeChild(s)}function bt(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function m(s){return document.createElement(s)}function A(s){return document.createTextNode(s)}function I(){return A(" ")}function mt(){return A("")}function fe(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function b(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function yt(s){return Array.from(s.childNodes)}function j(s,e){e=""+e,s.data!==e&&(s.data=e)}function K(s,e,t,n){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,n?"important":"")}function P(s,e,t){s.classList.toggle(e,!!t)}function vt(s){const e={};return s.childNodes.forEach(t=>{e[t.slot||"default"]=!0}),e}let He;function we(s){He=s}const ce=[],F=[];let ue=[];const Ee=[],wt=Promise.resolve();let Ie=!1;function kt(){Ie||(Ie=!0,wt.then(L))}function Oe(s){ue.push(s)}function Z(s){Ee.push(s)}const Ce=new Set;let le=0;function L(){if(le!==0)return;const s=He;do{try{for(;le<ce.length;){const e=ce[le];le++,we(e),_t(e.$$)}}catch(e){throw ce.length=0,le=0,e}for(we(null),ce.length=0,le=0;F.length;)F.pop()();for(let e=0;e<ue.length;e+=1){const t=ue[e];Ce.has(t)||(Ce.add(t),t())}ue.length=0}while(ce.length);for(;Ee.length;)Ee.pop()();Ie=!1,Ce.clear(),we(s)}function _t(s){if(s.fragment!==null){s.update(),ne(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(Oe)}}function xt(s){const e=[],t=[];ue.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),ue=e}const Se=new Set;let ee;function Le(){ee={r:0,c:[],p:ee}}function Be(){ee.r||ne(ee.c),ee=ee.p}function R(s,e){s&&s.i&&(Se.delete(s),s.i(e))}function X(s,e,t,n){if(s&&s.o){if(Se.has(s))return;Se.add(s),ee.c.push(()=>{Se.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}function Ne(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function V(s,e,t){const n=s.$$.props[e];n!==void 0&&(s.$$.bound[n]=t,t(s.$$.ctx[n]))}function de(s){s&&s.c()}function te(s,e,t){const{fragment:n,after_update:i}=s.$$;n&&n.m(e,t),Oe(()=>{const o=s.$$.on_mount.map(We).filter(Ye);s.$$.on_destroy?s.$$.on_destroy.push(...o):ne(o),s.$$.on_mount=[]}),i.forEach(Oe)}function se(s,e){const t=s.$$;t.fragment!==null&&(xt(t.after_update),ne(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function St(s,e){s.$$.dirty[0]===-1&&(ce.push(s),kt(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function re(s,e,t,n,i,o,r=null,c=[-1]){const d=He;we(s);const u=s.$$={fragment:null,ctx:[],props:o,update:U,not_equal:i,bound:De(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:De(),dirty:c,skip_bound:!1,root:e.target||d.$$.root};r&&r(u.root);let a=!1;if(u.ctx=t?t(s,e.props||{},(f,h,...v)=>{const y=v.length?v[0]:h;return u.ctx&&i(u.ctx[f],u.ctx[f]=y)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](y),a&&St(s,f)),h}):[],u.update(),a=!0,ne(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){const f=yt(e.target);u.fragment&&u.fragment.l(f),f.forEach(q)}else u.fragment&&u.fragment.c();e.intro&&R(s.$$.fragment),te(s,e.target,e.anchor),L()}we(d)}let et;typeof HTMLElement=="function"&&(et=class extends HTMLElement{constructor(e,t,n){super();l(this,"$$ctor");l(this,"$$s");l(this,"$$c");l(this,"$$cn",!1);l(this,"$$d",{});l(this,"$$r",!1);l(this,"$$p_d",{});l(this,"$$l",{});l(this,"$$l_u",new Map);this.$$ctor=e,this.$$s=t,n&&this.attachShadow({mode:"open"})}addEventListener(e,t,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){const i=this.$$c.$on(e,t);this.$$l_u.set(t,i)}super.addEventListener(e,t,n)}removeEventListener(e,t,n){if(super.removeEventListener(e,t,n),this.$$c){const i=this.$$l_u.get(t);i&&(i(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(r){return()=>{let c;return{c:function(){c=m("slot"),r!=="default"&&b(c,"name",r)},m:function(a,f){B(a,c,f)},d:function(a){a&&q(c)}}}};var e=t;if(await Promise.resolve(),!this.$$cn)return;const n={},i=vt(this);for(const r of this.$$s)r in i&&(n[r]=[t(r)]);for(const r of this.attributes){const c=this.$$g_p(r.name);c in this.$$d||(this.$$d[c]=$e(c,r.value,this.$$p_d,"toProp"))}for(const r in this.$$p_d)!(r in this.$$d)&&this[r]!==void 0&&(this.$$d[r]=this[r],delete this[r]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:n,$$scope:{ctx:[]}}});const o=()=>{this.$$r=!0;for(const r in this.$$p_d)if(this.$$d[r]=this.$$c.$$.ctx[this.$$c.$$.props[r]],this.$$p_d[r].reflect){const c=$e(r,this.$$d[r],this.$$p_d,"toAttribute");c==null?this.removeAttribute(this.$$p_d[r].attribute||r):this.setAttribute(this.$$p_d[r].attribute||r,c)}this.$$r=!1};this.$$c.$$.after_update.push(o),o();for(const r in this.$$l)for(const c of this.$$l[r]){const d=this.$$c.$on(r,c);this.$$l_u.set(c,d)}this.$$l={}}}attributeChangedCallback(e,t,n){var i;this.$$r||(e=this.$$g_p(e),this.$$d[e]=$e(e,n,this.$$p_d,"toProp"),(i=this.$$c)==null||i.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e)||e}});function $e(s,e,t,n){var o;const i=(o=t[s])==null?void 0:o.type;if(e=i==="Boolean"&&typeof e!="boolean"?e!=null:e,!n||!t[s])return e;if(n==="toAttribute")switch(i){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(i){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function oe(s,e,t,n,i,o){let r=class extends et{constructor(){super(s,t,i),this.$$p_d=e}static get observedAttributes(){return Object.keys(e).map(c=>(e[c].attribute||c).toLowerCase())}};return Object.keys(e).forEach(c=>{Object.defineProperty(r.prototype,c,{get(){return this.$$c&&c in this.$$c?this.$$c[c]:this.$$d[c]},set(d){var u;d=$e(c,d,e),this.$$d[c]=d,(u=this.$$c)==null||u.$set({[c]:d})}})}),n.forEach(c=>{Object.defineProperty(r.prototype,c,{get(){var d;return(d=this.$$c)==null?void 0:d[c]}})}),o&&(r=o(r)),s.element=r,r}class ae{constructor(){l(this,"$$");l(this,"$$set")}$destroy(){se(this,1),this.$destroy=U}$on(e,t){if(!Ye(t))return U;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!ht(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const $t="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add($t);class N{constructor(e,t){l(this,"x");l(this,"y");this.x=e,this.y=t}}class tt{constructor(e,t,n,i=[]){l(this,"name");l(this,"gender");l(this,"sprites");l(this,"monsters");l(this,"bag",[]);l(this,"lvl",1);l(this,"moving",!1);l(this,"direction","down");l(this,"position");l(this,"frames");l(this,"spriteScale",1);this.name=e,this.gender=t,this.sprites=n,this.monsters=i,this.frames={max:3,val:0,elapsed:0},this.position=new N(0,0)}get sprite(){return this.sprites[this.direction]}draw(e){let t=this.sprite||this.sprites.down;e.drawImage(t,this.frames.val*(t.width/this.frames.max),0,t.width/this.frames.max,t.height,this.position.x,this.position.y,t.width/this.frames.max*3,t.height*3),this.moving&&(this.frames.max>1&&(this.frames.elapsed+=1),this.frames.elapsed%2===0&&(this.frames.val+=1,this.frames.val>this.frames.max-1&&(this.frames.val=0)))}}class Mt{constructor(e,t,n,i,o){l(this,"down");l(this,"up");l(this,"left");l(this,"right");l(this,"battle");l(this,"width",80);l(this,"height",80);this.down=e,this.up=t,this.left=n,this.right=i,this.battle=o}}const z={up:{pressed:!1},down:{pressed:!1},left:{pressed:!1},right:{pressed:!1}};let Y="";function je(){return s=>{switch(s.key){case"ArrowDown":z.down.pressed=!1;break;case"ArrowUp":z.up.pressed=!1;break;case"ArrowRight":z.right.pressed=!1;break;case"ArrowLeft":z.left.pressed=!1;break}}}function Fe(){return s=>{switch(s.key){case"ArrowDown":Y="ArrowDown",z.down.pressed=!0;break;case"ArrowUp":Y="ArrowUp",z.up.pressed=!0;break;case"ArrowRight":Y="ArrowRight",z.right.pressed=!0;break;case"ArrowLeft":Y="ArrowLeft",z.left.pressed=!0;break}}}class he{constructor(e,t,n,i,o,r,c,d,u,a=new J(1,1,1,1,1,1),f=new J(0,0,0,0,0,0)){l(this,"id");l(this,"name");l(this,"types");l(this,"abilities");l(this,"baseStats");l(this,"ivs");l(this,"evs");l(this,"evolution");l(this,"currentStats",new J);l(this,"currentHp",1);l(this,"currentXp",0);l(this,"xpToNextLevel",0);l(this,"currentAbility");l(this,"level",5);l(this,"evsToDistribute",0);l(this,"fainted");l(this,"moves");l(this,"isShiny",!1);l(this,"sprites");l(this,"position");l(this,"currentImage");l(this,"currentImage2");l(this,"height",0);l(this,"spriteScale",1);l(this,"frames",{max:2,val:0,elapsed:0});this.id=e,this.name=t,this.types=n,this.abilities=i,this.baseStats=o,this.evolution=r,this.fainted=!1,this.ivs=a,this.evs=f,this.updateCurrentStats(),this.currentHp=this.currentStats.HP,this.currentAbility=d||this.abilities[0],this.moves=u||[],this.sprites=c,this.position=new N(0,0)}get totalEvs(){return this.evs.attack+this.evs.defense+this.evs.specialAttack+this.evs.specialDefense+this.evs.speed+this.evs.HP}selectMove(e,t){let n=Math.floor(Math.random()*this.moves.length),i=this.moves[n];return e==="Easy"&&t&&((t==null?void 0:t.types.length)===2?this.moves.find(r=>r.type===t.types[0]&&r.power>0):this.moves.find(r=>(r.type===t.types[0]||r.type===t.types[1])&&r.power>0)),i}levelUp(){let e=this.currentStats.HP;this.level+=1,console.log("from:",this.currentStats),this.updateCurrentStats(),console.log("to:",this.currentStats),e=this.currentStats.HP-e,this.currentHp+=e,this.currentXp=0,this.checkForNewMoves(),this.checkForEvolutions()}addXp(e,t){if(this.evsToDistribute+=this.totalEvs+t<=255?t:this.totalEvs+t-255,!(this.level>=100)){if(this.xpToNextLevel<e){const n=e-this.xpToNextLevel,i=e-n;this.currentXp+=i}else this.currentXp+=e;this.currentXp>=this.xpToNextLevel&&this.levelUp()}}draw(e,t="front"){var o;this.isShiny&&(t="shiny"),this.currentImage||(this.currentImage=new Image,this.currentImage.src=this.sprites[t]),this.currentImage2||(this.currentImage2=new Image,this.currentImage2.src=this.sprites.front2),this.frames.elapsed>=100&&(this.frames.elapsed=0);let n=t==="front"&&this.currentImage.complete&&((o=this.currentImage2)==null?void 0:o.complete)||t!=="front"&&this.currentImage.complete,i=t!=="front"?this.currentImage:this.frames.elapsed<100?this.currentImage:this.currentImage2;n&&(this.frames.elapsed++,e.drawImage(i,0,0,this.sprites.width,this.sprites.height,this.position.x,this.position.y,this.sprites.width*this.spriteScale*2.5,this.sprites.height*this.spriteScale*2.5))}checkForNewMoves(){}checkForEvolutions(){this.evolution&&this.level>=this.evolution.level&&this.evolve()}evolve(){this.id++;const t=(localStorage.getItem("pokedex")&&JSON.parse(localStorage.getItem("pokedex")||"[]")||[]).find(n=>n.id===this.id);t&&(Object.setPrototypeOf(t,he.prototype),this.baseStats=t.baseStats,this.updateCurrentStats(),this.sprites=t.sprites,this.currentImage=void 0,this.currentImage2=void 0,this.spriteScale=t.spriteScale,this.height=t.height)}updateCurrentStats(){this.currentStats=this.fromBaseStats()}addEvs(e){if(e){let t=this.totalEvs;this.evs.HP+=this.evs.HP+e.HP<=255&&t+e.HP<512?e.HP:0,this.evs.attack+=this.evs.attack+e.attack<=255&&t+e.attack<512?e.attack:0,this.evs.defense+=this.evs.defense+e.defense<=255&&t+e.defense<512?e.defense:0,this.evs.specialAttack+=this.evs.specialAttack+e.specialAttack<=255&&t+e.specialAttack<512?e.specialAttack:0,this.evs.specialDefense+=this.evs.specialDefense+e.specialDefense<=255&&t+e.specialDefense<512?e.specialDefense:0,this.evs.speed+=this.evs.speed+e.speed<=255&&t+e.speed<512?e.speed:0}}fromBaseStats(){return new J(Math.floor((this.ivs.HP+this.baseStats.HP*2+this.evs.HP/4)*this.level/100+10+this.level),Math.floor((this.ivs.attack+this.baseStats.attack*2+this.evs.attack/4)*this.level/100+5),Math.floor((this.ivs.defense+this.baseStats.defense*2+this.evs.defense/4)*this.level/100+5),Math.floor((this.ivs.specialAttack+this.baseStats.specialAttack*2+this.evs.specialAttack/4)*this.level/100+5),Math.floor((this.ivs.specialDefense+this.baseStats.specialDefense*2+this.evs.specialDefense/4)*this.level/100+5),Math.floor((this.ivs.speed+this.baseStats.speed*2+this.evs.speed/4)*this.level/100+5))}}class J{constructor(e=0,t=0,n=0,i=0,o=0,r=0){l(this,"HP");l(this,"attack");l(this,"defense");l(this,"specialAttack");l(this,"specialDefense");l(this,"speed");this.HP=e,this.attack=t,this.defense=n,this.specialAttack=i,this.specialDefense=o,this.speed=r}}class Ct{constructor(e,t,n,i){l(this,"front");l(this,"front2");l(this,"back");l(this,"shiny");l(this,"width",80);l(this,"height",80);this.front=e,this.front2=t,this.back=n,this.shiny=i}}class ve{constructor(e,t,n,i,o,r,c,d,u,a){l(this,"name");l(this,"type");l(this,"category");l(this,"power");l(this,"accuracy");l(this,"pp");l(this,"currentPp");l(this,"priority");l(this,"effect");l(this,"effectChance");l(this,"description");this.name=e,this.type=t,this.category=n,this.power=i,this.accuracy=o,this.pp=r,this.currentPp=r,this.priority=c,this.effect=d,this.effectChance=u,this.description=a}}class Pt{constructor(e,t,n){l(this,"player");l(this,"playerCurrentMonster");l(this,"opponent");l(this,"opponentCurrentMonster");l(this,"isPlayerTurn");l(this,"turnStack");l(this,"initialOpponentPosition");l(this,"initialAllyPosition");l(this,"escapeAttempts",0);l(this,"onClose",()=>{});l(this,"currentMessage","What will you do ?");l(this,"sleep",e=>new Promise(t=>setTimeout(t,e)));var i,o;this.player=e,this.opponent=t,this.playerCurrentMonster=e.monsters[0],this.opponentCurrentMonster=this.wild?t:t.monsters[0],this.turnStack=[],this.initialOpponentPosition=new N(n.width/4*3-(t==null?void 0:t.sprites.width)*2.5*(t==null?void 0:t.spriteScale)/2,n.height/2-(t==null?void 0:t.sprites.height)*2.5*(t==null?void 0:t.spriteScale)-12*2.5),this.initialAllyPosition=new N(n.width/4-((i=this.playerCurrentMonster)==null?void 0:i.sprites.width)*2.5*this.playerCurrentMonster.spriteScale/2,n.height*.75-((o=this.playerCurrentMonster)==null?void 0:o.sprites.height)*2.5*this.playerCurrentMonster.spriteScale+15*2.5),this.playerCurrentMonster.position=this.initialAllyPosition,this.opponentCurrentMonster.position=this.initialOpponentPosition,this.isPlayerTurn=!0}get wild(){return this.opponent instanceof he}selectAction(e){this.isPlayerTurn=!1,e instanceof Me&&this.playerCurrentMonster.currentStats.speed>this.opponentCurrentMonster.currentStats.speed||e instanceof qe||e instanceof Re||e instanceof Ue?(this.turnStack.push(e),this.selectOpponentAction()):(this.selectOpponentAction(),this.turnStack.push(e)),this.executeAction(this.turnStack.shift())}runAway(){if(this.wild){this.escapeAttempts++;const e=Math.random()*255;Math.floor(this.opponentCurrentMonster.currentStats.speed*128/this.playerCurrentMonster.currentStats.speed)+30*this.escapeAttempts*e>255?(this.turnStack=[],this.turnStack.push(new Pe(this.playerCurrentMonster)),this.turnStack.unshift(new G("You ran away safely!",this.playerCurrentMonster))):this.turnStack.unshift(new G("Failed to run away!",this.playerCurrentMonster))}else this.turnStack.unshift(new G("You can't run away from a trainer battle!",this.playerCurrentMonster))}attack(e){const t=e.initiator,n=e.target==="opponent"?this.opponentCurrentMonster:this.playerCurrentMonster,i=this.calculateDamage(t,n,e.move),o=[];o.push(new G(t.name+" used "+e.move.name+"!",e.initiator)),i.immune?o.push(new G("It doesn't affect "+n.name+"...",e.initiator)):i.notVeryEffective?o.push(new G("It's not very effective...",e.initiator)):i.superEffective&&o.push(new G("It's super effective!",e.initiator)),i.critical&&o.push(new G("A critical hit!",e.initiator)),o.push(new ze(i.damages,e.target,e.initiator)),o.reverse().forEach(r=>this.turnStack.unshift(r))}calculateDamage(e,t,n){let i=new At;if(n.category!=="Status"){const o=n.category==="Physical"?e.currentStats.attack:e.currentStats.specialAttack,r=n.category==="Physical"?t.currentStats.defense:t.currentStats.specialDefense,c=this.calculateTypeEffectiveness(n.type,t.types);i.superEffective=c>1,i.notVeryEffective=c<1,i.immune=c===0;const d=i.immune?0:this.calculateCritical();i.critical=d>1;const u=Math.random()*(1-.85)+.85,a=this.calculateStab(e,n),h=c*d*u*a*1;i.damages=Math.floor(((2*e.level/5+2)*n.power*o/r/50+2)*h)}else i.damages=0;return i}calculateTypeEffectiveness(e,t){return t.reduce((n,i)=>{const o=Ot(e,i);return n*o},1)}calculateCritical(){return Math.random()<.0625?1.5:1}calculateStab(e,t){return e.types.includes(t.type)?1.5:1}selectOpponentAction(){const e=this.opponentCurrentMonster.selectMove("Easy");this.turnStack.push(new Me(e,"ally",this.opponentCurrentMonster))}executeAction(e){var t;e&&(e instanceof Me&&!e.initiator.fainted?this.attack(e):e instanceof qe?this.runAway():e instanceof Re||e instanceof Ue||(e instanceof G?this.currentMessage=e.description:e instanceof ze?this.removeHP(e):e instanceof Pe&&this.onClose())),(t=this.turnStack)!=null&&t.length||0>0?this.sleep(1e3).then(()=>{var n;return this.executeAction((n=this.turnStack)==null?void 0:n.shift())}):this.isPlayerTurn=!0}removeHP(e){const t=e.target==="opponent"?this.opponentCurrentMonster:this.playerCurrentMonster;t.currentHp-=e.damages,t.currentHp<=0&&(t.currentHp=0,t.fainted=!0,this.turnStack=[],this.turnStack.push(new G(t.name+" fainted!",e.initiator)),(this.wild||this.opponent instanceof tt&&this.opponent.monsters.every(n=>n.fainted))&&(this.turnStack.unshift(new Pe(e.initiator)),this.turnStack.unshift(new G("You won the battle!",e.initiator)),setTimeout(()=>{this.onClose()},1e3)))}}class At{constructor(){l(this,"superEffective",!1);l(this,"notVeryEffective",!1);l(this,"immune",!1);l(this,"critical",!1);l(this,"effectSuccess",!1);l(this,"effectApplied","");l(this,"damages",0)}}class Pe{constructor(e){l(this,"name");l(this,"description");l(this,"initiator");this.name="End Battle",this.description="End Battle",this.initiator=e}}class ze{constructor(e,t,n){l(this,"name");l(this,"description");l(this,"damages");l(this,"target");l(this,"initiator");this.name="Remove HP",this.description="Remove HP",this.damages=e,this.target=t,this.initiator=n}}class G{constructor(e,t){l(this,"name");l(this,"description");l(this,"initiator");this.name="Message",this.description=e,this.initiator=t}}class qe{constructor(e){l(this,"description");l(this,"name");l(this,"initiator");this.name="Run Away",this.description="Run away from the battle",this.initiator=e}}class Re{constructor(e,t){l(this,"description");l(this,"name");l(this,"targetIdx");l(this,"initiator");this.name="Change Pokemon",this.description="Change the current pokemon",this.targetIdx=e,this.initiator=t}}class Me{constructor(e,t,n){l(this,"name");l(this,"description");l(this,"move");l(this,"target");l(this,"initiator");this.name=e.name,this.description=e.description,this.move=e,this.target=t,this.initiator=n}}class Ue{constructor(e,t,n,i,o,r=0){l(this,"description");l(this,"name");l(this,"itemId");l(this,"targetType");l(this,"targetIdx");l(this,"initiator");this.name=e,this.description=t,this.itemId=n,this.targetType=i,this.targetIdx=r,this.initiator=o}}class Et{constructor(e,t){l(this,"position");l(this,"image");l(this,"width",0);l(this,"height",0);this.position=e,this.image=t,this.image.onload=()=>{this.width=this.image.width,this.height=this.image.height}}draw(e,t){e.drawImage(this.image,0,0,this.image.width,this.image.height,0,0,t.width,t.height*.75)}}const st=new Image;st.src="src/assets/battle/battle-grass.png";const It=new Et(new N(0,0),st);function Ot(s,e){return qt[s.toLowerCase()][e.toLowerCase()]}const qt={normal:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:.5,ghost:0,dragon:1,dark:1,steel:.5},fire:{normal:1,fire:.5,water:.5,electric:1,grass:2,ice:2,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:2,rock:.5,ghost:1,dragon:.5,dark:1,steel:2},water:{normal:1,fire:2,water:.5,electric:1,grass:.5,ice:1,fighting:1,poison:1,ground:2,flying:1,psychic:1,bug:1,rock:2,ghost:1,dragon:.5,dark:1,steel:1},electric:{normal:1,fire:1,water:2,electric:.5,grass:.5,ice:1,fighting:1,poison:1,ground:0,flying:2,psychic:1,bug:1,rock:1,ghost:1,dragon:.5,dark:1,steel:1},grass:{normal:1,fire:.5,water:2,electric:1,grass:.5,ice:1,fighting:1,poison:.5,ground:2,flying:.5,psychic:1,bug:.5,rock:2,ghost:1,dragon:.5,dark:1,steel:.5},ice:{normal:1,fire:.5,water:.5,electric:1,grass:2,ice:.5,fighting:1,poison:1,ground:2,flying:2,psychic:1,bug:1,rock:1,ghost:1,dragon:2,dark:1,steel:.5},fighting:{normal:2,fire:1,water:1,electric:1,grass:1,ice:2,fighting:1,poison:.5,ground:1,flying:.5,psychic:.5,bug:.5,rock:2,ghost:0,dragon:1,dark:2,steel:2},poison:{normal:1,fire:1,water:1,electric:1,grass:2,ice:1,fighting:1,poison:.5,ground:.5,flying:1,psychic:1,bug:1,rock:.5,ghost:.5,dragon:1,dark:1,steel:0},ground:{normal:1,fire:2,water:1,electric:2,grass:.5,ice:1,fighting:1,poison:2,ground:1,flying:0,psychic:1,bug:.5,rock:2,ghost:1,dragon:1,dark:1,steel:2},flying:{normal:1,fire:1,water:1,electric:.5,grass:2,ice:1,fighting:2,poison:1,ground:1,flying:1,psychic:1,bug:2,rock:.5,ghost:1,dragon:1,dark:1,steel:.5},psychic:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:2,poison:2,ground:1,flying:1,psychic:.5,bug:1,rock:1,ghost:1,dragon:1,dark:0,steel:.5},bug:{normal:1,fire:.5,water:1,electric:1,grass:2,ice:1,fighting:.5,poison:.5,ground:1,flying:.5,psychic:2,bug:1,rock:1,ghost:.5,dragon:1,dark:2,steel:.5},rock:{normal:1,fire:2,water:1,electric:1,grass:1,ice:2,fighting:.5,poison:1,ground:.5,flying:2,psychic:1,bug:2,rock:1,ghost:1,dragon:1,dark:1,steel:.5},ghost:{normal:0,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:2,bug:1,rock:1,ghost:2,dragon:1,dark:.5,steel:.5},dragon:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:1,ghost:1,dragon:2,dark:1,steel:.5},dark:{normal:1,fire:1,water:1,electric:1,grass:1,ice:1,fighting:.5,poison:1,ground:1,flying:1,psychic:2,bug:1,rock:1,ghost:2,dragon:1,dark:.5,steel:.5},steel:{normal:1,fire:.5,water:.5,electric:.5,grass:1,ice:2,fighting:1,poison:1,ground:1,flying:1,psychic:1,bug:1,rock:2,ghost:1,dragon:1,dark:1,steel:.5}};function Ht(s){pe(s,"svelte-ohpkam",".ally-info.svelte-ohpkam.svelte-ohpkam{opacity:0;visibility:hidden;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;bottom:26dvh;right:-30dvw;transition:right 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly}.ally-info.opened.svelte-ohpkam.svelte-ohpkam{opacity:1;visibility:visible;right:1dvw}.ally-info.svelte-ohpkam .name-lvl.svelte-ohpkam{display:flex;justify-content:space-between;align-items:center;font-size:46px}.ally-info.svelte-ohpkam .status.svelte-ohpkam{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.ally-info.svelte-ohpkam .hp.svelte-ohpkam{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.ally-info.svelte-ohpkam .hp span.svelte-ohpkam{padding:0 0 0 12px;font-weight:bold}.ally-info.svelte-ohpkam .hp .progressbar-wrapper.svelte-ohpkam{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.ally-info.svelte-ohpkam .hp .progressbar-wrapper .progressbar.svelte-ohpkam{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px;transition:width 1s ease-in-out}.ally-info.svelte-ohpkam .hp .progressbar-wrapper .progressbar.warning.svelte-ohpkam{background:rgb(255, 241, 164);background:linear-gradient(0deg, rgb(255, 241, 164) 0%, rgb(255, 194, 16) 30%, rgb(255, 194, 16) 50%, rgb(255, 194, 16) 70%, rgb(255, 241, 164) 100%)}.ally-info.svelte-ohpkam .hp .progressbar-wrapper .progressbar.danger.svelte-ohpkam{background:rgb(244, 177, 159);background:linear-gradient(0deg, rgb(244, 177, 159) 0%, rgb(223, 85, 48) 30%, rgb(223, 85, 48) 50%, rgb(223, 85, 48) 70%, rgb(244, 177, 159) 100%)}")}function Lt(s){let e,t,n,i=s[1].name+"",o,r,c,d,u=s[1].level+"",a,f,h,v,y,$,C,M,w,k=s[1].currentHp+"",T,O,g=s[1].currentStats.HP+"",x;return{c(){e=m("div"),t=m("div"),n=m("span"),o=A(i),r=I(),c=m("span"),d=A("Lv "),a=A(u),f=I(),h=m("div"),v=m("div"),y=m("span"),y.textContent="HP",$=I(),C=m("div"),M=m("div"),w=I(),T=A(k),O=A(" / "),x=A(g),b(n,"class","svelte-ohpkam"),b(c,"class","svelte-ohpkam"),b(t,"class","name-lvl svelte-ohpkam"),b(y,"class","svelte-ohpkam"),b(M,"class","progressbar svelte-ohpkam"),K(M,"--width",s[2]+"%"),P(M,"warning",s[2]<=50),P(M,"danger",s[2]<15),b(C,"class","progressbar-wrapper svelte-ohpkam"),b(v,"class","hp svelte-ohpkam"),b(h,"class","status svelte-ohpkam"),b(e,"class","ally-info svelte-ohpkam"),P(e,"opened",s[0])},m(_,E){B(_,e,E),p(e,t),p(t,n),p(n,o),p(t,r),p(t,c),p(c,d),p(c,a),p(e,f),p(e,h),p(h,v),p(v,y),p(v,$),p(v,C),p(C,M),p(h,w),p(h,T),p(h,O),p(h,x)},p(_,[E]){E&2&&i!==(i=_[1].name+"")&&j(o,i),E&2&&u!==(u=_[1].level+"")&&j(a,u),E&4&&K(M,"--width",_[2]+"%"),E&4&&P(M,"warning",_[2]<=50),E&4&&P(M,"danger",_[2]<15),E&2&&k!==(k=_[1].currentHp+"")&&j(T,k),E&2&&g!==(g=_[1].currentStats.HP+"")&&j(x,g),E&1&&P(e,"opened",_[0])},i:U,o:U,d(_){_&&q(e)}}}function Bt(s,e,t){let n,{opened:i}=e,{monster:o}=e;return s.$$set=r=>{"opened"in r&&t(0,i=r.opened),"monster"in r&&t(1,o=r.monster)},s.$$.update=()=>{s.$$.dirty&2&&t(2,n=Math.floor(o.currentHp*100/o.currentStats.HP))},[i,o,n]}class nt extends ae{constructor(e){super(),re(this,e,Bt,Lt,ie,{opened:0,monster:1},Ht)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),L()}get monster(){return this.$$.ctx[1]}set monster(e){this.$$set({monster:e}),L()}}oe(nt,{opened:{},monster:{}},[],[],!0);function Tt(s){pe(s,"svelte-1xq73kd",".action-bar.svelte-1xq73kd.svelte-1xq73kd{opacity:0;visibility:hidden;background-color:white;height:25dvh;width:100dvw;position:absolute;bottom:-25dvh;left:0;transition:bottom 0.5s ease-in-out;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;display:flex}.action-bar.opened.svelte-1xq73kd.svelte-1xq73kd{opacity:1;visibility:visible;bottom:0}.action-bar.svelte-1xq73kd .info.svelte-1xq73kd{width:50%;height:100%;font-size:64px;display:flex;align-items:center;align-content:center;justify-content:space-around;position:relative}.action-bar.svelte-1xq73kd .info ._inner.svelte-1xq73kd{position:absolute;left:17px;z-index:1;height:calc(100% - 55px);border:10px solid black;border-radius:10px;display:flex;align-items:center;justify-content:center;width:100%;text-transform:capitalize}.action-bar.svelte-1xq73kd .info ._inner .move-desc.svelte-1xq73kd{text-transform:initial;font-size:46px;display:flex;flex-wrap:wrap;gap:16px}.action-bar.svelte-1xq73kd .info ._inner .move-desc p.svelte-1xq73kd{flex:45%;margin:0}.action-bar.svelte-1xq73kd .actions.svelte-1xq73kd,.action-bar.svelte-1xq73kd .moves.svelte-1xq73kd{width:50%;height:100%;display:flex;background:#FFFFFF;border:14px solid #595b59;border-radius:8px;box-sizing:border-box;padding:12px;z-index:2;flex-wrap:wrap;gap:12px}.action-btn.svelte-1xq73kd.svelte-1xq73kd{background-color:var(--color);font-size:64px;color:white;border-radius:24px;border:6px solid #595b59;font-family:pokemon, serif;transition:color 0.3s ease-in-out, opacity 0.3s ease-in-out;flex:49%}.action-btn.svelte-1xq73kd.svelte-1xq73kd:hover,.action-btn.selected.svelte-1xq73kd.svelte-1xq73kd{cursor:pointer;opacity:0.96;color:#262626}.action-btn[disabled].svelte-1xq73kd.svelte-1xq73kd{opacity:0.5;cursor:not-allowed;pointer-events:none}@media(max-width: 1280px){.action-btn.svelte-1xq73kd.svelte-1xq73kd{font-size:48px;flex:30%}}")}function Ze(s,e,t){const n=s.slice();return n[11]=e[t],n[13]=t,n}function Dt(s){var _,E,W,ke,_e,S;let e,t,n=((_=s[1])==null?void 0:_.playerCurrentMonster.moves[s[3]].description)+"",i,o,r,c=((E=s[1])==null?void 0:E.playerCurrentMonster.moves[s[3]].currentPp)+"",d,u,a=((W=s[1])==null?void 0:W.playerCurrentMonster.moves[s[3]].pp)+"",f,h,v,y=((ke=s[1])==null?void 0:ke.playerCurrentMonster.moves[s[3]].category)+"",$,C,M,w=((_e=s[1])==null?void 0:_e.playerCurrentMonster.moves[s[3]].power)+"",k,T,O=((S=s[1])==null?void 0:S.playerCurrentMonster.moves[s[3]].accuracy)+"",g,x;return{c(){e=m("div"),t=m("p"),i=A(n),o=I(),r=m("p"),d=A(c),u=A(`
                        / `),f=A(a),h=I(),v=m("p"),$=A(y),C=I(),M=m("p"),k=A(w),T=A(`
                        | `),g=A(O),x=A(" %"),b(t,"class","svelte-1xq73kd"),b(r,"class","svelte-1xq73kd"),b(v,"class","svelte-1xq73kd"),b(M,"class","svelte-1xq73kd"),b(e,"class","move-desc svelte-1xq73kd")},m(H,D){B(H,e,D),p(e,t),p(t,i),p(e,o),p(e,r),p(r,d),p(r,u),p(r,f),p(e,h),p(e,v),p(v,$),p(e,C),p(e,M),p(M,k),p(M,T),p(M,g),p(M,x)},p(H,D){var Q,ge,be,me,ye,Te;D&10&&n!==(n=((Q=H[1])==null?void 0:Q.playerCurrentMonster.moves[H[3]].description)+"")&&j(i,n),D&10&&c!==(c=((ge=H[1])==null?void 0:ge.playerCurrentMonster.moves[H[3]].currentPp)+"")&&j(d,c),D&10&&a!==(a=((be=H[1])==null?void 0:be.playerCurrentMonster.moves[H[3]].pp)+"")&&j(f,a),D&10&&y!==(y=((me=H[1])==null?void 0:me.playerCurrentMonster.moves[H[3]].category)+"")&&j($,y),D&10&&w!==(w=((ye=H[1])==null?void 0:ye.playerCurrentMonster.moves[H[3]].power)+"")&&j(k,w),D&10&&O!==(O=((Te=H[1])==null?void 0:Te.playerCurrentMonster.moves[H[3]].accuracy)+"")&&j(g,O)},d(H){H&&q(e)}}}function Nt(s){var n;let e=((n=s[1])==null?void 0:n.currentMessage.toUpperCase())+"",t;return{c(){t=A(e)},m(i,o){B(i,t,o)},p(i,o){var r;o&2&&e!==(e=((r=i[1])==null?void 0:r.currentMessage.toUpperCase())+"")&&j(t,e)},d(i){i&&q(t)}}}function jt(s){let e,t,n,i,o,r,c,d,u,a,f,h,v,y;return{c(){e=m("div"),t=m("button"),n=A("FIGHT"),i=I(),o=m("button"),r=A("BAG"),c=I(),d=m("button"),u=A("POKEMONS"),a=I(),f=m("button"),h=A("RUN"),b(t,"class","action-btn svelte-1xq73kd"),K(t,"--color","#dc5959"),t.disabled=s[5],P(t,"selected",s[4]===0),b(o,"class","action-btn svelte-1xq73kd"),K(o,"--color","#eca859"),o.disabled=s[5],P(o,"selected",s[4]===1),b(d,"class","action-btn svelte-1xq73kd"),K(d,"--color","#7EAF53"),d.disabled=s[5],P(d,"selected",s[4]===2),b(f,"class","action-btn svelte-1xq73kd"),K(f,"--color","#599bdc"),f.disabled=s[5],P(f,"selected",s[4]===2),b(e,"class","actions svelte-1xq73kd")},m($,C){B($,e,C),p(e,t),p(t,n),p(e,i),p(e,o),p(o,r),p(e,c),p(e,d),p(d,u),p(e,a),p(e,f),p(f,h),v||(y=[fe(t,"click",s[6]),fe(f,"click",s[7])],v=!0)},p($,C){C&32&&(t.disabled=$[5]),C&16&&P(t,"selected",$[4]===0),C&32&&(o.disabled=$[5]),C&16&&P(o,"selected",$[4]===1),C&32&&(d.disabled=$[5]),C&16&&P(d,"selected",$[4]===2),C&32&&(f.disabled=$[5]),C&16&&P(f,"selected",$[4]===2)},d($){$&&q(e),v=!1,ne(y)}}}function Ft(s){let e,t=Ne(s[1].playerCurrentMonster.moves),n=[];for(let i=0;i<t.length;i+=1)n[i]=Ve(Ze(s,t,i));return{c(){e=m("div");for(let i=0;i<n.length;i+=1)n[i].c();b(e,"class","moves svelte-1xq73kd")},m(i,o){B(i,e,o);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(i,o){if(o&298){t=Ne(i[1].playerCurrentMonster.moves);let r;for(r=0;r<t.length;r+=1){const c=Ze(i,t,r);n[r]?n[r].p(c,o):(n[r]=Ve(c),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(i){i&&q(e),bt(n,i)}}}function Ve(s){let e,t=s[11].name.toUpperCase()+"",n,i,o,r;function c(){return s[9](s[13])}function d(){return s[10](s[11])}return{c(){e=m("button"),n=A(t),i=I(),b(e,"class","action-btn svelte-1xq73kd"),K(e,"--color","#dc5959"),e.disabled=s[5],P(e,"selected",s[3]===s[13])},m(u,a){B(u,e,a),p(e,n),p(e,i),o||(r=[fe(e,"mouseover",c),fe(e,"click",d)],o=!0)},p(u,a){s=u,a&2&&t!==(t=s[11].name.toUpperCase()+"")&&j(n,t),a&32&&(e.disabled=s[5]),a&8&&P(e,"selected",s[3]===s[13])},d(u){u&&q(e),o=!1,ne(r)}}}function zt(s){let e,t,n,i;function o(f,h){return f[2]?Dt:Nt}let r=o(s),c=r(s);function d(f,h){return f[2]?Ft:jt}let u=d(s),a=u(s);return{c(){e=m("div"),t=m("div"),n=m("div"),c.c(),i=I(),a.c(),b(n,"class","_inner svelte-1xq73kd"),b(t,"class","info svelte-1xq73kd"),b(e,"class","action-bar svelte-1xq73kd"),P(e,"opened",s[0])},m(f,h){B(f,e,h),p(e,t),p(t,n),c.m(n,null),p(e,i),a.m(e,null)},p(f,[h]){r===(r=o(f))&&c?c.p(f,h):(c.d(1),c=r(f),c&&(c.c(),c.m(n,null))),u===(u=d(f))&&a?a.p(f,h):(a.d(1),a=u(f),a&&(a.c(),a.m(e,null))),h&1&&P(e,"opened",f[0])},i:U,o:U,d(f){f&&q(e),c.d(),a.d()}}}function Rt(s,e,t){let n,{opened:i}=e,{battleState:o}=e,r=!1,c=0,d=0;function u(){t(2,r=!r)}function a(){console.log(o),o.selectAction(new qe(o.playerCurrentMonster))}function f(y){o.selectAction(new Me(y,"opponent",o.playerCurrentMonster)),t(2,r=!1)}window.addEventListener("keydown",y=>{y.key==="ArrowUp"?r?t(3,c=c===0?o.playerCurrentMonster.moves.length-1:c-1):t(4,d=d===0?3:d-1):y.key==="ArrowDown"?r?t(3,c=c===o.playerCurrentMonster.moves.length-1?0:c+1):t(4,d=d===3?0:d+1):y.key==="Enter"&&(r?f(o.playerCurrentMonster.moves[c]):d===0?u():d===3&&a()),console.log(d,c)});const h=y=>t(3,c=y),v=y=>f(y);return s.$$set=y=>{"opened"in y&&t(0,i=y.opened),"battleState"in y&&t(1,o=y.battleState)},s.$$.update=()=>{s.$$.dirty&2&&t(5,n=o&&!o.isPlayerTurn||!1)},[i,o,r,c,d,n,u,a,f,h,v]}class it extends ae{constructor(e){super(),re(this,e,Rt,zt,ie,{opened:0,battleState:1},Tt)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),L()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),L()}}oe(it,{opened:{},battleState:{}},[],[],!0);function Ut(s){pe(s,"svelte-1w4nukc",".enemy-info.svelte-1w4nukc.svelte-1w4nukc{opacity:0;visibility:hidden;background-color:antiquewhite;height:12dvh;width:30dvw;position:absolute;top:2dvh;left:-30dvw;transition:left 0.5s ease-in-out;border:14px solid #595b59;border-radius:24px;padding:16px;display:flex;flex-direction:column;gap:10%;justify-content:space-evenly}.enemy-info.opened.svelte-1w4nukc.svelte-1w4nukc{opacity:1;visibility:visible;left:1dvw}.enemy-info.svelte-1w4nukc .name-lvl.svelte-1w4nukc{display:flex;justify-content:space-between;align-items:center;font-size:46px}.enemy-info.svelte-1w4nukc .status.svelte-1w4nukc{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.enemy-info.svelte-1w4nukc .hp.svelte-1w4nukc{width:60%;display:flex;gap:16px;background-color:#262626;color:orange;align-items:center;justify-content:space-evenly;border-radius:8px;padding:3px}.enemy-info.svelte-1w4nukc .hp span.svelte-1w4nukc{padding:0 0 0 12px;font-weight:bold}.enemy-info.svelte-1w4nukc .hp .progressbar-wrapper.svelte-1w4nukc{height:24px;width:100%;background-color:#595b59;border-radius:4px;border:2px solid white}.enemy-info.svelte-1w4nukc .hp .progressbar-wrapper .progressbar.svelte-1w4nukc{width:var(--width);height:100%;background:rgb(184, 244, 166);background:linear-gradient(0deg, rgb(184, 244, 166) 0%, rgb(86, 170, 58) 30%, rgb(86, 170, 58) 50%, rgb(86, 170, 58) 70%, rgb(184, 244, 166) 100%);text-align:center;border-radius:2px;transition:width 1s ease-in-out, background 1s ease-in-out 1s}.enemy-info.svelte-1w4nukc .hp .progressbar-wrapper .progressbar.warning.svelte-1w4nukc{background:rgb(255, 241, 164);background:linear-gradient(0deg, rgb(255, 241, 164) 0%, rgb(255, 194, 16) 30%, rgb(255, 194, 16) 50%, rgb(255, 194, 16) 70%, rgb(255, 241, 164) 100%)}.enemy-info.svelte-1w4nukc .hp .progressbar-wrapper .progressbar.danger.svelte-1w4nukc{background:rgb(244, 177, 159);background:linear-gradient(0deg, rgb(244, 177, 159) 0%, rgb(223, 85, 48) 30%, rgb(223, 85, 48) 50%, rgb(223, 85, 48) 70%, rgb(244, 177, 159) 100%)}")}function Zt(s){let e,t,n,i=s[1].name+"",o,r,c,d,u=s[1].level+"",a,f,h,v,y,$,C,M,w,k=s[1].currentHp+"",T,O,g=s[1].currentStats.HP+"",x;return{c(){e=m("div"),t=m("div"),n=m("span"),o=A(i),r=I(),c=m("span"),d=A("Lv "),a=A(u),f=I(),h=m("div"),v=m("div"),y=m("span"),y.textContent="HP",$=I(),C=m("div"),M=m("div"),w=I(),T=A(k),O=A(" / "),x=A(g),b(n,"class","svelte-1w4nukc"),b(c,"class","svelte-1w4nukc"),b(t,"class","name-lvl svelte-1w4nukc"),b(y,"class","svelte-1w4nukc"),b(M,"class","progressbar svelte-1w4nukc"),K(M,"--width",s[2]+"%"),P(M,"warning",s[2]<=50),P(M,"danger",s[2]<15),b(C,"class","progressbar-wrapper svelte-1w4nukc"),b(v,"class","hp svelte-1w4nukc"),b(h,"class","status svelte-1w4nukc"),b(e,"class","enemy-info svelte-1w4nukc"),P(e,"opened",s[0])},m(_,E){B(_,e,E),p(e,t),p(t,n),p(n,o),p(t,r),p(t,c),p(c,d),p(c,a),p(e,f),p(e,h),p(h,v),p(v,y),p(v,$),p(v,C),p(C,M),p(h,w),p(h,T),p(h,O),p(h,x)},p(_,[E]){E&2&&i!==(i=_[1].name+"")&&j(o,i),E&2&&u!==(u=_[1].level+"")&&j(a,u),E&4&&K(M,"--width",_[2]+"%"),E&4&&P(M,"warning",_[2]<=50),E&4&&P(M,"danger",_[2]<15),E&2&&k!==(k=_[1].currentHp+"")&&j(T,k),E&2&&g!==(g=_[1].currentStats.HP+"")&&j(x,g),E&1&&P(e,"opened",_[0])},i:U,o:U,d(_){_&&q(e)}}}function Vt(s,e,t){let n,{opened:i}=e,{monster:o}=e;return s.$$set=r=>{"opened"in r&&t(0,i=r.opened),"monster"in r&&t(1,o=r.monster)},s.$$.update=()=>{s.$$.dirty&2&&t(2,n=Math.floor(o.currentHp*100/o.currentStats.HP))},[i,o,n]}class rt extends ae{constructor(e){super(),re(this,e,Vt,Zt,ie,{opened:0,monster:1},Ut)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),L()}get monster(){return this.$$.ctx[1]}set monster(e){this.$$set({monster:e}),L()}}oe(rt,{opened:{},monster:{}},[],[],!0);function Xt(s){pe(s,"svelte-hx8zpy",".battleStart.svelte-hx8zpy{opacity:0;visibility:hidden;background:#000000;height:100dvh;width:100dvw;position:absolute;top:0;left:0;transition:opacity 0.5s ease-in-out;z-index:2}.battleStart.animate.svelte-hx8zpy{visibility:visible;animation:svelte-hx8zpy-animate 2s ease-in-out}.battleStart.hide.svelte-hx8zpy{visibility:hidden;opacity:0}@keyframes svelte-hx8zpy-animate{0%{opacity:1}20%{opacity:0}40%{opacity:1}60%{opacity:0}80%{opacity:1}100%{opacity:0}}")}function Xe(s){let e,t,n,i,o,r,c,d,u,a,f,h;function v(g){s[3](g)}function y(g){s[4](g)}let $={};s[0]!==void 0&&($.opened=s[0]),s[1]!==void 0&&($.battleState=s[1]),e=new it({props:$}),F.push(()=>V(e,"opened",v)),F.push(()=>V(e,"battleState",y));function C(g){s[5](g)}function M(g){s[6](g)}let w={};s[0]!==void 0&&(w.opened=s[0]),s[1].playerCurrentMonster!==void 0&&(w.monster=s[1].playerCurrentMonster),o=new nt({props:w}),F.push(()=>V(o,"opened",C)),F.push(()=>V(o,"monster",M));function k(g){s[7](g)}function T(g){s[8](g)}let O={};return s[0]!==void 0&&(O.opened=s[0]),s[1].opponentCurrentMonster!==void 0&&(O.monster=s[1].opponentCurrentMonster),u=new rt({props:O}),F.push(()=>V(u,"opened",k)),F.push(()=>V(u,"monster",T)),{c(){de(e.$$.fragment),i=I(),de(o.$$.fragment),d=I(),de(u.$$.fragment)},m(g,x){te(e,g,x),B(g,i,x),te(o,g,x),B(g,d,x),te(u,g,x),h=!0},p(g,x){const _={};!t&&x&1&&(t=!0,_.opened=g[0],Z(()=>t=!1)),!n&&x&2&&(n=!0,_.battleState=g[1],Z(()=>n=!1)),e.$set(_);const E={};!r&&x&1&&(r=!0,E.opened=g[0],Z(()=>r=!1)),!c&&x&2&&(c=!0,E.monster=g[1].playerCurrentMonster,Z(()=>c=!1)),o.$set(E);const W={};!a&&x&1&&(a=!0,W.opened=g[0],Z(()=>a=!1)),!f&&x&2&&(f=!0,W.monster=g[1].opponentCurrentMonster,Z(()=>f=!1)),u.$set(W)},i(g){h||(R(e.$$.fragment,g),R(o.$$.fragment,g),R(u.$$.fragment,g),h=!0)},o(g){X(e.$$.fragment,g),X(o.$$.fragment,g),X(u.$$.fragment,g),h=!1},d(g){g&&(q(i),q(d)),se(e,g),se(o,g),se(u,g)}}}function Gt(s){let e,t,n,i=s[1]&&Xe(s);return{c(){i&&i.c(),e=I(),t=m("div"),t.innerHTML="",b(t,"class","battleStart svelte-hx8zpy"),P(t,"hide",s[0]),P(t,"animate",s[2])},m(o,r){i&&i.m(o,r),B(o,e,r),B(o,t,r),n=!0},p(o,[r]){o[1]?i?(i.p(o,r),r&2&&R(i,1)):(i=Xe(o),i.c(),R(i,1),i.m(e.parentNode,e)):i&&(Le(),X(i,1,1,()=>{i=null}),Be()),(!n||r&1)&&P(t,"hide",o[0]),(!n||r&4)&&P(t,"animate",o[2])},i(o){n||(R(i),n=!0)},o(o){X(i),n=!1},d(o){o&&(q(e),q(t)),i&&i.d(o)}}}function Jt(s,e,t){let{opened:n}=e,{battleStart:i}=e,{battleState:o}=e;function r(h){n=h,t(0,n)}function c(h){o=h,t(1,o)}function d(h){n=h,t(0,n)}function u(h){s.$$.not_equal(o.playerCurrentMonster,h)&&(o.playerCurrentMonster=h,t(1,o))}function a(h){n=h,t(0,n)}function f(h){s.$$.not_equal(o.opponentCurrentMonster,h)&&(o.opponentCurrentMonster=h,t(1,o))}return s.$$set=h=>{"opened"in h&&t(0,n=h.opened),"battleStart"in h&&t(2,i=h.battleStart),"battleState"in h&&t(1,o=h.battleState)},[n,o,i,r,c,d,u,a,f]}class ot extends ae{constructor(e){super(),re(this,e,Jt,Gt,ie,{opened:0,battleStart:2,battleState:1},Xt)}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),L()}get battleStart(){return this.$$.ctx[2]}set battleStart(e){this.$$set({battleStart:e}),L()}get battleState(){return this.$$.ctx[1]}set battleState(e){this.$$set({battleState:e}),L()}}oe(ot,{opened:{},battleStart:{},battleState:{}},[],[],!0);function Kt(s){pe(s,"svelte-1cbbcxy",'.menu.svelte-1cbbcxy.svelte-1cbbcxy{position:absolute;top:0;right:-20dvw;width:20dvw;font-size:36px;background-color:#FFFFFF;z-index:3;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:right 0.3s ease-in-out;border:3px solid #1e1e1e;border-radius:16px}.menu.svelte-1cbbcxy ul.svelte-1cbbcxy{box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;border-radius:12px;list-style:none;padding:12px 32px;margin:0;display:flex;flex-direction:column;height:100%;width:100%;align-items:center}.menu.svelte-1cbbcxy ul li.svelte-1cbbcxy{font-size:4rem;margin:1rem 0;text-align:center;cursor:pointer;flex-grow:1;width:100%;height:100%;min-height:60px;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li:hover .svelte-1cbbcxy:before{content:"";width:0;height:0;border-top:20px solid transparent;border-bottom:20px solid transparent;border-left:20px solid #262626;position:absolute;left:40px}.menu.svelte-1cbbcxy ul li button.svelte-1cbbcxy{background:none;border:none;font-size:inherit;font-family:inherit;cursor:inherit;outline:none;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.menu.svelte-1cbbcxy ul li button .svelte-1cbbcxy:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%}.menu.open.svelte-1cbbcxy.svelte-1cbbcxy{opacity:1;pointer-events:all;right:0}')}function Wt(s){let e;return{c(){e=m("div"),e.innerHTML='<ul class="svelte-1cbbcxy"><li class="svelte-1cbbcxy"><button tabindex="0" class="svelte-1cbbcxy">Pokedex</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Pokemon</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Bag</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Trainer</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Save</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Options</button></li> <li class="svelte-1cbbcxy"><button class="svelte-1cbbcxy">Credits</button></li></ul>',b(e,"class","menu svelte-1cbbcxy"),P(e,"open",s[0])},m(t,n){B(t,e,n)},p(t,[n]){n&1&&P(e,"open",t[0])},i:U,o:U,d(t){t&&q(e)}}}function Yt(s,e,t){let{menuOpened:n}=e,{player:i}=e;return s.$$set=o=>{"menuOpened"in o&&t(0,n=o.menuOpened),"player"in o&&t(1,i=o.player)},[n,i]}class at extends ae{constructor(e){super(),re(this,e,Yt,Wt,ie,{menuOpened:0,player:1},Kt)}get menuOpened(){return this.$$.ctx[0]}set menuOpened(e){this.$$set({menuOpened:e}),L()}get player(){return this.$$.ctx[1]}set player(e){this.$$set({player:e}),L()}}oe(at,{menuOpened:{},player:{}},[],[],!0);class Ge{constructor(e,t=16*3,n=16*3){l(this,"position");l(this,"width");l(this,"height");this.position=e,this.width=t,this.height=n}debug(e,t,n="red"){e.fillStyle=n,e.fillRect((this.position.x+t.x)*this.width,(this.position.y+t.y)*this.height,this.width,this.height)}}const Qt=8,es=806;class ts{constructor(e,t,n,i,o,r,c){l(this,"background");l(this,"foreground");l(this,"width");l(this,"height");l(this,"collisions");l(this,"battleZones");l(this,"monsters");l(this,"playerInitialPosition",new N(11,11));l(this,"playerPosition",new N(11,11));this.background=e,this.foreground=t,this.width=n,this.height=i,this.collisions=this.initBoundaries(o),console.log(this.collisions),this.battleZones=this.initBattlesZones(r),this.monsters=c}randomMonster(){const e=this.monsters[Math.floor(Math.random()*this.monsters.length)],n=(localStorage.getItem("pokedex")&&JSON.parse(localStorage.getItem("pokedex")||"[]")||[]).find(i=>i.id===e);return Object.setPrototypeOf(n,he.prototype),n}initBattlesZones(e){const t=[];for(let i=0;i<e.length;i+=this.width)t.push(e.slice(i,this.width+i));const n=[];return t.forEach((i,o)=>{i.forEach((r,c)=>{if(r===Qt){const d=new Ge(new N(c,o));n.push(d)}})}),n}initBoundaries(e){const t=[];for(let i=0;i<e.length;i+=this.width)t.push(e.slice(i,this.width+i));const n=[];return t.forEach((i,o)=>{i.forEach((r,c)=>{if(r===es){const d=new Ge(new N(c,o));n.push(d)}})}),n}drawBackground(e,t){e.drawImage(this.background,t.x*16,t.y*16,this.background.width,this.background.height,0,0,this.background.width*3,this.background.height*3)}drawForeground(e,t){this.foreground!==null&&e.drawImage(this.foreground,t.x*16,t.y*16,this.foreground.width,this.foreground.height,0,0,this.foreground.width*3,this.foreground.height*3)}drawBoundaries(e,t){this.collisions.forEach(n=>{n.debug(e,t)})}drawBattleZones(e,t){this.battleZones.forEach(n=>{n.debug(e,t,"blue")})}hasBattleZoneAt(e){return this.battleZones.some(t=>t.position.x===e.x&&t.position.y===e.y)}hasBoundaryAt(e){return this.collisions.some(t=>t.position.x===e.x&&t.position.y===e.y)||e.x<0||e.y<0||e.x>this.width-1||e.y>this.height-1}updatePlayerPosition(e){this.playerPosition.x=this.playerInitialPosition.x+e.x,this.playerPosition.y=this.playerInitialPosition.y+e.y}}const lt=new Image;lt.src="src/assets/maps/test-map.png";const ct=new Image;ct.src="src/assets/maps/test-map-foreground.png";const ss=[95],ns=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,0,806,806,0,0,806,806,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,806,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,35,0,806,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,806,806,806,0,0,806,806,806,806,806,806,806,806,806,806,0,0,0,0,0,0,0,0,0,806,0,0,0,0,0,0,0,0,0,806,806,806,806,806,806,806,806,806,806,834,0,0,0,0,0,0,0,0,0],is=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ae=new ts(lt,ct,20,20,ns,is,ss);function Je(s){let e,t,n,i,o;function r(a){s[7](a)}function c(a){s[8](a)}function d(a){s[9](a)}let u={};return s[0]!==void 0&&(u.opened=s[0]),s[4].battleState!==void 0&&(u.battleState=s[4].battleState),s[2]!==void 0&&(u.battleStart=s[2]),e=new ot({props:u}),F.push(()=>V(e,"opened",r)),F.push(()=>V(e,"battleState",c)),F.push(()=>V(e,"battleStart",d)),{c(){de(e.$$.fragment)},m(a,f){te(e,a,f),o=!0},p(a,f){const h={};!t&&f&1&&(t=!0,h.opened=a[0],Z(()=>t=!1)),!n&&f&16&&(n=!0,h.battleState=a[4].battleState,Z(()=>n=!1)),!i&&f&4&&(i=!0,h.battleStart=a[2],Z(()=>i=!1)),e.$set(h)},i(a){o||(R(e.$$.fragment,a),o=!0)},o(a){X(e.$$.fragment,a),o=!1},d(a){se(e,a)}}}function rs(s){let e,t,n,i,o,r=s[4].initiated&&Je(s);function c(a){s[10](a)}function d(a){s[11](a)}let u={};return s[1]!==void 0&&(u.menuOpened=s[1]),s[3]!==void 0&&(u.player=s[3]),t=new at({props:u}),F.push(()=>V(t,"menuOpened",c)),F.push(()=>V(t,"player",d)),{c(){r&&r.c(),e=I(),de(t.$$.fragment)},m(a,f){r&&r.m(a,f),B(a,e,f),te(t,a,f),o=!0},p(a,[f]){a[4].initiated?r?(r.p(a,f),f&16&&R(r,1)):(r=Je(a),r.c(),R(r,1),r.m(e.parentNode,e)):r&&(Le(),X(r,1,1,()=>{r=null}),Be());const h={};!n&&f&2&&(n=!0,h.menuOpened=a[1],Z(()=>n=!1)),!i&&f&8&&(i=!0,h.player=a[3],Z(()=>i=!1)),t.$set(h)},i(a){o||(R(r),R(t.$$.fragment,a),o=!0)},o(a){X(r),X(t.$$.fragment,a),o=!1},d(a){a&&q(e),r&&r.d(a),se(t,a)}}}function os(s,e,t){let{opened:n=!1}=e,{menuOpened:i=!1}=e,{battleStart:o=!1}=e,{currentMap:r=Ae}=e,{canvas:c}=e;const d=c.getContext("2d");c.width=window.innerWidth,c.height=window.innerHeight;let{character:u}=e;u.position=new N(Ae.playerPosition.x*48,Ae.playerPosition.y*48);let{battle:a={initiated:!1,frameElapsed:0}}=e,f=0,h=new N(0,0),v=new N(0,0),y={fps:12,then:Date.now(),fpsInterval:1e3/12,id:0},$={fps:12,then:Date.now(),fpsInterval:1e3/12,goDown:!0,id:0};const C=new N(0,0);function M(){y.id=window.requestAnimationFrame(M);let S=Date.now(),H=S-y.then;if(H>y.fpsInterval){y.then=S-H%y.fpsInterval,d.fillStyle="black",d.fillRect(0,0,c.width,c.height),r.drawBackground(d,C),u.draw(d);let D=!0;if(t(3,u.moving=!1,u),a.initiated)return;if(!i){if((z.down.pressed||z.up.pressed||z.left.pressed||z.right.pressed)&&r.hasBattleZoneAt(r.playerPosition)&&Math.random()<.1){let Q=r.randomMonster();window.cancelAnimationFrame(y.id),k(Q)}z.down.pressed&&Y==="ArrowDown"&&(r.hasBoundaryAt(new N(r.playerPosition.x,r.playerPosition.y+1))&&(D=!1),t(3,u.moving=!0,u),t(3,u.direction="down",u),D&&C.y++),z.up.pressed&&Y==="ArrowUp"&&(r.hasBoundaryAt(new N(r.playerPosition.x,r.playerPosition.y-1))&&(D=!1),t(3,u.moving=!0,u),t(3,u.direction="up",u),D&&C.y--),z.left.pressed&&Y==="ArrowLeft"&&(r.hasBoundaryAt(new N(r.playerPosition.x-1,r.playerPosition.y))&&(D=!1),t(3,u.moving=!0,u),t(3,u.direction="left",u),D&&C.x--),z.right.pressed&&Y==="ArrowRight"&&(r.hasBoundaryAt(new N(r.playerPosition.x+1,r.playerPosition.y))&&(D=!1),t(3,u.moving=!0,u),t(3,u.direction="right",u),D&&C.x++),r.updatePlayerPosition(C)}}}function w(){var D,Q,ge,be,me,ye;$.id=window.requestAnimationFrame(w),console.log("start battle loop");let S=Date.now(),H=S-$.then;if(H>$.fpsInterval){if(!a.initiated)return;$.then=S-H%$.fpsInterval,t(4,a.frameElapsed++,a),d.fillStyle="black",d.fillRect(0,0,c.width,c.height),It.draw(d,c),(Q=(D=a.battleState)==null?void 0:D.opponentCurrentMonster)==null||Q.draw(d,"front"),(be=(ge=a.battleState)==null?void 0:ge.playerCurrentMonster)==null||be.draw(d,"back"),(ye=(me=a.battleState)==null?void 0:me.opponentCurrentMonster)!=null&&ye.position&&($.goDown=a.frameElapsed<=10,$.goDown?f++:f--,t(4,a.battleState.opponentCurrentMonster.position.y=h.y-f,a),t(4,a.battleState.playerCurrentMonster.position.y=v.y+f,a),a.frameElapsed>20&&t(4,a.frameElapsed=0,a))}}function k(S){t(4,a.frameElapsed=0,a),t(4,a.initiated=!0,a),t(4,a.startDate=new Date,a),t(4,a.battleState=new Pt(u,S,c),a),h={...a.battleState.opponentCurrentMonster.position},v={...a.battleState.playerCurrentMonster.position},g(),t(4,a.battleState.onClose=()=>{T()},a),t(2,o=!0),setTimeout(()=>{t(2,o=!1),t(0,n=!0),w()},2e3)}function T(S){window.cancelAnimationFrame($.id),t(4,a.battleState=void 0,a),t(4,a.initiated=!1,a),t(4,a.startDate=void 0,a),t(2,o=!1),t(0,n=!1),t(1,i=!1),M(),O()}function O(){window.addEventListener("keydown",Fe()),window.addEventListener("keyup",je()),window.addEventListener("keydown",x)}function g(){window.removeEventListener("keydown",Fe()),window.removeEventListener("keyup",je()),window.removeEventListener("keydown",x)}function x(S){S.key==="Escape"&&t(1,i=!i)}O(),M();function _(S){n=S,t(0,n)}function E(S){s.$$.not_equal(a.battleState,S)&&(a.battleState=S,t(4,a))}function W(S){o=S,t(2,o)}function ke(S){i=S,t(1,i)}function _e(S){u=S,t(3,u)}return s.$$set=S=>{"opened"in S&&t(0,n=S.opened),"menuOpened"in S&&t(1,i=S.menuOpened),"battleStart"in S&&t(2,o=S.battleStart),"currentMap"in S&&t(6,r=S.currentMap),"canvas"in S&&t(5,c=S.canvas),"character"in S&&t(3,u=S.character),"battle"in S&&t(4,a=S.battle)},[n,i,o,u,a,c,r,_,E,W,ke,_e]}class ut extends ae{constructor(e){super(),re(this,e,os,rs,ie,{opened:0,menuOpened:1,battleStart:2,currentMap:6,canvas:5,character:3,battle:4})}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),L()}get menuOpened(){return this.$$.ctx[1]}set menuOpened(e){this.$$set({menuOpened:e}),L()}get battleStart(){return this.$$.ctx[2]}set battleStart(e){this.$$set({battleStart:e}),L()}get currentMap(){return this.$$.ctx[6]}set currentMap(e){this.$$set({currentMap:e}),L()}get canvas(){return this.$$.ctx[5]}set canvas(e){this.$$set({canvas:e}),L()}get character(){return this.$$.ctx[3]}set character(e){this.$$set({character:e}),L()}get battle(){return this.$$.ctx[4]}set battle(e){this.$$set({battle:e}),L()}}oe(ut,{opened:{type:"Boolean"},menuOpened:{type:"Boolean"},battleStart:{type:"Boolean"},currentMap:{},canvas:{},character:{},battle:{}},[],[],!0);function as(s){pe(s,"svelte-1ryb1u7",'.loading.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100dvh}.loading.ready.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7{opacity:0.2}.u-swing.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7{animation:svelte-1ryb1u7-swing 3000ms infinite}@keyframes svelte-1ryb1u7-swing{20%{-webkit-transform:rotate(15deg);transform:rotate(15deg)}40%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg)}60%{-webkit-transform:rotate(5deg);transform:rotate(5deg)}80%{-webkit-transform:rotate(-5deg);transform:rotate(-5deg)}to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7{width:120px;height:120px;border-radius:120px;border:solid 4.8px black;position:relative;background:linear-gradient(to bottom, #EEEEEE 0%, #FFFFFF 100%);margin:10px auto}.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7:before,.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7:after{content:"";display:block}.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7,.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7:before,.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7:after{transition:all 600ms cubic-bezier(0.67, 0.4, 0.36, 0.75)}.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7:before{width:120px;height:57.6px;border-bottom:solid 4.8px black;border-radius:60px 60px 0 0;background:linear-gradient(to bottom, #d10000 0%, #ff0000 50%)}.o-pokeball.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7:after{content:"";width:24px;height:24px;background:linear-gradient(to bottom, #fff 0%, #ccc 100%);position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);border-radius:50%;box-shadow:0 0 0 2.4px black, 0 0 0 4.8px #ddd, 0 0 0 8.5714285714px black, 0 0 12px 7.0588235294px rgba(0, 0, 0, 0.4)}.buttons.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7{display:flex;justify-content:center;align-items:center;flex-direction:column;gap:120px;position:absolute;left:calc(50dvw - 100px);top:calc(50dvh - 40px)}.buttons.svelte-1ryb1u7 .letsgo.svelte-1ryb1u7.svelte-1ryb1u7{position:relative}.buttons.svelte-1ryb1u7 .letsgo .pika.svelte-1ryb1u7.svelte-1ryb1u7{width:200px;height:200px;position:absolute;bottom:0;left:0;z-index:1}.buttons.svelte-1ryb1u7 .letsgo .start-btn.svelte-1ryb1u7.svelte-1ryb1u7{width:200px;height:80px;border-radius:16px;position:relative;z-index:2;font-family:pokemon, serif;font-size:36px;box-shadow:inset #009688 0 0 0 5px, inset #059c8e 0 0 0 1px, inset #0cab9c 0 0 0 10px, inset #1fbdae 0 0 0 11px, inset #8ce9ff 0 0 0 16px, inset #48e4d6 0 0 0 17px, inset #e5f9f7 0 0 0 21px, inset #bfecf7 0 0 0 22px;text-shadow:3px 3px 1px #bfecf7;cursor:pointer}.buttons.svelte-1ryb1u7 .letsgo .start-btn.svelte-1ryb1u7.svelte-1ryb1u7:hover{color:#fff;box-shadow:inset #009688 0 0 0 5px;text-shadow:none;font-weight:bold;background:#009688}.buttons.svelte-1ryb1u7 .letsgo .start-btn.svelte-1ryb1u7:hover+.pika.svelte-1ryb1u7{animation:svelte-1ryb1u7-bounce 1s infinite}@keyframes svelte-1ryb1u7-bounce{0%,20%,53%,80%,to{-webkit-animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-transform:translate3d(0, -30px, 0);transform:translate3d(0, -30px, 0)}40%,43%,70%{-webkit-animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06);animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06)}70%{-webkit-transform:translate3d(0, -15px, 0);transform:translate3d(0, -15px, 0)}90%{-webkit-transform:translate3d(0, -4px, 0);transform:translate3d(0, -4px, 0)}}#preview.svelte-1ryb1u7.svelte-1ryb1u7.svelte-1ryb1u7{display:flex;flex-wrap:wrap;justify-content:center}')}function ls(s){let e,t,n,i,o,r,c,d,u,a,f=s[1]&&Ke(s);return{c(){e=m("div"),t=m("div"),n=I(),i=m("span"),o=A("Gotta catch em all... "),r=A(s[4]),c=I(),d=m("div"),d.innerHTML="",u=I(),f&&f.c(),a=mt(),b(t,"class","o-pokeball c-loader u-swing svelte-1ryb1u7"),b(d,"id","preview"),b(d,"class","svelte-1ryb1u7"),b(e,"class","loading svelte-1ryb1u7"),P(e,"ready",s[1])},m(h,v){B(h,e,v),p(e,t),p(e,n),p(e,i),p(i,o),p(i,r),p(e,c),p(e,d),s[9](d),B(h,u,v),f&&f.m(h,v),B(h,a,v)},p(h,v){v&16&&j(r,h[4]),v&2&&P(e,"ready",h[1]),h[1]?f?f.p(h,v):(f=Ke(h),f.c(),f.m(a.parentNode,a)):f&&(f.d(1),f=null)},i:U,o:U,d(h){h&&(q(e),q(u),q(a)),s[9](null),f&&f.d(h)}}}function cs(s){let e,t,n,i;function o(d){s[7](d)}function r(d){s[8](d)}let c={};return s[0]!==void 0&&(c.canvas=s[0]),s[2]!==void 0&&(c.character=s[2]),e=new ut({props:c}),F.push(()=>V(e,"canvas",o)),F.push(()=>V(e,"character",r)),{c(){de(e.$$.fragment)},m(d,u){te(e,d,u),i=!0},p(d,u){const a={};!t&&u&1&&(t=!0,a.canvas=d[0],Z(()=>t=!1)),!n&&u&4&&(n=!0,a.character=d[2],Z(()=>n=!1)),e.$set(a)},i(d){i||(R(e.$$.fragment,d),i=!0)},o(d){X(e.$$.fragment,d),i=!1},d(d){se(e,d)}}}function Ke(s){let e,t,n,i,o,r,c,d,u,a=s[6]&&us(s);return{c(){e=m("div"),a&&a.c(),t=I(),n=m("div"),i=m("button"),i.textContent="New game!",o=I(),r=m("img"),b(i,"class","start-btn svelte-1ryb1u7"),b(r,"class","pika svelte-1ryb1u7"),b(r,"alt","pikachu"),Qe(r.src,c="src/assets/monsters/heartgold-soulsilver/25.png")||b(r,"src",c),b(n,"class","letsgo svelte-1ryb1u7"),b(e,"class","buttons svelte-1ryb1u7")},m(f,h){B(f,e,h),a&&a.m(e,null),p(e,t),p(e,n),p(n,i),p(n,o),p(n,r),d||(u=fe(i,"click",s[11]),d=!0)},p(f,h){f[6]&&a.p(f,h)},d(f){f&&q(e),a&&a.d(),d=!1,u()}}}function us(s){let e,t,n,i,o,r,c;return{c(){e=m("div"),t=m("button"),t.textContent="Continue!",n=I(),i=m("img"),b(t,"class","start-btn svelte-1ryb1u7"),b(i,"class","pika svelte-1ryb1u7"),b(i,"alt","Evoli"),Qe(i.src,o="src/assets/monsters/heartgold-soulsilver/133.png")||b(i,"src",o),b(e,"class","letsgo svelte-1ryb1u7")},m(d,u){B(d,e,u),p(e,t),p(e,n),p(e,i),r||(c=fe(t,"click",s[10]),r=!0)},p:U,d(d){d&&q(e),r=!1,c()}}}function ds(s){let e,t,n,i,o;const r=[cs,ls],c=[];function d(u,a){return u[1]&&u[3]?0:1}return e=d(s),t=c[e]=r[e](s),{c(){t.c(),n=I(),i=m("canvas")},m(u,a){c[e].m(u,a),B(u,n,a),B(u,i,a),s[12](i),o=!0},p(u,[a]){let f=e;e=d(u),e===f?c[e].p(u,a):(Le(),X(c[f],1,1,()=>{c[f]=null}),Be(),t=c[e],t?t.p(u,a):(t=c[e]=r[e](u),t.c()),R(t,1),t.m(n.parentNode,n))},i(u){o||(R(t),o=!0)},o(u){X(t),o=!1},d(u){u&&(q(n),q(i)),c[e].d(u),s[12](null)}}}function fs(s,e,t){let{canvas:n}=e,i,{ready:o=!1}=e,r=[],c=!1,d,u,a;r.length>0&&i?(r.forEach(w=>{setTimeout(()=>{const k=new Image;k.src=`/src/assets/monsters/heartgold-soulsilver/${w.id}.png`,a.appendChild(k)},100)}),o=!0):fetch("/src/assets/data/pokedex-gen1.json").then(w=>w.json()).then(w=>{w.forEach(k=>{t(4,u=k.name.english);let T=`/src/assets/monsters/heartgold-soulsilver/${k.id}.png`,O=`/src/assets/monsters/heartgold-soulsilver/frame2/${k.id}.png`,g=`/src/assets/monsters/heartgold-soulsilver/back/${k.id}.png`,x=`/src/assets/monsters/heartgold-soulsilver/shiny/${k.id}.png`;setTimeout(()=>{const _=new he(k.id,k.name.english,k.type,k.profile.ability,new J(k.base.HP,k.base.Attack,k.base.Defense,k.base["Sp. Attack"],k.base["Sp. Defense"],k.base.Speed),k.evolution,new Ct(T,O,g,x),void 0,[new ve("Tackle","Normal","Physical",40,100,35,0,"",0,"Basic hit")],new J(10,10,10,10,10,10),new J(0,0,0,10,0,0));_.height=Number.parseFloat(k.profile.height.replace(" m",""))*100,_.spriteScale=Math.max(1.2,Math.min(_.height/100,2)),r.push(_),r.length===w.length&&(t(4,u="Ready!"),localStorage.setItem("pokedex",JSON.stringify(r)),f())},100)})});function f(){let w=new Image;w.src="/src/assets/sprites/hero_male_front.png";let k=new Image;k.src="/src/assets/sprites/hero_male_back.png";let T=new Image;T.src="/src/assets/sprites/hero_male_left.png";let O=new Image;O.src="/src/assets/sprites/hero_male_right.png";let g=new Image;g.src="/src/assets/sprites/hero_male_back.png",Promise.all(Array.from([w,k,T,O,g].filter(x=>!x.complete)).map(x=>new Promise(_=>{x.onload=x.onerror=_}))).then(()=>{let x={...r.at(70),ivs:new J(31,31,31,31,31,31),evs:new J(120,0,0,255,0,135),moves:[new ve("Tackle","Normal","Physical",40,100,35,0,"",0,"Basic hit"),new ve("Growl","Normal","Status",0,100,40,0,"",0,"Lowers the target's Attack by one stage."),new ve("Tail Whip","Normal","Status",0,100,30,0,"",0,"Lowers the target's Defense by one stage."),new ve("Vine whip","Grass","Physical",40,100,30,0,"",0,"Strong hit with vines.")]};Object.setPrototypeOf(x,he.prototype),x.updateCurrentStats(),x.currentHp=x.currentStats.HP,t(2,i=new tt("Kaiser","MALE",new Mt(w,k,T,O,g),[x])),t(1,o=!0)})}function h(w){n=w,t(0,n)}function v(w){i=w,t(2,i)}function y(w){F[w?"unshift":"push"](()=>{a=w,t(5,a)})}const $=()=>t(3,c=!0),C=()=>t(3,c=!0);function M(w){F[w?"unshift":"push"](()=>{n=w,t(0,n)})}return s.$$set=w=>{"canvas"in w&&t(0,n=w.canvas),"ready"in w&&t(1,o=w.ready)},[n,o,i,c,u,a,d,h,v,y,$,C,M]}class hs extends ae{constructor(e){super(),re(this,e,fs,ds,ie,{canvas:0,ready:1},as)}get canvas(){return this.$$.ctx[0]}set canvas(e){this.$$set({canvas:e}),L()}get ready(){return this.$$.ctx[1]}set ready(e){this.$$set({ready:e}),L()}}customElements.define("open-mon",oe(hs,{canvas:{},ready:{type:"Boolean"}},[],[],!0));
