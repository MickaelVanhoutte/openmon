import{p as ke,h as S,A as N,o as pe,s as v,a as d,m as F,i as s,x as me,c,f as _e,j as a,t as f,e as C,l as k,r,y as w,d as he,k as O,q as V,b as W}from"./threlte-Cn4q_HKN.js";import{a as ue}from"./vendor-CHMVvq2h.js";import{x as fe,y as ge,z as be,E as xe}from"./main-GddE12ue.js";import{a as ye}from"./move-hydration-COQCvxD5.js";import"./threejs-D-3vx0wo.js";/* empty css            */const Pe=""+new URL("pokedex-Ddxh4eqP.json",import.meta.url).href;var Se=k('<div class="status-message svelte-3kiklc" data-testid="status-message"> </div>'),Ae=k('<div class="loading svelte-3kiklc">Loading...</div>'),Le=k("<span> </span>"),Ce=k('<div class="pokemon-card svelte-3kiklc" data-testid="available-pokemon"><div class="pokemon-info svelte-3kiklc"><span class="pokemon-id svelte-3kiklc"> </span> <span class="pokemon-name svelte-3kiklc"> </span> <span class="pokemon-types svelte-3kiklc"></span></div> <button class="add-btn svelte-3kiklc" data-testid="add-pokemon-btn">Add</button></div>'),we=k('<div class="more-hint svelte-3kiklc"> </div>'),Ie=k("<span> </span>"),Me=k('<div class="pokemon-card in-pokedex svelte-3kiklc" data-testid="added-pokemon"><div class="pokemon-info svelte-3kiklc"><span class="pokemon-id svelte-3kiklc"> </span> <span class="pokemon-name svelte-3kiklc"> </span> <span class="pokemon-types svelte-3kiklc"></span></div> <button class="remove-btn svelte-3kiklc" data-testid="remove-pokemon-btn">Remove</button></div>'),je=k('<div class="pokemon-sections svelte-3kiklc"><section class="section available svelte-3kiklc"><h3 class="svelte-3kiklc"> </h3> <div class="pokemon-grid svelte-3kiklc"><!> <!></div></section> <section class="section added svelte-3kiklc"><h3 class="svelte-3kiklc"> </h3> <div class="pokemon-grid svelte-3kiklc"></div></section></div>'),Re=k('<div class="add-pokemon svelte-3kiklc" data-testid="add-pokemon-tab"><div class="search-bar svelte-3kiklc"><input type="text" placeholder="Search Pokemon..." data-testid="pokemon-search" class="svelte-3kiklc"/></div> <!> <!></div>');function Te(X,I){ke(I,!0);let g,M=S(N([])),p=S(N(new Set)),A=S(""),b=S(""),T=S(!0);const U=w(()=>()=>{if(!s(A))return s(M);const e=s(A).toLowerCase();return s(M).filter(o=>o.name.english.toLowerCase().includes(e)||o.id.toString().includes(e))}),L=w(()=>()=>s(U)().filter(e=>!s(p).has(e.id))),B=w(()=>()=>s(U)().filter(e=>s(p).has(e.id)));pe(async()=>{g=ue.resolve(fe);const[,e]=await Promise.all([g.ensureLoaded(),fetch(Pe).then(o=>o.json())]);v(p,new Set(g.entries.map(o=>o.id)),!0),v(M,e.slice(0,898),!0),v(T,!1)});async function Y(e){const l=(await ye(e.id)).map(t=>new ge(t.id,t.name,t.type,t.category,t.power,t.accuracy,t.pp,t.priority,t.target,t.effect,t.effectChance,t.description,t.level,t.method)),m=new be(e.id,s(p).size+1,e.name.english,e.type.map(t=>t.toLowerCase()),e.profile?.ability?.map(t=>t[0])||[],l,new xe(e.base.HP,e.base.Attack,e.base.Defense,e.base["Sp. Attack"],e.base["Sp. Defense"],e.base.Speed),parseFloat(e.profile?.height||"0"),parseFloat(e.profile?.weight||"0"),e.description||"",!1,45,4,64,50,[],{front:"",back:""});v(p,new Set([...s(p),e.id]),!0),g.entries.push(m),v(b,`Added ${e.name.english} with ${l.length} moves!`),I.onPokemonAdded?.(m),setTimeout(()=>{v(b,"")},3e3)}function Z(e){const o=g.entries.findIndex(l=>l.id===e.id);if(o!==-1){const l=g.entries.splice(o,1)[0],m=new Set(s(p));m.delete(e.id),v(p,m,!0),v(b,`Removed ${e.name.english}`),I.onPokemonRemoved?.(l),setTimeout(()=>{v(b,"")},3e3)}}var H=Re(),Q=a(H),ee=a(Q),G=d(Q,2);{var se=e=>{var o=Se(),l=a(o);f(()=>r(l,s(b))),c(e,o)};F(G,e=>{s(b)&&e(se)})}var te=d(G,2);{var ae=e=>{var o=Ae();c(e,o)},oe=e=>{var o=je(),l=a(o),m=a(l),t=a(m),ie=d(m,2),J=a(ie);C(J,17,()=>s(L)().slice(0,50),n=>n.id,(n,i)=>{var _=Ce(),h=a(_),x=a(h),j=a(x),y=d(x,2),R=a(y),$=d(y,2);C($,21,()=>s(i).type,O,(D,P)=>{var u=Le(),E=a(u);f(z=>{V(u,1,`type-badge ${z??""}`,"svelte-3kiklc"),r(E,s(P))},[()=>s(P).toLowerCase()]),c(D,u)});var q=d(h,2);f(()=>{r(j,`#${s(i).id??""}`),r(R,s(i).name.english)}),W("click",q,()=>Y(s(i))),c(n,_)});var ne=d(J,2);{var de=n=>{var i=we(),_=a(i);f(h=>r(_,`...and ${h??""} more (use search)`),[()=>s(L)().length-50]),c(n,i)},le=w(()=>s(L)().length>50);F(ne,n=>{s(le)&&n(de)})}var ve=d(l,2),K=a(ve),re=a(K),ce=d(K,2);C(ce,21,()=>s(B)(),n=>n.id,(n,i)=>{var _=Me(),h=a(_),x=a(h),j=a(x),y=d(x,2),R=a(y),$=d(y,2);C($,21,()=>s(i).type,O,(D,P)=>{var u=Ie(),E=a(u);f(z=>{V(u,1,`type-badge ${z??""}`,"svelte-3kiklc"),r(E,s(P))},[()=>s(P).toLowerCase()]),c(D,u)});var q=d(h,2);f(()=>{r(j,`#${s(i).id??""}`),r(R,s(i).name.english)}),W("click",q,()=>Z(s(i))),c(n,_)}),f((n,i)=>{r(t,`Available to Add (${n??""})`),r(re,`In Custom Pokedex (${i??""})`)},[()=>s(L)().length,()=>s(B)().length]),c(e,o)};F(te,e=>{s(T)?e(ae):e(oe,!1)})}me(ee,()=>s(A),e=>v(A,e)),c(X,H),_e()}he(["click"]);export{Te as default};
